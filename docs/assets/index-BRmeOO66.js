(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function ab(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ld={exports:{}},mo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function lb(){if(ev)return mo;ev=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:a,key:f,ref:o!==void 0?o:null,props:c}}return mo.Fragment=e,mo.jsx=i,mo.jsxs=i,mo}var nv;function ob(){return nv||(nv=1,ld.exports=lb()),ld.exports}var v=ob(),od={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function ub(){if(iv)return qt;iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.iterator;function A(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,G={};function B(k,st,yt){this.props=k,this.context=st,this.refs=G,this.updater=yt||I}B.prototype.isReactComponent={},B.prototype.setState=function(k,st){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,st,"setState")},B.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function H(){}H.prototype=B.prototype;function X(k,st,yt){this.props=k,this.context=st,this.refs=G,this.updater=yt||I}var P=X.prototype=new H;P.constructor=X,N(P,B.prototype),P.isPureReactComponent=!0;var lt=Array.isArray,mt={H:null,A:null,T:null,S:null,V:null},bt=Object.prototype.hasOwnProperty;function V(k,st,yt,F,gt,St){return yt=St.ref,{$$typeof:r,type:k,key:st,ref:yt!==void 0?yt:null,props:St}}function R(k,st){return V(k.type,st,void 0,void 0,void 0,k.props)}function w(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function L(k){var st={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(yt){return st[yt]})}var U=/\/+/g;function j(k,st){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):st.toString(36)}function C(){}function Gt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(C,C):(k.status="pending",k.then(function(st){k.status==="pending"&&(k.status="fulfilled",k.value=st)},function(st){k.status==="pending"&&(k.status="rejected",k.reason=st)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Ot(k,st,yt,F,gt){var St=typeof k;(St==="undefined"||St==="boolean")&&(k=null);var Q=!1;if(k===null)Q=!0;else switch(St){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(k.$$typeof){case r:case e:Q=!0;break;case b:return Q=k._init,Ot(Q(k._payload),st,yt,F,gt)}}if(Q)return gt=gt(k),Q=F===""?"."+j(k,0):F,lt(gt)?(yt="",Q!=null&&(yt=Q.replace(U,"$&/")+"/"),Ot(gt,st,yt,"",function(Ct){return Ct})):gt!=null&&(w(gt)&&(gt=R(gt,yt+(gt.key==null||k&&k.key===gt.key?"":(""+gt.key).replace(U,"$&/")+"/")+Q)),st.push(gt)),1;Q=0;var ft=F===""?".":F+":";if(lt(k))for(var Et=0;Et<k.length;Et++)F=k[Et],St=ft+j(F,Et),Q+=Ot(F,st,yt,St,gt);else if(Et=A(k),typeof Et=="function")for(k=Et.call(k),Et=0;!(F=k.next()).done;)F=F.value,St=ft+j(F,Et++),Q+=Ot(F,st,yt,St,gt);else if(St==="object"){if(typeof k.then=="function")return Ot(Gt(k),st,yt,F,gt);throw st=String(k),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return Q}function K(k,st,yt){if(k==null)return k;var F=[],gt=0;return Ot(k,F,"","",function(St){return st.call(yt,St,gt++)}),F}function pt(k){if(k._status===-1){var st=k._result;st=st(),st.then(function(yt){(k._status===0||k._status===-1)&&(k._status=1,k._result=yt)},function(yt){(k._status===0||k._status===-1)&&(k._status=2,k._result=yt)}),k._status===-1&&(k._status=0,k._result=st)}if(k._status===1)return k._result.default;throw k._result}var wt=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Bt(){}return qt.Children={map:K,forEach:function(k,st,yt){K(k,function(){st.apply(this,arguments)},yt)},count:function(k){var st=0;return K(k,function(){st++}),st},toArray:function(k){return K(k,function(st){return st})||[]},only:function(k){if(!w(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},qt.Component=B,qt.Fragment=i,qt.Profiler=o,qt.PureComponent=X,qt.StrictMode=a,qt.Suspense=g,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mt,qt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return mt.H.useMemoCache(k)}},qt.cache=function(k){return function(){return k.apply(null,arguments)}},qt.cloneElement=function(k,st,yt){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var F=N({},k.props),gt=k.key,St=void 0;if(st!=null)for(Q in st.ref!==void 0&&(St=void 0),st.key!==void 0&&(gt=""+st.key),st)!bt.call(st,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&st.ref===void 0||(F[Q]=st[Q]);var Q=arguments.length-2;if(Q===1)F.children=yt;else if(1<Q){for(var ft=Array(Q),Et=0;Et<Q;Et++)ft[Et]=arguments[Et+2];F.children=ft}return V(k.type,gt,void 0,void 0,St,F)},qt.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},qt.createElement=function(k,st,yt){var F,gt={},St=null;if(st!=null)for(F in st.key!==void 0&&(St=""+st.key),st)bt.call(st,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(gt[F]=st[F]);var Q=arguments.length-2;if(Q===1)gt.children=yt;else if(1<Q){for(var ft=Array(Q),Et=0;Et<Q;Et++)ft[Et]=arguments[Et+2];gt.children=ft}if(k&&k.defaultProps)for(F in Q=k.defaultProps,Q)gt[F]===void 0&&(gt[F]=Q[F]);return V(k,St,void 0,void 0,null,gt)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(k){return{$$typeof:m,render:k}},qt.isValidElement=w,qt.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:pt}},qt.memo=function(k,st){return{$$typeof:p,type:k,compare:st===void 0?null:st}},qt.startTransition=function(k){var st=mt.T,yt={};mt.T=yt;try{var F=k(),gt=mt.S;gt!==null&&gt(yt,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(Bt,wt)}catch(St){wt(St)}finally{mt.T=st}},qt.unstable_useCacheRefresh=function(){return mt.H.useCacheRefresh()},qt.use=function(k){return mt.H.use(k)},qt.useActionState=function(k,st,yt){return mt.H.useActionState(k,st,yt)},qt.useCallback=function(k,st){return mt.H.useCallback(k,st)},qt.useContext=function(k){return mt.H.useContext(k)},qt.useDebugValue=function(){},qt.useDeferredValue=function(k,st){return mt.H.useDeferredValue(k,st)},qt.useEffect=function(k,st,yt){var F=mt.H;if(typeof yt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(k,st)},qt.useId=function(){return mt.H.useId()},qt.useImperativeHandle=function(k,st,yt){return mt.H.useImperativeHandle(k,st,yt)},qt.useInsertionEffect=function(k,st){return mt.H.useInsertionEffect(k,st)},qt.useLayoutEffect=function(k,st){return mt.H.useLayoutEffect(k,st)},qt.useMemo=function(k,st){return mt.H.useMemo(k,st)},qt.useOptimistic=function(k,st){return mt.H.useOptimistic(k,st)},qt.useReducer=function(k,st,yt){return mt.H.useReducer(k,st,yt)},qt.useRef=function(k){return mt.H.useRef(k)},qt.useState=function(k){return mt.H.useState(k)},qt.useSyncExternalStore=function(k,st,yt){return mt.H.useSyncExternalStore(k,st,yt)},qt.useTransition=function(){return mt.H.useTransition()},qt.version="19.1.0",qt}var rv;function Kd(){return rv||(rv=1,od.exports=ub()),od.exports}var D=Kd();const cb=ab(D);var ud={exports:{}},po={},cd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function hb(){return sv||(sv=1,function(r){function e(K,pt){var wt=K.length;K.push(pt);t:for(;0<wt;){var Bt=wt-1>>>1,k=K[Bt];if(0<o(k,pt))K[Bt]=pt,K[wt]=k,wt=Bt;else break t}}function i(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var pt=K[0],wt=K.pop();if(wt!==pt){K[0]=wt;t:for(var Bt=0,k=K.length,st=k>>>1;Bt<st;){var yt=2*(Bt+1)-1,F=K[yt],gt=yt+1,St=K[gt];if(0>o(F,wt))gt<k&&0>o(St,F)?(K[Bt]=St,K[gt]=wt,Bt=gt):(K[Bt]=F,K[yt]=wt,Bt=yt);else if(gt<k&&0>o(St,wt))K[Bt]=St,K[gt]=wt,Bt=gt;else break t}}return pt}function o(K,pt){var wt=K.sortIndex-pt.sortIndex;return wt!==0?wt:K.id-pt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],p=[],b=1,S=null,A=3,I=!1,N=!1,G=!1,B=!1,H=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function lt(K){for(var pt=i(p);pt!==null;){if(pt.callback===null)a(p);else if(pt.startTime<=K)a(p),pt.sortIndex=pt.expirationTime,e(g,pt);else break;pt=i(p)}}function mt(K){if(G=!1,lt(K),!N)if(i(g)!==null)N=!0,bt||(bt=!0,j());else{var pt=i(p);pt!==null&&Ot(mt,pt.startTime-K)}}var bt=!1,V=-1,R=5,w=-1;function L(){return B?!0:!(r.unstable_now()-w<R)}function U(){if(B=!1,bt){var K=r.unstable_now();w=K;var pt=!0;try{t:{N=!1,G&&(G=!1,X(V),V=-1),I=!0;var wt=A;try{e:{for(lt(K),S=i(g);S!==null&&!(S.expirationTime>K&&L());){var Bt=S.callback;if(typeof Bt=="function"){S.callback=null,A=S.priorityLevel;var k=Bt(S.expirationTime<=K);if(K=r.unstable_now(),typeof k=="function"){S.callback=k,lt(K),pt=!0;break e}S===i(g)&&a(g),lt(K)}else a(g);S=i(g)}if(S!==null)pt=!0;else{var st=i(p);st!==null&&Ot(mt,st.startTime-K),pt=!1}}break t}finally{S=null,A=wt,I=!1}pt=void 0}}finally{pt?j():bt=!1}}}var j;if(typeof P=="function")j=function(){P(U)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Gt=C.port2;C.port1.onmessage=U,j=function(){Gt.postMessage(null)}}else j=function(){H(U,0)};function Ot(K,pt){V=H(function(){K(r.unstable_now())},pt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(K){switch(A){case 1:case 2:case 3:var pt=3;break;default:pt=A}var wt=A;A=pt;try{return K()}finally{A=wt}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(K,pt){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var wt=A;A=K;try{return pt()}finally{A=wt}},r.unstable_scheduleCallback=function(K,pt,wt){var Bt=r.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?Bt+wt:Bt):wt=Bt,K){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=wt+k,K={id:b++,callback:pt,priorityLevel:K,startTime:wt,expirationTime:k,sortIndex:-1},wt>Bt?(K.sortIndex=wt,e(p,K),i(g)===null&&K===i(p)&&(G?(X(V),V=-1):G=!0,Ot(mt,wt-Bt))):(K.sortIndex=k,e(g,K),N||I||(N=!0,bt||(bt=!0,j()))),K},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(K){var pt=A;return function(){var wt=A;A=pt;try{return K.apply(this,arguments)}finally{A=wt}}}}(hd)),hd}var av;function fb(){return av||(av=1,cd.exports=hb()),cd.exports}var fd={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function db(){if(lv)return _n;lv=1;var r=Kd();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,p,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:p,implementation:b}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,_n.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,b)},_n.flushSync=function(g){var p=f.T,b=a.p;try{if(f.T=null,a.p=2,g)return g()}finally{f.T=p,a.p=b,a.d.f()}},_n.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(g,p))},_n.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},_n.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,S=m(b,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?a.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:I}):b==="script"&&a.d.X(g,{crossOrigin:S,integrity:A,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_n.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);a.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(g)},_n.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,S=m(b,p.crossOrigin);a.d.L(g,b,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_n.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);a.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(g)},_n.requestFormReset=function(g){a.d.r(g)},_n.unstable_batchedUpdates=function(g,p){return g(p)},_n.useFormState=function(g,p,b){return f.H.useFormState(g,p,b)},_n.useFormStatus=function(){return f.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var ov;function mb(){if(ov)return fd.exports;ov=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fd.exports=db(),fd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function pb(){if(uv)return po;uv=1;var r=fb(),e=Kd(),i=mb();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(a(188))}function g(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,l=n;;){var h=s.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){s=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===s)return m(h),t;if(d===l)return m(h),n;d=d.sibling}throw Error(a(188))}if(s.return!==l.return)s=h,l=d;else{for(var E=!1,T=h.child;T;){if(T===s){E=!0,s=h,l=d;break}if(T===l){E=!0,l=h,s=d;break}T=T.sibling}if(!E){for(T=d.child;T;){if(T===s){E=!0,s=d,l=h;break}if(T===l){E=!0,l=d,s=h;break}T=T.sibling}if(!E)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function p(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=p(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),P=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Gt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case N:return"Fragment";case B:return"Profiler";case G:return"StrictMode";case mt:return"Suspense";case bt:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case I:return"Portal";case P:return(t.displayName||"Context")+".Provider";case X:return(t._context.displayName||"Context")+".Consumer";case lt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return n=t.displayName||null,n!==null?n:Gt(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return Gt(t(n))}catch{}}return null}var Ot=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wt={pending:!1,data:null,method:null,action:null},Bt=[],k=-1;function st(t){return{current:t}}function yt(t){0>k||(t.current=Bt[k],Bt[k]=null,k--)}function F(t,n){k++,Bt[k]=t.current,t.current=n}var gt=st(null),St=st(null),Q=st(null),ft=st(null);function Et(t,n){switch(F(Q,n),F(St,t),F(gt,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Dy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Dy(n),t=Iy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}yt(gt),F(gt,t)}function Ct(){yt(gt),yt(St),yt(Q)}function Ut(t){t.memoizedState!==null&&F(ft,t);var n=gt.current,s=Iy(n,t.type);n!==s&&(F(St,t),F(gt,s))}function jt(t){St.current===t&&(yt(gt),yt(St)),ft.current===t&&(yt(ft),oo._currentValue=wt)}var ie=Object.prototype.hasOwnProperty,Te=r.unstable_scheduleCallback,Ve=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ze=r.unstable_requestPaint,ce=r.unstable_now,Wn=r.unstable_getCurrentPriorityLevel,Xn=r.unstable_ImmediatePriority,gi=r.unstable_UserBlockingPriority,Ii=r.unstable_NormalPriority,ml=r.unstable_LowPriority,nr=r.unstable_IdlePriority,Ni=r.log,Es=r.unstable_setDisableYieldValue,he=null,Xt=null;function Je(t){if(typeof Ni=="function"&&Es(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(he,t)}catch{}}var tn=Math.clz32?Math.clz32:Zn,la=Math.log,oa=Math.LN2;function Zn(t){return t>>>=0,t===0?32:31-(la(t)/oa|0)|0}var ir=256,rr=4194304;function yn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function xn(t,n,s){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=yn(l):(E&=T,E!==0?h=yn(E):s||(s=T&~t,s!==0&&(h=yn(s))))):(T=l&~d,T!==0?h=yn(T):E!==0?h=yn(E):s||(s=l&~t,s!==0&&(h=yn(s)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,s=n&-n,d>=s||d===32&&(s&4194048)!==0)?n:h}function An(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function sr(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(){var t=ir;return ir<<=1,(ir&4194048)===0&&(ir=256),t}function jr(){var t=rr;return rr<<=1,(rr&62914560)===0&&(rr=4194304),t}function yi(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function vi(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bs(t,n,s,l,h,d){var E=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,M=t.expirationTimes,W=t.hiddenUpdates;for(s=E&~s;0<s;){var nt=31-tn(s),ot=1<<nt;T[nt]=0,M[nt]=-1;var Z=W[nt];if(Z!==null)for(W[nt]=null,nt=0;nt<Z.length;nt++){var J=Z[nt];J!==null&&(J.lane&=-536870913)}s&=~ot}l!==0&&on(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~n))}function on(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-tn(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function Vi(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-tn(s),h=1<<l;h&n|t[l]&n&&(t[l]|=n),s&=~h}}function Mi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Lr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oi(){var t=pt.p;return t!==0?t:(t=window.event,t===void 0?32:Ky(t.type))}function ji(t,n){var s=pt.p;try{return pt.p=t,n()}finally{pt.p=s}}var Ee=Math.random().toString(36).slice(2),Me="__reactFiber$"+Ee,Re="__reactProps$"+Ee,Nn="__reactContainer$"+Ee,Ss="__reactEvents$"+Ee,pl="__reactListeners$"+Ee,_i="__reactHandles$"+Ee,Ts="__reactResources$"+Ee,Li="__reactMarker$"+Ee;function ki(t){delete t[Me],delete t[Re],delete t[Ss],delete t[pl],delete t[_i]}function Ei(t){var n=t[Me];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Nn]||s[Me]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Oy(t);t!==null;){if(s=t[Me])return s;t=Oy(t)}return n}t=s,s=t.parentNode}return null}function Jn(t){if(t=t[Me]||t[Nn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function ti(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function un(t){var n=t[Ts];return n||(n=t[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ce(t){t[Li]=!0}var xs=new Set,ar={};function Vn(t,n){O(t,n),O(t+"Capture",n)}function O(t,n){for(ar[t]=n,t=0;t<n.length;t++)xs.add(n[t])}var tt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},at={};function ht(t){return ie.call(at,t)?!0:ie.call(it,t)?!1:tt.test(t)?at[t]=!0:(it[t]=!0,!1)}function dt(t,n,s){if(ht(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function _t(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function Dt(t,n,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+l)}}var ve,le;function se(t){if(ve===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);ve=n&&n[1]||"",le=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+t+le}var Un=!1;function zn(t,n){if(!t||Un)return"";Un=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(J){var Z=J}Reflect.construct(t,[],ot)}else{try{ot.call()}catch(J){Z=J}t.call(ot.prototype)}}else{try{throw Error()}catch(J){Z=J}(ot=t())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(J){if(J&&Z&&typeof J.stack=="string")return[J.stack,Z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],T=d[1];if(E&&T){var M=E.split(`
`),W=T.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===W.length)for(l=M.length-1,h=W.length-1;1<=l&&0<=h&&M[l]!==W[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==W[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==W[h]){var nt=`
`+M[l].replace(" at new "," at ");return t.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",t.displayName)),nt}while(1<=l&&0<=h);break}}}finally{Un=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?se(s):""}function Pn(t){switch(t.tag){case 26:case 27:case 5:return se(t.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return zn(t.type,!1);case 11:return zn(t.type.render,!1);case 1:return zn(t.type,!0);case 31:return se("Activity");default:return""}}function bi(t){try{var n="";do n+=Pn(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function wn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gl(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ch(t){var n=gl(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,d=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ua(t){t._valueTracker||(t._valueTracker=ch(t))}function yl(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=gl(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function As(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hh=/[\n"\\]/g;function ze(t){return t.replace(hh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Bn(t,n,s,l,h,d,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),n!=null?E==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+wn(n)):t.value!==""+wn(n)&&(t.value=""+wn(n)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),n!=null?kr(t,E,wn(n)):s!=null?kr(t,E,wn(s)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+wn(T):t.removeAttribute("name")}function ws(t,n,s,l,h,d,E,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;s=s!=null?""+wn(s):"",n=n!=null?""+wn(n):s,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function kr(t,n,s){n==="number"&&As(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function lr(t,n,s,l){if(t=t.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=n.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&l&&(t[s].defaultSelected=!0)}else{for(s=""+wn(s),n=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function me(t,n,s){if(n!=null&&(n=""+wn(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+wn(s):""}function Rs(t,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(Ot(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=wn(n),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function ei(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Cs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wo(t,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,s):typeof s!="number"||s===0||Cs.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function vl(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&s[h]!==l&&Wo(t,h,l)}else for(var d in n)n.hasOwnProperty(d)&&Wo(t,d,n[d])}function _l(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(t){return dh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var or=null;function ni(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ur=null,cr=null;function El(t){var n=Jn(t);if(n&&(t=n.stateNode)){var s=t[Re]||null;t:switch(t=n.stateNode,n.type){case"input":if(Bn(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ze(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var h=l[Re]||null;if(!h)throw Error(a(90));Bn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===t.form&&yl(l)}break t;case"textarea":me(t,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&lr(t,!!s.multiple,n,!1)}}}var Ui=!1;function Xo(t,n,s){if(Ui)return t(n,s);Ui=!0;try{var l=t(n);return l}finally{if(Ui=!1,(ur!==null||cr!==null)&&(Gu(),ur&&(n=ur,t=cr,cr=ur=null,El(n),t)))for(n=0;n<t.length;n++)El(t[n])}}function Ds(t,n){var s=t.stateNode;if(s===null)return null;var l=s[Re]||null;if(l===null)return null;s=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(Si)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){ii=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{ii=!1}var zi=null,Ur=null,hr=null;function bl(){if(hr)return hr;var t,n=Ur,s=n.length,l,h="value"in zi?zi.value:zi.textContent,d=h.length;for(t=0;t<s&&n[t]===h[t];t++);var E=s-t;for(l=1;l<=E&&n[s-l]===h[d-l];l++);return hr=h.slice(t,1<l?1-l:void 0)}function Pi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Bi(){return!0}function Sl(){return!1}function en(t){function n(s,l,h,d,E){this._reactName=s,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Bi:Sl,this.isPropagationStopped=Sl,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),n}var oe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=en(oe),Ns=b({},oe,{view:0,detail:0}),Zo=en(Ns),fa,da,qi,Vs=b({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qi&&(qi&&t.type==="mousemove"?(fa=t.screenX-qi.screenX,da=t.screenY-qi.screenY):da=fa=0,qi=t),fa)},movementY:function(t){return"movementY"in t?t.movementY:da}}),ri=en(Vs),Jo=b({},Vs,{dataTransfer:0}),mh=en(Jo),Ms=b({},Ns,{relatedTarget:0}),ma=en(Ms),Tl=b({},oe,{animationName:0,elapsedTime:0,pseudoElement:0}),pa=en(Tl),tu=b({},oe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ga=en(tu),ph=b({},oe,{data:0}),xl=en(ph),Os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=nu[t])?!!n[t]:!1}function js(){return Al}var iu=b({},Ns,{key:function(t){if(t.key){var n=Os[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Pi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(t){return t.type==="keypress"?Pi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ya=en(iu),ru=b({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wl=en(ru),fr=b({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),su=en(fr),au=b({},oe,{propertyName:0,elapsedTime:0,pseudoElement:0}),lu=en(au),ou=b({},Vs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),va=en(ou),Rn=b({},oe,{newState:0,oldState:0}),uu=en(Rn),cu=[9,13,27,32],Hi=Si&&"CompositionEvent"in window,u=null;Si&&"documentMode"in document&&(u=document.documentMode);var y=Si&&"TextEvent"in window&&!u,_=Si&&(!Hi||u&&8<u&&11>=u),x=" ",$=!1;function et(t,n){switch(t){case"keyup":return cu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zt=!1;function Ge(t,n){switch(t){case"compositionend":return vt(n);case"keypress":return n.which!==32?null:($=!0,x);case"textInput":return t=n.data,t===x&&$?null:t;default:return null}}function Jt(t,n){if(Zt)return t==="compositionend"||!Hi&&et(t,n)?(t=bl(),hr=Ur=zi=null,Zt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _&&n.locale!=="ko"?null:n.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!nn[t.type]:n==="textarea"}function dr(t,n,s,l){ur?cr?cr.push(l):cr=[l]:ur=l,n=Wu(n,"onChange"),0<n.length&&(s=new ha("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var cn=null,Gi=null;function Rl(t){xy(t,0)}function hu(t){var n=ti(t);if(yl(n))return t}function Fm(t,n){if(t==="change")return n}var Qm=!1;if(Si){var gh;if(Si){var yh="oninput"in document;if(!yh){var $m=document.createElement("div");$m.setAttribute("oninput","return;"),yh=typeof $m.oninput=="function"}gh=yh}else gh=!1;Qm=gh&&(!document.documentMode||9<document.documentMode)}function Ym(){cn&&(cn.detachEvent("onpropertychange",Km),Gi=cn=null)}function Km(t){if(t.propertyName==="value"&&hu(Gi)){var n=[];dr(n,Gi,t,ni(t)),Xo(Rl,n)}}function L1(t,n,s){t==="focusin"?(Ym(),cn=n,Gi=s,cn.attachEvent("onpropertychange",Km)):t==="focusout"&&Ym()}function k1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(Gi)}function U1(t,n){if(t==="click")return hu(n)}function z1(t,n){if(t==="input"||t==="change")return hu(n)}function P1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var qn=typeof Object.is=="function"?Object.is:P1;function Cl(t,n){if(qn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var h=s[l];if(!ie.call(n,h)||!qn(t[h],n[h]))return!1}return!0}function Wm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xm(t,n){var s=Wm(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Wm(s)}}function Zm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Zm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Jm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=As(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=As(t.document)}return n}function vh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var B1=Si&&"documentMode"in document&&11>=document.documentMode,_a=null,_h=null,Dl=null,Eh=!1;function tp(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Eh||_a==null||_a!==As(l)||(l=_a,"selectionStart"in l&&vh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Dl&&Cl(Dl,l)||(Dl=l,l=Wu(_h,"onSelect"),0<l.length&&(n=new ha("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=_a)))}function Ls(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Ea={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},bh={},ep={};Si&&(ep=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function ks(t){if(bh[t])return bh[t];if(!Ea[t])return t;var n=Ea[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in ep)return bh[t]=n[s];return t}var np=ks("animationend"),ip=ks("animationiteration"),rp=ks("animationstart"),q1=ks("transitionrun"),H1=ks("transitionstart"),G1=ks("transitioncancel"),sp=ks("transitionend"),ap=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function Ti(t,n){ap.set(t,n),Vn(n,[t])}var lp=new WeakMap;function si(t,n){if(typeof t=="object"&&t!==null){var s=lp.get(t);return s!==void 0?s:(n={value:t,source:n,stack:bi(n)},lp.set(t,n),n)}return{value:t,source:n,stack:bi(n)}}var ai=[],ba=0,Th=0;function fu(){for(var t=ba,n=Th=ba=0;n<t;){var s=ai[n];ai[n++]=null;var l=ai[n];ai[n++]=null;var h=ai[n];ai[n++]=null;var d=ai[n];if(ai[n++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&op(s,h,d)}}function du(t,n,s,l){ai[ba++]=t,ai[ba++]=n,ai[ba++]=s,ai[ba++]=l,Th|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xh(t,n,s,l){return du(t,n,s,l),mu(t)}function Sa(t,n){return du(t,null,null,n),mu(t)}function op(t,n,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var h=!1,d=t.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-tn(s),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=s|536870912),d):null}function mu(t){if(50<to)throw to=0,Nf=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ta={};function F1(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,n,s,l){return new F1(t,n,s,l)}function Ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mr(t,n){var s=t.alternate;return s===null?(s=Hn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function up(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function pu(t,n,s,l,h,d){var E=0;if(l=t,typeof t=="function")Ah(t)&&(E=1);else if(typeof t=="string")E=$E(t,s,gt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case w:return t=Hn(31,s,n,h),t.elementType=w,t.lanes=d,t;case N:return Us(s.children,h,d,n);case G:E=8,h|=24;break;case B:return t=Hn(12,s,n,h|2),t.elementType=B,t.lanes=d,t;case mt:return t=Hn(13,s,n,h),t.elementType=mt,t.lanes=d,t;case bt:return t=Hn(19,s,n,h),t.elementType=bt,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H:case P:E=10;break t;case X:E=9;break t;case lt:E=11;break t;case V:E=14;break t;case R:E=16,l=null;break t}E=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=Hn(E,s,n,h),n.elementType=t,n.type=l,n.lanes=d,n}function Us(t,n,s,l){return t=Hn(7,t,l,n),t.lanes=s,t}function wh(t,n,s){return t=Hn(6,t,null,n),t.lanes=s,t}function Rh(t,n,s){return n=Hn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var xa=[],Aa=0,gu=null,yu=0,li=[],oi=0,zs=null,pr=1,gr="";function Ps(t,n){xa[Aa++]=yu,xa[Aa++]=gu,gu=t,yu=n}function cp(t,n,s){li[oi++]=pr,li[oi++]=gr,li[oi++]=zs,zs=t;var l=pr;t=gr;var h=32-tn(l)-1;l&=~(1<<h),s+=1;var d=32-tn(n)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,pr=1<<32-tn(n)+h|s<<h|l,gr=d+t}else pr=1<<d|s<<h|l,gr=t}function Ch(t){t.return!==null&&(Ps(t,1),cp(t,1,0))}function Dh(t){for(;t===gu;)gu=xa[--Aa],xa[Aa]=null,yu=xa[--Aa],xa[Aa]=null;for(;t===zs;)zs=li[--oi],li[oi]=null,gr=li[--oi],li[oi]=null,pr=li[--oi],li[oi]=null}var Cn=null,Oe=null,ae=!1,Bs=null,Fi=!1,Ih=Error(a(519));function qs(t){var n=Error(a(418,""));throw Vl(si(n,t)),Ih}function hp(t){var n=t.stateNode,s=t.type,l=t.memoizedProps;switch(n[Me]=t,n[Re]=l,s){case"dialog":Kt("cancel",n),Kt("close",n);break;case"iframe":case"object":case"embed":Kt("load",n);break;case"video":case"audio":for(s=0;s<no.length;s++)Kt(no[s],n);break;case"source":Kt("error",n);break;case"img":case"image":case"link":Kt("error",n),Kt("load",n);break;case"details":Kt("toggle",n);break;case"input":Kt("invalid",n),ws(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ua(n);break;case"select":Kt("invalid",n);break;case"textarea":Kt("invalid",n),Rs(n,l.value,l.defaultValue,l.children),ua(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||Cy(n.textContent,s)?(l.popover!=null&&(Kt("beforetoggle",n),Kt("toggle",n)),l.onScroll!=null&&Kt("scroll",n),l.onScrollEnd!=null&&Kt("scrollend",n),l.onClick!=null&&(n.onclick=Xu),n=!0):n=!1,n||qs(t)}function fp(t){for(Cn=t.return;Cn;)switch(Cn.tag){case 5:case 13:Fi=!1;return;case 27:case 3:Fi=!0;return;default:Cn=Cn.return}}function Il(t){if(t!==Cn)return!1;if(!ae)return fp(t),ae=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||$f(t.type,t.memoizedProps)),s=!s),s&&Oe&&qs(t),fp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){Oe=Ai(t.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}Oe=null}}else n===27?(n=Oe,ts(t.type)?(t=Xf,Xf=null,Oe=t):Oe=n):Oe=Cn?Ai(t.stateNode.nextSibling):null;return!0}function Nl(){Oe=Cn=null,ae=!1}function dp(){var t=Bs;return t!==null&&(jn===null?jn=t:jn.push.apply(jn,t),Bs=null),t}function Vl(t){Bs===null?Bs=[t]:Bs.push(t)}var Nh=st(null),Hs=null,yr=null;function zr(t,n,s){F(Nh,n._currentValue),n._currentValue=s}function vr(t){t._currentValue=Nh.current,yt(Nh)}function Vh(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function Mh(t,n,s,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var M=0;M<n.length;M++)if(T.context===n[M]){d.lanes|=s,T=d.alternate,T!==null&&(T.lanes|=s),Vh(d.return,s,t),l||(E=null);break t}d=T.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(a(341));E.lanes|=s,d=E.alternate,d!==null&&(d.lanes|=s),Vh(E,s,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Ml(t,n,s,l){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var T=h.type;qn(h.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(h===ft.current){if(E=h.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(oo):t=[oo])}h=h.return}t!==null&&Mh(n,t,s,l),n.flags|=262144}function vu(t){for(t=t.firstContext;t!==null;){if(!qn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gs(t){Hs=t,yr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return mp(Hs,t)}function _u(t,n){return Hs===null&&Gs(t),mp(t,n)}function mp(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},yr===null){if(t===null)throw Error(a(308));yr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else yr=yr.next=n;return s}var Q1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},$1=r.unstable_scheduleCallback,Y1=r.unstable_NormalPriority,Qe={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oh(){return{controller:new Q1,data:new Map,refCount:0}}function Ol(t){t.refCount--,t.refCount===0&&$1(Y1,function(){t.controller.abort()})}var jl=null,jh=0,wa=0,Ra=null;function K1(t,n){if(jl===null){var s=jl=[];jh=0,wa=Uf(),Ra={status:"pending",value:void 0,then:function(l){s.push(l)}}}return jh++,n.then(pp,pp),n}function pp(){if(--jh===0&&jl!==null){Ra!==null&&(Ra.status="fulfilled");var t=jl;jl=null,wa=0,Ra=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function W1(t,n){var s=[],l={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<s.length;h++)(0,s[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),l}var gp=K.S;K.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&K1(t,n),gp!==null&&gp(t,n)};var Fs=st(null);function Lh(){var t=Fs.current;return t!==null?t:be.pooledCache}function Eu(t,n){n===null?F(Fs,Fs.current):F(Fs,n.pool)}function yp(){var t=Lh();return t===null?null:{parent:Qe._currentValue,pool:t}}var Ll=Error(a(460)),vp=Error(a(474)),bu=Error(a(542)),kh={then:function(){}};function _p(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Su(){}function Ep(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Su,Su),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t;default:if(typeof n.status=="string")n.then(Su,Su);else{if(t=be,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t}throw kl=n,Ll}}var kl=null;function bp(){if(kl===null)throw Error(a(459));var t=kl;return kl=null,t}function Sp(t){if(t===Ll||t===bu)throw Error(a(483))}var Pr=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qr(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(fe&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=mu(t),op(t,null,s),n}return du(t,l,n,s),mu(t)}function Ul(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Vi(t,s)}}function Ph(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var h=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var E={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,s=s.next}while(s!==null);d===null?h=d=n:d=d.next=n}else h=d=n;s={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var Bh=!1;function zl(){if(Bh){var t=Ra;if(t!==null)throw t}}function Pl(t,n,s,l){Bh=!1;var h=t.updateQueue;Pr=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var M=T,W=M.next;M.next=null,E===null?d=W:E.next=W,E=M;var nt=t.alternate;nt!==null&&(nt=nt.updateQueue,T=nt.lastBaseUpdate,T!==E&&(T===null?nt.firstBaseUpdate=W:T.next=W,nt.lastBaseUpdate=M))}if(d!==null){var ot=h.baseState;E=0,nt=W=M=null,T=d;do{var Z=T.lane&-536870913,J=Z!==T.lane;if(J?(te&Z)===Z:(l&Z)===Z){Z!==0&&Z===wa&&(Bh=!0),nt!==null&&(nt=nt.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Lt=t,Vt=T;Z=n;var ye=s;switch(Vt.tag){case 1:if(Lt=Vt.payload,typeof Lt=="function"){ot=Lt.call(ye,ot,Z);break t}ot=Lt;break t;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Vt.payload,Z=typeof Lt=="function"?Lt.call(ye,ot,Z):Lt,Z==null)break t;ot=b({},ot,Z);break t;case 2:Pr=!0}}Z=T.callback,Z!==null&&(t.flags|=64,J&&(t.flags|=8192),J=h.callbacks,J===null?h.callbacks=[Z]:J.push(Z))}else J={lane:Z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},nt===null?(W=nt=J,M=ot):nt=nt.next=J,E|=Z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;J=T,T=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);nt===null&&(M=ot),h.baseState=M,h.firstBaseUpdate=W,h.lastBaseUpdate=nt,d===null&&(h.shared.lanes=0),Wr|=E,t.lanes=E,t.memoizedState=ot}}function Tp(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function xp(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Tp(s[t],n)}var Ca=st(null),Tu=st(0);function Ap(t,n){t=Ar,F(Tu,t),F(Ca,n),Ar=t|n.baseLanes}function qh(){F(Tu,Ar),F(Ca,Ca.current)}function Hh(){Ar=Tu.current,yt(Ca),yt(Tu)}var Hr=0,Ft=null,pe=null,Pe=null,xu=!1,Da=!1,Qs=!1,Au=0,Bl=0,Ia=null,X1=0;function Le(){throw Error(a(321))}function Gh(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!qn(t[s],n[s]))return!1;return!0}function Fh(t,n,s,l,h,d){return Hr=d,Ft=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?og:ug,Qs=!1,d=s(l,h),Qs=!1,Da&&(d=Rp(n,s,l,h)),wp(t),d}function wp(t){K.H=Nu;var n=pe!==null&&pe.next!==null;if(Hr=0,Pe=pe=Ft=null,xu=!1,Bl=0,Ia=null,n)throw Error(a(300));t===null||rn||(t=t.dependencies,t!==null&&vu(t)&&(rn=!0))}function Rp(t,n,s,l){Ft=t;var h=0;do{if(Da&&(Ia=null),Bl=0,Da=!1,25<=h)throw Error(a(301));if(h+=1,Pe=pe=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=rE,d=n(s,l)}while(Da);return d}function Z1(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?ql(n):n,t=t.useState()[0],(pe!==null?pe.memoizedState:null)!==t&&(Ft.flags|=1024),n}function Qh(){var t=Au!==0;return Au=0,t}function $h(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Yh(t){if(xu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}xu=!1}Hr=0,Pe=pe=Ft=null,Da=!1,Bl=Au=0,Ia=null}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?Ft.memoizedState=Pe=t:Pe=Pe.next=t,Pe}function Be(){if(pe===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var n=Pe===null?Ft.memoizedState:Pe.next;if(n!==null)Pe=n,pe=t;else{if(t===null)throw Ft.alternate===null?Error(a(467)):Error(a(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Pe===null?Ft.memoizedState=Pe=t:Pe=Pe.next=t}return Pe}function Kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(t){var n=Bl;return Bl+=1,Ia===null&&(Ia=[]),t=Ep(Ia,t,n),n=Ft,(Pe===null?n.memoizedState:Pe.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?og:ug),t}function wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ql(t);if(t.$$typeof===P)return vn(t)}throw Error(a(438,String(t)))}function Wh(t){var n=null,s=Ft.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=Ft.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Kh(),Ft.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),l=0;l<t;l++)s[l]=L;return n.index++,s}function _r(t,n){return typeof n=="function"?n(t):n}function Ru(t){var n=Be();return Xh(n,pe,t)}function Xh(t,n,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}n.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var T=E=null,M=null,W=n,nt=!1;do{var ot=W.lane&-536870913;if(ot!==W.lane?(te&ot)===ot:(Hr&ot)===ot){var Z=W.revertLane;if(Z===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ot===wa&&(nt=!0);else if((Hr&Z)===Z){W=W.next,Z===wa&&(nt=!0);continue}else ot={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},M===null?(T=M=ot,E=d):M=M.next=ot,Ft.lanes|=Z,Wr|=Z;ot=W.action,Qs&&s(d,ot),d=W.hasEagerState?W.eagerState:s(d,ot)}else Z={lane:ot,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},M===null?(T=M=Z,E=d):M=M.next=Z,Ft.lanes|=ot,Wr|=ot;W=W.next}while(W!==null&&W!==n);if(M===null?E=d:M.next=T,!qn(d,t.memoizedState)&&(rn=!0,nt&&(s=Ra,s!==null)))throw s;t.memoizedState=d,t.baseState=E,t.baseQueue=M,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Zh(t){var n=Be(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,h=s.pending,d=n.memoizedState;if(h!==null){s.pending=null;var E=h=h.next;do d=t(d,E.action),E=E.next;while(E!==h);qn(d,n.memoizedState)||(rn=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,l]}function Cp(t,n,s){var l=Ft,h=Be(),d=ae;if(d){if(s===void 0)throw Error(a(407));s=s()}else s=n();var E=!qn((pe||h).memoizedState,s);E&&(h.memoizedState=s,rn=!0),h=h.queue;var T=Np.bind(null,l,h,t);if(Hl(2048,8,T,[t]),h.getSnapshot!==n||E||Pe!==null&&Pe.memoizedState.tag&1){if(l.flags|=2048,Na(9,Cu(),Ip.bind(null,l,h,s,n),null),be===null)throw Error(a(349));d||(Hr&124)!==0||Dp(l,n,s)}return s}function Dp(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Ft.updateQueue,n===null?(n=Kh(),Ft.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function Ip(t,n,s,l){n.value=s,n.getSnapshot=l,Vp(n)&&Mp(t)}function Np(t,n,s){return s(function(){Vp(n)&&Mp(t)})}function Vp(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!qn(t,s)}catch{return!0}}function Mp(t){var n=Sa(t,2);n!==null&&Yn(n,t,2)}function Jh(t){var n=Mn();if(typeof t=="function"){var s=t;if(t=s(),Qs){Je(!0);try{s()}finally{Je(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:t},n}function Op(t,n,s,l){return t.baseState=s,Xh(t,pe,typeof l=="function"?l:_r)}function J1(t,n,s,l,h){if(Iu(t))throw Error(a(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};K.T!==null?s(!0):d.isTransition=!1,l(d),s=n.pending,s===null?(d.next=n.pending=d,jp(n,d)):(d.next=s.next,n.pending=s.next=d)}}function jp(t,n){var s=n.action,l=n.payload,h=t.state;if(n.isTransition){var d=K.T,E={};K.T=E;try{var T=s(h,l),M=K.S;M!==null&&M(E,T),Lp(t,n,T)}catch(W){tf(t,n,W)}finally{K.T=d}}else try{d=s(h,l),Lp(t,n,d)}catch(W){tf(t,n,W)}}function Lp(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){kp(t,n,l)},function(l){return tf(t,n,l)}):kp(t,n,s)}function kp(t,n,s){n.status="fulfilled",n.value=s,Up(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,jp(t,s)))}function tf(t,n,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,Up(n),n=n.next;while(n!==l)}t.action=null}function Up(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function zp(t,n){return n}function Pp(t,n){if(ae){var s=be.formState;if(s!==null){t:{var l=Ft;if(ae){if(Oe){e:{for(var h=Oe,d=Fi;h.nodeType!==8;){if(!d){h=null;break e}if(h=Ai(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Oe=Ai(h.nextSibling),l=h.data==="F!";break t}}qs(l)}l=!1}l&&(n=s[0])}}return s=Mn(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:n},s.queue=l,s=sg.bind(null,Ft,l),l.dispatch=s,l=Jh(!1),d=af.bind(null,Ft,!1,l.queue),l=Mn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,s=J1.bind(null,Ft,h,d,s),h.dispatch=s,l.memoizedState=t,[n,s,!1]}function Bp(t){var n=Be();return qp(n,pe,t)}function qp(t,n,s){if(n=Xh(t,n,zp)[0],t=Ru(_r)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=ql(n)}catch(E){throw E===Ll?bu:E}else l=n;n=Be();var h=n.queue,d=h.dispatch;return s!==n.memoizedState&&(Ft.flags|=2048,Na(9,Cu(),tE.bind(null,h,s),null)),[l,d,t]}function tE(t,n){t.action=n}function Hp(t){var n=Be(),s=pe;if(s!==null)return qp(n,s,t);Be(),n=n.memoizedState,s=Be();var l=s.queue.dispatch;return s.memoizedState=t,[n,l,!1]}function Na(t,n,s,l){return t={tag:t,create:s,deps:l,inst:n,next:null},n=Ft.updateQueue,n===null&&(n=Kh(),Ft.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t),t}function Cu(){return{destroy:void 0,resource:void 0}}function Gp(){return Be().memoizedState}function Du(t,n,s,l){var h=Mn();l=l===void 0?null:l,Ft.flags|=t,h.memoizedState=Na(1|n,Cu(),s,l)}function Hl(t,n,s,l){var h=Be();l=l===void 0?null:l;var d=h.memoizedState.inst;pe!==null&&l!==null&&Gh(l,pe.memoizedState.deps)?h.memoizedState=Na(n,d,s,l):(Ft.flags|=t,h.memoizedState=Na(1|n,d,s,l))}function Fp(t,n){Du(8390656,8,t,n)}function Qp(t,n){Hl(2048,8,t,n)}function $p(t,n){return Hl(4,2,t,n)}function Yp(t,n){return Hl(4,4,t,n)}function Kp(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Wp(t,n,s){s=s!=null?s.concat([t]):null,Hl(4,4,Kp.bind(null,n,t),s)}function ef(){}function Xp(t,n){var s=Be();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&Gh(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function Zp(t,n){var s=Be();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&Gh(n,l[1]))return l[0];if(l=t(),Qs){Je(!0);try{t()}finally{Je(!1)}}return s.memoizedState=[l,n],l}function nf(t,n,s){return s===void 0||(Hr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=ey(),Ft.lanes|=t,Wr|=t,s)}function Jp(t,n,s,l){return qn(s,n)?s:Ca.current!==null?(t=nf(t,s,l),qn(t,n)||(rn=!0),t):(Hr&42)===0?(rn=!0,t.memoizedState=s):(t=ey(),Ft.lanes|=t,Wr|=t,n)}function tg(t,n,s,l,h){var d=pt.p;pt.p=d!==0&&8>d?d:8;var E=K.T,T={};K.T=T,af(t,!1,n,s);try{var M=h(),W=K.S;if(W!==null&&W(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var nt=W1(M,l);Gl(t,n,nt,$n(t))}else Gl(t,n,l,$n(t))}catch(ot){Gl(t,n,{then:function(){},status:"rejected",reason:ot},$n())}finally{pt.p=d,K.T=E}}function eE(){}function rf(t,n,s,l){if(t.tag!==5)throw Error(a(476));var h=eg(t).queue;tg(t,h,n,wt,s===null?eE:function(){return ng(t),s(l)})}function eg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:wt,baseState:wt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:wt},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function ng(t){var n=eg(t).next.queue;Gl(t,n,{},$n())}function sf(){return vn(oo)}function ig(){return Be().memoizedState}function rg(){return Be().memoizedState}function nE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=$n();t=Br(s);var l=qr(n,t,s);l!==null&&(Yn(l,n,s),Ul(l,n,s)),n={cache:Oh()},t.payload=n;return}n=n.return}}function iE(t,n,s){var l=$n();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Iu(t)?ag(n,s):(s=xh(t,n,s,l),s!==null&&(Yn(s,t,l),lg(s,n,l)))}function sg(t,n,s){var l=$n();Gl(t,n,s,l)}function Gl(t,n,s,l){var h={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Iu(t))ag(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var E=n.lastRenderedState,T=d(E,s);if(h.hasEagerState=!0,h.eagerState=T,qn(T,E))return du(t,n,h,0),be===null&&fu(),!1}catch{}finally{}if(s=xh(t,n,h,l),s!==null)return Yn(s,t,l),lg(s,n,l),!0}return!1}function af(t,n,s,l){if(l={lane:2,revertLane:Uf(),action:l,hasEagerState:!1,eagerState:null,next:null},Iu(t)){if(n)throw Error(a(479))}else n=xh(t,s,l,2),n!==null&&Yn(n,t,2)}function Iu(t){var n=t.alternate;return t===Ft||n!==null&&n===Ft}function ag(t,n){Da=xu=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function lg(t,n,s){if((s&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Vi(t,s)}}var Nu={readContext:vn,use:wu,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useLayoutEffect:Le,useInsertionEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useSyncExternalStore:Le,useId:Le,useHostTransitionStatus:Le,useFormState:Le,useActionState:Le,useOptimistic:Le,useMemoCache:Le,useCacheRefresh:Le},og={readContext:vn,use:wu,useCallback:function(t,n){return Mn().memoizedState=[t,n===void 0?null:n],t},useContext:vn,useEffect:Fp,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,Du(4194308,4,Kp.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Du(4194308,4,t,n)},useInsertionEffect:function(t,n){Du(4,2,t,n)},useMemo:function(t,n){var s=Mn();n=n===void 0?null:n;var l=t();if(Qs){Je(!0);try{t()}finally{Je(!1)}}return s.memoizedState=[l,n],l},useReducer:function(t,n,s){var l=Mn();if(s!==void 0){var h=s(n);if(Qs){Je(!0);try{s(n)}finally{Je(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=iE.bind(null,Ft,t),[l.memoizedState,t]},useRef:function(t){var n=Mn();return t={current:t},n.memoizedState=t},useState:function(t){t=Jh(t);var n=t.queue,s=sg.bind(null,Ft,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:ef,useDeferredValue:function(t,n){var s=Mn();return nf(s,t,n)},useTransition:function(){var t=Jh(!1);return t=tg.bind(null,Ft,t.queue,!0,!1),Mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var l=Ft,h=Mn();if(ae){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),be===null)throw Error(a(349));(te&124)!==0||Dp(l,n,s)}h.memoizedState=s;var d={value:s,getSnapshot:n};return h.queue=d,Fp(Np.bind(null,l,d,t),[t]),l.flags|=2048,Na(9,Cu(),Ip.bind(null,l,d,s,n),null),s},useId:function(){var t=Mn(),n=be.identifierPrefix;if(ae){var s=gr,l=pr;s=(l&~(1<<32-tn(l)-1)).toString(32)+s,n=""+n+"R"+s,s=Au++,0<s&&(n+="H"+s.toString(32)),n+=""}else s=X1++,n=""+n+"r"+s.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:sf,useFormState:Pp,useActionState:Pp,useOptimistic:function(t){var n=Mn();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=af.bind(null,Ft,!0,s),s.dispatch=n,[t,n]},useMemoCache:Wh,useCacheRefresh:function(){return Mn().memoizedState=nE.bind(null,Ft)}},ug={readContext:vn,use:wu,useCallback:Xp,useContext:vn,useEffect:Qp,useImperativeHandle:Wp,useInsertionEffect:$p,useLayoutEffect:Yp,useMemo:Zp,useReducer:Ru,useRef:Gp,useState:function(){return Ru(_r)},useDebugValue:ef,useDeferredValue:function(t,n){var s=Be();return Jp(s,pe.memoizedState,t,n)},useTransition:function(){var t=Ru(_r)[0],n=Be().memoizedState;return[typeof t=="boolean"?t:ql(t),n]},useSyncExternalStore:Cp,useId:ig,useHostTransitionStatus:sf,useFormState:Bp,useActionState:Bp,useOptimistic:function(t,n){var s=Be();return Op(s,pe,t,n)},useMemoCache:Wh,useCacheRefresh:rg},rE={readContext:vn,use:wu,useCallback:Xp,useContext:vn,useEffect:Qp,useImperativeHandle:Wp,useInsertionEffect:$p,useLayoutEffect:Yp,useMemo:Zp,useReducer:Zh,useRef:Gp,useState:function(){return Zh(_r)},useDebugValue:ef,useDeferredValue:function(t,n){var s=Be();return pe===null?nf(s,t,n):Jp(s,pe.memoizedState,t,n)},useTransition:function(){var t=Zh(_r)[0],n=Be().memoizedState;return[typeof t=="boolean"?t:ql(t),n]},useSyncExternalStore:Cp,useId:ig,useHostTransitionStatus:sf,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,n){var s=Be();return pe!==null?Op(s,pe,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:rg},Va=null,Fl=0;function Vu(t){var n=Fl;return Fl+=1,Va===null&&(Va=[]),Ep(Va,t,n)}function Ql(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Mu(t,n){throw n.$$typeof===S?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function cg(t){var n=t._init;return n(t._payload)}function hg(t){function n(q,z){if(t){var Y=q.deletions;Y===null?(q.deletions=[z],q.flags|=16):Y.push(z)}}function s(q,z){if(!t)return null;for(;z!==null;)n(q,z),z=z.sibling;return null}function l(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function h(q,z){return q=mr(q,z),q.index=0,q.sibling=null,q}function d(q,z,Y){return q.index=Y,t?(Y=q.alternate,Y!==null?(Y=Y.index,Y<z?(q.flags|=67108866,z):Y):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function E(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function T(q,z,Y,rt){return z===null||z.tag!==6?(z=wh(Y,q.mode,rt),z.return=q,z):(z=h(z,Y),z.return=q,z)}function M(q,z,Y,rt){var Rt=Y.type;return Rt===N?nt(q,z,Y.props.children,rt,Y.key):z!==null&&(z.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===R&&cg(Rt)===z.type)?(z=h(z,Y.props),Ql(z,Y),z.return=q,z):(z=pu(Y.type,Y.key,Y.props,null,q.mode,rt),Ql(z,Y),z.return=q,z)}function W(q,z,Y,rt){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=Rh(Y,q.mode,rt),z.return=q,z):(z=h(z,Y.children||[]),z.return=q,z)}function nt(q,z,Y,rt,Rt){return z===null||z.tag!==7?(z=Us(Y,q.mode,rt,Rt),z.return=q,z):(z=h(z,Y),z.return=q,z)}function ot(q,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=wh(""+z,q.mode,Y),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return Y=pu(z.type,z.key,z.props,null,q.mode,Y),Ql(Y,z),Y.return=q,Y;case I:return z=Rh(z,q.mode,Y),z.return=q,z;case R:var rt=z._init;return z=rt(z._payload),ot(q,z,Y)}if(Ot(z)||j(z))return z=Us(z,q.mode,Y,null),z.return=q,z;if(typeof z.then=="function")return ot(q,Vu(z),Y);if(z.$$typeof===P)return ot(q,_u(q,z),Y);Mu(q,z)}return null}function Z(q,z,Y,rt){var Rt=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Rt!==null?null:T(q,z,""+Y,rt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return Y.key===Rt?M(q,z,Y,rt):null;case I:return Y.key===Rt?W(q,z,Y,rt):null;case R:return Rt=Y._init,Y=Rt(Y._payload),Z(q,z,Y,rt)}if(Ot(Y)||j(Y))return Rt!==null?null:nt(q,z,Y,rt,null);if(typeof Y.then=="function")return Z(q,z,Vu(Y),rt);if(Y.$$typeof===P)return Z(q,z,_u(q,Y),rt);Mu(q,Y)}return null}function J(q,z,Y,rt,Rt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return q=q.get(Y)||null,T(z,q,""+rt,Rt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case A:return q=q.get(rt.key===null?Y:rt.key)||null,M(z,q,rt,Rt);case I:return q=q.get(rt.key===null?Y:rt.key)||null,W(z,q,rt,Rt);case R:var $t=rt._init;return rt=$t(rt._payload),J(q,z,Y,rt,Rt)}if(Ot(rt)||j(rt))return q=q.get(Y)||null,nt(z,q,rt,Rt,null);if(typeof rt.then=="function")return J(q,z,Y,Vu(rt),Rt);if(rt.$$typeof===P)return J(q,z,Y,_u(z,rt),Rt);Mu(z,rt)}return null}function Lt(q,z,Y,rt){for(var Rt=null,$t=null,It=z,Mt=z=0,an=null;It!==null&&Mt<Y.length;Mt++){It.index>Mt?(an=It,It=null):an=It.sibling;var re=Z(q,It,Y[Mt],rt);if(re===null){It===null&&(It=an);break}t&&It&&re.alternate===null&&n(q,It),z=d(re,z,Mt),$t===null?Rt=re:$t.sibling=re,$t=re,It=an}if(Mt===Y.length)return s(q,It),ae&&Ps(q,Mt),Rt;if(It===null){for(;Mt<Y.length;Mt++)It=ot(q,Y[Mt],rt),It!==null&&(z=d(It,z,Mt),$t===null?Rt=It:$t.sibling=It,$t=It);return ae&&Ps(q,Mt),Rt}for(It=l(It);Mt<Y.length;Mt++)an=J(It,q,Mt,Y[Mt],rt),an!==null&&(t&&an.alternate!==null&&It.delete(an.key===null?Mt:an.key),z=d(an,z,Mt),$t===null?Rt=an:$t.sibling=an,$t=an);return t&&It.forEach(function(ss){return n(q,ss)}),ae&&Ps(q,Mt),Rt}function Vt(q,z,Y,rt){if(Y==null)throw Error(a(151));for(var Rt=null,$t=null,It=z,Mt=z=0,an=null,re=Y.next();It!==null&&!re.done;Mt++,re=Y.next()){It.index>Mt?(an=It,It=null):an=It.sibling;var ss=Z(q,It,re.value,rt);if(ss===null){It===null&&(It=an);break}t&&It&&ss.alternate===null&&n(q,It),z=d(ss,z,Mt),$t===null?Rt=ss:$t.sibling=ss,$t=ss,It=an}if(re.done)return s(q,It),ae&&Ps(q,Mt),Rt;if(It===null){for(;!re.done;Mt++,re=Y.next())re=ot(q,re.value,rt),re!==null&&(z=d(re,z,Mt),$t===null?Rt=re:$t.sibling=re,$t=re);return ae&&Ps(q,Mt),Rt}for(It=l(It);!re.done;Mt++,re=Y.next())re=J(It,q,Mt,re.value,rt),re!==null&&(t&&re.alternate!==null&&It.delete(re.key===null?Mt:re.key),z=d(re,z,Mt),$t===null?Rt=re:$t.sibling=re,$t=re);return t&&It.forEach(function(sb){return n(q,sb)}),ae&&Ps(q,Mt),Rt}function ye(q,z,Y,rt){if(typeof Y=="object"&&Y!==null&&Y.type===N&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:t:{for(var Rt=Y.key;z!==null;){if(z.key===Rt){if(Rt=Y.type,Rt===N){if(z.tag===7){s(q,z.sibling),rt=h(z,Y.props.children),rt.return=q,q=rt;break t}}else if(z.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===R&&cg(Rt)===z.type){s(q,z.sibling),rt=h(z,Y.props),Ql(rt,Y),rt.return=q,q=rt;break t}s(q,z);break}else n(q,z);z=z.sibling}Y.type===N?(rt=Us(Y.props.children,q.mode,rt,Y.key),rt.return=q,q=rt):(rt=pu(Y.type,Y.key,Y.props,null,q.mode,rt),Ql(rt,Y),rt.return=q,q=rt)}return E(q);case I:t:{for(Rt=Y.key;z!==null;){if(z.key===Rt)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){s(q,z.sibling),rt=h(z,Y.children||[]),rt.return=q,q=rt;break t}else{s(q,z);break}else n(q,z);z=z.sibling}rt=Rh(Y,q.mode,rt),rt.return=q,q=rt}return E(q);case R:return Rt=Y._init,Y=Rt(Y._payload),ye(q,z,Y,rt)}if(Ot(Y))return Lt(q,z,Y,rt);if(j(Y)){if(Rt=j(Y),typeof Rt!="function")throw Error(a(150));return Y=Rt.call(Y),Vt(q,z,Y,rt)}if(typeof Y.then=="function")return ye(q,z,Vu(Y),rt);if(Y.$$typeof===P)return ye(q,z,_u(q,Y),rt);Mu(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,z!==null&&z.tag===6?(s(q,z.sibling),rt=h(z,Y),rt.return=q,q=rt):(s(q,z),rt=wh(Y,q.mode,rt),rt.return=q,q=rt),E(q)):s(q,z)}return function(q,z,Y,rt){try{Fl=0;var Rt=ye(q,z,Y,rt);return Va=null,Rt}catch(It){if(It===Ll||It===bu)throw It;var $t=Hn(29,It,null,q.mode);return $t.lanes=rt,$t.return=q,$t}finally{}}}var Ma=hg(!0),fg=hg(!1),ui=st(null),Qi=null;function Gr(t){var n=t.alternate;F($e,$e.current&1),F(ui,t),Qi===null&&(n===null||Ca.current!==null||n.memoizedState!==null)&&(Qi=t)}function dg(t){if(t.tag===22){if(F($e,$e.current),F(ui,t),Qi===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Qi=t)}}else Fr()}function Fr(){F($e,$e.current),F(ui,ui.current)}function Er(t){yt(ui),Qi===t&&(Qi=null),yt($e)}var $e=st(0);function Ou(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Wf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function lf(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:b({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var of={enqueueSetState:function(t,n,s){t=t._reactInternals;var l=$n(),h=Br(l);h.payload=n,s!=null&&(h.callback=s),n=qr(t,h,l),n!==null&&(Yn(n,t,l),Ul(n,t,l))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=$n(),h=Br(l);h.tag=1,h.payload=n,s!=null&&(h.callback=s),n=qr(t,h,l),n!==null&&(Yn(n,t,l),Ul(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=$n(),l=Br(s);l.tag=2,n!=null&&(l.callback=n),n=qr(t,l,s),n!==null&&(Yn(n,t,s),Ul(n,t,s))}};function mg(t,n,s,l,h,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):n.prototype&&n.prototype.isPureReactComponent?!Cl(s,l)||!Cl(h,d):!0}function pg(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&of.enqueueReplaceState(n,n.state,null)}function $s(t,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(t=t.defaultProps){s===n&&(s=b({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}var ju=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function gg(t){ju(t)}function yg(t){console.error(t)}function vg(t){ju(t)}function Lu(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function _g(t,n,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uf(t,n,s){return s=Br(s),s.tag=3,s.payload={element:null},s.callback=function(){Lu(t,n)},s}function Eg(t){return t=Br(t),t.tag=3,t}function bg(t,n,s,l){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){_g(n,s,l)}}var E=s.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){_g(n,s,l),typeof h!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function sE(t,n,s,l,h){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&Ml(n,s,h,!0),s=ui.current,s!==null){switch(s.tag){case 13:return Qi===null?Mf():s.alternate===null&&je===0&&(je=3),s.flags&=-257,s.flags|=65536,s.lanes=h,l===kh?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),jf(t,l,h)),!1;case 22:return s.flags|=65536,l===kh?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),jf(t,l,h)),!1}throw Error(a(435,s.tag))}return jf(t,l,h),Mf(),!1}if(ae)return n=ui.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Ih&&(t=Error(a(422),{cause:l}),Vl(si(t,s)))):(l!==Ih&&(n=Error(a(423),{cause:l}),Vl(si(n,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=si(l,s),h=uf(t.stateNode,l,h),Ph(t,h),je!==4&&(je=2)),!1;var d=Error(a(520),{cause:l});if(d=si(d,s),Jl===null?Jl=[d]:Jl.push(d),je!==4&&(je=2),n===null)return!0;l=si(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=uf(s.stateNode,l,t),Ph(s,t),!1;case 1:if(n=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Xr===null||!Xr.has(d))))return s.flags|=65536,h&=-h,s.lanes|=h,h=Eg(h),bg(h,t,s,l),Ph(s,h),!1}s=s.return}while(s!==null);return!1}var Sg=Error(a(461)),rn=!1;function hn(t,n,s,l){n.child=t===null?fg(n,null,s,l):Ma(n,t.child,s,l)}function Tg(t,n,s,l,h){s=s.render;var d=n.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return Gs(n),l=Fh(t,n,s,E,d,h),T=Qh(),t!==null&&!rn?($h(t,n,h),br(t,n,h)):(ae&&T&&Ch(n),n.flags|=1,hn(t,n,l,h),n.child)}function xg(t,n,s,l,h){if(t===null){var d=s.type;return typeof d=="function"&&!Ah(d)&&d.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=d,Ag(t,n,d,l,h)):(t=pu(s.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!yf(t,h)){var E=d.memoizedProps;if(s=s.compare,s=s!==null?s:Cl,s(E,l)&&t.ref===n.ref)return br(t,n,h)}return n.flags|=1,t=mr(d,l),t.ref=n.ref,t.return=n,n.child=t}function Ag(t,n,s,l,h){if(t!==null){var d=t.memoizedProps;if(Cl(d,l)&&t.ref===n.ref)if(rn=!1,n.pendingProps=l=d,yf(t,h))(t.flags&131072)!==0&&(rn=!0);else return n.lanes=t.lanes,br(t,n,h)}return cf(t,n,s,l,h)}function wg(t,n,s){var l=n.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=d!==null?d.baseLanes|s:s,t!==null){for(h=n.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;n.childLanes=d&~l}else n.childLanes=0,n.child=null;return Rg(t,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eu(n,d!==null?d.cachePool:null),d!==null?Ap(n,d):qh(),dg(n);else return n.lanes=n.childLanes=536870912,Rg(t,n,d!==null?d.baseLanes|s:s,s)}else d!==null?(Eu(n,d.cachePool),Ap(n,d),Fr(),n.memoizedState=null):(t!==null&&Eu(n,null),qh(),Fr());return hn(t,n,h,s),n.child}function Rg(t,n,s,l){var h=Lh();return h=h===null?null:{parent:Qe._currentValue,pool:h},n.memoizedState={baseLanes:s,cachePool:h},t!==null&&Eu(n,null),qh(),dg(n),t!==null&&Ml(t,n,l,!0),null}function ku(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function cf(t,n,s,l,h){return Gs(n),s=Fh(t,n,s,l,void 0,h),l=Qh(),t!==null&&!rn?($h(t,n,h),br(t,n,h)):(ae&&l&&Ch(n),n.flags|=1,hn(t,n,s,h),n.child)}function Cg(t,n,s,l,h,d){return Gs(n),n.updateQueue=null,s=Rp(n,l,s,h),wp(t),l=Qh(),t!==null&&!rn?($h(t,n,d),br(t,n,d)):(ae&&l&&Ch(n),n.flags|=1,hn(t,n,s,d),n.child)}function Dg(t,n,s,l,h){if(Gs(n),n.stateNode===null){var d=Ta,E=s.contextType;typeof E=="object"&&E!==null&&(d=vn(E)),d=new s(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=of,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},Uh(n),E=s.contextType,d.context=typeof E=="object"&&E!==null?vn(E):Ta,d.state=n.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(lf(n,s,E,l),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&of.enqueueReplaceState(d,d.state,null),Pl(n,l,d,h),zl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){d=n.stateNode;var T=n.memoizedProps,M=$s(s,T);d.props=M;var W=d.context,nt=s.contextType;E=Ta,typeof nt=="object"&&nt!==null&&(E=vn(nt));var ot=s.getDerivedStateFromProps;nt=typeof ot=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,nt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||W!==E)&&pg(n,d,l,E),Pr=!1;var Z=n.memoizedState;d.state=Z,Pl(n,l,d,h),zl(),W=n.memoizedState,T||Z!==W||Pr?(typeof ot=="function"&&(lf(n,s,ot,l),W=n.memoizedState),(M=Pr||mg(n,s,M,l,Z,W,E))?(nt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=W),d.props=l,d.state=W,d.context=E,l=M):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,zh(t,n),E=n.memoizedProps,nt=$s(s,E),d.props=nt,ot=n.pendingProps,Z=d.context,W=s.contextType,M=Ta,typeof W=="object"&&W!==null&&(M=vn(W)),T=s.getDerivedStateFromProps,(W=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ot||Z!==M)&&pg(n,d,l,M),Pr=!1,Z=n.memoizedState,d.state=Z,Pl(n,l,d,h),zl();var J=n.memoizedState;E!==ot||Z!==J||Pr||t!==null&&t.dependencies!==null&&vu(t.dependencies)?(typeof T=="function"&&(lf(n,s,T,l),J=n.memoizedState),(nt=Pr||mg(n,s,nt,l,Z,J,M)||t!==null&&t.dependencies!==null&&vu(t.dependencies))?(W||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,J,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,J,M)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&Z===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&Z===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=J),d.props=l,d.state=J,d.context=M,l=nt):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&Z===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&Z===t.memoizedState||(n.flags|=1024),l=!1)}return d=l,ku(t,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&l?(n.child=Ma(n,t.child,null,h),n.child=Ma(n,null,s,h)):hn(t,n,s,h),n.memoizedState=d.state,t=n.child):t=br(t,n,h),t}function Ig(t,n,s,l){return Nl(),n.flags|=256,hn(t,n,s,l),n.child}var hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(t){return{baseLanes:t,cachePool:yp()}}function df(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=ci),t}function Ng(t,n,s){var l=n.pendingProps,h=!1,d=(n.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:($e.current&2)!==0),E&&(h=!0,n.flags&=-129),E=(n.flags&32)!==0,n.flags&=-33,t===null){if(ae){if(h?Gr(n):Fr(),ae){var T=Oe,M;if(M=T){t:{for(M=T,T=Fi;M.nodeType!==8;){if(!T){T=null;break t}if(M=Ai(M.nextSibling),M===null){T=null;break t}}T=M}T!==null?(n.memoizedState={dehydrated:T,treeContext:zs!==null?{id:pr,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},M=Hn(18,null,null,0),M.stateNode=T,M.return=n,n.child=M,Cn=n,Oe=null,M=!0):M=!1}M||qs(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Wf(T)?n.lanes=32:n.lanes=536870912,null;Er(n)}return T=l.children,l=l.fallback,h?(Fr(),h=n.mode,T=Uu({mode:"hidden",children:T},h),l=Us(l,h,s,null),T.return=n,l.return=n,T.sibling=l,n.child=T,h=n.child,h.memoizedState=ff(s),h.childLanes=df(t,E,s),n.memoizedState=hf,l):(Gr(n),mf(n,T))}if(M=t.memoizedState,M!==null&&(T=M.dehydrated,T!==null)){if(d)n.flags&256?(Gr(n),n.flags&=-257,n=pf(t,n,s)):n.memoizedState!==null?(Fr(),n.child=t.child,n.flags|=128,n=null):(Fr(),h=l.fallback,T=n.mode,l=Uu({mode:"visible",children:l.children},T),h=Us(h,T,s,null),h.flags|=2,l.return=n,h.return=n,l.sibling=h,n.child=l,Ma(n,t.child,null,s),l=n.child,l.memoizedState=ff(s),l.childLanes=df(t,E,s),n.memoizedState=hf,n=h);else if(Gr(n),Wf(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var W=E.dgst;E=W,l=Error(a(419)),l.stack="",l.digest=E,Vl({value:l,source:null,stack:null}),n=pf(t,n,s)}else if(rn||Ml(t,n,s,!1),E=(s&t.childLanes)!==0,rn||E){if(E=be,E!==null&&(l=s&-s,l=(l&42)!==0?1:Mi(l),l=(l&(E.suspendedLanes|s))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Sa(t,l),Yn(E,t,l),Sg;T.data==="$?"||Mf(),n=pf(t,n,s)}else T.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=M.treeContext,Oe=Ai(T.nextSibling),Cn=n,ae=!0,Bs=null,Fi=!1,t!==null&&(li[oi++]=pr,li[oi++]=gr,li[oi++]=zs,pr=t.id,gr=t.overflow,zs=n),n=mf(n,l.children),n.flags|=4096);return n}return h?(Fr(),h=l.fallback,T=n.mode,M=t.child,W=M.sibling,l=mr(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,W!==null?h=mr(W,h):(h=Us(h,T,s,null),h.flags|=2),h.return=n,l.return=n,l.sibling=h,n.child=l,l=h,h=n.child,T=t.child.memoizedState,T===null?T=ff(s):(M=T.cachePool,M!==null?(W=Qe._currentValue,M=M.parent!==W?{parent:W,pool:W}:M):M=yp(),T={baseLanes:T.baseLanes|s,cachePool:M}),h.memoizedState=T,h.childLanes=df(t,E,s),n.memoizedState=hf,l):(Gr(n),s=t.child,t=s.sibling,s=mr(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,t!==null&&(E=n.deletions,E===null?(n.deletions=[t],n.flags|=16):E.push(t)),n.child=s,n.memoizedState=null,s)}function mf(t,n){return n=Uu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Uu(t,n){return t=Hn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function pf(t,n,s){return Ma(n,t.child,null,s),t=mf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Vg(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Vh(t.return,n,s)}function gf(t,n,s,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:h}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=h)}function Mg(t,n,s){var l=n.pendingProps,h=l.revealOrder,d=l.tail;if(hn(t,n,l.children,s),l=$e.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vg(t,s,n);else if(t.tag===19)Vg(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(F($e,l),h){case"forwards":for(s=n.child,h=null;s!==null;)t=s.alternate,t!==null&&Ou(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),gf(n,!1,h,s,d);break;case"backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Ou(t)===null){n.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}gf(n,!0,s,null,d);break;case"together":gf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function br(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Wr|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(Ml(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=mr(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=mr(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function yf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&vu(t)))}function aE(t,n,s){switch(n.tag){case 3:Et(n,n.stateNode.containerInfo),zr(n,Qe,t.memoizedState.cache),Nl();break;case 27:case 5:Ut(n);break;case 4:Et(n,n.stateNode.containerInfo);break;case 10:zr(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Gr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Ng(t,n,s):(Gr(n),t=br(t,n,s),t!==null?t.sibling:null);Gr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(Ml(t,n,s,!1),l=(s&n.childLanes)!==0),h){if(l)return Mg(t,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),F($e,$e.current),l)break;return null;case 22:case 23:return n.lanes=0,wg(t,n,s);case 24:zr(n,Qe,t.memoizedState.cache)}return br(t,n,s)}function Og(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)rn=!0;else{if(!yf(t,s)&&(n.flags&128)===0)return rn=!1,aE(t,n,s);rn=(t.flags&131072)!==0}else rn=!1,ae&&(n.flags&1048576)!==0&&cp(n,yu,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,h=l._init;if(l=h(l._payload),n.type=l,typeof l=="function")Ah(l)?(t=$s(l,t),n.tag=1,n=Dg(null,n,l,t,s)):(n.tag=0,n=cf(null,n,l,t,s));else{if(l!=null){if(h=l.$$typeof,h===lt){n.tag=11,n=Tg(null,n,l,t,s);break t}else if(h===V){n.tag=14,n=xg(null,n,l,t,s);break t}}throw n=Gt(l)||l,Error(a(306,n,""))}}return n;case 0:return cf(t,n,n.type,n.pendingProps,s);case 1:return l=n.type,h=$s(l,n.pendingProps),Dg(t,n,l,h,s);case 3:t:{if(Et(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var d=n.memoizedState;h=d.element,zh(t,n),Pl(n,l,null,s);var E=n.memoizedState;if(l=E.cache,zr(n,Qe,l),l!==d.cache&&Mh(n,[Qe],s,!0),zl(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Ig(t,n,l,s);break t}else if(l!==h){h=si(Error(a(424)),n),Vl(h),n=Ig(t,n,l,s);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Oe=Ai(t.firstChild),Cn=n,ae=!0,Bs=null,Fi=!0,s=fg(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Nl(),l===h){n=br(t,n,s);break t}hn(t,n,l,s)}n=n.child}return n;case 26:return ku(t,n),t===null?(s=Uy(n.type,null,n.pendingProps,null))?n.memoizedState=s:ae||(s=n.type,t=n.pendingProps,l=Zu(Q.current).createElement(s),l[Me]=n,l[Re]=t,dn(l,s,t),Ce(l),n.stateNode=l):n.memoizedState=Uy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Ut(n),t===null&&ae&&(l=n.stateNode=jy(n.type,n.pendingProps,Q.current),Cn=n,Fi=!0,h=Oe,ts(n.type)?(Xf=h,Oe=Ai(l.firstChild)):Oe=h),hn(t,n,n.pendingProps.children,s),ku(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ae&&((h=l=Oe)&&(l=OE(l,n.type,n.pendingProps,Fi),l!==null?(n.stateNode=l,Cn=n,Oe=Ai(l.firstChild),Fi=!1,h=!0):h=!1),h||qs(n)),Ut(n),h=n.type,d=n.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,$f(h,d)?l=null:E!==null&&$f(h,E)&&(n.flags|=32),n.memoizedState!==null&&(h=Fh(t,n,Z1,null,null,s),oo._currentValue=h),ku(t,n),hn(t,n,l,s),n.child;case 6:return t===null&&ae&&((t=s=Oe)&&(s=jE(s,n.pendingProps,Fi),s!==null?(n.stateNode=s,Cn=n,Oe=null,t=!0):t=!1),t||qs(n)),null;case 13:return Ng(t,n,s);case 4:return Et(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Ma(n,null,l,s):hn(t,n,l,s),n.child;case 11:return Tg(t,n,n.type,n.pendingProps,s);case 7:return hn(t,n,n.pendingProps,s),n.child;case 8:return hn(t,n,n.pendingProps.children,s),n.child;case 12:return hn(t,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,zr(n,n.type,l.value),hn(t,n,l.children,s),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Gs(n),h=vn(h),l=l(h),n.flags|=1,hn(t,n,l,s),n.child;case 14:return xg(t,n,n.type,n.pendingProps,s);case 15:return Ag(t,n,n.type,n.pendingProps,s);case 19:return Mg(t,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},t===null?(s=Uu(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=mr(t.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return wg(t,n,s);case 24:return Gs(n),l=vn(Qe),t===null?(h=Lh(),h===null&&(h=be,d=Oh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=s),h=d),n.memoizedState={parent:l,cache:h},Uh(n),zr(n,Qe,h)):((t.lanes&s)!==0&&(zh(t,n),Pl(n,null,null,s),zl()),h=t.memoizedState,d=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),zr(n,Qe,l)):(l=d.cache,zr(n,Qe,l),l!==h.cache&&Mh(n,[Qe],s,!0))),hn(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Sr(t){t.flags|=4}function jg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hy(n)){if(n=ui.current,n!==null&&((te&4194048)===te?Qi!==null:(te&62914560)!==te&&(te&536870912)===0||n!==Qi))throw kl=kh,vp;t.flags|=8192}}function zu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?jr():536870912,t.lanes|=n,ka|=n)}function $l(t,n){if(!ae)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function De(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function lE(t,n,s){var l=n.pendingProps;switch(Dh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(n),null;case 1:return De(n),null;case 3:return s=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),vr(Qe),Ct(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Il(n)?Sr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dp())),De(n),null;case 26:return s=n.memoizedState,t===null?(Sr(n),s!==null?(De(n),jg(n,s)):(De(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Sr(n),De(n),jg(n,s)):(De(n),n.flags&=-16777217):(t.memoizedProps!==l&&Sr(n),De(n),n.flags&=-16777217),null;case 27:jt(n),s=Q.current;var h=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Sr(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return De(n),null}t=gt.current,Il(n)?hp(n):(t=jy(h,l,s),n.stateNode=t,Sr(n))}return De(n),null;case 5:if(jt(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Sr(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return De(n),null}if(t=gt.current,Il(n))hp(n);else{switch(h=Zu(Q.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(s,{is:l.is}):h.createElement(s)}}t[Me]=n,t[Re]=l;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=t;t:switch(dn(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Sr(n)}}return De(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Sr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=Q.current,Il(n)){if(t=n.stateNode,s=n.memoizedProps,l=null,h=Cn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Me]=n,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Cy(t.nodeValue,s)),t||qs(n)}else t=Zu(t).createTextNode(l),t[Me]=n,n.stateNode=t}return De(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Il(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Me]=n}else Nl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;De(n),h=!1}else h=dp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Er(n),n):(Er(n),null)}if(Er(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),zu(n,n.updateQueue),De(n),null;case 4:return Ct(),t===null&&qf(n.stateNode.containerInfo),De(n),null;case 10:return vr(n.type),De(n),null;case 19:if(yt($e),h=n.memoizedState,h===null)return De(n),null;if(l=(n.flags&128)!==0,d=h.rendering,d===null)if(l)$l(h,!1);else{if(je!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Ou(t),d!==null){for(n.flags|=128,$l(h,!1),t=d.updateQueue,n.updateQueue=t,zu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)up(s,t),s=s.sibling;return F($e,$e.current&1|2),n.child}t=t.sibling}h.tail!==null&&ce()>qu&&(n.flags|=128,l=!0,$l(h,!1),n.lanes=4194304)}else{if(!l)if(t=Ou(d),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,zu(n,t),$l(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!ae)return De(n),null}else 2*ce()-h.renderingStartTime>qu&&s!==536870912&&(n.flags|=128,l=!0,$l(h,!1),n.lanes=4194304);h.isBackwards?(d.sibling=n.child,n.child=d):(t=h.last,t!==null?t.sibling=d:n.child=d,h.last=d)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=ce(),n.sibling=null,t=$e.current,F($e,l?t&1|2:t&1),n):(De(n),null);case 22:case 23:return Er(n),Hh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(De(n),n.subtreeFlags&6&&(n.flags|=8192)):De(n),s=n.updateQueue,s!==null&&zu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),t!==null&&yt(Fs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),vr(Qe),De(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function oE(t,n){switch(Dh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return vr(Qe),Ct(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return jt(n),null;case 13:if(Er(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Nl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return yt($e),null;case 4:return Ct(),null;case 10:return vr(n.type),null;case 22:case 23:return Er(n),Hh(),t!==null&&yt(Fs),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return vr(Qe),null;case 25:return null;default:return null}}function Lg(t,n){switch(Dh(n),n.tag){case 3:vr(Qe),Ct();break;case 26:case 27:case 5:jt(n);break;case 4:Ct();break;case 13:Er(n);break;case 19:yt($e);break;case 10:vr(n.type);break;case 22:case 23:Er(n),Hh(),t!==null&&yt(Fs);break;case 24:vr(Qe)}}function Yl(t,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&t)===t){l=void 0;var d=s.create,E=s.inst;l=d(),E.destroy=l}s=s.next}while(s!==h)}}catch(T){_e(n,n.return,T)}}function Qr(t,n,s){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,h=n;var M=s,W=T;try{W()}catch(nt){_e(h,M,nt)}}}l=l.next}while(l!==d)}}catch(nt){_e(n,n.return,nt)}}function kg(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{xp(n,s)}catch(l){_e(t,t.return,l)}}}function Ug(t,n,s){s.props=$s(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){_e(t,n,l)}}function Kl(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(h){_e(t,n,h)}}function $i(t,n){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(h){_e(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){_e(t,n,h)}else s.current=null}function zg(t){var n=t.type,s=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(h){_e(t,t.return,h)}}function vf(t,n,s){try{var l=t.stateNode;DE(l,t.type,s,n),l[Re]=n}catch(h){_e(t,t.return,h)}}function Pg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ts(t.type)||t.tag===4}function _f(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Pg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ts(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Xu));else if(l!==4&&(l===27&&ts(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Ef(t,n,s),t=t.sibling;t!==null;)Ef(t,n,s),t=t.sibling}function Pu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(l===27&&ts(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Pu(t,n,s),t=t.sibling;t!==null;)Pu(t,n,s),t=t.sibling}function Bg(t){var n=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);dn(n,l,s),n[Me]=t,n[Re]=s}catch(d){_e(t,t.return,d)}}var Tr=!1,ke=!1,bf=!1,qg=typeof WeakSet=="function"?WeakSet:Set,sn=null;function uE(t,n){if(t=t.containerInfo,Ff=rc,t=Jm(t),vh(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break t}var E=0,T=-1,M=-1,W=0,nt=0,ot=t,Z=null;e:for(;;){for(var J;ot!==s||h!==0&&ot.nodeType!==3||(T=E+h),ot!==d||l!==0&&ot.nodeType!==3||(M=E+l),ot.nodeType===3&&(E+=ot.nodeValue.length),(J=ot.firstChild)!==null;)Z=ot,ot=J;for(;;){if(ot===t)break e;if(Z===s&&++W===h&&(T=E),Z===d&&++nt===l&&(M=E),(J=ot.nextSibling)!==null)break;ot=Z,Z=ot.parentNode}ot=J}s=T===-1||M===-1?null:{start:T,end:M}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qf={focusedElem:t,selectionRange:s},rc=!1,sn=n;sn!==null;)if(n=sn,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,sn=t;else for(;sn!==null;){switch(n=sn,d=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=n,h=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var Lt=$s(s.type,h,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Lt,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Vt){_e(s,s.return,Vt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Kf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Kf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,sn=t;break}sn=n.return}}function Hg(t,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:$r(t,s),l&4&&Yl(5,s);break;case 1:if($r(t,s),l&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(E){_e(s,s.return,E)}else{var h=$s(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(E){_e(s,s.return,E)}}l&64&&kg(s),l&512&&Kl(s,s.return);break;case 3:if($r(t,s),l&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{xp(t,n)}catch(E){_e(s,s.return,E)}}break;case 27:n===null&&l&4&&Bg(s);case 26:case 5:$r(t,s),n===null&&l&4&&zg(s),l&512&&Kl(s,s.return);break;case 12:$r(t,s);break;case 13:$r(t,s),l&4&&Qg(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=vE.bind(null,s),LE(t,s))));break;case 22:if(l=s.memoizedState!==null||Tr,!l){n=n!==null&&n.memoizedState!==null||ke,h=Tr;var d=ke;Tr=l,(ke=n)&&!d?Yr(t,s,(s.subtreeFlags&8772)!==0):$r(t,s),Tr=h,ke=d}break;case 30:break;default:$r(t,s)}}function Gg(t){var n=t.alternate;n!==null&&(t.alternate=null,Gg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ki(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var xe=null,On=!1;function xr(t,n,s){for(s=s.child;s!==null;)Fg(t,n,s),s=s.sibling}function Fg(t,n,s){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(he,s)}catch{}switch(s.tag){case 26:ke||$i(s,n),xr(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ke||$i(s,n);var l=xe,h=On;ts(s.type)&&(xe=s.stateNode,On=!1),xr(t,n,s),ro(s.stateNode),xe=l,On=h;break;case 5:ke||$i(s,n);case 6:if(l=xe,h=On,xe=null,xr(t,n,s),xe=l,On=h,xe!==null)if(On)try{(xe.nodeType===9?xe.body:xe.nodeName==="HTML"?xe.ownerDocument.body:xe).removeChild(s.stateNode)}catch(d){_e(s,n,d)}else try{xe.removeChild(s.stateNode)}catch(d){_e(s,n,d)}break;case 18:xe!==null&&(On?(t=xe,My(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),fo(t)):My(xe,s.stateNode));break;case 4:l=xe,h=On,xe=s.stateNode.containerInfo,On=!0,xr(t,n,s),xe=l,On=h;break;case 0:case 11:case 14:case 15:ke||Qr(2,s,n),ke||Qr(4,s,n),xr(t,n,s);break;case 1:ke||($i(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Ug(s,n,l)),xr(t,n,s);break;case 21:xr(t,n,s);break;case 22:ke=(l=ke)||s.memoizedState!==null,xr(t,n,s),ke=l;break;default:xr(t,n,s)}}function Qg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fo(t)}catch(s){_e(n,n.return,s)}}function cE(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new qg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new qg),n;default:throw Error(a(435,t.tag))}}function Sf(t,n){var s=cE(t);n.forEach(function(l){var h=_E.bind(null,t,l);s.has(l)||(s.add(l),l.then(h,h))})}function Gn(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var h=s[l],d=t,E=n,T=E;t:for(;T!==null;){switch(T.tag){case 27:if(ts(T.type)){xe=T.stateNode,On=!1;break t}break;case 5:xe=T.stateNode,On=!1;break t;case 3:case 4:xe=T.stateNode.containerInfo,On=!0;break t}T=T.return}if(xe===null)throw Error(a(160));Fg(d,E,h),xe=null,On=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)$g(n,t),n=n.sibling}var xi=null;function $g(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gn(n,t),Fn(t),l&4&&(Qr(3,t,t.return),Yl(3,t),Qr(5,t,t.return));break;case 1:Gn(n,t),Fn(t),l&512&&(ke||s===null||$i(s,s.return)),l&64&&Tr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var h=xi;if(Gn(n,t),Fn(t),l&512&&(ke||s===null||$i(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){t:{l=t.type,s=t.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Li]||d[Me]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),dn(d,l,s),d[Me]=t,Ce(d),l=d;break t;case"link":var E=By("link","href",h).get(l+(s.href||""));if(E){for(var T=0;T<E.length;T++)if(d=E[T],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){E.splice(T,1);break e}}d=h.createElement(l),dn(d,l,s),h.head.appendChild(d);break;case"meta":if(E=By("meta","content",h).get(l+(s.content||""))){for(T=0;T<E.length;T++)if(d=E[T],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){E.splice(T,1);break e}}d=h.createElement(l),dn(d,l,s),h.head.appendChild(d);break;default:throw Error(a(468,l))}d[Me]=t,Ce(d),l=d}t.stateNode=l}else qy(h,t.type,t.stateNode);else t.stateNode=Py(h,l,t.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?qy(h,t.type,t.stateNode):Py(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&vf(t,t.memoizedProps,s.memoizedProps)}break;case 27:Gn(n,t),Fn(t),l&512&&(ke||s===null||$i(s,s.return)),s!==null&&l&4&&vf(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Gn(n,t),Fn(t),l&512&&(ke||s===null||$i(s,s.return)),t.flags&32){h=t.stateNode;try{ei(h,"")}catch(J){_e(t,t.return,J)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,vf(t,h,s!==null?s.memoizedProps:h)),l&1024&&(bf=!0);break;case 6:if(Gn(n,t),Fn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(J){_e(t,t.return,J)}}break;case 3:if(ec=null,h=xi,xi=Ju(n.containerInfo),Gn(n,t),xi=h,Fn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{fo(n.containerInfo)}catch(J){_e(t,t.return,J)}bf&&(bf=!1,Yg(t));break;case 4:l=xi,xi=Ju(t.stateNode.containerInfo),Gn(n,t),Fn(t),xi=l;break;case 12:Gn(n,t),Fn(t);break;case 13:Gn(n,t),Fn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Cf=ce()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 22:h=t.memoizedState!==null;var M=s!==null&&s.memoizedState!==null,W=Tr,nt=ke;if(Tr=W||h,ke=nt||M,Gn(n,t),ke=nt,Tr=W,Fn(t),l&8192)t:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(s===null||M||Tr||ke||Ys(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){M=s=n;try{if(d=M.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=M.stateNode;var ot=M.memoizedProps.style,Z=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;T.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(J){_e(M,M.return,J)}}}else if(n.tag===6){if(s===null){M=n;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(J){_e(M,M.return,J)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Sf(t,s))));break;case 19:Gn(n,t),Fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 30:break;case 21:break;default:Gn(n,t),Fn(t)}}function Fn(t){var n=t.flags;if(n&2){try{for(var s,l=t.return;l!==null;){if(Pg(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,d=_f(t);Pu(t,d,h);break;case 5:var E=s.stateNode;s.flags&32&&(ei(E,""),s.flags&=-33);var T=_f(t);Pu(t,T,E);break;case 3:case 4:var M=s.stateNode.containerInfo,W=_f(t);Ef(t,W,M);break;default:throw Error(a(161))}}catch(nt){_e(t,t.return,nt)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Yg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Yg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function $r(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Hg(t,n.alternate,n),n=n.sibling}function Ys(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Qr(4,n,n.return),Ys(n);break;case 1:$i(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Ug(n,n.return,s),Ys(n);break;case 27:ro(n.stateNode);case 26:case 5:$i(n,n.return),Ys(n);break;case 22:n.memoizedState===null&&Ys(n);break;case 30:Ys(n);break;default:Ys(n)}t=t.sibling}}function Yr(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,d=n,E=d.flags;switch(d.tag){case 0:case 11:case 15:Yr(h,d,s),Yl(4,d);break;case 1:if(Yr(h,d,s),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){_e(l,l.return,W)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)Tp(M[h],T)}catch(W){_e(l,l.return,W)}}s&&E&64&&kg(d),Kl(d,d.return);break;case 27:Bg(d);case 26:case 5:Yr(h,d,s),s&&l===null&&E&4&&zg(d),Kl(d,d.return);break;case 12:Yr(h,d,s);break;case 13:Yr(h,d,s),s&&E&4&&Qg(h,d);break;case 22:d.memoizedState===null&&Yr(h,d,s),Kl(d,d.return);break;case 30:break;default:Yr(h,d,s)}n=n.sibling}}function Tf(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Ol(s))}function xf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ol(t))}function Yi(t,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Kg(t,n,s,l),n=n.sibling}function Kg(t,n,s,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Yi(t,n,s,l),h&2048&&Yl(9,n);break;case 1:Yi(t,n,s,l);break;case 3:Yi(t,n,s,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ol(t)));break;case 12:if(h&2048){Yi(t,n,s,l),t=n.stateNode;try{var d=n.memoizedProps,E=d.id,T=d.onPostCommit;typeof T=="function"&&T(E,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){_e(n,n.return,M)}}else Yi(t,n,s,l);break;case 13:Yi(t,n,s,l);break;case 23:break;case 22:d=n.stateNode,E=n.alternate,n.memoizedState!==null?d._visibility&2?Yi(t,n,s,l):Wl(t,n):d._visibility&2?Yi(t,n,s,l):(d._visibility|=2,Oa(t,n,s,l,(n.subtreeFlags&10256)!==0)),h&2048&&Tf(E,n);break;case 24:Yi(t,n,s,l),h&2048&&xf(n.alternate,n);break;default:Yi(t,n,s,l)}}function Oa(t,n,s,l,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=t,E=n,T=s,M=l,W=E.flags;switch(E.tag){case 0:case 11:case 15:Oa(d,E,T,M,h),Yl(8,E);break;case 23:break;case 22:var nt=E.stateNode;E.memoizedState!==null?nt._visibility&2?Oa(d,E,T,M,h):Wl(d,E):(nt._visibility|=2,Oa(d,E,T,M,h)),h&&W&2048&&Tf(E.alternate,E);break;case 24:Oa(d,E,T,M,h),h&&W&2048&&xf(E.alternate,E);break;default:Oa(d,E,T,M,h)}n=n.sibling}}function Wl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,l=n,h=l.flags;switch(l.tag){case 22:Wl(s,l),h&2048&&Tf(l.alternate,l);break;case 24:Wl(s,l),h&2048&&xf(l.alternate,l);break;default:Wl(s,l)}n=n.sibling}}var Xl=8192;function ja(t){if(t.subtreeFlags&Xl)for(t=t.child;t!==null;)Wg(t),t=t.sibling}function Wg(t){switch(t.tag){case 26:ja(t),t.flags&Xl&&t.memoizedState!==null&&KE(xi,t.memoizedState,t.memoizedProps);break;case 5:ja(t);break;case 3:case 4:var n=xi;xi=Ju(t.stateNode.containerInfo),ja(t),xi=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Xl,Xl=16777216,ja(t),Xl=n):ja(t));break;default:ja(t)}}function Xg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Zl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];sn=l,Jg(l,t)}Xg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zg(t),t=t.sibling}function Zg(t){switch(t.tag){case 0:case 11:case 15:Zl(t),t.flags&2048&&Qr(9,t,t.return);break;case 3:Zl(t);break;case 12:Zl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Bu(t)):Zl(t);break;default:Zl(t)}}function Bu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];sn=l,Jg(l,t)}Xg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Qr(8,n,n.return),Bu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Bu(n));break;default:Bu(n)}t=t.sibling}}function Jg(t,n){for(;sn!==null;){var s=sn;switch(s.tag){case 0:case 11:case 15:Qr(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ol(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,sn=l;else t:for(s=t;sn!==null;){l=sn;var h=l.sibling,d=l.return;if(Gg(l),l===s){sn=null;break t}if(h!==null){h.return=d,sn=h;break t}sn=d}}}var hE={getCacheForType:function(t){var n=vn(Qe),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},fE=typeof WeakMap=="function"?WeakMap:Map,fe=0,be=null,Yt=null,te=0,de=0,Qn=null,Kr=!1,La=!1,Af=!1,Ar=0,je=0,Wr=0,Ks=0,wf=0,ci=0,ka=0,Jl=null,jn=null,Rf=!1,Cf=0,qu=1/0,Hu=null,Xr=null,fn=0,Zr=null,Ua=null,za=0,Df=0,If=null,ty=null,to=0,Nf=null;function $n(){if((fe&2)!==0&&te!==0)return te&-te;if(K.T!==null){var t=wa;return t!==0?t:Uf()}return Oi()}function ey(){ci===0&&(ci=(te&536870912)===0||ae?Or():536870912);var t=ui.current;return t!==null&&(t.flags|=32),ci}function Yn(t,n,s){(t===be&&(de===2||de===9)||t.cancelPendingCommit!==null)&&(Pa(t,0),Jr(t,te,ci,!1)),vi(t,s),((fe&2)===0||t!==be)&&(t===be&&((fe&2)===0&&(Ks|=s),je===4&&Jr(t,te,ci,!1)),Ki(t))}function ny(t,n,s){if((fe&6)!==0)throw Error(a(327));var l=!s&&(n&124)===0&&(n&t.expiredLanes)===0||An(t,n),h=l?pE(t,n):Of(t,n,!0),d=l;do{if(h===0){La&&!l&&Jr(t,n,0,!1);break}else{if(s=t.current.alternate,d&&!dE(s)){h=Of(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){n=E;t:{var T=t;h=Jl;var M=T.current.memoizedState.isDehydrated;if(M&&(Pa(T,E).flags|=256),E=Of(T,E,!1),E!==2){if(Af&&!M){T.errorRecoveryDisabledLanes|=d,Ks|=d,h=4;break t}d=jn,jn=h,d!==null&&(jn===null?jn=d:jn.push.apply(jn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Pa(t,0),Jr(t,n,0,!0);break}t:{switch(l=t,d=h,d){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Jr(l,n,ci,!Kr);break t;case 2:jn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=Cf+300-ce(),10<h)){if(Jr(l,n,ci,!Kr),xn(l,0,!0)!==0)break t;l.timeoutHandle=Ny(iy.bind(null,l,s,jn,Hu,Rf,n,ci,Ks,ka,Kr,d,2,-0,0),h);break t}iy(l,s,jn,Hu,Rf,n,ci,Ks,ka,Kr,d,0,-0,0)}}break}while(!0);Ki(t)}function iy(t,n,s,l,h,d,E,T,M,W,nt,ot,Z,J){if(t.timeoutHandle=-1,ot=n.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(lo={stylesheets:null,count:0,unsuspend:YE},Wg(n),ot=WE(),ot!==null)){t.cancelPendingCommit=ot(cy.bind(null,t,n,d,s,l,h,E,T,M,nt,1,Z,J)),Jr(t,d,E,!W);return}cy(t,n,d,s,l,h,E,T,M)}function dE(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var h=s[l],d=h.getSnapshot;h=h.value;try{if(!qn(d(),h))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Jr(t,n,s,l){n&=~wf,n&=~Ks,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var d=31-tn(h),E=1<<d;l[d]=-1,h&=~E}s!==0&&on(t,s,n)}function Gu(){return(fe&6)===0?(eo(0),!1):!0}function Vf(){if(Yt!==null){if(de===0)var t=Yt.return;else t=Yt,yr=Hs=null,Yh(t),Va=null,Fl=0,t=Yt;for(;t!==null;)Lg(t.alternate,t),t=t.return;Yt=null}}function Pa(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,NE(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Vf(),be=t,Yt=s=mr(t.current,null),te=n,de=0,Qn=null,Kr=!1,La=An(t,n),Af=!1,ka=ci=wf=Ks=Wr=je=0,jn=Jl=null,Rf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-tn(l),d=1<<h;n|=t[h],l&=~d}return Ar=n,fu(),s}function ry(t,n){Ft=null,K.H=Nu,n===Ll||n===bu?(n=bp(),de=3):n===vp?(n=bp(),de=4):de=n===Sg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Qn=n,Yt===null&&(je=1,Lu(t,si(n,t.current)))}function sy(){var t=K.H;return K.H=Nu,t===null?Nu:t}function ay(){var t=K.A;return K.A=hE,t}function Mf(){je=4,Kr||(te&4194048)!==te&&ui.current!==null||(La=!0),(Wr&134217727)===0&&(Ks&134217727)===0||be===null||Jr(be,te,ci,!1)}function Of(t,n,s){var l=fe;fe|=2;var h=sy(),d=ay();(be!==t||te!==n)&&(Hu=null,Pa(t,n)),n=!1;var E=je;t:do try{if(de!==0&&Yt!==null){var T=Yt,M=Qn;switch(de){case 8:Vf(),E=6;break t;case 3:case 2:case 9:case 6:ui.current===null&&(n=!0);var W=de;if(de=0,Qn=null,Ba(t,T,M,W),s&&La){E=0;break t}break;default:W=de,de=0,Qn=null,Ba(t,T,M,W)}}mE(),E=je;break}catch(nt){ry(t,nt)}while(!0);return n&&t.shellSuspendCounter++,yr=Hs=null,fe=l,K.H=h,K.A=d,Yt===null&&(be=null,te=0,fu()),E}function mE(){for(;Yt!==null;)ly(Yt)}function pE(t,n){var s=fe;fe|=2;var l=sy(),h=ay();be!==t||te!==n?(Hu=null,qu=ce()+500,Pa(t,n)):La=An(t,n);t:do try{if(de!==0&&Yt!==null){n=Yt;var d=Qn;e:switch(de){case 1:de=0,Qn=null,Ba(t,n,d,1);break;case 2:case 9:if(_p(d)){de=0,Qn=null,oy(n);break}n=function(){de!==2&&de!==9||be!==t||(de=7),Ki(t)},d.then(n,n);break t;case 3:de=7;break t;case 4:de=5;break t;case 7:_p(d)?(de=0,Qn=null,oy(n)):(de=0,Qn=null,Ba(t,n,d,7));break;case 5:var E=null;switch(Yt.tag){case 26:E=Yt.memoizedState;case 5:case 27:var T=Yt;if(!E||Hy(E)){de=0,Qn=null;var M=T.sibling;if(M!==null)Yt=M;else{var W=T.return;W!==null?(Yt=W,Fu(W)):Yt=null}break e}}de=0,Qn=null,Ba(t,n,d,5);break;case 6:de=0,Qn=null,Ba(t,n,d,6);break;case 8:Vf(),je=6;break t;default:throw Error(a(462))}}gE();break}catch(nt){ry(t,nt)}while(!0);return yr=Hs=null,K.H=l,K.A=h,fe=s,Yt!==null?0:(be=null,te=0,fu(),je)}function gE(){for(;Yt!==null&&!Xe();)ly(Yt)}function ly(t){var n=Og(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,n===null?Fu(t):Yt=n}function oy(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=Cg(s,n,n.pendingProps,n.type,void 0,te);break;case 11:n=Cg(s,n,n.pendingProps,n.type.render,n.ref,te);break;case 5:Yh(n);default:Lg(s,n),n=Yt=up(n,Ar),n=Og(s,n,Ar)}t.memoizedProps=t.pendingProps,n===null?Fu(t):Yt=n}function Ba(t,n,s,l){yr=Hs=null,Yh(n),Va=null,Fl=0;var h=n.return;try{if(sE(t,h,n,s,te)){je=1,Lu(t,si(s,t.current)),Yt=null;return}}catch(d){if(h!==null)throw Yt=h,d;je=1,Lu(t,si(s,t.current)),Yt=null;return}n.flags&32768?(ae||l===1?t=!0:La||(te&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=ui.current,l!==null&&l.tag===13&&(l.flags|=16384))),uy(n,t)):Fu(n)}function Fu(t){var n=t;do{if((n.flags&32768)!==0){uy(n,Kr);return}t=n.return;var s=lE(n.alternate,n,Ar);if(s!==null){Yt=s;return}if(n=n.sibling,n!==null){Yt=n;return}Yt=n=t}while(n!==null);je===0&&(je=5)}function uy(t,n){do{var s=oE(t.alternate,t);if(s!==null){s.flags&=32767,Yt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){Yt=t;return}Yt=t=s}while(t!==null);je=6,Yt=null}function cy(t,n,s,l,h,d,E,T,M){t.cancelPendingCommit=null;do Qu();while(fn!==0);if((fe&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(d=n.lanes|n.childLanes,d|=Th,bs(t,s,d,E,T,M),t===be&&(Yt=be=null,te=0),Ua=n,Zr=t,za=s,Df=d,If=h,ty=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,EE(Ii,function(){return py(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=pt.p,pt.p=2,E=fe,fe|=4;try{uE(t,n,s)}finally{fe=E,pt.p=h,K.T=l}}fn=1,hy(),fy(),dy()}}function hy(){if(fn===1){fn=0;var t=Zr,n=Ua,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=K.T,K.T=null;var l=pt.p;pt.p=2;var h=fe;fe|=4;try{$g(n,t);var d=Qf,E=Jm(t.containerInfo),T=d.focusedElem,M=d.selectionRange;if(E!==T&&T&&T.ownerDocument&&Zm(T.ownerDocument.documentElement,T)){if(M!==null&&vh(T)){var W=M.start,nt=M.end;if(nt===void 0&&(nt=W),"selectionStart"in T)T.selectionStart=W,T.selectionEnd=Math.min(nt,T.value.length);else{var ot=T.ownerDocument||document,Z=ot&&ot.defaultView||window;if(Z.getSelection){var J=Z.getSelection(),Lt=T.textContent.length,Vt=Math.min(M.start,Lt),ye=M.end===void 0?Vt:Math.min(M.end,Lt);!J.extend&&Vt>ye&&(E=ye,ye=Vt,Vt=E);var q=Xm(T,Vt),z=Xm(T,ye);if(q&&z&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==z.node||J.focusOffset!==z.offset)){var Y=ot.createRange();Y.setStart(q.node,q.offset),J.removeAllRanges(),Vt>ye?(J.addRange(Y),J.extend(z.node,z.offset)):(Y.setEnd(z.node,z.offset),J.addRange(Y))}}}}for(ot=[],J=T;J=J.parentNode;)J.nodeType===1&&ot.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ot.length;T++){var rt=ot[T];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}rc=!!Ff,Qf=Ff=null}finally{fe=h,pt.p=l,K.T=s}}t.current=n,fn=2}}function fy(){if(fn===2){fn=0;var t=Zr,n=Ua,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=K.T,K.T=null;var l=pt.p;pt.p=2;var h=fe;fe|=4;try{Hg(t,n.alternate,n)}finally{fe=h,pt.p=l,K.T=s}}fn=3}}function dy(){if(fn===4||fn===3){fn=0,Ze();var t=Zr,n=Ua,s=za,l=ty;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?fn=5:(fn=0,Ua=Zr=null,my(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Xr=null),Lr(s),n=n.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(he,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=K.T,h=pt.p,pt.p=2,K.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];d(T.value,{componentStack:T.stack})}}finally{K.T=n,pt.p=h}}(za&3)!==0&&Qu(),Ki(t),h=t.pendingLanes,(s&4194090)!==0&&(h&42)!==0?t===Nf?to++:(to=0,Nf=t):to=0,eo(0)}}function my(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ol(n)))}function Qu(t){return hy(),fy(),dy(),py()}function py(){if(fn!==5)return!1;var t=Zr,n=Df;Df=0;var s=Lr(za),l=K.T,h=pt.p;try{pt.p=32>s?32:s,K.T=null,s=If,If=null;var d=Zr,E=za;if(fn=0,Ua=Zr=null,za=0,(fe&6)!==0)throw Error(a(331));var T=fe;if(fe|=4,Zg(d.current),Kg(d,d.current,E,s),fe=T,eo(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(he,d)}catch{}return!0}finally{pt.p=h,K.T=l,my(t,n)}}function gy(t,n,s){n=si(s,n),n=uf(t.stateNode,n,2),t=qr(t,n,2),t!==null&&(vi(t,2),Ki(t))}function _e(t,n,s){if(t.tag===3)gy(t,t,s);else for(;n!==null;){if(n.tag===3){gy(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xr===null||!Xr.has(l))){t=si(s,t),s=Eg(2),l=qr(n,s,2),l!==null&&(bg(s,l,n,t),vi(l,2),Ki(l));break}}n=n.return}}function jf(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new fE;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(s)||(Af=!0,h.add(s),t=yE.bind(null,t,n,s),n.then(t,t))}function yE(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,be===t&&(te&s)===s&&(je===4||je===3&&(te&62914560)===te&&300>ce()-Cf?(fe&2)===0&&Pa(t,0):wf|=s,ka===te&&(ka=0)),Ki(t)}function yy(t,n){n===0&&(n=jr()),t=Sa(t,n),t!==null&&(vi(t,n),Ki(t))}function vE(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),yy(t,s)}function _E(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),yy(t,s)}function EE(t,n){return Te(t,n)}var $u=null,qa=null,Lf=!1,Yu=!1,kf=!1,Ws=0;function Ki(t){t!==qa&&t.next===null&&(qa===null?$u=qa=t:qa=qa.next=t),Yu=!0,Lf||(Lf=!0,SE())}function eo(t,n){if(!kf&&Yu){kf=!0;do for(var s=!1,l=$u;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-tn(42|t)+1)-1,d&=h&~(E&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,by(l,d))}else d=te,d=xn(l,l===be?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||An(l,d)||(s=!0,by(l,d));l=l.next}while(s);kf=!1}}function bE(){vy()}function vy(){Yu=Lf=!1;var t=0;Ws!==0&&(IE()&&(t=Ws),Ws=0);for(var n=ce(),s=null,l=$u;l!==null;){var h=l.next,d=_y(l,n);d===0?(l.next=null,s===null?$u=h:s.next=h,h===null&&(qa=s)):(s=l,(t!==0||(d&3)!==0)&&(Yu=!0)),l=h}eo(t)}function _y(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-tn(d),T=1<<E,M=h[E];M===-1?((T&s)===0||(T&l)!==0)&&(h[E]=sr(T,n)):M<=n&&(t.expiredLanes|=T),d&=~T}if(n=be,s=te,s=xn(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===n&&(de===2||de===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ve(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||An(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(l!==null&&Ve(l),Lr(s)){case 2:case 8:s=gi;break;case 32:s=Ii;break;case 268435456:s=nr;break;default:s=Ii}return l=Ey.bind(null,t),s=Te(s,l),t.callbackPriority=n,t.callbackNode=s,n}return l!==null&&l!==null&&Ve(l),t.callbackPriority=2,t.callbackNode=null,2}function Ey(t,n){if(fn!==0&&fn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Qu()&&t.callbackNode!==s)return null;var l=te;return l=xn(t,t===be?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ny(t,l,n),_y(t,ce()),t.callbackNode!=null&&t.callbackNode===s?Ey.bind(null,t):null)}function by(t,n){if(Qu())return null;ny(t,n,!0)}function SE(){VE(function(){(fe&6)!==0?Te(Xn,bE):vy()})}function Uf(){return Ws===0&&(Ws=Or()),Ws}function Sy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ca(""+t)}function Ty(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function TE(t,n,s,l,h){if(n==="submit"&&s&&s.stateNode===h){var d=Sy((h[Re]||null).action),E=l.submitter;E&&(n=(n=E[Re]||null)?Sy(n.formAction):E.getAttribute("formAction"),n!==null&&(d=n,E=null));var T=new ha("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ws!==0){var M=E?Ty(h,E):new FormData(h);rf(s,{pending:!0,data:M,method:h.method,action:d},null,M)}}else typeof d=="function"&&(T.preventDefault(),M=E?Ty(h,E):new FormData(h),rf(s,{pending:!0,data:M,method:h.method,action:d},d,M))},currentTarget:h}]})}}for(var zf=0;zf<Sh.length;zf++){var Pf=Sh[zf],xE=Pf.toLowerCase(),AE=Pf[0].toUpperCase()+Pf.slice(1);Ti(xE,"on"+AE)}Ti(np,"onAnimationEnd"),Ti(ip,"onAnimationIteration"),Ti(rp,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(q1,"onTransitionRun"),Ti(H1,"onTransitionStart"),Ti(G1,"onTransitionCancel"),Ti(sp,"onTransitionEnd"),O("onMouseEnter",["mouseout","mouseover"]),O("onMouseLeave",["mouseout","mouseover"]),O("onPointerEnter",["pointerout","pointerover"]),O("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(no));function xy(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],h=l.event;l=l.listeners;t:{var d=void 0;if(n)for(var E=l.length-1;0<=E;E--){var T=l[E],M=T.instance,W=T.currentTarget;if(T=T.listener,M!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=W;try{d(h)}catch(nt){ju(nt)}h.currentTarget=null,d=M}else for(E=0;E<l.length;E++){if(T=l[E],M=T.instance,W=T.currentTarget,T=T.listener,M!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=W;try{d(h)}catch(nt){ju(nt)}h.currentTarget=null,d=M}}}}function Kt(t,n){var s=n[Ss];s===void 0&&(s=n[Ss]=new Set);var l=t+"__bubble";s.has(l)||(Ay(n,t,2,!1),s.add(l))}function Bf(t,n,s){var l=0;n&&(l|=4),Ay(s,t,l,n)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function qf(t){if(!t[Ku]){t[Ku]=!0,xs.forEach(function(s){s!=="selectionchange"&&(wE.has(s)||Bf(s,!1,t),Bf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ku]||(n[Ku]=!0,Bf("selectionchange",!1,n))}}function Ay(t,n,s,l){switch(Ky(n)){case 2:var h=JE;break;case 8:h=tb;break;default:h=nd}s=h.bind(null,n,s,t),h=void 0,!ii||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,s,{capture:!0,passive:h}):t.addEventListener(n,s,!0):h!==void 0?t.addEventListener(n,s,{passive:h}):t.addEventListener(n,s,!1)}function Hf(t,n,s,l,h){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===h)break;if(E===4)for(E=l.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;T!==null;){if(E=Ei(T),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){l=d=E;continue t}T=T.parentNode}}l=l.return}Xo(function(){var W=d,nt=ni(s),ot=[];t:{var Z=ap.get(t);if(Z!==void 0){var J=ha,Lt=t;switch(t){case"keypress":if(Pi(s)===0)break t;case"keydown":case"keyup":J=ya;break;case"focusin":Lt="focus",J=ma;break;case"focusout":Lt="blur",J=ma;break;case"beforeblur":case"afterblur":J=ma;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=su;break;case np:case ip:case rp:J=pa;break;case sp:J=lu;break;case"scroll":case"scrollend":J=Zo;break;case"wheel":J=va;break;case"copy":case"cut":case"paste":J=ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=wl;break;case"toggle":case"beforetoggle":J=uu}var Vt=(n&4)!==0,ye=!Vt&&(t==="scroll"||t==="scrollend"),q=Vt?Z!==null?Z+"Capture":null:Z;Vt=[];for(var z=W,Y;z!==null;){var rt=z;if(Y=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||Y===null||q===null||(rt=Ds(z,q),rt!=null&&Vt.push(io(z,rt,Y))),ye)break;z=z.return}0<Vt.length&&(Z=new J(Z,Lt,null,s,nt),ot.push({event:Z,listeners:Vt}))}}if((n&7)===0){t:{if(Z=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",Z&&s!==or&&(Lt=s.relatedTarget||s.fromElement)&&(Ei(Lt)||Lt[Nn]))break t;if((J||Z)&&(Z=nt.window===nt?nt:(Z=nt.ownerDocument)?Z.defaultView||Z.parentWindow:window,J?(Lt=s.relatedTarget||s.toElement,J=W,Lt=Lt?Ei(Lt):null,Lt!==null&&(ye=c(Lt),Vt=Lt.tag,Lt!==ye||Vt!==5&&Vt!==27&&Vt!==6)&&(Lt=null)):(J=null,Lt=W),J!==Lt)){if(Vt=ri,rt="onMouseLeave",q="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(Vt=wl,rt="onPointerLeave",q="onPointerEnter",z="pointer"),ye=J==null?Z:ti(J),Y=Lt==null?Z:ti(Lt),Z=new Vt(rt,z+"leave",J,s,nt),Z.target=ye,Z.relatedTarget=Y,rt=null,Ei(nt)===W&&(Vt=new Vt(q,z+"enter",Lt,s,nt),Vt.target=Y,Vt.relatedTarget=ye,rt=Vt),ye=rt,J&&Lt)e:{for(Vt=J,q=Lt,z=0,Y=Vt;Y;Y=Ha(Y))z++;for(Y=0,rt=q;rt;rt=Ha(rt))Y++;for(;0<z-Y;)Vt=Ha(Vt),z--;for(;0<Y-z;)q=Ha(q),Y--;for(;z--;){if(Vt===q||q!==null&&Vt===q.alternate)break e;Vt=Ha(Vt),q=Ha(q)}Vt=null}else Vt=null;J!==null&&wy(ot,Z,J,Vt,!1),Lt!==null&&ye!==null&&wy(ot,ye,Lt,Vt,!0)}}t:{if(Z=W?ti(W):window,J=Z.nodeName&&Z.nodeName.toLowerCase(),J==="select"||J==="input"&&Z.type==="file")var Rt=Fm;else if(Fe(Z))if(Qm)Rt=z1;else{Rt=k1;var $t=L1}else J=Z.nodeName,!J||J.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&_l(W.elementType)&&(Rt=Fm):Rt=U1;if(Rt&&(Rt=Rt(t,W))){dr(ot,Rt,s,nt);break t}$t&&$t(t,Z,W),t==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&kr(Z,"number",Z.value)}switch($t=W?ti(W):window,t){case"focusin":(Fe($t)||$t.contentEditable==="true")&&(_a=$t,_h=W,Dl=null);break;case"focusout":Dl=_h=_a=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,tp(ot,s,nt);break;case"selectionchange":if(B1)break;case"keydown":case"keyup":tp(ot,s,nt)}var It;if(Hi)t:{switch(t){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Zt?et(t,s)&&(Mt="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Mt="onCompositionStart");Mt&&(_&&s.locale!=="ko"&&(Zt||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Zt&&(It=bl()):(zi=nt,Ur="value"in zi?zi.value:zi.textContent,Zt=!0)),$t=Wu(W,Mt),0<$t.length&&(Mt=new xl(Mt,t,null,s,nt),ot.push({event:Mt,listeners:$t}),It?Mt.data=It:(It=vt(s),It!==null&&(Mt.data=It)))),(It=y?Ge(t,s):Jt(t,s))&&(Mt=Wu(W,"onBeforeInput"),0<Mt.length&&($t=new xl("onBeforeInput","beforeinput",null,s,nt),ot.push({event:$t,listeners:Mt}),$t.data=It)),TE(ot,t,W,s,nt)}xy(ot,n)})}function io(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Wu(t,n){for(var s=n+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ds(t,s),h!=null&&l.unshift(io(t,h,d)),h=Ds(t,n),h!=null&&l.push(io(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wy(t,n,s,l,h){for(var d=n._reactName,E=[];s!==null&&s!==l;){var T=s,M=T.alternate,W=T.stateNode;if(T=T.tag,M!==null&&M===l)break;T!==5&&T!==26&&T!==27||W===null||(M=W,h?(W=Ds(s,d),W!=null&&E.unshift(io(s,W,M))):h||(W=Ds(s,d),W!=null&&E.push(io(s,W,M)))),s=s.return}E.length!==0&&t.push({event:n,listeners:E})}var RE=/\r\n?/g,CE=/\u0000|\uFFFD/g;function Ry(t){return(typeof t=="string"?t:""+t).replace(RE,`
`).replace(CE,"")}function Cy(t,n){return n=Ry(n),Ry(t)===n}function Xu(){}function ge(t,n,s,l,h,d){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||ei(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&ei(t,""+l);break;case"className":_t(t,"class",l);break;case"tabIndex":_t(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_t(t,s,l);break;case"style":vl(t,l,d);break;case"data":if(n!=="object"){_t(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ca(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(n!=="input"&&ge(t,n,"name",h.name,h,null),ge(t,n,"formEncType",h.formEncType,h,null),ge(t,n,"formMethod",h.formMethod,h,null),ge(t,n,"formTarget",h.formTarget,h,null)):(ge(t,n,"encType",h.encType,h,null),ge(t,n,"method",h.method,h,null),ge(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ca(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Xu);break;case"onScroll":l!=null&&Kt("scroll",t);break;case"onScrollEnd":l!=null&&Kt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Kt("beforetoggle",t),Kt("toggle",t),dt(t,"popover",l);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":dt(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=fh.get(s)||s,dt(t,s,l))}}function Gf(t,n,s,l,h,d){switch(s){case"style":vl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?ei(t,l):(typeof l=="number"||typeof l=="bigint")&&ei(t,""+l);break;case"onScroll":l!=null&&Kt("scroll",t);break;case"onScrollEnd":l!=null&&Kt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ar.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),n=s.slice(2,h?s.length-7:void 0),d=t[Re]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,l,h);break t}s in t?t[s]=l:l===!0?t.setAttribute(s,""):dt(t,s,l)}}}function dn(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",t),Kt("load",t);var l=!1,h=!1,d;for(d in s)if(s.hasOwnProperty(d)){var E=s[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ge(t,n,d,E,s,null)}}h&&ge(t,n,"srcSet",s.srcSet,s,null),l&&ge(t,n,"src",s.src,s,null);return;case"input":Kt("invalid",t);var T=d=E=h=null,M=null,W=null;for(l in s)if(s.hasOwnProperty(l)){var nt=s[l];if(nt!=null)switch(l){case"name":h=nt;break;case"type":E=nt;break;case"checked":M=nt;break;case"defaultChecked":W=nt;break;case"value":d=nt;break;case"defaultValue":T=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(a(137,n));break;default:ge(t,n,l,nt,s,null)}}ws(t,d,T,M,W,E,h,!1),ua(t);return;case"select":Kt("invalid",t),l=E=d=null;for(h in s)if(s.hasOwnProperty(h)&&(T=s[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:ge(t,n,h,T,s,null)}n=d,s=E,t.multiple=!!l,n!=null?lr(t,!!l,n,!1):s!=null&&lr(t,!!l,s,!0);return;case"textarea":Kt("invalid",t),d=h=l=null;for(E in s)if(s.hasOwnProperty(E)&&(T=s[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:ge(t,n,E,T,s,null)}Rs(t,l,h,d),ua(t);return;case"option":for(M in s)if(s.hasOwnProperty(M)&&(l=s[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ge(t,n,M,l,s,null)}return;case"dialog":Kt("beforetoggle",t),Kt("toggle",t),Kt("cancel",t),Kt("close",t);break;case"iframe":case"object":Kt("load",t);break;case"video":case"audio":for(l=0;l<no.length;l++)Kt(no[l],t);break;case"image":Kt("error",t),Kt("load",t);break;case"details":Kt("toggle",t);break;case"embed":case"source":case"link":Kt("error",t),Kt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in s)if(s.hasOwnProperty(W)&&(l=s[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ge(t,n,W,l,s,null)}return;default:if(_l(n)){for(nt in s)s.hasOwnProperty(nt)&&(l=s[nt],l!==void 0&&Gf(t,n,nt,l,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(l=s[T],l!=null&&ge(t,n,T,l,s,null))}function DE(t,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,T=null,M=null,W=null,nt=null;for(J in s){var ot=s[J];if(s.hasOwnProperty(J)&&ot!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":M=ot;default:l.hasOwnProperty(J)||ge(t,n,J,null,l,ot)}}for(var Z in l){var J=l[Z];if(ot=s[Z],l.hasOwnProperty(Z)&&(J!=null||ot!=null))switch(Z){case"type":d=J;break;case"name":h=J;break;case"checked":W=J;break;case"defaultChecked":nt=J;break;case"value":E=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,n));break;default:J!==ot&&ge(t,n,Z,J,l,ot)}}Bn(t,E,T,M,W,nt,d,h);return;case"select":J=E=T=Z=null;for(d in s)if(M=s[d],s.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":J=M;default:l.hasOwnProperty(d)||ge(t,n,d,null,l,M)}for(h in l)if(d=l[h],M=s[h],l.hasOwnProperty(h)&&(d!=null||M!=null))switch(h){case"value":Z=d;break;case"defaultValue":T=d;break;case"multiple":E=d;default:d!==M&&ge(t,n,h,d,l,M)}n=T,s=E,l=J,Z!=null?lr(t,!!s,Z,!1):!!l!=!!s&&(n!=null?lr(t,!!s,n,!0):lr(t,!!s,s?[]:"",!1));return;case"textarea":J=Z=null;for(T in s)if(h=s[T],s.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ge(t,n,T,null,l,h)}for(E in l)if(h=l[E],d=s[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":Z=h;break;case"defaultValue":J=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==d&&ge(t,n,E,h,l,d)}me(t,Z,J);return;case"option":for(var Lt in s)if(Z=s[Lt],s.hasOwnProperty(Lt)&&Z!=null&&!l.hasOwnProperty(Lt))switch(Lt){case"selected":t.selected=!1;break;default:ge(t,n,Lt,null,l,Z)}for(M in l)if(Z=l[M],J=s[M],l.hasOwnProperty(M)&&Z!==J&&(Z!=null||J!=null))switch(M){case"selected":t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ge(t,n,M,Z,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in s)Z=s[Vt],s.hasOwnProperty(Vt)&&Z!=null&&!l.hasOwnProperty(Vt)&&ge(t,n,Vt,null,l,Z);for(W in l)if(Z=l[W],J=s[W],l.hasOwnProperty(W)&&Z!==J&&(Z!=null||J!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,n));break;default:ge(t,n,W,Z,l,J)}return;default:if(_l(n)){for(var ye in s)Z=s[ye],s.hasOwnProperty(ye)&&Z!==void 0&&!l.hasOwnProperty(ye)&&Gf(t,n,ye,void 0,l,Z);for(nt in l)Z=l[nt],J=s[nt],!l.hasOwnProperty(nt)||Z===J||Z===void 0&&J===void 0||Gf(t,n,nt,Z,l,J);return}}for(var q in s)Z=s[q],s.hasOwnProperty(q)&&Z!=null&&!l.hasOwnProperty(q)&&ge(t,n,q,null,l,Z);for(ot in l)Z=l[ot],J=s[ot],!l.hasOwnProperty(ot)||Z===J||Z==null&&J==null||ge(t,n,ot,Z,l,J)}var Ff=null,Qf=null;function Zu(t){return t.nodeType===9?t:t.ownerDocument}function Dy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function $f(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Yf=null;function IE(){var t=window.event;return t&&t.type==="popstate"?t===Yf?!1:(Yf=t,!0):(Yf=null,!1)}var Ny=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,VE=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch(ME)}:Ny;function ME(t){setTimeout(function(){throw t})}function ts(t){return t==="head"}function My(t,n){var s=n,l=0,h=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(0<l&&8>l){s=l;var E=t.ownerDocument;if(s&1&&ro(E.documentElement),s&2&&ro(E.body),s&4)for(s=E.head,ro(s),E=s.firstChild;E;){var T=E.nextSibling,M=E.nodeName;E[Li]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||s.removeChild(E),E=T}}if(h===0){t.removeChild(d),fo(n);return}h--}else s==="$"||s==="$?"||s==="$!"?h++:l=s.charCodeAt(0)-48;else l=0;s=d}while(s);fo(n)}function Kf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Kf(s),ki(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function OE(t,n,s,l){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Li])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ai(t.nextSibling),t===null)break}return null}function jE(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ai(t.nextSibling),t===null))return null;return t}function Wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function LE(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ai(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Xf=null;function Oy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function jy(t,n,s){switch(n=Zu(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function ro(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ki(t)}var hi=new Map,Ly=new Set;function Ju(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var wr=pt.d;pt.d={f:kE,r:UE,D:zE,C:PE,L:BE,m:qE,X:GE,S:HE,M:FE};function kE(){var t=wr.f(),n=Gu();return t||n}function UE(t){var n=Jn(t);n!==null&&n.tag===5&&n.type==="form"?ng(n):wr.r(t)}var Ga=typeof document>"u"?null:document;function ky(t,n,s){var l=Ga;if(l&&typeof n=="string"&&n){var h=ze(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),Ly.has(h)||(Ly.add(h),t={rel:t,crossOrigin:s,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),dn(n,"link",t),Ce(n),l.head.appendChild(n)))}}function zE(t){wr.D(t),ky("dns-prefetch",t,null)}function PE(t,n){wr.C(t,n),ky("preconnect",t,n)}function BE(t,n,s){wr.L(t,n,s);var l=Ga;if(l&&t&&n){var h='link[rel="preload"][as="'+ze(n)+'"]';n==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+ze(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+ze(s.imageSizes)+'"]')):h+='[href="'+ze(t)+'"]';var d=h;switch(n){case"style":d=Fa(t);break;case"script":d=Qa(t)}hi.has(d)||(t=b({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),hi.set(d,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(so(d))||n==="script"&&l.querySelector(ao(d))||(n=l.createElement("link"),dn(n,"link",t),Ce(n),l.head.appendChild(n)))}}function qE(t,n){wr.m(t,n);var s=Ga;if(s&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+ze(l)+'"][href="'+ze(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Qa(t)}if(!hi.has(d)&&(t=b({rel:"modulepreload",href:t},n),hi.set(d,t),s.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ao(d)))return}l=s.createElement("link"),dn(l,"link",t),Ce(l),s.head.appendChild(l)}}}function HE(t,n,s){wr.S(t,n,s);var l=Ga;if(l&&t){var h=un(l).hoistableStyles,d=Fa(t);n=n||"default";var E=h.get(d);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(so(d)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},s),(s=hi.get(d))&&Zf(t,s);var M=E=l.createElement("link");Ce(M),dn(M,"link",t),M._p=new Promise(function(W,nt){M.onload=W,M.onerror=nt}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,tc(E,n,l)}E={type:"stylesheet",instance:E,count:1,state:T},h.set(d,E)}}}function GE(t,n){wr.X(t,n);var s=Ga;if(s&&t){var l=un(s).hoistableScripts,h=Qa(t),d=l.get(h);d||(d=s.querySelector(ao(h)),d||(t=b({src:t,async:!0},n),(n=hi.get(h))&&Jf(t,n),d=s.createElement("script"),Ce(d),dn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function FE(t,n){wr.M(t,n);var s=Ga;if(s&&t){var l=un(s).hoistableScripts,h=Qa(t),d=l.get(h);d||(d=s.querySelector(ao(h)),d||(t=b({src:t,async:!0,type:"module"},n),(n=hi.get(h))&&Jf(t,n),d=s.createElement("script"),Ce(d),dn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Uy(t,n,s,l){var h=(h=Q.current)?Ju(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Fa(s.href),s=un(h).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Fa(s.href);var d=un(h).hoistableStyles,E=d.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=h.querySelector(so(t)))&&!d._p&&(E.instance=d,E.state.loading=5),hi.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},hi.set(t,s),d||QE(h,t,s,E.state))),n&&l===null)throw Error(a(528,""));return E}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Qa(s),s=un(h).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Fa(t){return'href="'+ze(t)+'"'}function so(t){return'link[rel="stylesheet"]['+t+"]"}function zy(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function QE(t,n,s,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),dn(n,"link",s),Ce(n),t.head.appendChild(n))}function Qa(t){return'[src="'+ze(t)+'"]'}function ao(t){return"script[async]"+t}function Py(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+ze(s.href)+'"]');if(l)return n.instance=l,Ce(l),l;var h=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ce(l),dn(l,"style",h),tc(l,s.precedence,t),n.instance=l;case"stylesheet":h=Fa(s.href);var d=t.querySelector(so(h));if(d)return n.state.loading|=4,n.instance=d,Ce(d),d;l=zy(s),(h=hi.get(h))&&Zf(l,h),d=(t.ownerDocument||t).createElement("link"),Ce(d);var E=d;return E._p=new Promise(function(T,M){E.onload=T,E.onerror=M}),dn(d,"link",l),n.state.loading|=4,tc(d,s.precedence,t),n.instance=d;case"script":return d=Qa(s.src),(h=t.querySelector(ao(d)))?(n.instance=h,Ce(h),h):(l=s,(h=hi.get(d))&&(l=b({},s),Jf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ce(h),dn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,tc(l,s.precedence,t));return n.instance}function tc(t,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Zf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Jf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var ec=null;function By(t,n,s){if(ec===null){var l=new Map,h=ec=new Map;h.set(s,l)}else h=ec,l=h.get(s),l||(l=new Map,h.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var d=s[h];if(!(d[Li]||d[Me]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(n)||"";E=t+E;var T=l.get(E);T?T.push(d):l.set(E,[d])}}return l}function qy(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function $E(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Hy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var lo=null;function YE(){}function KE(t,n,s){if(lo===null)throw Error(a(475));var l=lo;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=Fa(s.href),d=t.querySelector(so(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=nc.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=d,Ce(d);return}d=t.ownerDocument||t,s=zy(s),(h=hi.get(h))&&Zf(s,h),d=d.createElement("link"),Ce(d);var E=d;E._p=new Promise(function(T,M){E.onload=T,E.onerror=M}),dn(d,"link",s),n.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=nc.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function WE(){if(lo===null)throw Error(a(475));var t=lo;return t.stylesheets&&t.count===0&&td(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&td(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function nc(){if(this.count--,this.count===0){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ic=null;function td(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ic=new Map,n.forEach(XE,t),ic=null,nc.call(t))}function XE(t,n){if(!(n.state.loading&4)){var s=ic.get(t);if(s)var l=s.get(null);else{s=new Map,ic.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(s.set(E.dataset.precedence,E),l=E)}l&&s.set(null,l)}h=n.instance,E=h.getAttribute("data-precedence"),d=s.get(E)||l,d===l&&s.set(null,h),s.set(E,h),this.count++,l=nc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var oo={$$typeof:P,Provider:null,Consumer:null,_currentValue:wt,_currentValue2:wt,_threadCount:0};function ZE(t,n,s,l,h,d,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Gy(t,n,s,l,h,d,E,T,M,W,nt,ot){return t=new ZE(t,n,s,E,T,M,W,ot),n=1,d===!0&&(n|=24),d=Hn(3,null,null,n),t.current=d,d.stateNode=t,n=Oh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:n},Uh(d),t}function Fy(t){return t?(t=Ta,t):Ta}function Qy(t,n,s,l,h,d){h=Fy(h),l.context===null?l.context=h:l.pendingContext=h,l=Br(n),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=qr(t,l,n),s!==null&&(Yn(s,t,n),Ul(s,t,n))}function $y(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function ed(t,n){$y(t,n),(t=t.alternate)&&$y(t,n)}function Yy(t){if(t.tag===13){var n=Sa(t,67108864);n!==null&&Yn(n,t,67108864),ed(t,67108864)}}var rc=!0;function JE(t,n,s,l){var h=K.T;K.T=null;var d=pt.p;try{pt.p=2,nd(t,n,s,l)}finally{pt.p=d,K.T=h}}function tb(t,n,s,l){var h=K.T;K.T=null;var d=pt.p;try{pt.p=8,nd(t,n,s,l)}finally{pt.p=d,K.T=h}}function nd(t,n,s,l){if(rc){var h=id(l);if(h===null)Hf(t,n,l,sc,s),Wy(t,l);else if(nb(h,t,n,s,l))l.stopPropagation();else if(Wy(t,l),n&4&&-1<eb.indexOf(t)){for(;h!==null;){var d=Jn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=yn(d.pendingLanes);if(E!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var M=1<<31-tn(E);T.entanglements[1]|=M,E&=~M}Ki(d),(fe&6)===0&&(qu=ce()+500,eo(0))}}break;case 13:T=Sa(d,2),T!==null&&Yn(T,d,2),Gu(),ed(d,2)}if(d=id(l),d===null&&Hf(t,n,l,sc,s),d===h)break;h=d}h!==null&&l.stopPropagation()}else Hf(t,n,l,null,s)}}function id(t){return t=ni(t),rd(t)}var sc=null;function rd(t){if(sc=null,t=Ei(t),t!==null){var n=c(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=f(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return sc=t,null}function Ky(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wn()){case Xn:return 2;case gi:return 8;case Ii:case ml:return 32;case nr:return 268435456;default:return 32}default:return 32}}var sd=!1,es=null,ns=null,is=null,uo=new Map,co=new Map,rs=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wy(t,n){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":uo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(n.pointerId)}}function ho(t,n,s,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Jn(n),n!==null&&Yy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function nb(t,n,s,l,h){switch(n){case"focusin":return es=ho(es,t,n,s,l,h),!0;case"dragenter":return ns=ho(ns,t,n,s,l,h),!0;case"mouseover":return is=ho(is,t,n,s,l,h),!0;case"pointerover":var d=h.pointerId;return uo.set(d,ho(uo.get(d)||null,t,n,s,l,h)),!0;case"gotpointercapture":return d=h.pointerId,co.set(d,ho(co.get(d)||null,t,n,s,l,h)),!0}return!1}function Xy(t){var n=Ei(t.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=f(s),n!==null){t.blockedOn=n,ji(t.priority,function(){if(s.tag===13){var l=$n();l=Mi(l);var h=Sa(s,l);h!==null&&Yn(h,s,l),ed(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=id(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);or=l,s.target.dispatchEvent(l),or=null}else return n=Jn(s),n!==null&&Yy(n),t.blockedOn=s,!1;n.shift()}return!0}function Zy(t,n,s){ac(t)&&s.delete(n)}function ib(){sd=!1,es!==null&&ac(es)&&(es=null),ns!==null&&ac(ns)&&(ns=null),is!==null&&ac(is)&&(is=null),uo.forEach(Zy),co.forEach(Zy)}function lc(t,n){t.blockedOn===n&&(t.blockedOn=null,sd||(sd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ib)))}var oc=null;function Jy(t){oc!==t&&(oc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){oc===t&&(oc=null);for(var n=0;n<t.length;n+=3){var s=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(rd(l||s)===null)continue;break}var d=Jn(s);d!==null&&(t.splice(n,3),n-=3,rf(d,{pending:!0,data:h,method:s.method,action:l},l,h))}}))}function fo(t){function n(M){return lc(M,t)}es!==null&&lc(es,t),ns!==null&&lc(ns,t),is!==null&&lc(is,t),uo.forEach(n),co.forEach(n);for(var s=0;s<rs.length;s++){var l=rs[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<rs.length&&(s=rs[0],s.blockedOn===null);)Xy(s),s.blockedOn===null&&rs.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var h=s[l],d=s[l+1],E=h[Re]||null;if(typeof d=="function")E||Jy(s);else if(E){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Re]||null)T=E.formAction;else if(rd(h)!==null)continue}else T=E.action;typeof T=="function"?s[l+1]=T:(s.splice(l,3),l-=3),Jy(s)}}}function ad(t){this._internalRoot=t}uc.prototype.render=ad.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=$n();Qy(s,l,t,n,null,null)},uc.prototype.unmount=ad.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Qy(t.current,2,null,t,null,null),Gu(),n[Nn]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Oi();t={blockedOn:null,target:t,priority:n};for(var s=0;s<rs.length&&n!==0&&n<rs[s].priority;s++);rs.splice(s,0,t),s===0&&Xy(t)}};var tv=e.version;if(tv!=="19.1.0")throw Error(a(527,tv,"19.1.0"));pt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(n),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var rb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{he=cc.inject(rb),Xt=cc}catch{}}return po.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,l="",h=gg,d=yg,E=vg,T=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(E=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=Gy(t,1,!1,null,null,s,l,h,d,E,T,null),t[Nn]=n.current,qf(t),new ad(n)},po.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var l=!1,h="",d=gg,E=yg,T=vg,M=null,W=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(E=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks),s.formState!==void 0&&(W=s.formState)),n=Gy(t,1,!0,n,s??null,l,h,d,E,T,M,W),n.context=Fy(null),s=n.current,l=$n(),l=Mi(l),h=Br(l),h.callback=null,qr(s,h,l),s=l,n.current.lanes=s,vi(n,s),Ki(n),t[Nn]=n.current,qf(t),new uc(n)},po.version="19.1.0",po}var cv;function gb(){if(cv)return ud.exports;cv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ud.exports=pb(),ud.exports}var yb=gb(),go={},hv;function vb(){if(hv)return go;hv=1,Object.defineProperty(go,"__esModule",{value:!0}),go.parse=f,go.serialize=p;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function f(A,I){const N=new c,G=A.length;if(G<2)return N;const B=(I==null?void 0:I.decode)||b;let H=0;do{const X=A.indexOf("=",H);if(X===-1)break;const P=A.indexOf(";",H),lt=P===-1?G:P;if(X>lt){H=A.lastIndexOf(";",X-1)+1;continue}const mt=m(A,H,X),bt=g(A,X,mt),V=A.slice(mt,bt);if(N[V]===void 0){let R=m(A,X+1,lt),w=g(A,lt,R);const L=B(A.slice(R,w));N[V]=L}H=lt+1}while(H<G);return N}function m(A,I,N){do{const G=A.charCodeAt(I);if(G!==32&&G!==9)return I}while(++I<N);return N}function g(A,I,N){for(;I>N;){const G=A.charCodeAt(--I);if(G!==32&&G!==9)return I+1}return N}function p(A,I,N){const G=(N==null?void 0:N.encode)||encodeURIComponent;if(!r.test(A))throw new TypeError(`argument name is invalid: ${A}`);const B=G(I);if(!e.test(B))throw new TypeError(`argument val is invalid: ${I}`);let H=A+"="+B;if(!N)return H;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);H+="; Max-Age="+N.maxAge}if(N.domain){if(!i.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);H+="; Domain="+N.domain}if(N.path){if(!a.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);H+="; Path="+N.path}if(N.expires){if(!S(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);H+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(H+="; HttpOnly"),N.secure&&(H+="; Secure"),N.partitioned&&(H+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return H}function b(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function S(A){return o.call(A)==="[object Date]"}return go}vb();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fv="popstate";function _b(r={}){function e(o,c){let{pathname:f="/",search:m="",hash:g=""}=ia(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),xd("",{pathname:f,search:m,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(o,c){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let g=o.location.href,p=g.indexOf("#");m=p===-1?g:g.slice(0,p)}return m+"#"+(typeof c=="string"?c:Ro(c))}function a(o,c){mi(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return bb(e,i,a,r)}function we(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function mi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Eb(){return Math.random().toString(36).substring(2,10)}function dv(r,e){return{usr:r.state,key:r.key,idx:e}}function xd(r,e,i=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ia(e):e,state:i,key:e&&e.key||a||Eb()}}function Ro({pathname:r="/",search:e="",hash:i=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function ia(r){let e={};if(r){let i=r.indexOf("#");i>=0&&(e.hash=r.substring(i),r=r.substring(0,i));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function bb(r,e,i,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,f=o.history,m="POP",g=null,p=b();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function b(){return(f.state||{idx:null}).idx}function S(){m="POP";let B=b(),H=B==null?null:B-p;p=B,g&&g({action:m,location:G.location,delta:H})}function A(B,H){m="PUSH";let X=xd(G.location,B,H);i&&i(X,B),p=b()+1;let P=dv(X,p),lt=G.createHref(X);try{f.pushState(P,"",lt)}catch(mt){if(mt instanceof DOMException&&mt.name==="DataCloneError")throw mt;o.location.assign(lt)}c&&g&&g({action:m,location:G.location,delta:1})}function I(B,H){m="REPLACE";let X=xd(G.location,B,H);i&&i(X,B),p=b();let P=dv(X,p),lt=G.createHref(X);f.replaceState(P,"",lt),c&&g&&g({action:m,location:G.location,delta:0})}function N(B){let H=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof B=="string"?B:Ro(B);return X=X.replace(/ $/,"%20"),we(H,`No window.location.(origin|href) available to create URL for href: ${X}`),new URL(X,H)}let G={get action(){return m},get location(){return r(o,f)},listen(B){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(fv,S),g=B,()=>{o.removeEventListener(fv,S),g=null}},createHref(B){return e(o,B)},createURL:N,encodeLocation(B){let H=N(B);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:A,replace:I,go(B){return f.go(B)}};return G}function I0(r,e,i="/"){return Sb(r,e,i,!1)}function Sb(r,e,i,a){let o=typeof e=="string"?ia(e):e,c=Dr(o.pathname||"/",i);if(c==null)return null;let f=N0(r);Tb(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let p=Ob(c);m=Vb(f[g],p,a)}return m}function N0(r,e=[],i=[],a=""){let o=(c,f,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};g.relativePath.startsWith("/")&&(we(g.relativePath.startsWith(a),`Absolute route path "${g.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(a.length));let p=Rr([a,g.relativePath]),b=i.concat(g);c.children&&c.children.length>0&&(we(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),N0(c.children,e,b,p)),!(c.path==null&&!c.index)&&e.push({path:p,score:Ib(p,c.index),routesMeta:b})};return r.forEach((c,f)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,f);else for(let g of V0(c.path))o(c,f,g)}),e}function V0(r){let e=r.split("/");if(e.length===0)return[];let[i,...a]=e,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let f=V0(a.join("/")),m=[];return m.push(...f.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...f),m.map(g=>r.startsWith("/")&&g===""?"/":g)}function Tb(r){r.sort((e,i)=>e.score!==i.score?i.score-e.score:Nb(e.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var xb=/^:[\w-]+$/,Ab=3,wb=2,Rb=1,Cb=10,Db=-2,mv=r=>r==="*";function Ib(r,e){let i=r.split("/"),a=i.length;return i.some(mv)&&(a+=Db),e&&(a+=wb),i.filter(o=>!mv(o)).reduce((o,c)=>o+(xb.test(c)?Ab:c===""?Rb:Cb),a)}function Nb(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function Vb(r,e,i=!1){let{routesMeta:a}=r,o={},c="/",f=[];for(let m=0;m<a.length;++m){let g=a[m],p=m===a.length-1,b=c==="/"?e:e.slice(c.length)||"/",S=Rc({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},b),A=g.route;if(!S&&p&&i&&!a[a.length-1].route.index&&(S=Rc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!S)return null;Object.assign(o,S.params),f.push({params:o,pathname:Rr([c,S.pathname]),pathnameBase:Ub(Rr([c,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(c=Rr([c,S.pathnameBase]))}return f}function Rc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,a]=Mb(r.path,r.caseSensitive,r.end),o=e.match(i);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((p,{paramName:b,isOptional:S},A)=>{if(b==="*"){let N=m[A]||"";f=c.slice(0,c.length-N.length).replace(/(.)\/+$/,"$1")}const I=m[A];return S&&!I?p[b]=void 0:p[b]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:f,pattern:r}}function Mb(r,e=!1,i=!0){mi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(a.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function Ob(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Dr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,a=r.charAt(i);return a&&a!=="/"?null:r.slice(i)||"/"}function jb(r,e="/"){let{pathname:i,search:a="",hash:o=""}=typeof r=="string"?ia(r):r;return{pathname:i?i.startsWith("/")?i:Lb(i,e):e,search:zb(a),hash:Pb(o)}}function Lb(r,e){let i=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function dd(r,e,i,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kb(r){return r.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function Wd(r){let e=kb(r);return e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase)}function Xd(r,e,i,a=!1){let o;typeof r=="string"?o=ia(r):(o={...r},we(!o.pathname||!o.pathname.includes("?"),dd("?","pathname","search",o)),we(!o.pathname||!o.pathname.includes("#"),dd("#","pathname","hash",o)),we(!o.search||!o.search.includes("#"),dd("#","search","hash",o)));let c=r===""||o.pathname==="",f=c?"/":o.pathname,m;if(f==null)m=i;else{let S=e.length-1;if(!a&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),S-=1;o.pathname=A.join("/")}m=S>=0?e[S]:"/"}let g=jb(o,m),p=f&&f!=="/"&&f.endsWith("/"),b=(c||f===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(p||b)&&(g.pathname+="/"),g}var Rr=r=>r.join("/").replace(/\/\/+/g,"/"),Ub=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),zb=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Pb=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Bb(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var M0=["POST","PUT","PATCH","DELETE"];new Set(M0);var qb=["GET",...M0];new Set(qb);var ll=D.createContext(null);ll.displayName="DataRouter";var Gc=D.createContext(null);Gc.displayName="DataRouterState";var O0=D.createContext({isTransitioning:!1});O0.displayName="ViewTransition";var Hb=D.createContext(new Map);Hb.displayName="Fetchers";var Gb=D.createContext(null);Gb.displayName="Await";var Di=D.createContext(null);Di.displayName="Navigation";var ko=D.createContext(null);ko.displayName="Location";var er=D.createContext({outlet:null,matches:[],isDataRoute:!1});er.displayName="Route";var Zd=D.createContext(null);Zd.displayName="RouteError";function Fb(r,{relative:e}={}){we(ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=D.useContext(Di),{hash:o,pathname:c,search:f}=zo(r,{relative:e}),m=c;return i!=="/"&&(m=c==="/"?i:Rr([i,c])),a.createHref({pathname:m,search:f,hash:o})}function ol(){return D.useContext(ko)!=null}function Mr(){return we(ol(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(ko).location}var j0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function L0(r){D.useContext(Di).static||D.useLayoutEffect(r)}function Uo(){let{isDataRoute:r}=D.useContext(er);return r?rS():Qb()}function Qb(){we(ol(),"useNavigate() may be used only in the context of a <Router> component.");let r=D.useContext(ll),{basename:e,navigator:i}=D.useContext(Di),{matches:a}=D.useContext(er),{pathname:o}=Mr(),c=JSON.stringify(Wd(a)),f=D.useRef(!1);return L0(()=>{f.current=!0}),D.useCallback((g,p={})=>{if(mi(f.current,j0),!f.current)return;if(typeof g=="number"){i.go(g);return}let b=Xd(g,JSON.parse(c),o,p.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Rr([e,b.pathname])),(p.replace?i.replace:i.push)(b,p.state,p)},[e,i,c,o,r])}D.createContext(null);function zo(r,{relative:e}={}){let{matches:i}=D.useContext(er),{pathname:a}=Mr(),o=JSON.stringify(Wd(i));return D.useMemo(()=>Xd(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function $b(r,e){return k0(r,e)}function k0(r,e,i,a){var X;we(ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:c}=D.useContext(Di),{matches:f}=D.useContext(er),m=f[f.length-1],g=m?m.params:{},p=m?m.pathname:"/",b=m?m.pathnameBase:"/",S=m&&m.route;{let P=S&&S.path||"";U0(p,!S||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let A=Mr(),I;if(e){let P=typeof e=="string"?ia(e):e;we(b==="/"||((X=P.pathname)==null?void 0:X.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${P.pathname}" was given in the \`location\` prop.`),I=P}else I=A;let N=I.pathname||"/",G=N;if(b!=="/"){let P=b.replace(/^\//,"").split("/");G="/"+N.replace(/^\//,"").split("/").slice(P.length).join("/")}let B=!c&&i&&i.matches&&i.matches.length>0?i.matches:I0(r,{pathname:G});mi(S||B!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),mi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=Zb(B&&B.map(P=>Object.assign({},P,{params:Object.assign({},g,P.params),pathname:Rr([b,o.encodeLocation?o.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?b:Rr([b,o.encodeLocation?o.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),f,i,a);return e&&H?D.createElement(ko.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},H):H}function Yb(){let r=iS(),e=Bb(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:c},"ErrorBoundary")," or"," ",D.createElement("code",{style:c},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),i?D.createElement("pre",{style:o},i):null,f)}var Kb=D.createElement(Yb,null),Wb=class extends D.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?D.createElement(er.Provider,{value:this.props.routeContext},D.createElement(Zd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xb({routeContext:r,match:e,children:i}){let a=D.useContext(ll);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(er.Provider,{value:r},i)}function Zb(r,e=[],i=null,a=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let o=r,c=i==null?void 0:i.errors;if(c!=null){let g=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);we(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let f=!1,m=-1;if(i)for(let g=0;g<o.length;g++){let p=o[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=g),p.route.id){let{loaderData:b,errors:S}=i,A=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!S||S[p.route.id]===void 0);if(p.route.lazy||A){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,p,b)=>{let S,A=!1,I=null,N=null;i&&(S=c&&p.route.id?c[p.route.id]:void 0,I=p.route.errorElement||Kb,f&&(m<0&&b===0?(U0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,N=null):m===b&&(A=!0,N=p.route.hydrateFallbackElement||null)));let G=e.concat(o.slice(0,b+1)),B=()=>{let H;return S?H=I:A?H=N:p.route.Component?H=D.createElement(p.route.Component,null):p.route.element?H=p.route.element:H=g,D.createElement(Xb,{match:p,routeContext:{outlet:g,matches:G,isDataRoute:i!=null},children:H})};return i&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?D.createElement(Wb,{location:i.location,revalidation:i.revalidation,component:I,error:S,children:B(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):B()},null)}function Jd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jb(r){let e=D.useContext(ll);return we(e,Jd(r)),e}function tS(r){let e=D.useContext(Gc);return we(e,Jd(r)),e}function eS(r){let e=D.useContext(er);return we(e,Jd(r)),e}function tm(r){let e=eS(r),i=e.matches[e.matches.length-1];return we(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function nS(){return tm("useRouteId")}function iS(){var a;let r=D.useContext(Zd),e=tS("useRouteError"),i=tm("useRouteError");return r!==void 0?r:(a=e.errors)==null?void 0:a[i]}function rS(){let{router:r}=Jb("useNavigate"),e=tm("useNavigate"),i=D.useRef(!1);return L0(()=>{i.current=!0}),D.useCallback(async(o,c={})=>{mi(i.current,j0),i.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var pv={};function U0(r,e,i){!e&&!pv[r]&&(pv[r]=!0,mi(!1,i))}D.memo(sS);function sS({routes:r,future:e,state:i}){return k0(r,void 0,i,e)}function wi({to:r,replace:e,state:i,relative:a}){we(ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=D.useContext(Di);mi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=D.useContext(er),{pathname:f}=Mr(),m=Uo(),g=Xd(r,Wd(c),f,a==="path"),p=JSON.stringify(g);return D.useEffect(()=>{m(JSON.parse(p),{replace:e,state:i,relative:a})},[m,p,a,e,i]),null}function fi(r){we(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aS({basename:r="/",children:e=null,location:i,navigationType:a="POP",navigator:o,static:c=!1}){we(!ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=D.useMemo(()=>({basename:f,navigator:o,static:c,future:{}}),[f,o,c]);typeof i=="string"&&(i=ia(i));let{pathname:g="/",search:p="",hash:b="",state:S=null,key:A="default"}=i,I=D.useMemo(()=>{let N=Dr(g,f);return N==null?null:{location:{pathname:N,search:p,hash:b,state:S,key:A},navigationType:a}},[f,g,p,b,S,A,a]);return mi(I!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:D.createElement(Di.Provider,{value:m},D.createElement(ko.Provider,{children:e,value:I}))}function lS({children:r,location:e}){return $b(Ad(r),e)}function Ad(r,e=[]){let i=[];return D.Children.forEach(r,(a,o)=>{if(!D.isValidElement(a))return;let c=[...e,o];if(a.type===D.Fragment){i.push.apply(i,Ad(a.props.children,c));return}we(a.type===fi,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),we(!a.props.index||!a.props.children,"An index route cannot have child routes.");let f={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(f.children=Ad(a.props.children,c)),i.push(f)}),i}var _c="get",Ec="application/x-www-form-urlencoded";function Fc(r){return r!=null&&typeof r.tagName=="string"}function oS(r){return Fc(r)&&r.tagName.toLowerCase()==="button"}function uS(r){return Fc(r)&&r.tagName.toLowerCase()==="form"}function cS(r){return Fc(r)&&r.tagName.toLowerCase()==="input"}function hS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fS(r,e){return r.button===0&&(!e||e==="_self")&&!hS(r)}var hc=null;function dS(){if(hc===null)try{new FormData(document.createElement("form"),0),hc=!1}catch{hc=!0}return hc}var mS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function md(r){return r!=null&&!mS.has(r)?(mi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ec}"`),null):r}function pS(r,e){let i,a,o,c,f;if(uS(r)){let m=r.getAttribute("action");a=m?Dr(m,e):null,i=r.getAttribute("method")||_c,o=md(r.getAttribute("enctype"))||Ec,c=new FormData(r)}else if(oS(r)||cS(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||m.getAttribute("action");if(a=g?Dr(g,e):null,i=r.getAttribute("formmethod")||m.getAttribute("method")||_c,o=md(r.getAttribute("formenctype"))||md(m.getAttribute("enctype"))||Ec,c=new FormData(m,r),!dS()){let{name:p,type:b,value:S}=r;if(b==="image"){let A=p?`${p}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else p&&c.append(p,S)}}else{if(Fc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=_c,a=null,o=Ec,f=r}return c&&o==="text/plain"&&(f=c,c=void 0),{action:a,method:i.toLowerCase(),encType:o,formData:c,body:f}}function em(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function gS(r,e){if(r.id in e)return e[r.id];try{let i=await import(r.module);return e[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function vS(r,e,i){let a=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await gS(c,i);return f.links?f.links():[]}return[]}));return SS(a.flat(1).filter(yS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function gv(r,e,i,a,o,c){let f=(g,p)=>i[p]?g.route.id!==i[p].route.id:!0,m=(g,p)=>{var b;return i[p].pathname!==g.pathname||((b=i[p].route.path)==null?void 0:b.endsWith("*"))&&i[p].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,p)=>f(g,p)||m(g,p)):c==="data"?e.filter((g,p)=>{var S;let b=a.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(f(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=i[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function _S(r,e,{includeHydrateFallback:i}={}){return ES(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function ES(r){return[...new Set(r)]}function bS(r){let e={},i=Object.keys(r).sort();for(let a of i)e[a]=r[a];return e}function SS(r,e){let i=new Set;return new Set(e),r.reduce((a,o)=>{let c=JSON.stringify(bS(o));return i.has(c)||(i.add(c),a.push({key:c,link:o})),a},[])}var TS=new Set([100,101,204,205]);function xS(r,e){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname="_root.data":e&&Dr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function z0(){let r=D.useContext(ll);return em(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function AS(){let r=D.useContext(Gc);return em(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var nm=D.createContext(void 0);nm.displayName="FrameworkContext";function P0(){let r=D.useContext(nm);return em(r,"You must render this element inside a <HydratedRouter> element"),r}function wS(r,e){let i=D.useContext(nm),[a,o]=D.useState(!1),[c,f]=D.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:b,onTouchStart:S}=e,A=D.useRef(null);D.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let G=H=>{H.forEach(X=>{f(X.isIntersecting)})},B=new IntersectionObserver(G,{threshold:.5});return A.current&&B.observe(A.current),()=>{B.disconnect()}}},[r]),D.useEffect(()=>{if(a){let G=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(G)}}},[a]);let I=()=>{o(!0)},N=()=>{o(!1),f(!1)};return i?r!=="intent"?[c,A,{}]:[c,A,{onFocus:yo(m,I),onBlur:yo(g,N),onMouseEnter:yo(p,I),onMouseLeave:yo(b,N),onTouchStart:yo(S,I)}]:[!1,A,{}]}function yo(r,e){return i=>{r&&r(i),i.defaultPrevented||e(i)}}function RS({page:r,...e}){let{router:i}=z0(),a=D.useMemo(()=>I0(i.routes,r,i.basename),[i.routes,r,i.basename]);return a?D.createElement(DS,{page:r,matches:a,...e}):null}function CS(r){let{manifest:e,routeModules:i}=P0(),[a,o]=D.useState([]);return D.useEffect(()=>{let c=!1;return vS(r,e,i).then(f=>{c||o(f)}),()=>{c=!0}},[r,e,i]),a}function DS({page:r,matches:e,...i}){let a=Mr(),{manifest:o,routeModules:c}=P0(),{basename:f}=z0(),{loaderData:m,matches:g}=AS(),p=D.useMemo(()=>gv(r,e,g,o,a,"data"),[r,e,g,o,a]),b=D.useMemo(()=>gv(r,e,g,o,a,"assets"),[r,e,g,o,a]),S=D.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let N=new Set,G=!1;if(e.forEach(H=>{var P;let X=o.routes[H.route.id];!X||!X.hasLoader||(!p.some(lt=>lt.route.id===H.route.id)&&H.route.id in m&&((P=c[H.route.id])!=null&&P.shouldRevalidate)||X.hasClientLoader?G=!0:N.add(H.route.id))}),N.size===0)return[];let B=xS(r,f);return G&&N.size>0&&B.searchParams.set("_routes",e.filter(H=>N.has(H.route.id)).map(H=>H.route.id).join(",")),[B.pathname+B.search]},[f,m,a,o,p,e,r,c]),A=D.useMemo(()=>_S(b,o),[b,o]),I=CS(b);return D.createElement(D.Fragment,null,S.map(N=>D.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...i})),A.map(N=>D.createElement("link",{key:N,rel:"modulepreload",href:N,...i})),I.map(({key:N,link:G})=>D.createElement("link",{key:N,...G})))}function IS(...r){return e=>{r.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var B0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{B0&&(window.__reactRouterVersion="7.5.1")}catch{}function NS({basename:r,children:e,window:i}){let a=D.useRef();a.current==null&&(a.current=_b({window:i,v5Compat:!0}));let o=a.current,[c,f]=D.useState({action:o.action,location:o.location}),m=D.useCallback(g=>{D.startTransition(()=>f(g))},[f]);return D.useLayoutEffect(()=>o.listen(m),[o,m]),D.createElement(aS,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H0=D.forwardRef(function({onClick:e,discover:i="render",prefetch:a="none",relative:o,reloadDocument:c,replace:f,state:m,target:g,to:p,preventScrollReset:b,viewTransition:S,...A},I){let{basename:N}=D.useContext(Di),G=typeof p=="string"&&q0.test(p),B,H=!1;if(typeof p=="string"&&G&&(B=p,B0))try{let w=new URL(window.location.href),L=p.startsWith("//")?new URL(w.protocol+p):new URL(p),U=Dr(L.pathname,N);L.origin===w.origin&&U!=null?p=U+L.search+L.hash:H=!0}catch{mi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=Fb(p,{relative:o}),[P,lt,mt]=wS(a,A),bt=OS(p,{replace:f,state:m,target:g,preventScrollReset:b,relative:o,viewTransition:S});function V(w){e&&e(w),w.defaultPrevented||bt(w)}let R=D.createElement("a",{...A,...mt,href:B||X,onClick:H||c?e:V,ref:IS(I,lt),target:g,"data-discover":!G&&i==="render"?"true":void 0});return P&&!G?D.createElement(D.Fragment,null,R,D.createElement(RS,{page:X})):R});H0.displayName="Link";var G0=D.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:a="",end:o=!1,style:c,to:f,viewTransition:m,children:g,...p},b){let S=zo(f,{relative:p.relative}),A=Mr(),I=D.useContext(Gc),{navigator:N,basename:G}=D.useContext(Di),B=I!=null&&zS(S)&&m===!0,H=N.encodeLocation?N.encodeLocation(S).pathname:S.pathname,X=A.pathname,P=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;i||(X=X.toLowerCase(),P=P?P.toLowerCase():null,H=H.toLowerCase()),P&&G&&(P=Dr(P,G)||P);const lt=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let mt=X===H||!o&&X.startsWith(H)&&X.charAt(lt)==="/",bt=P!=null&&(P===H||!o&&P.startsWith(H)&&P.charAt(H.length)==="/"),V={isActive:mt,isPending:bt,isTransitioning:B},R=mt?e:void 0,w;typeof a=="function"?w=a(V):w=[a,mt?"active":null,bt?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(V):c;return D.createElement(H0,{...p,"aria-current":R,className:w,ref:b,style:L,to:f,viewTransition:m},typeof g=="function"?g(V):g)});G0.displayName="NavLink";var VS=D.forwardRef(({discover:r="render",fetcherKey:e,navigate:i,reloadDocument:a,replace:o,state:c,method:f=_c,action:m,onSubmit:g,relative:p,preventScrollReset:b,viewTransition:S,...A},I)=>{let N=kS(),G=US(m,{relative:p}),B=f.toLowerCase()==="get"?"get":"post",H=typeof m=="string"&&q0.test(m),X=P=>{if(g&&g(P),P.defaultPrevented)return;P.preventDefault();let lt=P.nativeEvent.submitter,mt=(lt==null?void 0:lt.getAttribute("formmethod"))||f;N(lt||P.currentTarget,{fetcherKey:e,method:mt,navigate:i,replace:o,state:c,relative:p,preventScrollReset:b,viewTransition:S})};return D.createElement("form",{ref:I,method:B,action:G,onSubmit:a?g:X,...A,"data-discover":!H&&r==="render"?"true":void 0})});VS.displayName="Form";function MS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F0(r){let e=D.useContext(ll);return we(e,MS(r)),e}function OS(r,{target:e,replace:i,state:a,preventScrollReset:o,relative:c,viewTransition:f}={}){let m=Uo(),g=Mr(),p=zo(r,{relative:c});return D.useCallback(b=>{if(fS(b,e)){b.preventDefault();let S=i!==void 0?i:Ro(g)===Ro(p);m(r,{replace:S,state:a,preventScrollReset:o,relative:c,viewTransition:f})}},[g,m,p,i,a,e,r,o,c,f])}var jS=0,LS=()=>`__${String(++jS)}__`;function kS(){let{router:r}=F0("useSubmit"),{basename:e}=D.useContext(Di),i=nS();return D.useCallback(async(a,o={})=>{let{action:c,method:f,encType:m,formData:g,body:p}=pS(a,e);if(o.navigate===!1){let b=o.fetcherKey||LS();await r.fetch(b,i,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,i])}function US(r,{relative:e}={}){let{basename:i}=D.useContext(Di),a=D.useContext(er);we(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...zo(r||".",{relative:e})},f=Mr();if(r==null){c.search=f.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(b=>b==="")){m.delete("index"),g.filter(S=>S).forEach(S=>m.append("index",S));let b=m.toString();c.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:Rr([i,c.pathname])),Ro(c)}function zS(r,e={}){let i=D.useContext(O0);we(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=F0("useViewTransitionState"),o=zo(r,{relative:e.relative});if(!i.isTransitioning)return!1;let c=Dr(i.currentLocation.pathname,a)||i.currentLocation.pathname,f=Dr(i.nextLocation.pathname,a)||i.nextLocation.pathname;return Rc(o.pathname,f)!=null||Rc(o.pathname,c)!=null}new TextEncoder;[...TS];const PS=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},BS=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[i++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[i++],f=r[i++],m=r[i++],g=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const c=r[i++],f=r[i++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},$0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const c=r[o],f=o+1<r.length,m=f?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,b=c>>2,S=(c&3)<<4|m>>4;let A=(m&15)<<2|p>>6,I=p&63;g||(I=64,f||(A=64)),a.push(i[b],i[S],i[A],i[I])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Q0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):BS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const c=i[r.charAt(o++)],m=o<r.length?i[r.charAt(o)]:0;++o;const p=o<r.length?i[r.charAt(o)]:64;++o;const S=o<r.length?i[r.charAt(o)]:64;if(++o,c==null||m==null||p==null||S==null)throw new qS;const A=c<<2|m>>4;if(a.push(A),p!==64){const I=m<<4&240|p>>2;if(a.push(I),S!==64){const N=p<<6&192|S;a.push(N)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(r){const e=Q0(r);return $0.encodeByteArray(e,!0)},Cc=function(r){return HS(r).replace(/\./g,"")},GS=function(r){try{return $0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=()=>FS().__FIREBASE_DEFAULTS__,$S=()=>{if(typeof process>"u"||typeof yv>"u")return;const r=yv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&GS(r[1]);return e&&JSON.parse(e)},im=()=>{try{return PS()||QS()||$S()||YS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},KS=r=>{var e,i;return(i=(e=im())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[r]},WS=r=>{const e=KS(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},Y0=()=>{var r;return(r=im())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Cc(JSON.stringify(i)),Cc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tT(){var r;const e=(r=im())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eT(){return!tT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nT(){try{return typeof indexedDB=="object"}catch{return!1}}function iT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="FirebaseError";class ul extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=rT,Object.setPrototypeOf(this,ul.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K0.prototype.create)}}class K0{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?sT(c,a):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new ul(o,m,a)}}function sT(r,e){return r.replace(aT,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const aT=/\{\$([^}]+)}/g;function Dc(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const c=r[o],f=e[o];if(vv(c)&&vv(f)){if(!Dc(c,f))return!1}else if(c!==f)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function vv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r){return r&&r._delegate?r._delegate:r}class Co{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new XS;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uT(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&f.resolve(o)}return o}onInit(e,i){var a;const o=this.normalizeInstanceIdentifier(i),c=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;c.add(e),this.onInitCallbacks.set(o,c);const f=this.instances.get(o);return f&&e(f,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:oT(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oT(r){return r===Xs?void 0:r}function uT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new lT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ne||(ne={}));const hT={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},fT=ne.INFO,dT={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},mT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=dT[e];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W0{constructor(e){this.name=e,this._logLevel=fT,this._logHandler=mT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const pT=(r,e)=>e.some(i=>r instanceof i);let _v,Ev;function gT(){return _v||(_v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yT(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,wd=new WeakMap,Z0=new WeakMap,pd=new WeakMap,rm=new WeakMap;function vT(r){const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{i(ls(r.result)),o()},f=()=>{a(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&X0.set(i,r)}).catch(()=>{}),rm.set(e,r),e}function _T(r){if(wd.has(r))return;const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{i(),o()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});wd.set(r,e)}let Rd={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return wd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Z0.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ls(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ET(r){Rd=r(Rd)}function bT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(gd(this),e,...i);return Z0.set(a,e.sort?e.sort():[e]),ls(a)}:yT().includes(r)?function(...e){return r.apply(gd(this),e),ls(X0.get(this))}:function(...e){return ls(r.apply(gd(this),e))}}function ST(r){return typeof r=="function"?bT(r):(r instanceof IDBTransaction&&_T(r),pT(r,gT())?new Proxy(r,Rd):r)}function ls(r){if(r instanceof IDBRequest)return vT(r);if(pd.has(r))return pd.get(r);const e=ST(r);return e!==r&&(pd.set(r,e),rm.set(e,r)),e}const gd=r=>rm.get(r);function TT(r,e,{blocked:i,upgrade:a,blocking:o,terminated:c}={}){const f=indexedDB.open(r,e),m=ls(f);return a&&f.addEventListener("upgradeneeded",g=>{a(ls(f.result),g.oldVersion,g.newVersion,ls(f.transaction),g)}),i&&f.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const xT=["get","getKey","getAll","getAllKeys","count"],AT=["put","add","delete","clear"],yd=new Map;function bv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=AT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||xT.includes(i)))return;const c=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let p=g.store;return a&&(p=p.index(m.shift())),(await Promise.all([p[i](...m),o&&g.done]))[0]};return yd.set(e,c),c}ET(r=>({...r,get:(e,i,a)=>bv(e,i)||r.get(e,i,a),has:(e,i)=>!!bv(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(RT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function RT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cd="@firebase/app",Sv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new W0("@firebase/app"),CT="@firebase/app-compat",DT="@firebase/analytics-compat",IT="@firebase/analytics",NT="@firebase/app-check-compat",VT="@firebase/app-check",MT="@firebase/auth",OT="@firebase/auth-compat",jT="@firebase/database",LT="@firebase/data-connect",kT="@firebase/database-compat",UT="@firebase/functions",zT="@firebase/functions-compat",PT="@firebase/installations",BT="@firebase/installations-compat",qT="@firebase/messaging",HT="@firebase/messaging-compat",GT="@firebase/performance",FT="@firebase/performance-compat",QT="@firebase/remote-config",$T="@firebase/remote-config-compat",YT="@firebase/storage",KT="@firebase/storage-compat",WT="@firebase/firestore",XT="@firebase/vertexai",ZT="@firebase/firestore-compat",JT="firebase",tx="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="[DEFAULT]",ex={[Cd]:"fire-core",[CT]:"fire-core-compat",[IT]:"fire-analytics",[DT]:"fire-analytics-compat",[VT]:"fire-app-check",[NT]:"fire-app-check-compat",[MT]:"fire-auth",[OT]:"fire-auth-compat",[jT]:"fire-rtdb",[LT]:"fire-data-connect",[kT]:"fire-rtdb-compat",[UT]:"fire-fn",[zT]:"fire-fn-compat",[PT]:"fire-iid",[BT]:"fire-iid-compat",[qT]:"fire-fcm",[HT]:"fire-fcm-compat",[GT]:"fire-perf",[FT]:"fire-perf-compat",[QT]:"fire-rc",[$T]:"fire-rc-compat",[YT]:"fire-gcs",[KT]:"fire-gcs-compat",[WT]:"fire-fst",[ZT]:"fire-fst-compat",[XT]:"fire-vertex","fire-js":"fire-js",[JT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,nx=new Map,Id=new Map;function Tv(r,e){try{r.container.addComponent(e)}catch(i){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function Nc(r){const e=r.name;if(Id.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Id.set(e,r);for(const i of Ic.values())Tv(i,r);for(const i of nx.values())Tv(i,r);return!0}function ix(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function rx(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new K0("app","Firebase",sx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,i,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=tx;function J0(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Dd,automaticDataCollectionEnabled:!1},e),o=a.name;if(typeof o!="string"||!o)throw os.create("bad-app-name",{appName:String(o)});if(i||(i=Y0()),!i)throw os.create("no-options");const c=Ic.get(o);if(c){if(Dc(i,c.options)&&Dc(a,c.config))return c;throw os.create("duplicate-app",{appName:o})}const f=new cT(o);for(const g of Id.values())f.addComponent(g);const m=new ax(i,a,f);return Ic.set(o,m),m}function ox(r=Dd){const e=Ic.get(r);if(!e&&r===Dd&&Y0())return J0();if(!e)throw os.create("no-app",{appName:r});return e}function Xa(r,e,i){var a;let o=(a=ex[r])!==null&&a!==void 0?a:r;i&&(o+=`-${i}`);const c=o.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(m.join(" "));return}Nc(new Co(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebase-heartbeat-database",cx=1,Do="firebase-heartbeat-store";let vd=null;function t_(){return vd||(vd=TT(ux,cx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Do)}catch(i){console.warn(i)}}}}).catch(r=>{throw os.create("idb-open",{originalErrorMessage:r.message})})),vd}async function hx(r){try{const i=(await t_()).transaction(Do),a=await i.objectStore(Do).get(e_(r));return await i.done,a}catch(e){if(e instanceof ul)Ir.warn(e.message);else{const i=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(i.message)}}}async function xv(r,e){try{const a=(await t_()).transaction(Do,"readwrite");await a.objectStore(Do).put(e,e_(r)),await a.done}catch(i){if(i instanceof ul)Ir.warn(i.message);else{const a=os.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Ir.warn(a.message)}}}function e_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=1024,dx=30;class mx{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new gx(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Av();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>dx){const f=yx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ir.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Av(),{heartbeatsToSend:a,unsentEntries:o}=px(this._heartbeatsCache.heartbeats),c=Cc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(i){return Ir.warn(i),""}}}function Av(){return new Date().toISOString().substring(0,10)}function px(r,e=fx){const i=[];let a=r.slice();for(const o of r){const c=i.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),wv(i)>e){c.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),wv(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class gx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nT()?iT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await hx(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function wv(r){return Cc(JSON.stringify({version:2,heartbeats:r})).length}function yx(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(r){Nc(new Co("platform-logger",e=>new wT(e),"PRIVATE")),Nc(new Co("heartbeat",e=>new mx(e),"PRIVATE")),Xa(Cd,Sv,r),Xa(Cd,Sv,"esm2017"),Xa("fire-js","")}vx("");var _x="firebase",Ex="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xa(_x,Ex,"app");var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,n_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,R){function w(){}w.prototype=R.prototype,V.D=R.prototype,V.prototype=new w,V.prototype.constructor=V,V.C=function(L,U,j){for(var C=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)C[Gt-2]=arguments[Gt];return R.prototype[U].apply(L,C)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,R,w){w||(w=0);var L=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)L[U]=R.charCodeAt(w++)|R.charCodeAt(w++)<<8|R.charCodeAt(w++)<<16|R.charCodeAt(w++)<<24;else for(U=0;16>U;++U)L[U]=R[w++]|R[w++]<<8|R[w++]<<16|R[w++]<<24;R=V.g[0],w=V.g[1],U=V.g[2];var j=V.g[3],C=R+(j^w&(U^j))+L[0]+3614090360&4294967295;R=w+(C<<7&4294967295|C>>>25),C=j+(U^R&(w^U))+L[1]+3905402710&4294967295,j=R+(C<<12&4294967295|C>>>20),C=U+(w^j&(R^w))+L[2]+606105819&4294967295,U=j+(C<<17&4294967295|C>>>15),C=w+(R^U&(j^R))+L[3]+3250441966&4294967295,w=U+(C<<22&4294967295|C>>>10),C=R+(j^w&(U^j))+L[4]+4118548399&4294967295,R=w+(C<<7&4294967295|C>>>25),C=j+(U^R&(w^U))+L[5]+1200080426&4294967295,j=R+(C<<12&4294967295|C>>>20),C=U+(w^j&(R^w))+L[6]+2821735955&4294967295,U=j+(C<<17&4294967295|C>>>15),C=w+(R^U&(j^R))+L[7]+4249261313&4294967295,w=U+(C<<22&4294967295|C>>>10),C=R+(j^w&(U^j))+L[8]+1770035416&4294967295,R=w+(C<<7&4294967295|C>>>25),C=j+(U^R&(w^U))+L[9]+2336552879&4294967295,j=R+(C<<12&4294967295|C>>>20),C=U+(w^j&(R^w))+L[10]+4294925233&4294967295,U=j+(C<<17&4294967295|C>>>15),C=w+(R^U&(j^R))+L[11]+2304563134&4294967295,w=U+(C<<22&4294967295|C>>>10),C=R+(j^w&(U^j))+L[12]+1804603682&4294967295,R=w+(C<<7&4294967295|C>>>25),C=j+(U^R&(w^U))+L[13]+4254626195&4294967295,j=R+(C<<12&4294967295|C>>>20),C=U+(w^j&(R^w))+L[14]+2792965006&4294967295,U=j+(C<<17&4294967295|C>>>15),C=w+(R^U&(j^R))+L[15]+1236535329&4294967295,w=U+(C<<22&4294967295|C>>>10),C=R+(U^j&(w^U))+L[1]+4129170786&4294967295,R=w+(C<<5&4294967295|C>>>27),C=j+(w^U&(R^w))+L[6]+3225465664&4294967295,j=R+(C<<9&4294967295|C>>>23),C=U+(R^w&(j^R))+L[11]+643717713&4294967295,U=j+(C<<14&4294967295|C>>>18),C=w+(j^R&(U^j))+L[0]+3921069994&4294967295,w=U+(C<<20&4294967295|C>>>12),C=R+(U^j&(w^U))+L[5]+3593408605&4294967295,R=w+(C<<5&4294967295|C>>>27),C=j+(w^U&(R^w))+L[10]+38016083&4294967295,j=R+(C<<9&4294967295|C>>>23),C=U+(R^w&(j^R))+L[15]+3634488961&4294967295,U=j+(C<<14&4294967295|C>>>18),C=w+(j^R&(U^j))+L[4]+3889429448&4294967295,w=U+(C<<20&4294967295|C>>>12),C=R+(U^j&(w^U))+L[9]+568446438&4294967295,R=w+(C<<5&4294967295|C>>>27),C=j+(w^U&(R^w))+L[14]+3275163606&4294967295,j=R+(C<<9&4294967295|C>>>23),C=U+(R^w&(j^R))+L[3]+4107603335&4294967295,U=j+(C<<14&4294967295|C>>>18),C=w+(j^R&(U^j))+L[8]+1163531501&4294967295,w=U+(C<<20&4294967295|C>>>12),C=R+(U^j&(w^U))+L[13]+2850285829&4294967295,R=w+(C<<5&4294967295|C>>>27),C=j+(w^U&(R^w))+L[2]+4243563512&4294967295,j=R+(C<<9&4294967295|C>>>23),C=U+(R^w&(j^R))+L[7]+1735328473&4294967295,U=j+(C<<14&4294967295|C>>>18),C=w+(j^R&(U^j))+L[12]+2368359562&4294967295,w=U+(C<<20&4294967295|C>>>12),C=R+(w^U^j)+L[5]+4294588738&4294967295,R=w+(C<<4&4294967295|C>>>28),C=j+(R^w^U)+L[8]+2272392833&4294967295,j=R+(C<<11&4294967295|C>>>21),C=U+(j^R^w)+L[11]+1839030562&4294967295,U=j+(C<<16&4294967295|C>>>16),C=w+(U^j^R)+L[14]+4259657740&4294967295,w=U+(C<<23&4294967295|C>>>9),C=R+(w^U^j)+L[1]+2763975236&4294967295,R=w+(C<<4&4294967295|C>>>28),C=j+(R^w^U)+L[4]+1272893353&4294967295,j=R+(C<<11&4294967295|C>>>21),C=U+(j^R^w)+L[7]+4139469664&4294967295,U=j+(C<<16&4294967295|C>>>16),C=w+(U^j^R)+L[10]+3200236656&4294967295,w=U+(C<<23&4294967295|C>>>9),C=R+(w^U^j)+L[13]+681279174&4294967295,R=w+(C<<4&4294967295|C>>>28),C=j+(R^w^U)+L[0]+3936430074&4294967295,j=R+(C<<11&4294967295|C>>>21),C=U+(j^R^w)+L[3]+3572445317&4294967295,U=j+(C<<16&4294967295|C>>>16),C=w+(U^j^R)+L[6]+76029189&4294967295,w=U+(C<<23&4294967295|C>>>9),C=R+(w^U^j)+L[9]+3654602809&4294967295,R=w+(C<<4&4294967295|C>>>28),C=j+(R^w^U)+L[12]+3873151461&4294967295,j=R+(C<<11&4294967295|C>>>21),C=U+(j^R^w)+L[15]+530742520&4294967295,U=j+(C<<16&4294967295|C>>>16),C=w+(U^j^R)+L[2]+3299628645&4294967295,w=U+(C<<23&4294967295|C>>>9),C=R+(U^(w|~j))+L[0]+4096336452&4294967295,R=w+(C<<6&4294967295|C>>>26),C=j+(w^(R|~U))+L[7]+1126891415&4294967295,j=R+(C<<10&4294967295|C>>>22),C=U+(R^(j|~w))+L[14]+2878612391&4294967295,U=j+(C<<15&4294967295|C>>>17),C=w+(j^(U|~R))+L[5]+4237533241&4294967295,w=U+(C<<21&4294967295|C>>>11),C=R+(U^(w|~j))+L[12]+1700485571&4294967295,R=w+(C<<6&4294967295|C>>>26),C=j+(w^(R|~U))+L[3]+2399980690&4294967295,j=R+(C<<10&4294967295|C>>>22),C=U+(R^(j|~w))+L[10]+4293915773&4294967295,U=j+(C<<15&4294967295|C>>>17),C=w+(j^(U|~R))+L[1]+2240044497&4294967295,w=U+(C<<21&4294967295|C>>>11),C=R+(U^(w|~j))+L[8]+1873313359&4294967295,R=w+(C<<6&4294967295|C>>>26),C=j+(w^(R|~U))+L[15]+4264355552&4294967295,j=R+(C<<10&4294967295|C>>>22),C=U+(R^(j|~w))+L[6]+2734768916&4294967295,U=j+(C<<15&4294967295|C>>>17),C=w+(j^(U|~R))+L[13]+1309151649&4294967295,w=U+(C<<21&4294967295|C>>>11),C=R+(U^(w|~j))+L[4]+4149444226&4294967295,R=w+(C<<6&4294967295|C>>>26),C=j+(w^(R|~U))+L[11]+3174756917&4294967295,j=R+(C<<10&4294967295|C>>>22),C=U+(R^(j|~w))+L[2]+718787259&4294967295,U=j+(C<<15&4294967295|C>>>17),C=w+(j^(U|~R))+L[9]+3951481745&4294967295,V.g[0]=V.g[0]+R&4294967295,V.g[1]=V.g[1]+(U+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+U&4294967295,V.g[3]=V.g[3]+j&4294967295}a.prototype.u=function(V,R){R===void 0&&(R=V.length);for(var w=R-this.blockSize,L=this.B,U=this.h,j=0;j<R;){if(U==0)for(;j<=w;)o(this,V,j),j+=this.blockSize;if(typeof V=="string"){for(;j<R;)if(L[U++]=V.charCodeAt(j++),U==this.blockSize){o(this,L),U=0;break}}else for(;j<R;)if(L[U++]=V[j++],U==this.blockSize){o(this,L),U=0;break}}this.h=U,this.o+=R},a.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var R=1;R<V.length-8;++R)V[R]=0;var w=8*this.o;for(R=V.length-8;R<V.length;++R)V[R]=w&255,w/=256;for(this.u(V),V=Array(16),R=w=0;4>R;++R)for(var L=0;32>L;L+=8)V[w++]=this.g[R]>>>L&255;return V};function c(V,R){var w=m;return Object.prototype.hasOwnProperty.call(w,V)?w[V]:w[V]=R(V)}function f(V,R){this.h=R;for(var w=[],L=!0,U=V.length-1;0<=U;U--){var j=V[U]|0;L&&j==R||(w[U]=j,L=!1)}this.g=w}var m={};function g(V){return-128<=V&&128>V?c(V,function(R){return new f([R|0],0>R?-1:0)}):new f([V|0],0>V?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return S;if(0>V)return B(p(-V));for(var R=[],w=1,L=0;V>=w;L++)R[L]=V/w|0,w*=4294967296;return new f(R,0)}function b(V,R){if(V.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(V.charAt(0)=="-")return B(b(V.substring(1),R));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=p(Math.pow(R,8)),L=S,U=0;U<V.length;U+=8){var j=Math.min(8,V.length-U),C=parseInt(V.substring(U,U+j),R);8>j?(j=p(Math.pow(R,j)),L=L.j(j).add(p(C))):(L=L.j(w),L=L.add(p(C)))}return L}var S=g(0),A=g(1),I=g(16777216);r=f.prototype,r.m=function(){if(G(this))return-B(this).m();for(var V=0,R=1,w=0;w<this.g.length;w++){var L=this.i(w);V+=(0<=L?L:4294967296+L)*R,R*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(N(this))return"0";if(G(this))return"-"+B(this).toString(V);for(var R=p(Math.pow(V,6)),w=this,L="";;){var U=lt(w,R).g;w=H(w,U.j(R));var j=((0<w.g.length?w.g[0]:w.h)>>>0).toString(V);if(w=U,N(w))return j+L;for(;6>j.length;)j="0"+j;L=j+L}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function N(V){if(V.h!=0)return!1;for(var R=0;R<V.g.length;R++)if(V.g[R]!=0)return!1;return!0}function G(V){return V.h==-1}r.l=function(V){return V=H(this,V),G(V)?-1:N(V)?0:1};function B(V){for(var R=V.g.length,w=[],L=0;L<R;L++)w[L]=~V.g[L];return new f(w,~V.h).add(A)}r.abs=function(){return G(this)?B(this):this},r.add=function(V){for(var R=Math.max(this.g.length,V.g.length),w=[],L=0,U=0;U<=R;U++){var j=L+(this.i(U)&65535)+(V.i(U)&65535),C=(j>>>16)+(this.i(U)>>>16)+(V.i(U)>>>16);L=C>>>16,j&=65535,C&=65535,w[U]=C<<16|j}return new f(w,w[w.length-1]&-2147483648?-1:0)};function H(V,R){return V.add(B(R))}r.j=function(V){if(N(this)||N(V))return S;if(G(this))return G(V)?B(this).j(B(V)):B(B(this).j(V));if(G(V))return B(this.j(B(V)));if(0>this.l(I)&&0>V.l(I))return p(this.m()*V.m());for(var R=this.g.length+V.g.length,w=[],L=0;L<2*R;L++)w[L]=0;for(L=0;L<this.g.length;L++)for(var U=0;U<V.g.length;U++){var j=this.i(L)>>>16,C=this.i(L)&65535,Gt=V.i(U)>>>16,Ot=V.i(U)&65535;w[2*L+2*U]+=C*Ot,X(w,2*L+2*U),w[2*L+2*U+1]+=j*Ot,X(w,2*L+2*U+1),w[2*L+2*U+1]+=C*Gt,X(w,2*L+2*U+1),w[2*L+2*U+2]+=j*Gt,X(w,2*L+2*U+2)}for(L=0;L<R;L++)w[L]=w[2*L+1]<<16|w[2*L];for(L=R;L<2*R;L++)w[L]=0;return new f(w,0)};function X(V,R){for(;(V[R]&65535)!=V[R];)V[R+1]+=V[R]>>>16,V[R]&=65535,R++}function P(V,R){this.g=V,this.h=R}function lt(V,R){if(N(R))throw Error("division by zero");if(N(V))return new P(S,S);if(G(V))return R=lt(B(V),R),new P(B(R.g),B(R.h));if(G(R))return R=lt(V,B(R)),new P(B(R.g),R.h);if(30<V.g.length){if(G(V)||G(R))throw Error("slowDivide_ only works with positive integers.");for(var w=A,L=R;0>=L.l(V);)w=mt(w),L=mt(L);var U=bt(w,1),j=bt(L,1);for(L=bt(L,2),w=bt(w,2);!N(L);){var C=j.add(L);0>=C.l(V)&&(U=U.add(w),j=C),L=bt(L,1),w=bt(w,1)}return R=H(V,U.j(R)),new P(U,R)}for(U=S;0<=V.l(R);){for(w=Math.max(1,Math.floor(V.m()/R.m())),L=Math.ceil(Math.log(w)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),j=p(w),C=j.j(R);G(C)||0<C.l(V);)w-=L,j=p(w),C=j.j(R);N(j)&&(j=A),U=U.add(j),V=H(V,C)}return new P(U,V)}r.A=function(V){return lt(this,V).h},r.and=function(V){for(var R=Math.max(this.g.length,V.g.length),w=[],L=0;L<R;L++)w[L]=this.i(L)&V.i(L);return new f(w,this.h&V.h)},r.or=function(V){for(var R=Math.max(this.g.length,V.g.length),w=[],L=0;L<R;L++)w[L]=this.i(L)|V.i(L);return new f(w,this.h|V.h)},r.xor=function(V){for(var R=Math.max(this.g.length,V.g.length),w=[],L=0;L<R;L++)w[L]=this.i(L)^V.i(L);return new f(w,this.h^V.h)};function mt(V){for(var R=V.g.length+1,w=[],L=0;L<R;L++)w[L]=V.i(L)<<1|V.i(L-1)>>>31;return new f(w,V.h)}function bt(V,R){var w=R>>5;R%=32;for(var L=V.g.length-w,U=[],j=0;j<L;j++)U[j]=0<R?V.i(j+w)>>>R|V.i(j+w+1)<<32-R:V.i(j+w);return new f(U,V.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,n_=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=b,us=f}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var i_,_o,r_,bc,Nd,s_,a_,l_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,_){return u==Array.prototype||u==Object.prototype||(u[y]=_.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=i(this);function o(u,y){if(y)t:{var _=a;u=u.split(".");for(var x=0;x<u.length-1;x++){var $=u[x];if(!($ in _))break t;_=_[$]}u=u[u.length-1],x=_[u],y=y(x),y!=x&&y!=null&&e(_,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var _=0,x=!1,$={next:function(){if(!x&&_<u.length){var et=_++;return{value:y(et,u[et]),done:!1}}return x=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function p(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function b(u,y,_){return u.call.apply(u.bind,arguments)}function S(u,y,_){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,x),u.apply(y,$)}}return function(){return u.apply(y,arguments)}}function A(u,y,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:S,A.apply(null,arguments)}function I(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function N(u,y){function _(){}_.prototype=y.prototype,u.aa=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(x,$,et){for(var vt=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)vt[Zt-2]=arguments[Zt];return y.prototype[$].apply(x,vt)}}function G(u){const y=u.length;if(0<y){const _=Array(y);for(let x=0;x<y;x++)_[x]=u[x];return _}return[]}function B(u,y){for(let _=1;_<arguments.length;_++){const x=arguments[_];if(g(x)){const $=u.length||0,et=x.length||0;u.length=$+et;for(let vt=0;vt<et;vt++)u[$+vt]=x[vt]}else u.push(x)}}class H{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function lt(u){return lt[" "](u),u}lt[" "]=function(){};var mt=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function bt(u,y,_){for(const x in u)y.call(_,u[x],x,u)}function V(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function R(u){const y={};for(const _ in u)y[_]=u[_];return y}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(u,y){let _,x;for(let $=1;$<arguments.length;$++){x=arguments[$];for(_ in x)u[_]=x[_];for(let et=0;et<w.length;et++)_=w[et],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function U(u){var y=1;u=u.split(":");const _=[];for(;0<y&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function j(u){m.setTimeout(()=>{throw u},0)}function C(){var u=Bt;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Gt{constructor(){this.h=this.g=null}add(y,_){const x=Ot.get();x.set(y,_),this.h?this.h.next=x:this.g=x,this.h=x}}var Ot=new H(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,wt=!1,Bt=new Gt,k=()=>{const u=m.Promise.resolve(void 0);pt=()=>{u.then(st)}};var st=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){j(_)}var y=Ot;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}wt=!1};function yt(){this.s=this.s,this.C=this.C}yt.prototype.s=!1,yt.prototype.ma=function(){this.s||(this.s=!0,this.N())},yt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return u}();function St(u,y){if(F.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(mt){t:{try{lt(y.nodeName);var $=!0;break t}catch{}$=!1}$||(y=null)}}else _=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement);this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Q[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&St.aa.h.call(this)}}N(St,F);var Q={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Et=0;function Ct(u,y,_,x,$){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!x,this.ha=$,this.key=++Et,this.da=this.fa=!1}function Ut(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function jt(u){this.src=u,this.g={},this.h=0}jt.prototype.add=function(u,y,_,x,$){var et=u.toString();u=this.g[et],u||(u=this.g[et]=[],this.h++);var vt=Te(u,y,x,$);return-1<vt?(y=u[vt],_||(y.fa=!1)):(y=new Ct(y,this.src,et,!!x,$),y.fa=_,u.push(y)),y};function ie(u,y){var _=y.type;if(_ in u.g){var x=u.g[_],$=Array.prototype.indexOf.call(x,y,void 0),et;(et=0<=$)&&Array.prototype.splice.call(x,$,1),et&&(Ut(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Te(u,y,_,x){for(var $=0;$<u.length;++$){var et=u[$];if(!et.da&&et.listener==y&&et.capture==!!_&&et.ha==x)return $}return-1}var Ve="closure_lm_"+(1e6*Math.random()|0),Xe={};function Ze(u,y,_,x,$){if(Array.isArray(y)){for(var et=0;et<y.length;et++)Ze(u,y[et],_,x,$);return null}return _=Es(_),u&&u[ft]?u.K(y,_,p(x)?!!x.capture:!1,$):ce(u,y,_,!1,x,$)}function ce(u,y,_,x,$,et){if(!y)throw Error("Invalid event type");var vt=p($)?!!$.capture:!!$,Zt=nr(u);if(Zt||(u[Ve]=Zt=new jt(u)),_=Zt.add(y,_,x,vt,et),_.proxy)return _;if(x=Wn(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)gt||($=vt),$===void 0&&($=!1),u.addEventListener(y.toString(),x,$);else if(u.attachEvent)u.attachEvent(Ii(y.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Wn(){function u(_){return y.call(u.src,u.listener,_)}const y=ml;return u}function Xn(u,y,_,x,$){if(Array.isArray(y))for(var et=0;et<y.length;et++)Xn(u,y[et],_,x,$);else x=p(x)?!!x.capture:!!x,_=Es(_),u&&u[ft]?(u=u.i,y=String(y).toString(),y in u.g&&(et=u.g[y],_=Te(et,_,x,$),-1<_&&(Ut(et[_]),Array.prototype.splice.call(et,_,1),et.length==0&&(delete u.g[y],u.h--)))):u&&(u=nr(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Te(y,_,x,$)),(_=-1<u?y[u]:null)&&gi(_))}function gi(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ft])ie(y.i,u);else{var _=u.type,x=u.proxy;y.removeEventListener?y.removeEventListener(_,x,u.capture):y.detachEvent?y.detachEvent(Ii(_),x):y.addListener&&y.removeListener&&y.removeListener(x),(_=nr(y))?(ie(_,u),_.h==0&&(_.src=null,y[Ve]=null)):Ut(u)}}}function Ii(u){return u in Xe?Xe[u]:Xe[u]="on"+u}function ml(u,y){if(u.da)u=!0;else{y=new St(y,this);var _=u.listener,x=u.ha||u.src;u.fa&&gi(u),u=_.call(x,y)}return u}function nr(u){return u=u[Ve],u instanceof jt?u:null}var Ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function Es(u){return typeof u=="function"?u:(u[Ni]||(u[Ni]=function(y){return u.handleEvent(y)}),u[Ni])}function he(){yt.call(this),this.i=new jt(this),this.M=this,this.F=null}N(he,yt),he.prototype[ft]=!0,he.prototype.removeEventListener=function(u,y,_,x){Xn(this,u,y,_,x)};function Xt(u,y){var _,x=u.F;if(x)for(_=[];x;x=x.F)_.push(x);if(u=u.M,x=y.type||y,typeof y=="string")y=new F(y,u);else if(y instanceof F)y.target=y.target||u;else{var $=y;y=new F(x,u),L(y,$)}if($=!0,_)for(var et=_.length-1;0<=et;et--){var vt=y.g=_[et];$=Je(vt,x,!0,y)&&$}if(vt=y.g=u,$=Je(vt,x,!0,y)&&$,$=Je(vt,x,!1,y)&&$,_)for(et=0;et<_.length;et++)vt=y.g=_[et],$=Je(vt,x,!1,y)&&$}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var _=u.g[y],x=0;x<_.length;x++)Ut(_[x]);delete u.g[y],u.h--}}this.F=null},he.prototype.K=function(u,y,_,x){return this.i.add(String(u),y,!1,_,x)},he.prototype.L=function(u,y,_,x){return this.i.add(String(u),y,!0,_,x)};function Je(u,y,_,x){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,et=0;et<y.length;++et){var vt=y[et];if(vt&&!vt.da&&vt.capture==_){var Zt=vt.listener,Ge=vt.ha||vt.src;vt.fa&&ie(u.i,vt),$=Zt.call(Ge,x)!==!1&&$}}return $&&!x.defaultPrevented}function tn(u,y,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function la(u){u.g=tn(()=>{u.g=null,u.i&&(u.i=!1,la(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class oa extends yt{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:la(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(u){yt.call(this),this.h=u,this.g={}}N(Zn,yt);var ir=[];function rr(u){bt(u.g,function(y,_){this.g.hasOwnProperty(_)&&gi(y)},u),u.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),rr(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yn=m.JSON.stringify,xn=m.JSON.parse,An=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function sr(){}sr.prototype.h=null;function Or(u){return u.h||(u.h=u.i())}function jr(){}var yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){F.call(this,"d")}N(vi,F);function bs(){F.call(this,"c")}N(bs,F);var on={},Vi=null;function Mi(){return Vi=Vi||new he}on.La="serverreachability";function Lr(u){F.call(this,on.La,u)}N(Lr,F);function Oi(u){const y=Mi();Xt(y,new Lr(y))}on.STAT_EVENT="statevent";function ji(u,y){F.call(this,on.STAT_EVENT,u),this.stat=y}N(ji,F);function Ee(u){const y=Mi();Xt(y,new ji(y,u))}on.Ma="timingevent";function Me(u,y){F.call(this,on.Ma,u),this.size=y}N(Me,F);function Re(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Ss(u,y,_,x,$,et){u.info(function(){if(u.g)if(et)for(var vt="",Zt=et.split("&"),Ge=0;Ge<Zt.length;Ge++){var Jt=Zt[Ge].split("=");if(1<Jt.length){var nn=Jt[0];Jt=Jt[1];var Fe=nn.split("_");vt=2<=Fe.length&&Fe[1]=="type"?vt+(nn+"="+Jt+"&"):vt+(nn+"=redacted&")}}else vt=null;else vt=et;return"XMLHTTP REQ ("+x+") [attempt "+$+"]: "+y+`
`+_+`
`+vt})}function pl(u,y,_,x,$,et,vt){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+$+"]: "+y+`
`+_+`
`+et+" "+vt})}function _i(u,y,_,x){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Li(u,_)+(x?" "+x:"")})}function Ts(u,y){u.info(function(){return"TIMEOUT: "+y})}Nn.prototype.info=function(){};function Li(u,y){if(!u.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var x=_[u];if(!(2>x.length)){var $=x[1];if(Array.isArray($)&&!(1>$.length)){var et=$[0];if(et!="noop"&&et!="stop"&&et!="close")for(var vt=1;vt<$.length;vt++)$[vt]=""}}}}return yn(_)}catch{return y}}var ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function ti(){}N(ti,sr),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Jn=new ti;function un(u,y,_,x){this.j=u,this.i=y,this.l=_,this.R=x||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ce}function Ce(){this.i=null,this.g="",this.h=!1}var xs={},ar={};function Vn(u,y,_){u.L=1,u.v=Rs(Bn(y)),u.m=_,u.P=!0,O(u,null)}function O(u,y){u.F=Date.now(),at(u),u.A=Bn(u.v);var _=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),El(_.i,"t",x),u.C=0,_=u.j.J,u.h=new Ce,u.g=lu(u.j,_?y:null,!u.m),0<u.O&&(u.M=new oa(A(u.Y,u,u.g),u.O)),y=u.U,_=u.g,x=u.ca;var $="readystatechange";Array.isArray($)||($&&(ir[0]=$.toString()),$=ir);for(var et=0;et<$.length;et++){var vt=Ze(_,$[et],x||y.handleEvent,!1,y.h||y);if(!vt)break;y.g[vt.key]=vt}y=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Oi(),Ss(u.i,u.u,u.A,u.l,u.R,u.m)}un.prototype.ca=function(u){u=u.target;const y=this.M;y&&ri(u)==3?y.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)t:{const Fe=ri(this.g);var y=this.g.Ba();const dr=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Jo(this.g)))){this.J||Fe!=4||y==7||(y==8||0>=dr?Oi(3):Oi(2)),dt(this);var _=this.g.Z();this.X=_;e:if(tt(this)){var x=Jo(this.g);u="";var $=x.length,et=ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dt(this),_t(this);var vt="";break e}this.h.i=new m.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,u+=this.h.i.decode(x[y],{stream:!(et&&y==$-1)});x.length=0,this.h.g+=u,this.C=0,vt=this.h.g}else vt=this.g.oa();if(this.o=_==200,pl(this.i,this.u,this.A,this.l,this.R,Fe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Zt,Ge=this.g;if((Zt=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Zt)){var Jt=Zt;break e}}Jt=null}if(_=Jt)_i(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ve(this,_);else{this.o=!1,this.s=3,Ee(12),Dt(this),_t(this);break t}}if(this.P){_=!0;let cn;for(;!this.J&&this.C<vt.length;)if(cn=it(this,vt),cn==ar){Fe==4&&(this.s=4,Ee(14),_=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==xs){this.s=4,Ee(15),_i(this.i,this.l,vt,"[Invalid Chunk]"),_=!1;break}else _i(this.i,this.l,cn,null),ve(this,cn);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||vt.length!=0||this.h.h||(this.s=1,Ee(16),_=!1),this.o=this.o&&_,!_)_i(this.i,this.l,vt,"[Invalid Chunked Response]"),Dt(this),_t(this);else if(0<vt.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+vt.length),js(nn),nn.M=!0,Ee(11))}}else _i(this.i,this.l,vt,null),ve(this,vt);Fe==4&&Dt(this),this.o&&!this.J&&(Fe==4?ru(this.j,this):(this.o=!1,at(this)))}else mh(this.g),_==400&&0<vt.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Dt(this),_t(this)}}}catch{}finally{}};function tt(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function it(u,y){var _=u.C,x=y.indexOf(`
`,_);return x==-1?ar:(_=Number(y.substring(_,x)),isNaN(_)?xs:(x+=1,x+_>y.length?ar:(y=y.slice(x,x+_),u.C=x+_,y)))}un.prototype.cancel=function(){this.J=!0,Dt(this)};function at(u){u.S=Date.now()+u.I,ht(u,u.I)}function ht(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Re(A(u.ba,u),y)}function dt(u){u.B&&(m.clearTimeout(u.B),u.B=null)}un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ts(this.i,this.A),this.L!=2&&(Oi(),Ee(17)),Dt(this),this.s=2,_t(this)):ht(this,this.S-u)};function _t(u){u.j.G==0||u.J||ru(u.j,u)}function Dt(u){dt(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,rr(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function ve(u,y){try{var _=u.j;if(_.G!=0&&(_.g==u||Pn(_.h,u))){if(!u.K&&Pn(_.h,u)&&_.G==3){try{var x=_.Da.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var $=x;if($[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ya(_),pa(_);else break t;Al(_),Ee(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=Re(A(_.Za,_),6e3));if(1>=zn(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else fr(_,11)}else if((u.K||_.g==u)&&ya(_),!X(y))for($=_.Da.g.parse(y),y=0;y<$.length;y++){let Jt=$[y];if(_.T=Jt[0],Jt=Jt[1],_.G==2)if(Jt[0]=="c"){_.K=Jt[1],_.ia=Jt[2];const nn=Jt[3];nn!=null&&(_.la=nn,_.j.info("VER="+_.la));const Fe=Jt[4];Fe!=null&&(_.Aa=Fe,_.j.info("SVER="+_.Aa));const dr=Jt[5];dr!=null&&typeof dr=="number"&&0<dr&&(x=1.5*dr,_.L=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const cn=u.g;if(cn){const Gi=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gi){var et=x.h;et.g||Gi.indexOf("spdy")==-1&&Gi.indexOf("quic")==-1&&Gi.indexOf("h2")==-1||(et.j=et.l,et.g=new Set,et.h&&(bi(et,et.h),et.h=null))}if(x.D){const Rl=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(x.ya=Rl,me(x.I,x.D,Rl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),x=_;var vt=u;if(x.qa=au(x,x.J?x.ia:null,x.W),vt.K){wn(x.h,vt);var Zt=vt,Ge=x.L;Ge&&(Zt.I=Ge),Zt.B&&(dt(Zt),at(Zt)),x.g=vt}else nu(x);0<_.i.length&&ga(_)}else Jt[0]!="stop"&&Jt[0]!="close"||fr(_,7);else _.G==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?fr(_,7):Tl(_):Jt[0]!="noop"&&_.l&&_.l.ta(Jt),_.v=0)}}Oi(4)}catch{}}var le=class{constructor(u,y){this.g=u,this.map=y}};function se(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Un(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zn(u){return u.h?1:u.g?u.g.size:0}function Pn(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function bi(u,y){u.g?u.g.add(y):u.h=y}function wn(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}se.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.D);return y}return G(u.i)}function ch(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],_=u.length,x=0;x<_;x++)y.push(u[x]);return y}y=[],_=0;for(x in u)y[_++]=u[x];return y}function ua(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var _=0;_<u;_++)y.push(_);return y}y=[],_=0;for(const x in u)y[_++]=x;return y}}}function yl(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var _=ua(u),x=ch(u),$=x.length,et=0;et<$;et++)y.call(void 0,x[et],_&&_[et],u)}var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hh(u,y){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var x=u[_].indexOf("="),$=null;if(0<=x){var et=u[_].substring(0,x);$=u[_].substring(x+1)}else et=u[_];y(et,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ze(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ze){this.h=u.h,ws(this,u.j),this.o=u.o,this.g=u.g,kr(this,u.s),this.l=u.l;var y=u.i,_=new or;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),lr(this,_),this.m=u.m}else u&&(y=String(u).match(As))?(this.h=!1,ws(this,y[1]||"",!0),this.o=ei(y[2]||""),this.g=ei(y[3]||"",!0),kr(this,y[4]),this.l=ei(y[5]||"",!0),lr(this,y[6]||"",!0),this.m=ei(y[7]||"")):(this.h=!1,this.i=new or(null,this.h))}ze.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Cs(y,vl,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Cs(y,vl,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Cs(_,_.charAt(0)=="/"?fh:_l,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Cs(_,ca)),u.join("")};function Bn(u){return new ze(u)}function ws(u,y,_){u.j=_?ei(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function kr(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function lr(u,y,_){y instanceof or?(u.i=y,Xo(u.i,u.h)):(_||(y=Cs(y,dh)),u.i=new or(y,u.h))}function me(u,y,_){u.i.set(y,_)}function Rs(u){return me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ei(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cs(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,Wo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vl=/[#\/\?@]/g,_l=/[#\?:]/g,fh=/[#\?]/g,dh=/[#\?@]/g,ca=/#/g;function or(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function ni(u){u.g||(u.g=new Map,u.h=0,u.i&&hh(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=or.prototype,r.add=function(u,y){ni(this),this.i=null,u=Ui(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function ur(u,y){ni(u),y=Ui(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function cr(u,y){return ni(u),y=Ui(u,y),u.g.has(y)}r.forEach=function(u,y){ni(this),this.g.forEach(function(_,x){_.forEach(function($){u.call(y,$,x,this)},this)},this)},r.na=function(){ni(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let x=0;x<y.length;x++){const $=u[x];for(let et=0;et<$.length;et++)_.push(y[x])}return _},r.V=function(u){ni(this);let y=[];if(typeof u=="string")cr(this,u)&&(y=y.concat(this.g.get(Ui(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)y=y.concat(u[_])}return y},r.set=function(u,y){return ni(this),this.i=null,u=Ui(this,u),cr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function El(u,y,_){ur(u,y),0<_.length&&(u.i=null,u.g.set(Ui(u,y),G(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var x=y[_];const et=encodeURIComponent(String(x)),vt=this.V(x);for(x=0;x<vt.length;x++){var $=et;vt[x]!==""&&($+="="+encodeURIComponent(String(vt[x]))),u.push($)}}return this.i=u.join("&")};function Ui(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Xo(u,y){y&&!u.j&&(ni(u),u.i=null,u.g.forEach(function(_,x){var $=x.toLowerCase();x!=$&&(ur(this,x),El(this,$,_))},u)),u.j=y}function Ds(u,y){const _=new Nn;if(m.Image){const x=new Image;x.onload=I(ii,_,"TestLoadImage: loaded",!0,y,x),x.onerror=I(ii,_,"TestLoadImage: error",!1,y,x),x.onabort=I(ii,_,"TestLoadImage: abort",!1,y,x),x.ontimeout=I(ii,_,"TestLoadImage: timeout",!1,y,x),m.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else y(!1)}function Si(u,y){const _=new Nn,x=new AbortController,$=setTimeout(()=>{x.abort(),ii(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:x.signal}).then(et=>{clearTimeout($),et.ok?ii(_,"TestPingServer: ok",!0,y):ii(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),ii(_,"TestPingServer: error",!1,y)})}function ii(u,y,_,x,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),x(_)}catch{}}function Is(){this.g=new An}function zi(u,y,_){const x=_||"";try{yl(u,function($,et){let vt=$;p($)&&(vt=yn($)),y.push(x+et+"="+encodeURIComponent(vt))})}catch($){throw y.push(x+"type="+encodeURIComponent("_badmap")),$}}function Ur(u){this.l=u.Ub||null,this.j=u.eb||!1}N(Ur,sr),Ur.prototype.g=function(){return new hr(this.l,this.j)},Ur.prototype.i=function(u){return function(){return u}}({});function hr(u,y){he.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(hr,he),r=hr.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Bi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function bl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Pi(this):Bi(this),this.readyState==3&&bl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Pi(this))},r.Qa=function(u){this.g&&(this.response=u,Pi(this))},r.ga=function(){this.g&&Pi(this)};function Pi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Bi(u)}r.setRequestHeader=function(u,y){this.u.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function Bi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Sl(u){let y="";return bt(u,function(_,x){y+=x,y+=":",y+=_,y+=`\r
`}),y}function en(u,y,_){t:{for(x in _){var x=!1;break t}x=!0}x||(_=Sl(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):me(u,y,_))}function oe(u){he.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(oe,he);var ha=/^https?$/i,Ns=["POST","PUT"];r=oe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,y,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?Or(this.o):Or(Jn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(et){Zo(this,et);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var $ in x)_.set($,x[$]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const et of x.keys())_.set(et,x.get(et));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(et=>et.toLowerCase()=="content-type"),$=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ns,y,void 0))||x||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[et,vt]of _)this.g.setRequestHeader(et,vt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vs(this),this.u=!0,this.g.send(u),this.u=!1}catch(et){Zo(this,et)}};function Zo(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,fa(u),qi(u)}function fa(u){u.A||(u.A=!0,Xt(u,"complete"),Xt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Xt(this,"complete"),Xt(this,"abort"),qi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),oe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},r.bb=function(){da(this)};function da(u){if(u.h&&typeof f<"u"&&(!u.v[1]||ri(u)!=4||u.Z()!=2)){if(u.u&&ri(u)==4)tn(u.Ea,0,u);else if(Xt(u,"readystatechange"),ri(u)==4){u.h=!1;try{const vt=u.Z();t:switch(vt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var _;if(!(_=y)){var x;if(x=vt===0){var $=String(u.D).match(As)[1]||null;!$&&m.self&&m.self.location&&($=m.self.location.protocol.slice(0,-1)),x=!ha.test($?$.toLowerCase():"")}_=x}if(_)Xt(u,"complete"),Xt(u,"success");else{u.m=6;try{var et=2<ri(u)?u.g.statusText:""}catch{et=""}u.l=et+" ["+u.Z()+"]",fa(u)}}finally{qi(u)}}}}function qi(u,y){if(u.g){Vs(u);const _=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Xt(u,"ready");try{_.onreadystatechange=x}catch{}}}function Vs(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function ri(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<ri(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),xn(y)}};function Jo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mh(u){const y={};u=(u.g&&2<=ri(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(X(u[x]))continue;var _=U(u[x]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const et=y[$]||[];y[$]=et,et.push(_)}V(y,function(x){return x.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function ma(u){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,u),this.cb=Ms("retryDelaySeedMs",1e4,u),this.Wa=Ms("forwardChannelMaxRetries",2,u),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new se(u&&u.concurrentRequestLimit),this.Da=new Is,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ma.prototype,r.la=8,r.G=1,r.connect=function(u,y,_,x){Ee(0),this.W=u,this.H=y||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.I=au(this,null,this.W),ga(this)};function Tl(u){if(tu(u),u.G==3){var y=u.U++,_=Bn(u.I);if(me(_,"SID",u.K),me(_,"RID",y),me(_,"TYPE","terminate"),Os(u,_),y=new un(u,u.j,y),y.L=2,y.v=Rs(Bn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=lu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),at(y)}su(u)}function pa(u){u.g&&(js(u),u.g.cancel(),u.g=null)}function tu(u){pa(u),u.u&&(m.clearTimeout(u.u),u.u=null),ya(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function ga(u){if(!Un(u.h)&&!u.s){u.s=!0;var y=u.Ga;pt||k(),wt||(pt(),wt=!0),Bt.add(y,u),u.B=0}}function ph(u,y){return zn(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Re(A(u.Ga,u,y),wl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new un(this,this.j,u);let et=this.o;if(this.S&&(et?(et=R(et),L(et,this.S)):et=this.S),this.m!==null||this.O||($.H=et,et=null),this.P)t:{for(var y=0,_=0;_<this.i.length;_++){e:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(y+=x,4096<y){y=_;break t}if(y===4096||_===this.i.length-1){y=_+1;break t}}y=1e3}else y=1e3;y=eu(this,$,y),_=Bn(this.I),me(_,"RID",u),me(_,"CVER",22),this.D&&me(_,"X-HTTP-Session-Id",this.D),Os(this,_),et&&(this.O?y="headers="+encodeURIComponent(String(Sl(et)))+"&"+y:this.m&&en(_,this.m,et)),bi(this.h,$),this.Ua&&me(_,"TYPE","init"),this.P?(me(_,"$req",y),me(_,"SID","null"),$.T=!0,Vn($,_,null)):Vn($,_,y),this.G=2}}else this.G==3&&(u?xl(this,u):this.i.length==0||Un(this.h)||xl(this))};function xl(u,y){var _;y?_=y.l:_=u.U++;const x=Bn(u.I);me(x,"SID",u.K),me(x,"RID",_),me(x,"AID",u.T),Os(u,x),u.m&&u.o&&en(x,u.m,u.o),_=new un(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),y&&(u.i=y.D.concat(u.i)),y=eu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),bi(u.h,_),Vn(_,x,y)}function Os(u,y){u.H&&bt(u.H,function(_,x){me(y,x,_)}),u.l&&yl({},function(_,x){me(y,x,_)})}function eu(u,y,_){_=Math.min(u.i.length,_);var x=u.l?A(u.l.Na,u.l,u):null;t:{var $=u.i;let et=-1;for(;;){const vt=["count="+_];et==-1?0<_?(et=$[0].g,vt.push("ofs="+et)):et=0:vt.push("ofs="+et);let Zt=!0;for(let Ge=0;Ge<_;Ge++){let Jt=$[Ge].g;const nn=$[Ge].map;if(Jt-=et,0>Jt)et=Math.max(0,$[Ge].g-100),Zt=!1;else try{zi(nn,vt,"req"+Jt+"_")}catch{x&&x(nn)}}if(Zt){x=vt.join("&");break t}}}return u=u.i.splice(0,_),y.D=u,x}function nu(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;pt||k(),wt||(pt(),wt=!0),Bt.add(y,u),u.v=0}}function Al(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Re(A(u.Fa,u),wl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Re(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),pa(this),iu(this))};function js(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function iu(u){u.g=new un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=Bn(u.qa);me(y,"RID","rpc"),me(y,"SID",u.K),me(y,"AID",u.T),me(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&me(y,"TO",u.ja),me(y,"TYPE","xmlhttp"),Os(u,y),u.m&&u.o&&en(y,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Rs(Bn(y)),_.m=null,_.P=!0,O(_,u)}r.Za=function(){this.C!=null&&(this.C=null,pa(this),Al(this),Ee(19))};function ya(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function ru(u,y){var _=null;if(u.g==y){ya(u),js(u),u.g=null;var x=2}else if(Pn(u.h,y))_=y.D,wn(u.h,y),x=1;else return;if(u.G!=0){if(y.o)if(x==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var $=u.B;x=Mi(),Xt(x,new Me(x,_)),ga(u)}else nu(u);else if($=y.s,$==3||$==0&&0<y.X||!(x==1&&ph(u,y)||x==2&&Al(u)))switch(_&&0<_.length&&(y=u.h,y.i=y.i.concat(_)),$){case 1:fr(u,5);break;case 4:fr(u,10);break;case 3:fr(u,6);break;default:fr(u,2)}}}function wl(u,y){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*y}function fr(u,y){if(u.j.info("Error code "+y),y==2){var _=A(u.fb,u),x=u.Xa;const $=!x;x=new ze(x||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ws(x,"https"),Rs(x),$?Ds(x.toString(),_):Si(x.toString(),_)}else Ee(2);u.G=0,u.l&&u.l.sa(y),su(u),tu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function su(u){if(u.G=0,u.ka=[],u.l){const y=gl(u.h);(y.length!=0||u.i.length!=0)&&(B(u.ka,y),B(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function au(u,y,_){var x=_ instanceof ze?Bn(_):new ze(_);if(x.g!="")y&&(x.g=y+"."+x.g),kr(x,x.s);else{var $=m.location;x=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var et=new ze(null);x&&ws(et,x),y&&(et.g=y),$&&kr(et,$),_&&(et.l=_),x=et}return _=u.D,y=u.ya,_&&y&&me(x,_,y),me(x,"VER",u.la),Os(u,x),x}function lu(u,y,_){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new oe(new Ur({eb:_})):new oe(u.pa),y.Ha(u.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ou(){}r=ou.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function va(){}va.prototype.g=function(u,y){return new Rn(u,y)};function Rn(u,y){he.call(this),this.g=new ma(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!X(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!X(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Hi(this)}N(Rn,he),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Tl(this.g)},Rn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=yn(u),u=_);y.i.push(new le(y.Ya++,u)),y.G==3&&ga(y)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,Rn.aa.N.call(this)};function uu(u){vi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){t:{for(const _ in y){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}N(uu,vi);function cu(){bs.call(this),this.status=1}N(cu,bs);function Hi(u){this.g=u}N(Hi,ou),Hi.prototype.ua=function(){Xt(this.g,"a")},Hi.prototype.ta=function(u){Xt(this.g,new uu(u))},Hi.prototype.sa=function(u){Xt(this.g,new cu)},Hi.prototype.ra=function(){Xt(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,l_=function(){return new va},a_=function(){return Mi()},s_=on,Nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,bc=ki,Ei.COMPLETE="complete",r_=Ei,jr.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",he.prototype.listen=he.prototype.K,_o=jr,oe.prototype.listenOnce=oe.prototype.L,oe.prototype.getLastError=oe.prototype.Ka,oe.prototype.getLastErrorCode=oe.prototype.Ba,oe.prototype.getStatus=oe.prototype.Z,oe.prototype.getResponseJson=oe.prototype.Oa,oe.prototype.getResponseText=oe.prototype.oa,oe.prototype.send=oe.prototype.ea,oe.prototype.setWithCredentials=oe.prototype.Ha,i_=oe}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const Cv="@firebase/firestore",Dv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new W0("@firebase/firestore");function $a(){return ea.logLevel}function xt(r,...e){if(ea.logLevel<=ne.DEBUG){const i=e.map(sm);ea.debug(`Firestore (${cl}): ${r}`,...i)}}function Nr(r,...e){if(ea.logLevel<=ne.ERROR){const i=e.map(sm);ea.error(`Firestore (${cl}): ${r}`,...i)}}function tl(r,...e){if(ea.logLevel<=ne.WARN){const i=e.map(sm);ea.warn(`Firestore (${cl}): ${r}`,...i)}}function sm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(r="Unexpected state"){const e=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: `+r;throw Nr(e),new Error(e)}function ue(r,e){r||kt()}function Pt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends ul{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(bn.UNAUTHENTICATED))}shutdown(){}}class Sx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Tx{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){ue(this.o===void 0);let a=this.i;const o=g=>this.i!==a?(a=this.i,i(g)):Promise.resolve();let c=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Cr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Cr)}},0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ue(typeof a.accessToken=="string"),new o_(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new bn(e)}}class xx{constructor(e,i,a){this.l=e,this.h=i,this.P=a,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ax{constructor(e,i,a){this.l=e,this.h=i,this.P=a}getToken(){return Promise.resolve(new xx(this.l,this.h,this.P))}start(e,i){e.enqueueRetryable(()=>i(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wx{constructor(e,i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,rx(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,i){ue(this.o===void 0);const a=c=>{c.error!=null&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,xt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>a(c))};const o=c=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Iv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(ue(typeof i.token=="string"),this.R=i.token,new Iv(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=Rx(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<i&&(a+=e.charAt(o[c]%62))}return a}}function Qt(r,e){return r<e?-1:r>e?1:0}function Vd(r,e){let i=0;for(;i<r.length&&i<e.length;){const a=r.codePointAt(i),o=e.codePointAt(i);if(a!==o){if(a<128&&o<128)return Qt(a,o);{const c=u_(),f=Cx(c.encode(Nv(r,i)),c.encode(Nv(e,i)));return f!==0?f:Qt(a,o)}}i+=a>65535?2:1}return Qt(r.length,e.length)}function Nv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Cx(r,e){for(let i=0;i<r.length&&i<e.length;++i)if(r[i]!==e[i])return Qt(r[i],e[i]);return Qt(r.length,e.length)}function el(r,e,i){return r.length===e.length&&r.every((a,o)=>i(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=-62135596800,Mv=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Mv);return new Ke(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new At(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new At(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Vv)throw new At(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new At(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mv}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Vv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{static fromTimestamp(e){return new zt(e)}static min(){return new zt(new Ke(0,0))}static max(){return new zt(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class Wi{constructor(e,i,a){i===void 0?i=0:i>e.length&&kt(),a===void 0?a=e.length-i:a>e.length-i&&kt(),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Wi.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Wi?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const c=Wi.compareSegments(e.get(o),i.get(o));if(c!==0)return c}return Qt(e.length,i.length)}static compareSegments(e,i){const a=Wi.isNumericId(e),o=Wi.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?Wi.extractNumericId(e).compare(Wi.extractNumericId(i)):Vd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class Se extends Wi{construct(e,i,a){return new Se(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new At(ut.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(o=>o.length>0))}return new Se(i)}static emptyPath(){return new Se([])}}const Dx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Wi{construct(e,i,a){return new pn(e,i,a)}static isValidIdentifier(e){return Dx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new pn([Ov])}static fromServerFormat(e){const i=[];let a="",o=0;const c=()=>{if(a.length===0)throw new At(ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new At(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new At(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(a+=m,o++):(c(),o++)}if(c(),f)throw new At(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(i)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.path=e}static fromPath(e){return new Nt(Se.fromString(e))}static fromName(e){return new Nt(Se.fromString(e).popFirst(5))}static empty(){return new Nt(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Se.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nt(new Se(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=-1;function Ix(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=zt.fromTimestamp(a===1e9?new Ke(i+1,0):new Ke(i,a));return new fs(o,Nt.empty(),e)}function Nx(r){return new fs(r.readTime,r.key,Io)}class fs{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new fs(zt.min(),Nt.empty(),Io)}static max(){return new fs(zt.max(),Nt.empty(),Io)}}function Vx(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=Nt.comparator(r.documentKey,e.documentKey),i!==0?i:Qt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ox{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(r){if(r.code!==ut.FAILED_PRECONDITION||r.message!==Mx)throw r;xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ct((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof ct?i:ct.resolve(i)}catch(i){return ct.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):ct.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):ct.reject(i)}static resolve(e){return new ct((i,a)=>{i(e)})}static reject(e){return new ct((i,a)=>{a(e)})}static waitFor(e){return new ct((i,a)=>{let o=0,c=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++c,f&&c===o&&i()},g=>a(g))}),f=!0,c===o&&i()})}static or(e){let i=ct.resolve(!1);for(const a of e)i=i.next(o=>o?ct.resolve(o):a());return i}static forEach(e,i){const a=[];return e.forEach((o,c)=>{a.push(i.call(this,o,c))}),this.waitFor(a)}static mapArray(e,i){return new ct((a,o)=>{const c=e.length,f=new Array(c);let m=0;for(let g=0;g<c;g++){const p=g;i(e[p]).next(b=>{f[p]=b,++m,m===c&&a(f)},b=>o(b))}})}static doWhile(e,i){return new ct((a,o)=>{const c=()=>{e()===!0?i().next(()=>{c()},o):a()};c()})}}function jx(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function fl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.oe(a),this._e=a=>i.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=-1;function $c(r){return r==null}function Vc(r){return r===0&&1/r==-1/0}function Lx(r){return typeof r=="number"&&Number.isInteger(r)&&!Vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="";function kx(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=jv(e)),e=Ux(r.get(i),e);return jv(e)}function Ux(r,e){let i=e;const a=r.length;for(let o=0;o<a;o++){const c=r.charAt(o);switch(c){case"\0":i+="";break;case h_:i+="";break;default:i+=c}}return i}function jv(r){return r+h_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function vs(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function f_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,i){this.comparator=e,this.root=i||mn.EMPTY}insert(e,i){return new Ne(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?a(e.key,i):1,i&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,i,a,o,c){this.key=e,this.value=i,this.color=a??mn.RED,this.left=o??mn.EMPTY,this.right=c??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,c){return new mn(e??this.key,i??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,i,a),null):c===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return mn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kt();const e=this.left.check();if(e!==this.right.check())throw kt();return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw kt()}get value(){throw kt()}get color(){throw kt()}get left(){throw kt()}get right(){throw kt()}copy(e,i,a,o,c){return this}insert(e,i,a){return new mn(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new We(this.comparator);return i.data=e,i}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Kn([])}unionWith(e){let i=new We(pn.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new Kn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new d_("Invalid base64 string: "+c):c}}(e);return new gn(i)}static fromUint8Array(e){const i=function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c}(e);return new gn(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const zx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(r){if(ue(!!r),typeof r=="string"){let e=0;const i=zx.exec(r);if(ue(!!i),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ue(r.seconds),nanos:Ue(r.nanos)}}function Ue(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ms(r){return typeof r=="string"?gn.fromBase64String(r):gn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="server_timestamp",p_="__type__",g_="__previous_value__",y_="__local_write_time__";function lm(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[p_])===null||i===void 0?void 0:i.stringValue)===m_}function Yc(r){const e=r.mapValue.fields[g_];return lm(e)?Yc(e):e}function No(r){const e=ds(r.mapValue.fields[y_].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,i,a,o,c,f,m,g,p){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p}}const Mc="(default)";class Vo{constructor(e,i){this.projectId=e,this.database=i||Mc}static empty(){return new Vo("","")}get isDefaultDatabase(){return this.database===Mc}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__type__",Bx="__max__",mc={mapValue:{}},__="__vector__",Oc="value";function ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lm(r)?4:Hx(r)?9007199254740991:qx(r)?10:11:kt()}function Ji(r,e){if(r===e)return!0;const i=ps(r);if(i!==ps(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return No(r).isEqual(No(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=ds(o.timestampValue),m=ds(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,c){return ms(o.bytesValue).isEqual(ms(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,c){return Ue(o.geoPointValue.latitude)===Ue(c.geoPointValue.latitude)&&Ue(o.geoPointValue.longitude)===Ue(c.geoPointValue.longitude)}(r,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Ue(o.integerValue)===Ue(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Ue(o.doubleValue),m=Ue(c.doubleValue);return f===m?Vc(f)===Vc(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return el(r.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Lv(f)!==Lv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Ji(f[g],m[g])))return!1;return!0}(r,e);default:return kt()}}function Mo(r,e){return(r.values||[]).find(i=>Ji(i,e))!==void 0}function nl(r,e){if(r===e)return 0;const i=ps(r),a=ps(e);if(i!==a)return Qt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Qt(r.booleanValue,e.booleanValue);case 2:return function(c,f){const m=Ue(c.integerValue||c.doubleValue),g=Ue(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return Uv(r.timestampValue,e.timestampValue);case 4:return Uv(No(r),No(e));case 5:return Vd(r.stringValue,e.stringValue);case 6:return function(c,f){const m=ms(c),g=ms(f);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const m=c.split("/"),g=f.split("/");for(let p=0;p<m.length&&p<g.length;p++){const b=Qt(m[p],g[p]);if(b!==0)return b}return Qt(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const m=Qt(Ue(c.latitude),Ue(f.latitude));return m!==0?m:Qt(Ue(c.longitude),Ue(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return zv(r.arrayValue,e.arrayValue);case 10:return function(c,f){var m,g,p,b;const S=c.fields||{},A=f.fields||{},I=(m=S[Oc])===null||m===void 0?void 0:m.arrayValue,N=(g=A[Oc])===null||g===void 0?void 0:g.arrayValue,G=Qt(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((b=N==null?void 0:N.values)===null||b===void 0?void 0:b.length)||0);return G!==0?G:zv(I,N)}(r.mapValue,e.mapValue);case 11:return function(c,f){if(c===mc.mapValue&&f===mc.mapValue)return 0;if(c===mc.mapValue)return 1;if(f===mc.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),p=f.fields||{},b=Object.keys(p);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const A=Vd(g[S],b[S]);if(A!==0)return A;const I=nl(m[g[S]],p[b[S]]);if(I!==0)return I}return Qt(g.length,b.length)}(r.mapValue,e.mapValue);default:throw kt()}}function Uv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Qt(r,e);const i=ds(r),a=ds(e),o=Qt(i.seconds,a.seconds);return o!==0?o:Qt(i.nanos,a.nanos)}function zv(r,e){const i=r.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const c=nl(i[o],a[o]);if(c)return c}return Qt(i.length,a.length)}function il(r){return Md(r)}function Md(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const a=ds(i);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return ms(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return Nt.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let a="[",o=!0;for(const c of i.values||[])o?o=!1:a+=",",a+=Md(c);return a+"]"}(r.arrayValue):"mapValue"in r?function(i){const a=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const f of a)c?c=!1:o+=",",o+=`${f}:${Md(i.fields[f])}`;return o+"}"}(r.mapValue):kt()}function Sc(r){switch(ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yc(r);return e?16+Sc(e):16;case 5:return 2*r.stringValue.length;case 6:return ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,c)=>o+Sc(c),0)}(r.arrayValue);case 10:case 11:return function(a){let o=0;return vs(a.fields,(c,f)=>{o+=c.length+Sc(f)}),o}(r.mapValue);default:throw kt()}}function Pv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Od(r){return!!r&&"integerValue"in r}function om(r){return!!r&&"arrayValue"in r}function Bv(r){return!!r&&"nullValue"in r}function qv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tc(r){return!!r&&"mapValue"in r}function qx(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[v_])===null||i===void 0?void 0:i.stringValue)===__}function To(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return vs(r.mapValue.fields,(i,a)=>e.mapValue.fields[i]=To(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=To(r.arrayValue.values[i]);return e}return Object.assign({},r)}function Hx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Bx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Tc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(i)}setAll(e){let i=pn.emptyPath(),a={},o=[];e.forEach((f,m)=>{if(!i.isImmediateParentOf(m)){const g=this.getFieldsMap(i);this.applyChanges(g,a,o),a={},o=[],i=m.popLast()}f?a[m.lastSegment()]=To(f):o.push(m.lastSegment())});const c=this.getFieldsMap(i);this.applyChanges(c,a,o)}delete(e){const i=this.field(e.popLast());Tc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){vs(i,(o,c)=>e[o]=c);for(const o of a)delete e[o]}clone(){return new kn(To(this.value))}}function E_(r){const e=[];return vs(r.fields,(i,a)=>{const o=new pn([i]);if(Tc(a)){const c=E_(a.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,i,a,o,c,f,m){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Sn(e,0,zt.min(),zt.min(),zt.min(),kn.empty(),0)}static newFoundDocument(e,i,a,o){return new Sn(e,1,i,zt.min(),a,o,0)}static newNoDocument(e,i){return new Sn(e,2,i,zt.min(),zt.min(),kn.empty(),0)}static newUnknownDocument(e,i){return new Sn(e,3,i,zt.min(),zt.min(),kn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,i){this.position=e,this.inclusive=i}}function Hv(r,e,i){let a=0;for(let o=0;o<r.position.length;o++){const c=e[o],f=r.position[o];if(c.field.isKeyField()?a=Nt.comparator(Nt.fromName(f.referenceValue),i.key):a=nl(f,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Gv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ji(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,i="asc"){this.field=e,this.dir=i}}function Gx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{}class He extends b_{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new Qx(e,i,a):i==="array-contains"?new Kx(e,a):i==="in"?new Wx(e,a):i==="not-in"?new Xx(e,a):i==="array-contains-any"?new Zx(e,a):new He(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new $x(e,a):new Yx(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(nl(i,this.value)):i!==null&&ps(this.value)===ps(i)&&this.matchesComparison(nl(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends b_{constructor(e,i){super(),this.filters=e,this.op=i,this.ce=null}static create(e,i){return new Ci(e,i)}matches(e){return S_(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function S_(r){return r.op==="and"}function T_(r){return Fx(r)&&S_(r)}function Fx(r){for(const e of r.filters)if(e instanceof Ci)return!1;return!0}function jd(r){if(r instanceof He)return r.field.canonicalString()+r.op.toString()+il(r.value);if(T_(r))return r.filters.map(e=>jd(e)).join(",");{const e=r.filters.map(i=>jd(i)).join(",");return`${r.op}(${e})`}}function x_(r,e){return r instanceof He?function(a,o){return o instanceof He&&a.op===o.op&&a.field.isEqual(o.field)&&Ji(a.value,o.value)}(r,e):r instanceof Ci?function(a,o){return o instanceof Ci&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((c,f,m)=>c&&x_(f,o.filters[m]),!0):!1}(r,e):void kt()}function A_(r){return r instanceof He?function(i){return`${i.field.canonicalString()} ${i.op} ${il(i.value)}`}(r):r instanceof Ci?function(i){return i.op.toString()+" {"+i.getFilters().map(A_).join(" ,")+"}"}(r):"Filter"}class Qx extends He{constructor(e,i,a){super(e,i,a),this.key=Nt.fromName(a.referenceValue)}matches(e){const i=Nt.comparator(e.key,this.key);return this.matchesComparison(i)}}class $x extends He{constructor(e,i){super(e,"in",i),this.keys=w_("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Yx extends He{constructor(e,i){super(e,"not-in",i),this.keys=w_("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function w_(r,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>Nt.fromName(a.referenceValue))}class Kx extends He{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return om(i)&&Mo(i.arrayValue,this.value)}}class Wx extends He{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Mo(this.value.arrayValue,i)}}class Xx extends He{constructor(e,i){super(e,"not-in",i)}matches(e){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&!Mo(this.value.arrayValue,i)}}class Zx extends He{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!om(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>Mo(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,i=null,a=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.le=null}}function Fv(r,e=null,i=[],a=[],o=null,c=null,f=null){return new Jx(r,e,i,a,o,c,f)}function um(r){const e=Pt(r);if(e.le===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>jd(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),$c(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>il(a)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>il(a)).join(",")),e.le=i}return e.le}function cm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Gx(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!x_(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Gv(r.startAt,e.startAt)&&Gv(r.endAt,e.endAt)}function Ld(r){return Nt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,i=null,a=[],o=[],c=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function tA(r,e,i,a,o,c,f,m){return new Po(r,e,i,a,o,c,f,m)}function Kc(r){return new Po(r)}function Qv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function R_(r){return r.collectionGroup!==null}function xo(r){const e=Pt(r);if(e.he===null){e.he=[];const i=new Set;for(const c of e.explicitOrderBy)e.he.push(c),i.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new We(pn.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(m=m.add(p.field))})}),m})(e).forEach(c=>{i.has(c.canonicalString())||c.isKeyField()||e.he.push(new Lc(c,a))}),i.has(pn.keyField().canonicalString())||e.he.push(new Lc(pn.keyField(),a))}return e.he}function Xi(r){const e=Pt(r);return e.Pe||(e.Pe=eA(e,xo(r))),e.Pe}function eA(r,e){if(r.limitType==="F")return Fv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Lc(o.field,c)});const i=r.endAt?new jc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new jc(r.startAt.position,r.startAt.inclusive):null;return Fv(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function kd(r,e){const i=r.filters.concat([e]);return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Ud(r,e,i){return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Wc(r,e){return cm(Xi(r),Xi(e))&&r.limitType===e.limitType}function C_(r){return`${um(Xi(r))}|lt:${r.limitType}`}function Ya(r){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(o=>A_(o)).join(", ")}]`),$c(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(o=>il(o)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(o=>il(o)).join(",")),`Target(${a})`}(Xi(r))}; limitType=${r.limitType})`}function Xc(r,e){return e.isFoundDocument()&&function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Nt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(r,e)&&function(a,o){for(const c of xo(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(r,e)&&function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0}(r,e)&&function(a,o){return!(a.startAt&&!function(f,m,g){const p=Hv(f,m,g);return f.inclusive?p<=0:p<0}(a.startAt,xo(a),o)||a.endAt&&!function(f,m,g){const p=Hv(f,m,g);return f.inclusive?p>=0:p>0}(a.endAt,xo(a),o))}(r,e)}function nA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function D_(r){return(e,i)=>{let a=!1;for(const o of xo(r)){const c=iA(o,e,i);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function iA(r,e,i){const a=r.field.isKeyField()?Nt.comparator(e.key,i.key):function(c,f,m){const g=f.data.field(c),p=m.data.field(c);return g!==null&&p!==null?nl(g,p):kt()}(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return kt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(i,a)=>{for(const[o,c]of a)e(o,c)})}isEmpty(){return f_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new Ne(Nt.comparator);function Vr(){return rA}const I_=new Ne(Nt.comparator);function Eo(...r){let e=I_;for(const i of r)e=e.insert(i.key,i);return e}function N_(r){let e=I_;return r.forEach((i,a)=>e=e.insert(i,a.overlayedDocument)),e}function Zs(){return Ao()}function V_(){return Ao()}function Ao(){return new ra(r=>r.toString(),(r,e)=>r.isEqual(e))}const sA=new Ne(Nt.comparator),aA=new We(Nt.comparator);function Wt(...r){let e=aA;for(const i of r)e=e.add(i);return e}const lA=new We(Qt);function oA(){return lA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function M_(r){return{integerValue:""+r}}function uA(r,e){return Lx(e)?M_(e):hm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function cA(r,e,i){return r instanceof Oo?function(o,c){const f={fields:{[p_]:{stringValue:m_},[y_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&lm(c)&&(c=Yc(c)),c&&(f.fields[g_]=c),{mapValue:f}}(i,e):r instanceof jo?j_(r,e):r instanceof Lo?L_(r,e):function(o,c){const f=O_(o,c),m=$v(f)+$v(o.Ie);return Od(f)&&Od(o.Ie)?M_(m):hm(o.serializer,m)}(r,e)}function hA(r,e,i){return r instanceof jo?j_(r,e):r instanceof Lo?L_(r,e):i}function O_(r,e){return r instanceof kc?function(a){return Od(a)||function(c){return!!c&&"doubleValue"in c}(a)}(e)?e:{integerValue:0}:null}class Oo extends Zc{}class jo extends Zc{constructor(e){super(),this.elements=e}}function j_(r,e){const i=k_(e);for(const a of r.elements)i.some(o=>Ji(o,a))||i.push(a);return{arrayValue:{values:i}}}class Lo extends Zc{constructor(e){super(),this.elements=e}}function L_(r,e){let i=k_(e);for(const a of r.elements)i=i.filter(o=>!Ji(o,a));return{arrayValue:{values:i}}}class kc extends Zc{constructor(e,i){super(),this.serializer=e,this.Ie=i}}function $v(r){return Ue(r.integerValue||r.doubleValue)}function k_(r){return om(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,i){this.field=e,this.transform=i}}function dA(r,e){return r.field.isEqual(e.field)&&function(a,o){return a instanceof jo&&o instanceof jo||a instanceof Lo&&o instanceof Lo?el(a.elements,o.elements,Ji):a instanceof kc&&o instanceof kc?Ji(a.Ie,o.Ie):a instanceof Oo&&o instanceof Oo}(r.transform,e.transform)}class mA{constructor(e,i){this.version=e,this.transformResults=i}}class Dn{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Jc{}function U_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new th(r.key,Dn.none()):new Bo(r.key,r.data,Dn.none());{const i=r.data,a=kn.empty();let o=new We(pn.comparator);for(let c of e.fields)if(!o.has(c)){let f=i.field(c);f===null&&c.length>1&&(c=c.popLast(),f=i.field(c)),f===null?a.delete(c):a.set(c,f),o=o.add(c)}return new _s(r.key,a,new Kn(o.toArray()),Dn.none())}}function pA(r,e,i){r instanceof Bo?function(o,c,f){const m=o.value.clone(),g=Kv(o.fieldTransforms,c,f.transformResults);m.setAll(g),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,i):r instanceof _s?function(o,c,f){if(!xc(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Kv(o.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(z_(o)),g.setAll(m),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,e,i):function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,i)}function wo(r,e,i,a){return r instanceof Bo?function(c,f,m,g){if(!xc(c.precondition,f))return m;const p=c.value.clone(),b=Wv(c.fieldTransforms,g,f);return p.setAll(b),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(r,e,i,a):r instanceof _s?function(c,f,m,g){if(!xc(c.precondition,f))return m;const p=Wv(c.fieldTransforms,g,f),b=f.data;return b.setAll(z_(c)),b.setAll(p),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(r,e,i,a):function(c,f,m){return xc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,i)}function gA(r,e){let i=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),c=O_(a.transform,o||null);c!=null&&(i===null&&(i=kn.empty()),i.set(a.field,c))}return i||null}function Yv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&el(a,o,(c,f)=>dA(c,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Bo extends Jc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _s extends Jc{constructor(e,i,a,o,c=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function z_(r){const e=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}}),e}function Kv(r,e,i){const a=new Map;ue(r.length===i.length);for(let o=0;o<i.length;o++){const c=r[o],f=c.transform,m=e.data.field(c.field);a.set(c.field,hA(f,m,i[o]))}return a}function Wv(r,e,i){const a=new Map;for(const o of r){const c=o.transform,f=i.data.field(o.field);a.set(o.field,cA(c,f,e))}return a}class th extends Jc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yA extends Jc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&pA(c,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=wo(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=wo(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=V_();return this.mutations.forEach(o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=i.has(o.key)?null:m;const g=U_(f,m);g!==null&&a.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(zt.min())}),a}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Wt())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,(i,a)=>Yv(i,a))&&el(this.baseMutations,e.baseMutations,(i,a)=>Yv(i,a))}}class fm{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){ue(e.mutations.length===a.length);let o=function(){return sA}();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,a[f].version);return new fm(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ee;function bA(r){switch(r){case ut.OK:return kt();case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0;default:return kt()}}function P_(r){if(r===void 0)return Nr("GRPC error has no .code"),ut.UNKNOWN;switch(r){case qe.OK:return ut.OK;case qe.CANCELLED:return ut.CANCELLED;case qe.UNKNOWN:return ut.UNKNOWN;case qe.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case qe.INTERNAL:return ut.INTERNAL;case qe.UNAVAILABLE:return ut.UNAVAILABLE;case qe.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case qe.NOT_FOUND:return ut.NOT_FOUND;case qe.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case qe.ABORTED:return ut.ABORTED;case qe.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case qe.DATA_LOSS:return ut.DATA_LOSS;default:return kt()}}(ee=qe||(qe={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new us([4294967295,4294967295],0);function Xv(r){const e=u_().encode(r),i=new n_;return i.update(e),new Uint8Array(i.digest())}function Zv(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new us([i,a],0),new us([o,c],0)]}class dm{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new bo(`Invalid padding: ${i}`);if(a<0)throw new bo(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new bo(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new bo(`Invalid padding when bitmap length is 0: ${i}`);this.Ee=8*e.length-i,this.de=us.fromNumber(this.Ee)}Ae(e,i,a){let o=e.add(i.multiply(us.fromNumber(a)));return o.compare(SA)===1&&(o=new us([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const i=Xv(e),[a,o]=Zv(i);for(let c=0;c<this.hashCount;c++){const f=this.Ae(a,o,c);if(!this.Re(f))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new dm(c,o,i);return a.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const i=Xv(e),[a,o]=Zv(i);for(let c=0;c<this.hashCount;c++){const f=this.Ae(a,o,c);this.Ve(f)}}Ve(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,i,a,o,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new eh(zt.min(),o,new Ne(Qt),Vr(),Wt())}}class qo{constructor(e,i,a,o,c){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new qo(a,i,Wt(),Wt(),Wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,i,a,o){this.me=e,this.removedTargetIds=i,this.key=a,this.fe=o}}class B_{constructor(e,i){this.targetId=e,this.ge=i}}class q_{constructor(e,i,a=gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class Jv{constructor(){this.pe=0,this.ye=t0(),this.we=gn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Wt(),i=Wt(),a=Wt();return this.ye.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:kt()}}),new qo(this.we,this.Se,e,i,a)}Me(){this.be=!1,this.ye=t0()}xe(e,i){this.be=!0,this.ye=this.ye.insert(e,i)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ue(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class TA{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Vr(),this.$e=pc(),this.Ue=pc(),this.Ke=new Ne(Qt)}We(e){for(const i of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(i,e.fe):this.ze(i,e.key,e.fe);for(const i of e.removedTargetIds)this.ze(i,e.key,e.fe)}je(e){this.forEachTarget(e,i=>{const a=this.He(i);switch(e.state){case 0:this.Je(i)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(i);break;case 3:this.Je(i)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(i)&&(this.Ye(i),a.Ce(e.resumeToken));break;default:kt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.qe.forEach((a,o)=>{this.Je(o)&&i(o)})}Ze(e){const i=e.targetId,a=e.ge.count,o=this.Xe(i);if(o){const c=o.target;if(Ld(c))if(a===0){const f=new Nt(c.path);this.ze(i,f,Sn.newNoDocument(f,zt.min()))}else ue(a===1);else{const f=this.et(i);if(f!==a){const m=this.tt(e),g=m?this.nt(m,e,f):1;if(g!==0){this.Ye(i);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,p)}}}}}tt(e){const i=e.ge.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=i;let f,m;try{f=ms(a).toUint8Array()}catch(g){if(g instanceof d_)return tl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new dm(f,o,c)}catch(g){return tl(g instanceof bo?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(e,i,a){return i.ge.count===a-this.st(e,i.targetId)?0:2}st(e,i){const a=this.ke.getRemoteKeysForTarget(i);let o=0;return a.forEach(c=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.ze(i,c,null),o++)}),o}ot(e){const i=new Map;this.qe.forEach((c,f)=>{const m=this.Xe(f);if(m){if(c.current&&Ld(m.target)){const g=new Nt(m.target.path);this._t(g).has(f)||this.ut(f,g)||this.ze(f,g,Sn.newNoDocument(g,e))}c.ve&&(i.set(f,c.Fe()),c.Me())}});let a=Wt();this.Ue.forEach((c,f)=>{let m=!0;f.forEachWhile(g=>{const p=this.Xe(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(a=a.add(c))}),this.Qe.forEach((c,f)=>f.setReadTime(e));const o=new eh(e,i,this.Ke,this.Qe,a);return this.Qe=Vr(),this.$e=pc(),this.Ue=pc(),this.Ke=new Ne(Qt),o}Ge(e,i){if(!this.Je(e))return;const a=this.ut(e,i.key)?2:0;this.He(e).xe(i.key,a),this.Qe=this.Qe.insert(i.key,i),this.$e=this.$e.insert(i.key,this._t(i.key).add(e)),this.Ue=this.Ue.insert(i.key,this.ct(i.key).add(e))}ze(e,i,a){if(!this.Je(e))return;const o=this.He(e);this.ut(e,i)?o.xe(i,1):o.Oe(i),this.Ue=this.Ue.insert(i,this.ct(i).delete(e)),this.Ue=this.Ue.insert(i,this.ct(i).add(e)),a&&(this.Qe=this.Qe.insert(i,a))}removeTarget(e){this.qe.delete(e)}et(e){const i=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let i=this.qe.get(e);return i||(i=new Jv,this.qe.set(e,i)),i}ct(e){let i=this.Ue.get(e);return i||(i=new We(Qt),this.Ue=this.Ue.insert(e,i)),i}_t(e){let i=this.$e.get(e);return i||(i=new We(Qt),this.$e=this.$e.insert(e,i)),i}Je(e){const i=this.Xe(e)!==null;return i||xt("WatchChangeAggregator","Detected inactive target",e),i}Xe(e){const i=this.qe.get(e);return i&&i.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Jv),this.ke.getRemoteKeysForTarget(e).forEach(i=>{this.ze(e,i,null)})}ut(e,i){return this.ke.getRemoteKeysForTarget(e).has(i)}}function pc(){return new Ne(Nt.comparator)}function t0(){return new Ne(Nt.comparator)}const xA={asc:"ASCENDING",desc:"DESCENDING"},AA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wA={and:"AND",or:"OR"};class RA{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function zd(r,e){return r.useProto3Json||$c(e)?e:{value:e}}function Uc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function CA(r,e){return Uc(r,e.toTimestamp())}function Zi(r){return ue(!!r),zt.fromTimestamp(function(i){const a=ds(i);return new Ke(a.seconds,a.nanos)}(r))}function mm(r,e){return Pd(r,e).canonicalString()}function Pd(r,e){const i=function(o){return new Se(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?i:i.child(e)}function G_(r){const e=Se.fromString(r);return ue(K_(e)),e}function Bd(r,e){return mm(r.databaseId,e.path)}function _d(r,e){const i=G_(e);if(i.get(1)!==r.databaseId.projectId)throw new At(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new At(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Nt(Q_(i))}function F_(r,e){return mm(r.databaseId,e)}function DA(r){const e=G_(r);return e.length===4?Se.emptyPath():Q_(e)}function qd(r){return new Se(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Q_(r){return ue(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function e0(r,e,i){return{name:Bd(r,e),fields:i.value.mapValue.fields}}function IA(r,e){let i;if("targetChange"in e){e.targetChange;const a=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:kt()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(p,b){return p.useProto3Json?(ue(b===void 0||typeof b=="string"),gn.fromBase64String(b||"")):(ue(b===void 0||b instanceof Buffer||b instanceof Uint8Array),gn.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(p){const b=p.code===void 0?ut.UNKNOWN:P_(p.code);return new At(b,p.message||"")}(f);i=new q_(a,o,c,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=_d(r,a.document.name),c=Zi(a.document.updateTime),f=a.document.createTime?Zi(a.document.createTime):zt.min(),m=new kn({mapValue:{fields:a.document.fields}}),g=Sn.newFoundDocument(o,c,f,m),p=a.targetIds||[],b=a.removedTargetIds||[];i=new Ac(p,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=_d(r,a.document),c=a.readTime?Zi(a.readTime):zt.min(),f=Sn.newNoDocument(o,c),m=a.removedTargetIds||[];i=new Ac([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=_d(r,a.document),c=a.removedTargetIds||[];i=new Ac([],c,o,null)}else{if(!("filter"in e))return kt();{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,f=new EA(o,c),m=a.targetId;i=new B_(m,f)}}return i}function NA(r,e){let i;if(e instanceof Bo)i={update:e0(r,e.key,e.value)};else if(e instanceof th)i={delete:Bd(r,e.key)};else if(e instanceof _s)i={update:e0(r,e.key,e.data),updateMask:PA(e.fieldMask)};else{if(!(e instanceof yA))return kt();i={verify:Bd(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(c,f){const m=f.transform;if(m instanceof Oo)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof jo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Lo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof kc)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw kt()}(0,a))),e.precondition.isNone||(i.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:CA(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:kt()}(r,e.precondition)),i}function VA(r,e){return r&&r.length>0?(ue(e!==void 0),r.map(i=>function(o,c){let f=o.updateTime?Zi(o.updateTime):Zi(c);return f.isEqual(zt.min())&&(f=Zi(c)),new mA(f,o.transformResults||[])}(i,e))):[]}function MA(r,e){return{documents:[F_(r,e.path)]}}function OA(r,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=F_(r,o);const c=function(p){if(p.length!==0)return Y_(Ci.create(p,"and"))}(e.filters);c&&(i.structuredQuery.where=c);const f=function(p){if(p.length!==0)return p.map(b=>function(A){return{field:Ka(A.field),direction:kA(A.dir)}}(b))}(e.orderBy);f&&(i.structuredQuery.orderBy=f);const m=zd(r,e.limit);return m!==null&&(i.structuredQuery.limit=m),e.startAt&&(i.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:i,parent:o}}function jA(r){let e=DA(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){ue(a===1);const b=i.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];i.where&&(c=function(S){const A=$_(S);return A instanceof Ci&&T_(A)?A.getFilters():[A]}(i.where));let f=[];i.orderBy&&(f=function(S){return S.map(A=>function(N){return new Lc(Wa(N.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(A))}(i.orderBy));let m=null;i.limit&&(m=function(S){let A;return A=typeof S=="object"?S.value:S,$c(A)?null:A}(i.limit));let g=null;i.startAt&&(g=function(S){const A=!!S.before,I=S.values||[];return new jc(I,A)}(i.startAt));let p=null;return i.endAt&&(p=function(S){const A=!S.before,I=S.values||[];return new jc(I,A)}(i.endAt)),tA(e,o,f,c,m,"F",g,p)}function LA(r,e){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt()}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function $_(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Wa(i.unaryFilter.field);return He.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Wa(i.unaryFilter.field);return He.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Wa(i.unaryFilter.field);return He.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Wa(i.unaryFilter.field);return He.create(f,"!=",{nullValue:"NULL_VALUE"});default:return kt()}}(r):r.fieldFilter!==void 0?function(i){return He.create(Wa(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return Ci.create(i.compositeFilter.filters.map(a=>$_(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return kt()}}(i.compositeFilter.op))}(r):kt()}function kA(r){return xA[r]}function UA(r){return AA[r]}function zA(r){return wA[r]}function Ka(r){return{fieldPath:r.canonicalString()}}function Wa(r){return pn.fromServerFormat(r.fieldPath)}function Y_(r){return r instanceof He?function(i){if(i.op==="=="){if(qv(i.value))return{unaryFilter:{field:Ka(i.field),op:"IS_NAN"}};if(Bv(i.value))return{unaryFilter:{field:Ka(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(qv(i.value))return{unaryFilter:{field:Ka(i.field),op:"IS_NOT_NAN"}};if(Bv(i.value))return{unaryFilter:{field:Ka(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(i.field),op:UA(i.op),value:i.value}}}(r):r instanceof Ci?function(i){const a=i.getFilters().map(o=>Y_(o));return a.length===1?a[0]:{compositeFilter:{op:zA(i.op),filters:a}}}(r):kt()}function PA(r){const e=[];return r.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function K_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,i,a,o,c=zt.min(),f=zt.min(),m=gn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.Tt=e}}function qA(r){const e=jA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.Tn=new GA}addToCollectionParentIndex(e,i){return this.Tn.add(i),ct.resolve()}getCollectionParents(e,i){return ct.resolve(this.Tn.getEntries(i))}addFieldIndex(e,i){return ct.resolve()}deleteFieldIndex(e,i){return ct.resolve()}deleteAllFieldIndexes(e){return ct.resolve()}createTargetIndexes(e,i){return ct.resolve()}getDocumentsMatchingTarget(e,i){return ct.resolve(null)}getIndexType(e,i){return ct.resolve(0)}getFieldIndexes(e,i){return ct.resolve([])}getNextCollectionGroupToUpdate(e){return ct.resolve(null)}getMinOffset(e,i){return ct.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,i){return ct.resolve(fs.min())}updateCollectionGroup(e,i,a){return ct.resolve()}updateIndexEntries(e,i){return ct.resolve()}}class GA{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new We(Se.comparator),c=!o.has(a);return this.index[i]=o.add(a),c}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new We(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W_=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(W_,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new rl(0)}static Kn(){return new rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="LruGarbageCollector",FA=1048576;function r0([r,e],[i,a]){const o=Qt(r,i);return o===0?Qt(e,a):o}class QA{constructor(e){this.Hn=e,this.buffer=new We(r0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const i=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();r0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class $A{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){xt(i0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){fl(i)?xt(i0,"Ignoring IndexedDB error during garbage collection: ",i):await hl(i)}await this.er(3e5)})}}class YA{constructor(e,i){this.tr=e,this.params=i}calculateTargetCount(e,i){return this.tr.nr(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(i===0)return ct.resolve(Qc.ae);const a=new QA(i);return this.tr.forEachTarget(e,o=>a.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>a.Zn(o))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.tr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.tr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(xt("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(n0)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n0):this.ir(e,i))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,i){let a,o,c,f,m,g,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(a=S,m=Date.now(),this.removeTargets(e,a,i))).next(S=>(c=S,g=Date.now(),this.removeOrphanedDocuments(e,a))).next(S=>(p=Date.now(),$a()<=ne.DEBUG&&xt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(p-g)+`ms
Total Duration: ${p-b}ms`),ct.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S})))}}function KA(r,e){return new YA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.changes=new ra(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?ct.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,i))).next(o=>(a!==null&&wo(a.mutation,o,Kn.empty(),Ke.now()),o))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.getLocalViewOfDocuments(e,a,Wt()).next(()=>a))}getLocalViewOfDocuments(e,i,a=Wt()){const o=Zs();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,a).next(c=>{let f=Eo();return c.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,i){const a=Zs();return this.populateOverlays(e,a,i).next(()=>this.computeViews(e,i,a,Wt()))}populateOverlays(e,i,a){const o=[];return a.forEach(c=>{i.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((f,m)=>{i.set(f,m)})})}computeViews(e,i,a,o){let c=Vr();const f=Ao(),m=function(){return Ao()}();return i.forEach((g,p)=>{const b=a.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof _s)?c=c.insert(p.key,p):b!==void 0?(f.set(p.key,b.mutation.getFieldMask()),wo(b.mutation,p,b.mutation.getFieldMask(),Ke.now())):f.set(p.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((p,b)=>f.set(p,b)),i.forEach((p,b)=>{var S;return m.set(p,new XA(b,(S=f.get(p))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,i){const a=Ao();let o=new Ne((f,m)=>f-m),c=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(f=>{for(const m of f)m.keys().forEach(g=>{const p=i.get(g);if(p===null)return;let b=a.get(g)||Kn.empty();b=m.applyToLocalView(p,b),a.set(g,b);const S=(o.get(m.batchId)||Wt()).add(g);o=o.insert(m.batchId,S)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,b=g.value,S=V_();b.forEach(A=>{if(!c.has(A)){const I=U_(i.get(A),a.get(A));I!==null&&S.set(A,I),c=c.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,S))}return ct.waitFor(f)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,i,a,o){return function(f){return Nt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):R_(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next(c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-c.size):ct.resolve(Zs());let m=Io,g=c;return f.next(p=>ct.forEach(p,(b,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),c.get(b)?ct.resolve():this.remoteDocumentCache.getEntry(e,b).next(A=>{g=g.insert(b,A)}))).next(()=>this.populateOverlays(e,p,c)).next(()=>this.computeViews(e,g,p,Wt())).next(b=>({batchId:m,changes:N_(b)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Nt(i)).next(a=>{let o=Eo();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const c=i.collectionGroup;let f=Eo();return this.indexManager.getCollectionParents(e,c).next(m=>ct.forEach(m,g=>{const p=function(S,A){return new Po(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(i,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next(b=>{b.forEach((S,A)=>{f=f.insert(S,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,i,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,c,o))).next(f=>{c.forEach((g,p)=>{const b=p.getKey();f.get(b)===null&&(f=f.insert(b,Sn.newInvalidDocument(b)))});let m=Eo();return f.forEach((g,p)=>{const b=c.get(g);b!==void 0&&wo(b.mutation,p,Kn.empty(),Ke.now()),Xc(i,p)&&(m=m.insert(g,p))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,i){return ct.resolve(this.dr.get(i))}saveBundleMetadata(e,i){return this.dr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:Zi(o.createTime)}}(i)),ct.resolve()}getNamedQuery(e,i){return ct.resolve(this.Ar.get(i))}saveNamedQuery(e,i){return this.Ar.set(i.name,function(o){return{name:o.name,query:qA(o.bundledQuery),readTime:Zi(o.readTime)}}(i)),ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.overlays=new Ne(Nt.comparator),this.Rr=new Map}getOverlay(e,i){return ct.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Zs();return ct.forEach(i,o=>this.getOverlay(e,o).next(c=>{c!==null&&a.set(o,c)})).next(()=>a)}saveOverlays(e,i,a){return a.forEach((o,c)=>{this.Et(e,i,c)}),ct.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.Rr.get(a);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(a)),ct.resolve()}getOverlaysForCollection(e,i,a){const o=Zs(),c=i.length+1,f=new Nt(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!i.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>a&&o.set(g.getKey(),g)}return ct.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let c=new Ne((p,b)=>p-b);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===i&&p.largestBatchId>a){let b=c.get(p.largestBatchId);b===null&&(b=Zs(),c=c.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const m=Zs(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,b)=>m.set(p,b)),!(m.size()>=o)););return ct.resolve(m)}Et(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(a.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new _A(i,a));let c=this.Rr.get(i);c===void 0&&(c=Wt(),this.Rr.set(i,c)),this.Rr.set(i,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ct.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.Vr=new We(ln.mr),this.gr=new We(ln.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,i){const a=new ln(e,i);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.wr(new ln(e,i))}Sr(e,i){e.forEach(a=>this.removeReference(a,i))}br(e){const i=new Nt(new Se([])),a=new ln(i,e),o=new ln(i,e+1),c=[];return this.gr.forEachInRange([a,o],f=>{this.wr(f),c.push(f.key)}),c}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const i=new Nt(new Se([])),a=new ln(i,e),o=new ln(i,e+1);let c=Wt();return this.gr.forEachInRange([a,o],f=>{c=c.add(f.key)}),c}containsKey(e){const i=new ln(e,0),a=this.Vr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class ln{constructor(e,i){this.key=e,this.Cr=i}static mr(e,i){return Nt.comparator(e.key,i.key)||Qt(e.Cr,i.Cr)}static pr(e,i){return Qt(e.Cr,i.Cr)||Nt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.Fr=1,this.Mr=new We(ln.mr)}checkEmpty(e){return ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new vA(c,i,a,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new ln(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ct.resolve(f)}lookupMutationBatch(e,i){return ct.resolve(this.Or(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.Nr(a),c=o<0?0:o;return ct.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(this.mutationQueue.length===0?am:this.Fr-1)}getAllMutationBatches(e){return ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new ln(i,0),o=new ln(i,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([a,o],f=>{const m=this.Or(f.Cr);c.push(m)}),ct.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new We(Qt);return i.forEach(o=>{const c=new ln(o,0),f=new ln(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,f],m=>{a=a.add(m.Cr)})}),ct.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let c=a;Nt.isDocumentKey(c)||(c=c.child(""));const f=new ln(new Nt(c),0);let m=new We(Qt);return this.Mr.forEachWhile(g=>{const p=g.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Cr)),!0)},f),ct.resolve(this.Br(m))}Br(e){const i=[];return e.forEach(a=>{const o=this.Or(a);o!==null&&i.push(o)}),i}removeMutationBatch(e,i){ue(this.Lr(i.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return ct.forEach(i.mutations,o=>{const c=new ln(o.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,i){const a=new ln(i,0),o=this.Mr.firstAfterOrEqual(a);return ct.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ct.resolve()}Lr(e,i){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const i=this.Nr(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.kr=e,this.docs=function(){return new Ne(Nt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),c=o?o.size:0,f=this.kr(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ct.resolve(a?a.document.mutableCopy():Sn.newInvalidDocument(i))}getEntries(e,i){let a=Vr();return i.forEach(o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():Sn.newInvalidDocument(o))}),ct.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let c=Vr();const f=i.path,m=new Nt(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:b}}=g.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||Vx(Nx(b),a)<=0||(o.has(b.key)||Xc(i,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ct.resolve(c)}getAllFromCollectionGroup(e,i,a,o){kt()}qr(e,i){return ct.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new rw(this)}getSize(e){return ct.resolve(this.size)}}class rw extends WA{constructor(e){super(),this.Ir=e}applyChanges(e){const i=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?i.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(a)}),ct.waitFor(i)}getFromCache(e,i){return this.Ir.getEntry(e,i)}getAllFromCache(e,i){return this.Ir.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.persistence=e,this.Qr=new ra(i=>um(i),cm),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new pm,this.targetCount=0,this.Kr=rl.Un()}forEachTarget(e,i){return this.Qr.forEach((a,o)=>i(o)),ct.resolve()}getLastRemoteSnapshotVersion(e){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ct.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.$r&&(this.$r=i),ct.resolve()}zn(e){this.Qr.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Kr=new rl(i),this.highestTargetId=i),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,i){return this.zn(i),this.targetCount+=1,ct.resolve()}updateTargetData(e,i){return this.zn(i),ct.resolve()}removeTargetData(e,i){return this.Qr.delete(i.target),this.Ur.br(i.targetId),this.targetCount-=1,ct.resolve()}removeTargets(e,i,a){let o=0;const c=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=i&&a.get(m.targetId)===null&&(this.Qr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ct.waitFor(c).next(()=>o)}getTargetCount(e){return ct.resolve(this.targetCount)}getTargetData(e,i){const a=this.Qr.get(i)||null;return ct.resolve(a)}addMatchingKeys(e,i,a){return this.Ur.yr(i,a),ct.resolve()}removeMatchingKeys(e,i,a){this.Ur.Sr(i,a);const o=this.persistence.referenceDelegate,c=[];return o&&i.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),ct.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this.Ur.br(i),ct.resolve()}getMatchingKeysForTargetId(e,i){const a=this.Ur.vr(i);return ct.resolve(a)}containsKey(e,i){return ct.resolve(this.Ur.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,i){this.Wr={},this.overlays={},this.Gr=new Qc(0),this.zr=!1,this.zr=!0,this.jr=new ew,this.referenceDelegate=e(this),this.Hr=new sw(this),this.indexManager=new HA,this.remoteDocumentCache=function(o){return new iw(o)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new BA(i),this.Yr=new JA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new tw,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.Wr[e.toKey()];return a||(a=new nw(i,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,i,a){xt("MemoryPersistence","Starting transaction:",e);const o=new aw(this.Gr.next());return this.referenceDelegate.Zr(),a(o).next(c=>this.referenceDelegate.Xr(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}ei(e,i){return ct.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,i)))}}class aw extends Ox{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.ti=new pm,this.ni=null}static ri(e){return new gm(e)}get ii(){if(this.ni)return this.ni;throw kt()}addReference(e,i,a){return this.ti.addReference(a,i),this.ii.delete(a.toString()),ct.resolve()}removeReference(e,i,a){return this.ti.removeReference(a,i),this.ii.add(a.toString()),ct.resolve()}markPotentiallyOrphaned(e,i){return this.ii.add(i.toString()),ct.resolve()}removeTarget(e,i){this.ti.br(i.targetId).forEach(o=>this.ii.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(o=>{o.forEach(c=>this.ii.add(c.toString()))}).next(()=>a.removeTargetData(e,i))}Zr(){this.ni=new Set}Xr(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.ii,a=>{const o=Nt.fromPath(a);return this.si(e,o).next(c=>{c||i.removeEntry(o,zt.min())})}).next(()=>(this.ni=null,i.apply(e)))}updateLimboDocument(e,i){return this.si(e,i).next(a=>{a?this.ii.delete(i.toString()):this.ii.add(i.toString())})}Jr(e){return 0}si(e,i){return ct.or([()=>ct.resolve(this.ti.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.ei(e,i)])}}class zc{constructor(e,i){this.persistence=e,this.oi=new ra(a=>kx(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=KA(this,i)}static ri(e,i){return new zc(e,i)}Zr(){}Xr(e){return ct.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}nr(e){const i=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>i.next(o=>a+o))}sr(e){let i=0;return this.rr(e,a=>{i++}).next(()=>i)}rr(e,i){return ct.forEach(this.oi,(a,o)=>this.ar(e,a,o).next(c=>c?ct.resolve():i(o)))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,i).next(m=>{m||(a++,c.removeEntry(f,zt.min()))})).next(()=>c.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,i){return this.oi.set(i,e.currentSequenceNumber),ct.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.oi.set(a,e.currentSequenceNumber),ct.resolve()}removeReference(e,i,a){return this.oi.set(a,e.currentSequenceNumber),ct.resolve()}updateLimboDocument(e,i){return this.oi.set(i,e.currentSequenceNumber),ct.resolve()}Jr(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Sc(e.data.value)),i}ar(e,i,a){return ct.or([()=>this.persistence.ei(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.oi.get(i);return ct.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Hi=a,this.Ji=o}static Yi(e,i){let a=Wt(),o=Wt();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new ym(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return eT()?8:jx(JS())>0?6:4}()}initialize(e,i){this.ns=e,this.indexManager=i,this.Zi=!0}getDocumentsMatchingQuery(e,i,a,o){const c={result:null};return this.rs(e,i).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ss(e,i,o,a).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new lw;return this._s(e,i,f).next(m=>{if(c.result=m,this.Xi)return this.us(e,i,f,m.size)})}).next(()=>c.result)}us(e,i,a,o){return a.documentReadCount<this.es?($a()<=ne.DEBUG&&xt("QueryEngine","SDK will not create cache indexes for query:",Ya(i),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ct.resolve()):($a()<=ne.DEBUG&&xt("QueryEngine","Query:",Ya(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ts*o?($a()<=ne.DEBUG&&xt("QueryEngine","The SDK decides to create cache indexes for query:",Ya(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xi(i))):ct.resolve())}rs(e,i){if(Qv(i))return ct.resolve(null);let a=Xi(i);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=Ud(i,null,"F"),a=Xi(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next(c=>{const f=Wt(...c);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,a).next(g=>{const p=this.cs(i,m);return this.ls(i,p,f,g.readTime)?this.rs(e,Ud(i,null,"F")):this.hs(e,p,i,g)}))})))}ss(e,i,a,o){return Qv(i)||o.isEqual(zt.min())?ct.resolve(null):this.ns.getDocuments(e,a).next(c=>{const f=this.cs(i,c);return this.ls(i,f,a,o)?ct.resolve(null):($a()<=ne.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ya(i)),this.hs(e,f,i,Ix(o,Io)).next(m=>m))})}cs(e,i){let a=new We(D_(e));return i.forEach((o,c)=>{Xc(e,c)&&(a=a.add(c))}),a}ls(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}_s(e,i,a){return $a()<=ne.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",Ya(i)),this.ns.getDocumentsMatchingQuery(e,i,fs.min(),a)}hs(e,i,a,o){return this.ns.getDocumentsMatchingQuery(e,a,o).next(c=>(i.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="LocalStore",uw=3e8;class cw{constructor(e,i,a,o){this.persistence=e,this.Ps=i,this.serializer=o,this.Ts=new Ne(Qt),this.Is=new ra(c=>um(c),cm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZA(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ts))}}function hw(r,e,i,a){return new cw(r,e,i,a)}async function Z_(r,e){const i=Pt(r);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next(c=>(o=c,i.As(e),i.mutationQueue.getAllMutationBatches(a))).next(c=>{const f=[],m=[];let g=Wt();for(const p of o){f.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}for(const p of c){m.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}return i.localDocuments.getDocuments(a,g).next(p=>({Rs:p,removedBatchIds:f,addedBatchIds:m}))})})}function fw(r,e){const i=Pt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),c=i.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,p,b){const S=p.batch,A=S.keys();let I=ct.resolve();return A.forEach(N=>{I=I.next(()=>b.getEntry(g,N)).next(G=>{const B=p.docVersions.get(N);ue(B!==null),G.version.compareTo(B)<0&&(S.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),b.addEntry(G)))})}),I.next(()=>m.mutationQueue.removeMutationBatch(g,S))}(i,a,e,c).next(()=>c.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(m){let g=Wt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g}(e))).next(()=>i.localDocuments.getDocuments(a,o))})}function J_(r){const e=Pt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Hr.getLastRemoteSnapshotVersion(i))}function dw(r,e){const i=Pt(r),a=e.snapshotVersion;let o=i.Ts;return i.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=i.ds.newChangeBuffer({trackRemovals:!0});o=i.Ts;const m=[];e.targetChanges.forEach((b,S)=>{const A=o.get(S);if(!A)return;m.push(i.Hr.removeMatchingKeys(c,b.removedDocuments,S).next(()=>i.Hr.addMatchingKeys(c,b.addedDocuments,S)));let I=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?I=I.withResumeToken(gn.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):b.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(b.resumeToken,a)),o=o.insert(S,I),function(G,B,H){return G.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=uw?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(A,I,b)&&m.push(i.Hr.updateTargetData(c,I))});let g=Vr(),p=Wt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(c,b))}),m.push(mw(c,f,e.documentUpdates).next(b=>{g=b.Vs,p=b.fs})),!a.isEqual(zt.min())){const b=i.Hr.getLastRemoteSnapshotVersion(c).next(S=>i.Hr.setTargetsMetadata(c,c.currentSequenceNumber,a));m.push(b)}return ct.waitFor(m).next(()=>f.apply(c)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,g,p)).next(()=>g)}).then(c=>(i.Ts=o,c))}function mw(r,e,i){let a=Wt(),o=Wt();return i.forEach(c=>a=a.add(c)),e.getEntries(r,a).next(c=>{let f=Vr();return i.forEach((m,g)=>{const p=c.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(zt.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):xt(vm,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)}),{Vs:f,fs:o}})}function pw(r,e){const i=Pt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=am),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function gw(r,e){const i=Pt(r);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return i.Hr.getTargetData(a,e).next(c=>c?(o=c,ct.resolve(o)):i.Hr.allocateTargetId(a).next(f=>(o=new as(e,f,"TargetPurposeListen",a.currentSequenceNumber),i.Hr.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=i.Ts.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ts=i.Ts.insert(a.targetId,a),i.Is.set(e,a.targetId)),a})}async function Hd(r,e,i){const a=Pt(r),o=a.Ts.get(e),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,f=>a.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!fl(f))throw f;xt(vm,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ts=a.Ts.remove(e),a.Is.delete(o.target)}function s0(r,e,i){const a=Pt(r);let o=zt.min(),c=Wt();return a.persistence.runTransaction("Execute query","readwrite",f=>function(g,p,b){const S=Pt(g),A=S.Is.get(b);return A!==void 0?ct.resolve(S.Ts.get(A)):S.Hr.getTargetData(p,b)}(a,f,Xi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(f,m.targetId).next(g=>{c=g})}).next(()=>a.Ps.getDocumentsMatchingQuery(f,e,i?o:zt.min(),i?c:Wt())).next(m=>(yw(a,nA(e),m),{documents:m,gs:c})))}function yw(r,e,i){let a=r.Es.get(e)||zt.min();i.forEach((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),r.Es.set(e,a)}class a0{constructor(){this.activeTargetIds=oA()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vw{constructor(){this.ho=new a0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,i,a){this.Po[e]=i}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new a0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="ConnectivityMonitor";class o0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){xt(l0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){xt(l0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function Gd(){return gc===null?gc=function(){return 268435456+Math.round(2147483648*Math.random())}():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="RestConnection",Ew={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bw{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=i+"://"+e.host,this.yo=`projects/${a}/databases/${o}`,this.wo=this.databaseId.database===Mc?`project_id=${a}`:`project_id=${a}&database_id=${o}`}So(e,i,a,o,c){const f=Gd(),m=this.bo(e,i.toUriEncodedString());xt(Ed,`Sending RPC '${e}' ${f}:`,m,a);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,c),this.vo(e,m,g,a).then(p=>(xt(Ed,`Received RPC '${e}' ${f}: `,p),p),p=>{throw tl(Ed,`RPC '${e}' ${f} failed with error: `,p,"url: ",m,"request:",a),p})}Co(e,i,a,o,c,f){return this.So(e,i,a,o,c)}Do(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,c)=>e[c]=o),a&&a.headers.forEach((o,c)=>e[c]=o)}bo(e,i){const a=Ew[e];return`${this.po}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class Tw extends bw{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,i,a,o){const c=Gd();return new Promise((f,m)=>{const g=new i_;g.setWithCredentials(!0),g.listenOnce(r_.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case bc.NO_ERROR:const b=g.getResponseJson();xt(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),f(b);break;case bc.TIMEOUT:xt(En,`RPC '${e}' ${c} timed out`),m(new At(ut.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const S=g.getStatus();if(xt(En,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A==null?void 0:A.error;if(I&&I.status&&I.message){const N=function(B){const H=B.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(H)>=0?H:ut.UNKNOWN}(I.status);m(new At(N,I.message))}else m(new At(ut.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new At(ut.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{xt(En,`RPC '${e}' ${c} completed.`)}});const p=JSON.stringify(o);xt(En,`RPC '${e}' ${c} sending request:`,o),g.send(i,"POST",p,a,15)})}Wo(e,i,a){const o=Gd(),c=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=l_(),m=a_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,i,a),g.encodeInitMessageHeaders=!0;const b=c.join("");xt(En,`Creating RPC '${e}' stream ${o}: ${b}`,g);const S=f.createWebChannel(b,g);let A=!1,I=!1;const N=new Sw({Fo:B=>{I?xt(En,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(A||(xt(En,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),xt(En,`RPC '${e}' stream ${o} sending:`,B),S.send(B))},Mo:()=>S.close()}),G=(B,H,X)=>{B.listen(H,P=>{try{X(P)}catch(lt){setTimeout(()=>{throw lt},0)}})};return G(S,_o.EventType.OPEN,()=>{I||(xt(En,`RPC '${e}' stream ${o} transport opened.`),N.Qo())}),G(S,_o.EventType.CLOSE,()=>{I||(I=!0,xt(En,`RPC '${e}' stream ${o} transport closed`),N.Uo())}),G(S,_o.EventType.ERROR,B=>{I||(I=!0,tl(En,`RPC '${e}' stream ${o} transport errored:`,B),N.Uo(new At(ut.UNAVAILABLE,"The operation could not be completed")))}),G(S,_o.EventType.MESSAGE,B=>{var H;if(!I){const X=B.data[0];ue(!!X);const P=X,lt=(P==null?void 0:P.error)||((H=P[0])===null||H===void 0?void 0:H.error);if(lt){xt(En,`RPC '${e}' stream ${o} received error:`,lt);const mt=lt.status;let bt=function(w){const L=qe[w];if(L!==void 0)return P_(L)}(mt),V=lt.message;bt===void 0&&(bt=ut.INTERNAL,V="Unknown error status: "+mt+" with message "+lt.message),I=!0,N.Uo(new At(bt,V)),S.close()}else xt(En,`RPC '${e}' stream ${o} received:`,X),N.Ko(X)}}),G(m,s_.STAT_EVENT,B=>{B.stat===Nd.PROXY?xt(En,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Nd.NOPROXY&&xt(En,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{N.$o()},0),N}}function bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(r){return new RA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,i,a=1e3,o=1.5,c=6e4){this.Ti=e,this.timerId=i,this.Go=a,this.zo=o,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const i=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),o=Math.max(0,i-a);o>0&&xt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="PersistentStream";class e1{constructor(e,i,a,o,c,f,m,g){this.Ti=e,this.n_=a,this.r_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new t1(e,i)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,i){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():i&&i.code===ut.RESOURCE_EXHAUSTED?(Nr(i.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):i&&i.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(i)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),i=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.i_===i&&this.V_(a,o)},a=>{e(()=>{const o=new At(ut.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(o)})})}V_(e,i){const a=this.R_(this.i_);this.stream=this.f_(e,i),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{a(()=>this.m_(o))}),this.stream.onMessage(o=>{a(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return xt(u0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return i=>{this.Ti.enqueueAndForget(()=>this.i_===e?i():(xt(u0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xw extends e1{constructor(e,i,a,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}f_(e,i){return this.connection.Wo("Listen",e,i)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const i=IA(this.serializer,e),a=function(c){if(!("targetChange"in c))return zt.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?zt.min():f.readTime?Zi(f.readTime):zt.min()}(e);return this.listener.p_(i,a)}y_(e){const i={};i.database=qd(this.serializer),i.addTarget=function(c,f){let m;const g=f.target;if(m=Ld(g)?{documents:MA(c,g)}:{query:OA(c,g).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=H_(c,f.resumeToken);const p=zd(c,f.expectedCount);p!==null&&(m.expectedCount=p)}else if(f.snapshotVersion.compareTo(zt.min())>0){m.readTime=Uc(c,f.snapshotVersion.toTimestamp());const p=zd(c,f.expectedCount);p!==null&&(m.expectedCount=p)}return m}(this.serializer,e);const a=LA(this.serializer,e);a&&(i.labels=a),this.I_(i)}w_(e){const i={};i.database=qd(this.serializer),i.removeTarget=e,this.I_(i)}}class Aw extends e1{constructor(e,i,a,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,i){return this.connection.Wo("Write",e,i)}g_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const i=VA(e.writeResults,e.commitTime),a=Zi(e.commitTime);return this.listener.v_(a,i)}C_(){const e={};e.database=qd(this.serializer),this.I_(e)}b_(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>NA(this.serializer,a))};this.I_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Rw extends ww{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new At(ut.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.So(e,Pd(i,a),o,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new At(ut.UNKNOWN,c.toString())})}Co(e,i,a,o,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,Pd(i,a),o,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new At(ut.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Cw{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Nr(i),this.N_=!1):xt("OnlineStateTracker",i)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RemoteStore";class Dw{constructor(e,i,a,o,c){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(f=>{a.enqueueAndForget(async()=>{sa(this)&&(xt(na,"Restarting streams for network reachability change."),await async function(g){const p=Pt(g);p.W_.add(4),await Ho(p),p.j_.set("Unknown"),p.W_.delete(4),await ih(p)}(this))})}),this.j_=new Cw(a,o)}}async function ih(r){if(sa(r))for(const e of r.G_)await e(!0)}async function Ho(r){for(const e of r.G_)await e(!1)}function n1(r,e){const i=Pt(r);i.K_.has(e.targetId)||(i.K_.set(e.targetId,e),Sm(i)?bm(i):dl(i).c_()&&Em(i,e))}function _m(r,e){const i=Pt(r),a=dl(i);i.K_.delete(e),a.c_()&&i1(i,e),i.K_.size===0&&(a.c_()?a.P_():sa(i)&&i.j_.set("Unknown"))}function Em(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zt.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}dl(r).y_(e)}function i1(r,e){r.H_.Ne(e),dl(r).w_(e)}function bm(r){r.H_=new TA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),dl(r).start(),r.j_.B_()}function Sm(r){return sa(r)&&!dl(r).u_()&&r.K_.size>0}function sa(r){return Pt(r).W_.size===0}function r1(r){r.H_=void 0}async function Iw(r){r.j_.set("Online")}async function Nw(r){r.K_.forEach((e,i)=>{Em(r,e)})}async function Vw(r,e){r1(r),Sm(r)?(r.j_.q_(e),bm(r)):r.j_.set("Unknown")}async function Mw(r,e,i){if(r.j_.set("Online"),e instanceof q_&&e.state===2&&e.cause)try{await async function(o,c){const f=c.cause;for(const m of c.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(r,e)}catch(a){xt(na,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Pc(r,a)}else if(e instanceof Ac?r.H_.We(e):e instanceof B_?r.H_.Ze(e):r.H_.je(e),!i.isEqual(zt.min()))try{const a=await J_(r.localStore);i.compareTo(a)>=0&&await function(c,f){const m=c.H_.ot(f);return m.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.K_.get(p);b&&c.K_.set(p,b.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,p)=>{const b=c.K_.get(g);if(!b)return;c.K_.set(g,b.withResumeToken(gn.EMPTY_BYTE_STRING,b.snapshotVersion)),i1(c,g);const S=new as(b.target,g,p,b.sequenceNumber);Em(c,S)}),c.remoteSyncer.applyRemoteEvent(m)}(r,i)}catch(a){xt(na,"Failed to raise snapshot:",a),await Pc(r,a)}}async function Pc(r,e,i){if(!fl(e))throw e;r.W_.add(1),await Ho(r),r.j_.set("Offline"),i||(i=()=>J_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{xt(na,"Retrying IndexedDB access"),await i(),r.W_.delete(1),await ih(r)})}function s1(r,e){return e().catch(i=>Pc(r,i,e))}async function rh(r){const e=Pt(r),i=gs(e);let a=e.U_.length>0?e.U_[e.U_.length-1].batchId:am;for(;Ow(e);)try{const o=await pw(e.localStore,a);if(o===null){e.U_.length===0&&i.P_();break}a=o.batchId,jw(e,o)}catch(o){await Pc(e,o)}a1(e)&&l1(e)}function Ow(r){return sa(r)&&r.U_.length<10}function jw(r,e){r.U_.push(e);const i=gs(r);i.c_()&&i.S_&&i.b_(e.mutations)}function a1(r){return sa(r)&&!gs(r).u_()&&r.U_.length>0}function l1(r){gs(r).start()}async function Lw(r){gs(r).C_()}async function kw(r){const e=gs(r);for(const i of r.U_)e.b_(i.mutations)}async function Uw(r,e,i){const a=r.U_.shift(),o=fm.from(a,e,i);await s1(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await rh(r)}async function zw(r,e){e&&gs(r).S_&&await async function(a,o){if(function(f){return bA(f)&&f!==ut.ABORTED}(o.code)){const c=a.U_.shift();gs(a).h_(),await s1(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o)),await rh(a)}}(r,e),a1(r)&&l1(r)}async function c0(r,e){const i=Pt(r);i.asyncQueue.verifyOperationInProgress(),xt(na,"RemoteStore received new credentials");const a=sa(i);i.W_.add(3),await Ho(i),a&&i.j_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.W_.delete(3),await ih(i)}async function Pw(r,e){const i=Pt(r);e?(i.W_.delete(2),await ih(i)):e||(i.W_.add(2),await Ho(i),i.j_.set("Unknown"))}function dl(r){return r.J_||(r.J_=function(i,a,o){const c=Pt(i);return c.M_(),new xw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:Iw.bind(null,r),No:Nw.bind(null,r),Lo:Vw.bind(null,r),p_:Mw.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Sm(r)?bm(r):r.j_.set("Unknown")):(await r.J_.stop(),r1(r))})),r.J_}function gs(r){return r.Y_||(r.Y_=function(i,a,o){const c=Pt(i);return c.M_(),new Aw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:Lw.bind(null,r),Lo:zw.bind(null,r),D_:kw.bind(null,r),v_:Uw.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await rh(r)):(await r.Y_.stop(),r.U_.length>0&&(xt(na,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,i,a,o,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,c){const f=Date.now()+a,m=new Tm(e,i,f,o,c);return m.start(a),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(r,e){if(Nr("AsyncQueue",`${e}: ${r}`),fl(r))return new At(ut.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Nt.comparator(i.key,a.key):(i,a)=>Nt.comparator(i.key,a.key),this.keyedMap=Eo(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new Za;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.Z_=new Ne(Nt.comparator)}track(e){const i=e.doc.key,a=this.Z_.get(i);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(i,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(i):e.type===1&&a.type===2?this.Z_=this.Z_.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):kt():this.Z_=this.Z_.insert(i,e)}X_(){const e=[];return this.Z_.inorderTraversal((i,a)=>{e.push(a)}),e}}class sl{constructor(e,i,a,o,c,f,m,g,p){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,i,a,o,c){const f=[];return i.forEach(m=>{f.push({type:0,doc:m})}),new sl(e,i,Za.emptySet(i),f,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class qw{constructor(){this.queries=f0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(i,a){const o=Pt(i),c=o.queries;o.queries=f0(),c.forEach((f,m)=>{for(const g of m.ta)g.onError(a)})})(this,new At(ut.ABORTED,"Firestore shutting down"))}}function f0(){return new ra(r=>C_(r),Wc)}async function Am(r,e){const i=Pt(r);let a=3;const o=e.query;let c=i.queries.get(o);c?!c.na()&&e.ra()&&(a=2):(c=new Bw,a=e.ra()?0:1);try{switch(a){case 0:c.ea=await i.onListen(o,!0);break;case 1:c.ea=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=xm(f,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(m)}i.queries.set(o,c),c.ta.push(e),e.sa(i.onlineState),c.ea&&e.oa(c.ea)&&Rm(i)}async function wm(r,e){const i=Pt(r),a=e.query;let o=3;const c=i.queries.get(a);if(c){const f=c.ta.indexOf(e);f>=0&&(c.ta.splice(f,1),c.ta.length===0?o=e.ra()?0:1:!c.na()&&e.ra()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function Hw(r,e){const i=Pt(r);let a=!1;for(const o of e){const c=o.query,f=i.queries.get(c);if(f){for(const m of f.ta)m.oa(o)&&(a=!0);f.ea=o}}a&&Rm(i)}function Gw(r,e,i){const a=Pt(r),o=a.queries.get(e);if(o)for(const c of o.ta)c.onError(i);a.queries.delete(e)}function Rm(r){r.ia.forEach(e=>{e.next()})}var Fd,d0;(d0=Fd||(Fd={}))._a="default",d0.Cache="cache";class Cm{constructor(e,i,a){this.query=e,this.aa=i,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new sl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.ua?this.la(e)&&(this.aa.next(e),i=!0):this.ha(e,this.onlineState)&&(this.Pa(e),i=!0),this.ca=e,i}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let i=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),i=!0),i}ha(e,i){if(!e.fromCache||!this.ra())return!0;const a=i!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}la(e){if(e.docChanges.length>0)return!0;const i=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Pa(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Fd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class Fw{constructor(e,i){this.query=e,this.fa=i,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Wt(),this.mutatedKeys=Wt(),this.ya=D_(e),this.wa=new Za(this.ya)}get Sa(){return this.fa}ba(e,i){const a=i?i.Da:new h0,o=i?i.wa:this.wa;let c=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,S)=>{const A=o.get(b),I=Xc(this.query,S)?S:null,N=!!A&&this.mutatedKeys.has(A.key),G=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let B=!1;A&&I?A.data.isEqual(I.data)?N!==G&&(a.track({type:3,doc:I}),B=!0):this.va(A,I)||(a.track({type:2,doc:I}),B=!0,(g&&this.ya(I,g)>0||p&&this.ya(I,p)<0)&&(m=!0)):!A&&I?(a.track({type:0,doc:I}),B=!0):A&&!I&&(a.track({type:1,doc:A}),B=!0,(g||p)&&(m=!0)),B&&(I?(f=f.add(I),c=G?c.add(b):c.delete(b)):(f=f.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),c=c.delete(b.key),a.track({type:1,doc:b})}return{wa:f,Da:a,ls:m,mutatedKeys:c}}va(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const c=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((b,S)=>function(I,N){const G=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}};return G(I)-G(N)}(b.type,S.type)||this.ya(b.doc,S.doc)),this.Ca(a),o=o!=null&&o;const m=i&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,p=g!==this.ga;return this.ga=g,f.length!==0||p?{snapshot:new sl(this.query,e.wa,c,f,e.mutatedKeys,g===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new h0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(i=>this.fa=this.fa.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.fa=this.fa.delete(i)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Wt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const i=[];return e.forEach(a=>{this.pa.has(a)||i.push(new u1(a))}),this.pa.forEach(a=>{e.has(a)||i.push(new o1(a))}),i}Oa(e){this.fa=e.gs,this.pa=Wt();const i=this.ba(e.documents);return this.applyChanges(i,!0)}Na(){return sl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Dm="SyncEngine";class Qw{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class $w{constructor(e){this.key=e,this.Ba=!1}}class Yw{constructor(e,i,a,o,c,f){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new ra(m=>C_(m),Wc),this.qa=new Map,this.Qa=new Set,this.$a=new Ne(Nt.comparator),this.Ua=new Map,this.Ka=new pm,this.Wa={},this.Ga=new Map,this.za=rl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Kw(r,e,i=!0){const a=p1(r);let o;const c=a.ka.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Na()):o=await c1(a,e,i,!0),o}async function Ww(r,e){const i=p1(r);await c1(i,e,!0,!1)}async function c1(r,e,i,a){const o=await gw(r.localStore,Xi(e)),c=o.targetId,f=r.sharedClientState.addLocalQueryTarget(c,i);let m;return a&&(m=await Xw(r,e,c,f==="current",o.resumeToken)),r.isPrimaryClient&&i&&n1(r.remoteStore,o),m}async function Xw(r,e,i,a,o){r.Ha=(S,A,I)=>async function(G,B,H,X){let P=B.view.ba(H);P.ls&&(P=await s0(G.localStore,B.query,!1).then(({documents:V})=>B.view.ba(V,P)));const lt=X&&X.targetChanges.get(B.targetId),mt=X&&X.targetMismatches.get(B.targetId)!=null,bt=B.view.applyChanges(P,G.isPrimaryClient,lt,mt);return p0(G,B.targetId,bt.Ma),bt.snapshot}(r,S,A,I);const c=await s0(r.localStore,e,!0),f=new Fw(e,c.gs),m=f.ba(c.documents),g=qo.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",o),p=f.applyChanges(m,r.isPrimaryClient,g);p0(r,i,p.Ma);const b=new Qw(e,i,f);return r.ka.set(e,b),r.qa.has(i)?r.qa.get(i).push(e):r.qa.set(i,[e]),p.snapshot}async function Zw(r,e,i){const a=Pt(r),o=a.ka.get(e),c=a.qa.get(o.targetId);if(c.length>1)return a.qa.set(o.targetId,c.filter(f=>!Wc(f,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Hd(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),i&&_m(a.remoteStore,o.targetId),Qd(a,o.targetId)}).catch(hl)):(Qd(a,o.targetId),await Hd(a.localStore,o.targetId,!0))}async function Jw(r,e){const i=Pt(r),a=i.ka.get(e),o=i.qa.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),_m(i.remoteStore,a.targetId))}async function t2(r,e,i){const a=l2(r);try{const o=await function(f,m){const g=Pt(f),p=Ke.now(),b=m.reduce((I,N)=>I.add(N.key),Wt());let S,A;return g.persistence.runTransaction("Locally write mutations","readwrite",I=>{let N=Vr(),G=Wt();return g.ds.getEntries(I,b).next(B=>{N=B,N.forEach((H,X)=>{X.isValidDocument()||(G=G.add(H))})}).next(()=>g.localDocuments.getOverlayedDocuments(I,N)).next(B=>{S=B;const H=[];for(const X of m){const P=gA(X,S.get(X.key).overlayedDocument);P!=null&&H.push(new _s(X.key,P,E_(P.value.mapValue),Dn.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,H,m)}).next(B=>{A=B;const H=B.applyToLocalDocumentSet(S,G);return g.documentOverlayCache.saveOverlays(I,B.batchId,H)})}).then(()=>({batchId:A.batchId,changes:N_(S)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let p=f.Wa[f.currentUser.toKey()];p||(p=new Ne(Qt)),p=p.insert(m,g),f.Wa[f.currentUser.toKey()]=p}(a,o.batchId,i),await Go(a,o.changes),await rh(a.remoteStore)}catch(o){const c=xm(o,"Failed to persist write");i.reject(c)}}async function h1(r,e){const i=Pt(r);try{const a=await dw(i.localStore,e);e.targetChanges.forEach((o,c)=>{const f=i.Ua.get(c);f&&(ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?ue(f.Ba):o.removedDocuments.size>0&&(ue(f.Ba),f.Ba=!1))}),await Go(i,a,e)}catch(a){await hl(a)}}function m0(r,e,i){const a=Pt(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.ka.forEach((c,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=Pt(f);g.onlineState=m;let p=!1;g.queries.forEach((b,S)=>{for(const A of S.ta)A.sa(m)&&(p=!0)}),p&&Rm(g)}(a.eventManager,e),o.length&&a.La.p_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function e2(r,e,i){const a=Pt(r);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Ua.get(e),c=o&&o.key;if(c){let f=new Ne(Nt.comparator);f=f.insert(c,Sn.newNoDocument(c,zt.min()));const m=Wt().add(c),g=new eh(zt.min(),new Map,new Ne(Qt),f,m);await h1(a,g),a.$a=a.$a.remove(c),a.Ua.delete(e),Im(a)}else await Hd(a.localStore,e,!1).then(()=>Qd(a,e,i)).catch(hl)}async function n2(r,e){const i=Pt(r),a=e.batch.batchId;try{const o=await fw(i.localStore,e);d1(i,a,null),f1(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Go(i,o)}catch(o){await hl(o)}}async function i2(r,e,i){const a=Pt(r);try{const o=await function(f,m){const g=Pt(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let b;return g.mutationQueue.lookupMutationBatch(p,m).next(S=>(ue(S!==null),b=S.keys(),g.mutationQueue.removeMutationBatch(p,S))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,b,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b)).next(()=>g.localDocuments.getDocuments(p,b))})}(a.localStore,e);d1(a,e,i),f1(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await Go(a,o)}catch(o){await hl(o)}}function f1(r,e){(r.Ga.get(e)||[]).forEach(i=>{i.resolve()}),r.Ga.delete(e)}function d1(r,e,i){const a=Pt(r);let o=a.Wa[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(i?c.reject(i):c.resolve(),o=o.remove(e)),a.Wa[a.currentUser.toKey()]=o}}function Qd(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.qa.get(e))r.ka.delete(a),i&&r.La.Ja(a,i);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(a=>{r.Ka.containsKey(a)||m1(r,a)})}function m1(r,e){r.Qa.delete(e.path.canonicalString());const i=r.$a.get(e);i!==null&&(_m(r.remoteStore,i),r.$a=r.$a.remove(e),r.Ua.delete(i),Im(r))}function p0(r,e,i){for(const a of i)a instanceof o1?(r.Ka.addReference(a.key,e),r2(r,a)):a instanceof u1?(xt(Dm,"Document no longer in limbo: "+a.key),r.Ka.removeReference(a.key,e),r.Ka.containsKey(a.key)||m1(r,a.key)):kt()}function r2(r,e){const i=e.key,a=i.path.canonicalString();r.$a.get(i)||r.Qa.has(a)||(xt(Dm,"New document in limbo: "+i),r.Qa.add(a),Im(r))}function Im(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const i=new Nt(Se.fromString(e)),a=r.za.next();r.Ua.set(a,new $w(i)),r.$a=r.$a.insert(i,a),n1(r.remoteStore,new as(Xi(Kc(i.path)),a,"TargetPurposeLimboResolution",Qc.ae))}}async function Go(r,e,i){const a=Pt(r),o=[],c=[],f=[];a.ka.isEmpty()||(a.ka.forEach((m,g)=>{f.push(a.Ha(g,e,i).then(p=>{var b;if((p||i)&&a.isPrimaryClient){const S=p?!p.fromCache:(b=i==null?void 0:i.targetChanges.get(g.targetId))===null||b===void 0?void 0:b.current;a.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(p){o.push(p);const S=ym.Yi(g.targetId,p);c.push(S)}}))}),await Promise.all(f),a.La.p_(o),await async function(g,p){const b=Pt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ct.forEach(p,A=>ct.forEach(A.Hi,I=>b.persistence.referenceDelegate.addReference(S,A.targetId,I)).next(()=>ct.forEach(A.Ji,I=>b.persistence.referenceDelegate.removeReference(S,A.targetId,I)))))}catch(S){if(!fl(S))throw S;xt(vm,"Failed to update sequence numbers: "+S)}for(const S of p){const A=S.targetId;if(!S.fromCache){const I=b.Ts.get(A),N=I.snapshotVersion,G=I.withLastLimboFreeSnapshotVersion(N);b.Ts=b.Ts.insert(A,G)}}}(a.localStore,c))}async function s2(r,e){const i=Pt(r);if(!i.currentUser.isEqual(e)){xt(Dm,"User change. New user:",e.toKey());const a=await Z_(i.localStore,e);i.currentUser=e,function(c,f){c.Ga.forEach(m=>{m.forEach(g=>{g.reject(new At(ut.CANCELLED,f))})}),c.Ga.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Go(i,a.Rs)}}function a2(r,e){const i=Pt(r),a=i.Ua.get(e);if(a&&a.Ba)return Wt().add(a.key);{let o=Wt();const c=i.qa.get(e);if(!c)return o;for(const f of c){const m=i.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function p1(r){const e=Pt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e2.bind(null,e),e.La.p_=Hw.bind(null,e.eventManager),e.La.Ja=Gw.bind(null,e.eventManager),e}function l2(r){const e=Pt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i2.bind(null,e),e}class Bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,i){return null}nu(e,i){return null}eu(e){return hw(this.persistence,new ow,e.initialUser,this.serializer)}Xa(e){return new X_(gm.ri,this.serializer)}Za(e){return new vw}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bc.provider={build:()=>new Bc};class o2 extends Bc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,i){ue(this.persistence.referenceDelegate instanceof zc);const a=this.persistence.referenceDelegate.garbageCollector;return new $A(a,e.asyncQueue,i)}Xa(e){const i=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new X_(a=>zc.ri(a,i),this.serializer)}}class $d{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>m0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=s2.bind(null,this.syncEngine),await Pw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qw}()}createDatastore(e){const i=nh(e.databaseInfo.databaseId),a=function(c){return new Tw(c)}(e.databaseInfo);return function(c,f,m,g){return new Rw(c,f,m,g)}(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return function(a,o,c,f,m){return new Dw(a,o,c,f,m)}(this.localStore,this.datastore,e.asyncQueue,i=>m0(this.syncEngine,i,0),function(){return o0.D()?new o0:new _w}())}createSyncEngine(e,i){return function(o,c,f,m,g,p,b){const S=new Yw(o,c,f,m,g,p);return b&&(S.ja=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(o){const c=Pt(o);xt(na,"RemoteStore shutting down."),c.W_.add(5),await Ho(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}$d.provider={build:()=>new $d};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class u2{constructor(e,i,a,o,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=bn.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async f=>{xt(ys,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(a,f=>(xt(ys,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=xm(i,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Sd(r,e){r.asyncQueue.verifyOperationInProgress(),xt(ys,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener(async o=>{a.isEqual(o)||(await Z_(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function g0(r,e){r.asyncQueue.verifyOperationInProgress();const i=await c2(r);xt(ys,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener(a=>c0(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,o)=>c0(e.remoteStore,o)),r._onlineComponents=e}async function c2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xt(ys,"Using user provided OfflineComponentProvider");try{await Sd(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(o){return o.name==="FirebaseError"?o.code===ut.FAILED_PRECONDITION||o.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;tl("Error using user provided cache. Falling back to memory cache: "+i),await Sd(r,new Bc)}}else xt(ys,"Using default OfflineComponentProvider"),await Sd(r,new o2(void 0));return r._offlineComponents}async function g1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xt(ys,"Using user provided OnlineComponentProvider"),await g0(r,r._uninitializedComponentsProvider._online)):(xt(ys,"Using default OnlineComponentProvider"),await g0(r,new $d))),r._onlineComponents}function h2(r){return g1(r).then(e=>e.syncEngine)}async function qc(r){const e=await g1(r),i=e.eventManager;return i.onListen=Kw.bind(null,e.syncEngine),i.onUnlisten=Zw.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Ww.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=Jw.bind(null,e.syncEngine),i}function f2(r,e,i={}){const a=new Cr;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,m,g,p){const b=new Nm({next:A=>{b.su(),f.enqueueAndForget(()=>wm(c,S));const I=A.docs.has(m);!I&&A.fromCache?p.reject(new At(ut.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&A.fromCache&&g&&g.source==="server"?p.reject(new At(ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),S=new Cm(Kc(m.path),b,{includeMetadataChanges:!0,Ta:!0});return Am(c,S)}(await qc(r),r.asyncQueue,e,i,a)),a.promise}function d2(r,e,i={}){const a=new Cr;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,m,g,p){const b=new Nm({next:A=>{b.su(),f.enqueueAndForget(()=>wm(c,S)),A.fromCache&&g.source==="server"?p.reject(new At(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),S=new Cm(m,b,{includeMetadataChanges:!0,Ta:!0});return Am(c,S)}(await qc(r),r.asyncQueue,e,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r,e,i){if(!i)throw new At(ut.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function m2(r,e,i,a){if(e===!0&&a===!0)throw new At(ut.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function v0(r){if(!Nt.isDocumentKey(r))throw new At(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _0(r){if(Nt.isDocumentKey(r))throw new At(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function sh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":kt()}function In(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new At(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=sh(r);throw new At(ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="firestore.googleapis.com",E0=!0;class b0{constructor(e){var i,a;if(e.host===void 0){if(e.ssl!==void 0)throw new At(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_1,this.ssl=E0}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:E0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FA)throw new At(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y1((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new At(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new At(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new At(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new At(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new bx;switch(a.type){case"firstParty":return new Ax(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new At(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=y0.get(i);a&&(xt("ComponentProvider","Removing Datastore"),y0.delete(i),a.terminate())}(this),Promise.resolve()}}function p2(r,e,i,a={}){var o;const c=(r=In(r,ah))._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${i}`;c.host!==_1&&c.host!==m&&tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:!1,emulatorOptions:a});if(!Dc(g,f)&&(r._setSettings(g),a.mockUserToken)){let p,b;if(typeof a.mockUserToken=="string")p=a.mockUserToken,b=bn.MOCK_USER;else{p=ZS(a.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new At(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new bn(S)}r._authCredentials=new Sx(new o_(p,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class Tn{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class cs extends aa{constructor(e,i,a){super(e,i,Kc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Nt(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function Ae(r,e,...i){if(r=pi(r),v1("collection","path",e),r instanceof ah){const a=Se.fromString(e,...i);return _0(a),new cs(r,null,a)}{if(!(r instanceof Tn||r instanceof cs))throw new At(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Se.fromString(e,...i));return _0(a),new cs(r.firestore,null,a)}}function Ht(r,e,...i){if(r=pi(r),arguments.length===1&&(e=c_.newId()),v1("doc","path",e),r instanceof ah){const a=Se.fromString(e,...i);return v0(a),new Tn(r,null,new Nt(a))}{if(!(r instanceof Tn||r instanceof cs))throw new At(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Se.fromString(e,...i));return v0(a),new Tn(r.firestore,r instanceof cs?r.converter:null,new Nt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="AsyncQueue";class T0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new t1(this,"async_queue_retry"),this.Su=()=>{const a=bd();a&&xt(S0,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=e;const i=bd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const i=bd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const i=new Cr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!fl(e))throw e;xt(S0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const i=this.bu.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(a);throw Nr("INTERNAL UNHANDLED ERROR: ",o),a}).then(a=>(this.pu=!1,a))));return this.bu=i,i}enqueueAfterDelay(e,i,a){this.Du(),this.wu.indexOf(e)>-1&&(i=0);const o=Tm.createAndSchedule(this,e,i,a,c=>this.Fu(c));return this.fu.push(o),o}Du(){this.gu&&kt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const i of this.fu)if(i.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.fu)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const i=this.fu.indexOf(e);this.fu.splice(i,1)}}function x0(r){return function(i,a){if(typeof i!="object"||i===null)return!1;const o=i;for(const c of a)if(c in o&&typeof o[c]=="function")return!0;return!1}(r,["next","error","complete"])}class tr extends ah{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new T0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T0(e),this._firestoreClient=void 0,await e}}}function g2(r,e){const i=typeof r=="object"?r:ox(),a=typeof r=="string"?r:Mc,o=ix(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=WS("firestore");c&&p2(o,...c)}return o}function Fo(r){if(r._terminated)throw new At(ut.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||y2(r),r._firestoreClient}function y2(r){var e,i,a;const o=r._freezeSettings(),c=function(m,g,p,b){return new Px(m,g,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,y1(b.experimentalLongPollingOptions),b.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new u2(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new al(gn.fromBase64String(e))}catch(i){throw new At(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new al(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new At(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new At(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new At(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^__.*__$/;class _2{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,i,this.fieldTransforms):new Bo(e,this.data,i,this.fieldTransforms)}}class E1{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new _s(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function b1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}class Om{constructor(e,i,a,o,c,f){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Om(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:a,Qu:!1});return o.$u(e),o}Uu(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:a,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(b1(this.Lu)&&v2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class E2{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||nh(e)}ju(e,i,a,o=!1){return new Om({Lu:e,methodName:i,zu:a,path:pn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $o(r){const e=r._freezeSettings(),i=nh(r._databaseId);return new E2(r._databaseId,!!e.ignoreUndefinedProperties,i)}function jm(r,e,i,a,o,c={}){const f=r.ju(c.merge||c.mergeFields?2:0,e,i,o);km("Data must be an object, but it was:",f,a);const m=x1(a,f);let g,p;if(c.merge)g=new Kn(f.fieldMask),p=f.fieldTransforms;else if(c.mergeFields){const b=[];for(const S of c.mergeFields){const A=Yd(e,S,i);if(!f.contains(A))throw new At(ut.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);w1(b,A)||b.push(A)}g=new Kn(b),p=f.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,p=f.fieldTransforms;return new _2(new kn(m),g,p)}class oh extends lh{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}class Lm extends lh{_toFieldTransform(e){return new fA(e.path,new Oo)}isEqual(e){return e instanceof Lm}}function S1(r,e,i,a){const o=r.ju(1,e,i);km("Data must be an object, but it was:",o,a);const c=[],f=kn.empty();vs(a,(g,p)=>{const b=Um(e,g,i);p=pi(p);const S=o.Uu(b);if(p instanceof oh)c.push(b);else{const A=Yo(p,S);A!=null&&(c.push(b),f.set(b,A))}});const m=new Kn(c);return new E1(f,m,o.fieldTransforms)}function T1(r,e,i,a,o,c){const f=r.ju(1,e,i),m=[Yd(e,a,i)],g=[o];if(c.length%2!=0)throw new At(ut.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(Yd(e,c[A])),g.push(c[A+1]);const p=[],b=kn.empty();for(let A=m.length-1;A>=0;--A)if(!w1(p,m[A])){const I=m[A];let N=g[A];N=pi(N);const G=f.Uu(I);if(N instanceof oh)p.push(I);else{const B=Yo(N,G);B!=null&&(p.push(I),b.set(I,B))}}const S=new Kn(p);return new E1(b,S,f.fieldTransforms)}function b2(r,e,i,a=!1){return Yo(i,r.ju(a?4:3,e))}function Yo(r,e){if(A1(r=pi(r)))return km("Unsupported field value:",e,r),x1(r,e);if(r instanceof lh)return function(a,o){if(!b1(o.Lu))throw o.Wu(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,o){const c=[];let f=0;for(const m of a){let g=Yo(m,o.Ku(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}}(r,e)}return function(a,o){if((a=pi(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return uA(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=Ke.fromDate(a);return{timestampValue:Uc(o.serializer,c)}}if(a instanceof Ke){const c=new Ke(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Uc(o.serializer,c)}}if(a instanceof Vm)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof al)return{bytesValue:H_(o.serializer,a._byteString)};if(a instanceof Tn){const c=o.databaseId,f=a.firestore._databaseId;if(!f.isEqual(c))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:mm(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Mm)return function(f,m){return{mapValue:{fields:{[v_]:{stringValue:__},[Oc]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw m.Wu("VectorValues must only contain numeric values.");return hm(m.serializer,p)})}}}}}}(a,o);throw o.Wu(`Unsupported field value: ${sh(a)}`)}(r,e)}function x1(r,e){const i={};return f_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(r,(a,o)=>{const c=Yo(o,e.qu(a));c!=null&&(i[a]=c)}),{mapValue:{fields:i}}}function A1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ke||r instanceof Vm||r instanceof al||r instanceof Tn||r instanceof lh||r instanceof Mm)}function km(r,e,i){if(!A1(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const a=sh(i);throw a==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+a)}}function Yd(r,e,i){if((e=pi(e))instanceof Qo)return e._internalPath;if(typeof e=="string")return Um(r,e);throw Hc("Field path arguments must be of type string or ",r,!1,void 0,i)}const S2=new RegExp("[~\\*/\\[\\]]");function Um(r,e,i){if(e.search(S2)>=0)throw Hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Qo(...e.split("."))._internalPath}catch{throw Hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Hc(r,e,i,a,o){const c=a&&!a.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${a}`),f&&(g+=` in document ${o}`),g+=")"),new At(ut.INVALID_ARGUMENT,m+r+g)}function w1(r,e){return r.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,i,a,o,c){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(zm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class T2 extends R1{data(){return super.data()}}function zm(r,e){return typeof e=="string"?Um(r,e):e instanceof Qo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new At(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pm{}class x2 extends Pm{}function Js(r,e,...i){let a=[];e instanceof Pm&&a.push(e),a=a.concat(i),function(c){const f=c.filter(g=>g instanceof Bm).length,m=c.filter(g=>g instanceof uh).length;if(f>1||f>0&&m>0)throw new At(ut.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)r=o._apply(r);return r}class uh extends x2{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new uh(e,i,a)}_apply(e){const i=this._parse(e);return D1(e._query,i),new aa(e.firestore,e.converter,kd(e._query,i))}_parse(e){const i=$o(e.firestore);return function(c,f,m,g,p,b,S){let A;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new At(ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){w0(S,b);const N=[];for(const G of S)N.push(A0(g,c,G));A={arrayValue:{values:N}}}else A=A0(g,c,S)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||w0(S,b),A=b2(m,f,S,b==="in"||b==="not-in");return He.create(p,b,A)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function ta(r,e,i){const a=e,o=zm("where",r);return uh._create(o,a,i)}class Bm extends Pm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Bm(e,i)}_parse(e){const i=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return i.length===1?i[0]:Ci.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(o,c){let f=o;const m=c.getFlattenedFilters();for(const g of m)D1(f,g),f=kd(f,g)}(e._query,i),new aa(e.firestore,e.converter,kd(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function A0(r,e,i){if(typeof(i=pi(i))=="string"){if(i==="")throw new At(ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R_(e)&&i.indexOf("/")!==-1)throw new At(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(Se.fromString(i));if(!Nt.isDocumentKey(a))throw new At(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Pv(r,new Nt(a))}if(i instanceof Tn)return Pv(r,i._key);throw new At(ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sh(i)}.`)}function w0(r,e){if(!Array.isArray(r)||r.length===0)throw new At(ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function D1(r,e){const i=function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new At(ut.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new At(ut.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class A2{convertValue(e,i="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw kt()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return vs(e,(o,c)=>{a[o]=this.convertValue(c,i)}),a}convertVectorValue(e){var i,a,o;const c=(o=(a=(i=e.fields)===null||i===void 0?void 0:i[Oc].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(f=>Ue(f.doubleValue));return new Mm(c)}convertGeoPoint(e){return new Vm(Ue(e.latitude),Ue(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=Yc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(No(e));default:return null}}convertTimestamp(e){const i=ds(e);return new Ke(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=Se.fromString(e);ue(K_(a));const o=new Vo(a.get(1),a.get(3)),c=new Nt(a.popFirst(5));return o.isEqual(i)||Nr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(r,e,i){let a;return a=r?i&&(i.merge||i.mergeFields)?r.toFirestore(e,i):r.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I1 extends R1{constructor(e,i,a,o,c,f){super(e,i,a,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(zm("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class wc extends I1{data(e={}){return super.data(e)}}class N1{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new So(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new wc(this._firestore,this._userDataWriter,a.key,a,new So(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new At(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new wc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new So(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new wc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new So(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return m.type!==0&&(p=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),b=f.indexOf(m.doc.key)),{type:w2(m.type),doc:g,oldIndex:p,newIndex:b}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function w2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(r){r=In(r,Tn);const e=In(r.firestore,tr);return f2(Fo(e),r._key).then(i=>M1(e,r,i))}class Hm extends A2{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,i)}}function hs(r){r=In(r,aa);const e=In(r.firestore,tr),i=Fo(e),a=new Hm(e);return C1(r._query),d2(i,r._query).then(o=>new N1(e,a,r,o))}function Gm(r,e,i){r=In(r,Tn);const a=In(r.firestore,tr),o=qm(r.converter,e,i);return Ko(a,[jm($o(a),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,Dn.none())])}function V1(r,e,i,...a){r=In(r,Tn);const o=In(r.firestore,tr),c=$o(o);let f;return f=typeof(e=pi(e))=="string"||e instanceof Qo?T1(c,"updateDoc",r._key,e,i,a):S1(c,"updateDoc",r._key,e),Ko(o,[f.toMutation(r._key,Dn.exists(!0))])}function R2(r){return Ko(In(r.firestore,tr),[new th(r._key,Dn.none())])}function C2(r,e){const i=In(r.firestore,tr),a=Ht(r),o=qm(r.converter,e);return Ko(i,[jm($o(r.firestore),"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,Dn.exists(!1))]).then(()=>a)}function Ie(r,...e){var i,a,o;r=pi(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||x0(e[f])||(c=e[f],f++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(x0(e[f])){const S=e[f];e[f]=(i=S.next)===null||i===void 0?void 0:i.bind(S),e[f+1]=(a=S.error)===null||a===void 0?void 0:a.bind(S),e[f+2]=(o=S.complete)===null||o===void 0?void 0:o.bind(S)}let g,p,b;if(r instanceof Tn)p=In(r.firestore,tr),b=Kc(r._key.path),g={next:S=>{e[f]&&e[f](M1(p,r,S))},error:e[f+1],complete:e[f+2]};else{const S=In(r,aa);p=In(S.firestore,tr),b=S._query;const A=new Hm(p);g={next:I=>{e[f]&&e[f](new N1(p,A,S,I))},error:e[f+1],complete:e[f+2]},C1(r._query)}return function(A,I,N,G){const B=new Nm(G),H=new Cm(I,B,N);return A.asyncQueue.enqueueAndForget(async()=>Am(await qc(A),H)),()=>{B.su(),A.asyncQueue.enqueueAndForget(async()=>wm(await qc(A),H))}}(Fo(p),b,m,g)}function Ko(r,e){return function(a,o){const c=new Cr;return a.asyncQueue.enqueueAndForget(async()=>t2(await h2(a),o,c)),c.promise}(Fo(r),e)}function M1(r,e,i){const a=i.docs.get(e._key),o=new Hm(r);return new I1(r,o,e._key,a,new So(i.hasPendingWrites,i.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=$o(e)}set(e,i,a){this._verifyNotCommitted();const o=Td(e,this._firestore),c=qm(o.converter,i,a),f=jm(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,a);return this._mutations.push(f.toMutation(o._key,Dn.none())),this}update(e,i,a,...o){this._verifyNotCommitted();const c=Td(e,this._firestore);let f;return f=typeof(i=pi(i))=="string"||i instanceof Qo?T1(this._dataReader,"WriteBatch.update",c._key,i,a,o):S1(this._dataReader,"WriteBatch.update",c._key,i),this._mutations.push(f.toMutation(c._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=Td(e,this._firestore);return this._mutations=this._mutations.concat(new th(i._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new At(ut.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Td(r,e){if((r=pi(r)).firestore!==e)throw new At(ut.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function di(){return new Lm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(r){return Fo(r=In(r,tr)),new D2(r,e=>Ko(r,e))}(function(e,i=!0){(function(o){cl=o})(lx),Nc(new Co("firestore",(a,{instanceIdentifier:o,options:c})=>{const f=a.getProvider("app").getImmediate(),m=new tr(new Tx(a.getProvider("auth-internal")),new wx(f,a.getProvider("app-check-internal")),function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new At(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(p.options.projectId,b)}(f,o),f);return c=Object.assign({useFetchStreams:i},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Xa(Cv,Dv,e),Xa(Cv,Dv,"esm2017")})();const I2={apiKey:"AIzaSyA",authDomain:"myattendanceproject-45c1b.firebaseapp.com",projectId:"myattendanceproject-45c1b",storageBucket:"myattendanceproject-45c1b.appspot.com",messagingSenderId:"347137303283",appId:"1:347137303283:web:9369753f976dffcf65cd86"},N2=J0(I2),Tt=g2(N2),V2=r=>(r||"").toString().replace(/[^0-9]/g,""),M2=r=>r.slice(-8);function O2(){const[r,e]=D.useState(""),[i,a]=D.useState(""),[o,c]=D.useState(""),f=Uo(),m=async()=>{c("");const g=V2(r),p=(i||"").trim();if(g.length!==11||!g.startsWith("010")){c("   11(010...)  .");return}if(p.length<6){c("  . (    8)");return}try{const b=Ht(Tt,"parents",g),S=await Ye(b);let A=null;if(S.exists())A=S.data();else{const N=Js(Ae(Tt,"students"),ta("parentPhone","==",g)),G=await hs(N),B=[];if(G.forEach(X=>B.push(X.id)),B.length===0){c("  . (/    .)");return}const H=M2(g);await Gm(b,{phone:g,password:H,mustChangePassword:!0,children:B,createdAt:di(),updatedAt:di()}),A={phone:g,password:H,mustChangePassword:!0,children:B}}if(!(A!=null&&A.password)||A.password!==p){c("  .");return}if(localStorage.setItem("parentPhone",g),localStorage.setItem("mustChangePassword",A.mustChangePassword?"1":"0"),A.mustChangePassword){f("/change-password");return}const I=A.children||[];I.length<=1?(I[0]&&localStorage.setItem("studentId",I[0]),f("/attendance")):f("/select-child")}catch(b){console.error(b),c("   .")}};return v.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:800,marginBottom:12},children:" "}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:8},children:"( )"}),v.jsx("input",{value:r,onChange:g=>e(g.target.value),placeholder:": 01012345678",inputMode:"numeric",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:12},children:""}),v.jsx("input",{value:i,onChange:g=>a(g.target.value),placeholder:" :   8",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("button",{onClick:m,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #0d6efd",background:"#0d6efd",color:"#fff",cursor:"pointer"},children:""}),o&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:600},children:o}),v.jsxs("div",{style:{marginTop:12,fontSize:12,color:"#6b7280",lineHeight:1.6},children:["   ",v.jsx("b",{children:"  8"}),".",v.jsx("br",{}),"       ."]})]})}function j2(){const r=localStorage.getItem("parentPhone")||"",[e,i]=D.useState(localStorage.getItem("studentId")||""),[a,o]=D.useState((localStorage.getItem("studentName")||"").trim()),[c,f]=D.useState([]),[m,g]=D.useState(null),[p,b]=D.useState({}),[S,A]=D.useState({}),[I,N]=D.useState(()=>new Date().getFullYear()),[G,B]=D.useState(()=>new Date().getMonth()),[H,X]=D.useState(!1),[P,lt]=D.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);D.useEffect(()=>{const Q=window.matchMedia("(max-width: 640px)"),ft=Et=>lt(Et.matches);return Q.addEventListener?Q.addEventListener("change",ft):Q.addListener(ft),lt(Q.matches),()=>{Q.removeEventListener?Q.removeEventListener("change",ft):Q.removeListener(ft)}},[]),D.useEffect(()=>{const Q=()=>{i(localStorage.getItem("studentId")||""),o((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",Q),window.addEventListener("hashchange",Q);const ft=setInterval(Q,800);return()=>{window.removeEventListener("storage",Q),window.removeEventListener("hashchange",Q),clearInterval(ft)}},[]),D.useEffect(()=>{(async()=>{var Q;if(!a&&e)try{const ft=await Ye(Ht(Tt,"students",e));if(ft.exists()){const Et=(((Q=ft.data())==null?void 0:Q.name)||"").toString().trim();Et&&(o(Et),localStorage.setItem("studentName",Et))}}catch(ft){console.error("selected studentName  :",ft)}})()},[e,a]),D.useEffect(()=>{(async()=>{if(r)try{const Q=await Ye(Ht(Tt,"parents",r));if(!Q.exists()){f([]);return}const Et=(Q.data()||{}).children||[],Ct=[];for(const Ut of Et)try{const jt=await Ye(Ht(Tt,"students",Ut)),ie=jt.exists()?jt.data():{};Ct.push({id:Ut,name:(ie.name||"").toString().trim()||""})}catch{Ct.push({id:Ut,name:""})}Ct.sort((Ut,jt)=>(Ut.name||"").localeCompare(jt.name||"")),f(Ct)}catch(Q){console.error("children  :",Q),f([])}})()},[r]),D.useEffect(()=>{const Q=Ie(Ae(Tt,"attendance"),ft=>{const Et={};ft.forEach(Ct=>{Et[Ct.id]=Ct.data()||{}}),b(Et)});return()=>Q()},[]),D.useEffect(()=>{const Q=Ie(Ae(Tt,"holidays"),ft=>{const Et={};ft.forEach(Ct=>{const Ut=Ct.data()||{},jt=(Ut.date||"").toString(),ie=(Ut.name||"").toString();jt&&(Et[jt]=ie||"")}),A(Et)});return()=>Q()},[]),D.useEffect(()=>{if(!c.length)return;const ft=(()=>{const Ct=new Date;return new Date(Ct.getTime()+9*60*60*1e3).toISOString().slice(0,10)})(),Et=(p==null?void 0:p[ft])||{};for(const Ct of c){const Ut=(Ct.name||"").trim();if(!Ut)continue;const jt=Et==null?void 0:Et[Ut],ie=((jt==null?void 0:jt.time)||"").toString().trim(),Te=((jt==null?void 0:jt.departureTime)||"").toString().trim(),Ve=((jt==null?void 0:jt.status)||"").toString().trim(),Xe=`lastSeen_${Ut}`;let Ze={};try{Ze=JSON.parse(localStorage.getItem(Xe)||"{}")}catch{Ze={}}const ce=(Ze.time||"").toString().trim(),Wn=(Ze.departureTime||"").toString().trim();ie&&ie!==ce&&g({title:`${Ut} `,message:`${ie}   ${Ve?`(${Ve})`:""}`}),Te&&Te!==Wn&&g({title:`${Ut} `,message:`${Te}  `}),localStorage.setItem(Xe,JSON.stringify({time:ie,departureTime:Te}))}},[p,c]);const mt=async Q=>{var Ct;if(!Q)return;const ft=c.find(Ut=>Ut.id===Q);let Et=((ft==null?void 0:ft.name)||"").trim();if(!Et)try{const Ut=await Ye(Ht(Tt,"students",Q));Ut.exists()&&(Et=(((Ct=Ut.data())==null?void 0:Ct.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",Q),Et&&localStorage.setItem("studentName",Et),i(Q),o(Et)},bt=D.useMemo(()=>a?Object.entries(p).map(([Q,ft])=>{const Et=ft==null?void 0:ft[a];return Et?{date:Q,time:Et.time||"",departureTime:Et.departureTime||"",status:Et.status||""}:null}).filter(Boolean).sort((Q,ft)=>ft.date.localeCompare(Q.date)):[],[p,a]),V=D.useMemo(()=>{const Q=`${I}-${String(G+1).padStart(2,"0")}`;return bt.filter(ft=>ft.date.startsWith(Q)).filter(ft=>{const Ct=new Date(ft.date+"T00:00:00").getDay();return Ct===0?!1:Ct===6?H:!0})},[bt,I,G,H]),R=H?["","","","","",""]:["","","","",""],w=H?6:5,L=D.useMemo(()=>{const Q=new Date(I,G,1),ft=[],Et=Q.getDay(),Ct=new Date(Q),Ut=(Et+6)%7;Ct.setDate(Q.getDate()-Ut);const jt=H?6:5;for(let ie=0;ie<6;ie++){const Te=[],Ve=new Date(Ct);Ve.setDate(Ct.getDate()+ie*7);for(let Xe=0;Xe<7;Xe++){const Ze=new Date(Ve);Ze.setDate(Ve.getDate()+Xe);const ce=Ze.getDay();ce>=1&&ce<=jt&&Te.push(new Date(Ze))}Te.some(Xe=>Xe.getMonth()===G||Xe.getMonth()!==G&&Xe.getDate()<=7)&&ft.push(Te)}for(;ft.length&&ft[ft.length-1].every(ie=>ie.getMonth()!==G);)ft.pop();return ft},[I,G,H]),U=Q=>{const ft=Q.getFullYear(),Et=String(Q.getMonth()+1).padStart(2,"0"),Ct=String(Q.getDate()).padStart(2,"0");return`${ft}-${Et}-${Ct}`},j=`${I} ${String(G+1).padStart(2,"0")}`,C=()=>{const Q=new Date(I,G-1,1);N(Q.getFullYear()),B(Q.getMonth())},Gt=()=>{const Q=new Date(I,G+1,1);N(Q.getFullYear()),B(Q.getMonth())},Ot={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},K={padding:P?10:16,maxWidth:980,margin:"0 auto"},pt={display:"flex",gap:10,alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:12,flexDirection:P?"column":"row"},wt={display:"flex",gap:8,alignItems:"center",justifyContent:P?"stretch":"flex-end",flexDirection:P?"column":"row"},Bt={display:"flex",gap:8,alignItems:"center",justifyContent:P?"space-between":"flex-end",flexWrap:"wrap"},k={padding:"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:800,cursor:"pointer",width:P?"100%":"auto"},st=(Q="white")=>({padding:P?"10px 12px":"8px 12px",border:"1px solid #d1d5db",borderRadius:12,background:Q,cursor:"pointer",fontWeight:900,width:P?"100%":"auto"}),yt={padding:"7px 10px",border:"1px solid #d1d5db",borderRadius:999,background:"white",cursor:"pointer",fontWeight:900,fontSize:12,whiteSpace:"nowrap"},F=P?6:10,gt=P?64:86,St=P?8:10;return v.jsxs("div",{style:K,children:[m&&v.jsx("div",{style:{position:"fixed",left:0,right:0,top:12,display:"flex",justifyContent:"center",zIndex:999999,pointerEvents:"none"},children:v.jsxs("div",{style:{pointerEvents:"auto",minWidth:260,maxWidth:460,background:"#111827",color:"white",padding:"12px 14px",borderRadius:14,boxShadow:"0 10px 25px rgba(0,0,0,0.25)"},onClick:()=>g(null),children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:m.title}),v.jsx("div",{style:{marginTop:6,fontSize:13,opacity:.92},children:m.message}),v.jsx("div",{style:{marginTop:10,textAlign:"right"},children:v.jsx("button",{onClick:()=>g(null),style:{border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"white",borderRadius:10,padding:"6px 10px",cursor:"pointer",fontWeight:900},children:""})})]})}),v.jsxs("div",{style:pt,children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:P?20:22,fontWeight:900},children:"  "}),v.jsxs("div",{style:{color:"#6b7280",fontSize:13,marginTop:4,lineHeight:1.4},children:[a?` : ${a}`:"  .",c.length>1&&v.jsx("span",{style:{marginLeft:8,color:"#10b981",fontWeight:800},children:"(  )"})]})]}),c.length>0&&v.jsxs("div",{style:wt,children:[v.jsxs("div",{style:Bt,children:[v.jsx("span",{style:{fontSize:12,color:"#6b7280",minWidth:44},children:" "}),v.jsx("select",{value:e,onChange:Q=>mt(Q.target.value),style:k,children:c.map(Q=>v.jsx("option",{value:Q.id,children:Q.name},Q.id))})]}),v.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:st("#f9fafb"),children:" "})]})]}),v.jsxs("div",{style:{...Ot,padding:P?12:14,marginBottom:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:10,gap:8,flexDirection:P?"column":"row"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[v.jsx("button",{onClick:C,style:st("white"),children:""}),v.jsx("div",{style:{fontWeight:900,fontSize:16,textAlign:"center",flex:1},children:j}),v.jsx("button",{onClick:Gt,style:st("white"),children:""})]}),v.jsx("div",{style:{display:"flex",gap:8,justifyContent:P?"stretch":"flex-end",flexWrap:"wrap"},children:v.jsx("button",{onClick:()=>X(Q=>!Q),style:{...yt,background:H?"#111827":"white",color:H?"white":"#111827",borderColor:H?"#111827":"#d1d5db",width:P?"100%":"auto"},title:"    ",children:H?"  ON":"  OFF"})})]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${w}, 1fr)`,gap:F,paddingBottom:10,borderBottom:"1px solid #f1f5f9",fontWeight:900,color:"#6b7280",fontSize:13},children:R.map(Q=>v.jsx("div",{style:{textAlign:"center"},children:Q},Q))}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:F,marginTop:10},children:L.map((Q,ft)=>v.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${w}, 1fr)`,gap:F},children:Q.map(Et=>{var Ve;const Ct=U(Et),Ut=Et.getMonth()===G,jt=a?(Ve=p==null?void 0:p[Ct])==null?void 0:Ve[a]:null,ie=!!S[Ct],Te=!!(jt!=null&&jt.time||jt!=null&&jt.departureTime);return v.jsxs("div",{title:ie?`${Ct}  ${S[Ct]}`:Ct,style:{minHeight:gt,border:`1px solid ${ie?"#fecaca":"#e5e7eb"}`,borderRadius:14,padding:St,background:Ut?ie?"#fff1f2":Te?"#ecfeff":"white":"#fafafa",opacity:Ut?1:.55,overflow:"hidden"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginBottom:6,gap:6},children:[v.jsx("div",{style:{fontWeight:900,fontSize:P?13:14,color:ie?"#ef4444":"#111827"},children:Et.getDate()}),ie&&v.jsx("span",{style:{fontSize:11,color:"#ef4444",fontWeight:900,background:"rgba(239,68,68,0.10)",padding:"2px 8px",borderRadius:999,maxWidth:"75%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S[Ct]})]}),jt?v.jsxs("div",{style:{fontSize:P?11:12,color:"#111827",lineHeight:1.45},children:[v.jsxs("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[v.jsx("span",{style:{color:"#0284c7",fontWeight:900},children:""})," ",jt.time||"-"]}),v.jsxs("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[v.jsx("span",{style:{color:"#16a34a",fontWeight:900},children:""})," ",jt.departureTime||"-"]})]}):v.jsx("div",{style:{fontSize:P?11:12,color:"#9ca3af"},children:" "})]},Ct)})},ft))})]}),v.jsxs("div",{style:{...Ot,padding:P?12:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:10,gap:10,flexDirection:P?"column":"row"},children:[v.jsx("div",{style:{fontSize:P?16:18,fontWeight:900},children:"    (/)"}),v.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:C,style:yt,children:""}),v.jsx("span",{style:{fontWeight:900},children:j}),v.jsx("button",{onClick:Gt,style:yt,children:""})]})]}),V.length===0?v.jsx("div",{style:{color:"#6b7280"},children:"    ."}):P?v.jsx("div",{style:{display:"grid",gap:10},children:V.slice().sort((Q,ft)=>ft.date.localeCompare(Q.date)).map(Q=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:12,background:"white"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[v.jsxs("div",{style:{fontWeight:900},children:[Q.date,S[Q.date]&&v.jsx("span",{style:{marginLeft:8,fontSize:12,color:"#ef4444",fontWeight:900},children:S[Q.date]})]}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:Q.status||"-"})]}),v.jsxs("div",{style:{marginTop:8,display:"grid",gap:6},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[v.jsx("span",{style:{color:"#0284c7",fontWeight:900},children:""}),v.jsx("span",{style:{fontWeight:900},children:Q.time||"-"})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[v.jsx("span",{style:{color:"#16a34a",fontWeight:900},children:""}),v.jsx("span",{style:{fontWeight:900},children:Q.departureTime||"-"})]})]})]},Q.date))}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""})]})}),v.jsx("tbody",{children:V.slice().sort((Q,ft)=>ft.date.localeCompare(Q.date)).map(Q=>v.jsxs("tr",{children:[v.jsxs("td",{style:vc,children:[v.jsx("span",{style:{fontWeight:900},children:Q.date}),S[Q.date]&&v.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#ef4444",fontWeight:900},children:["(",S[Q.date],")"]})]}),v.jsx("td",{style:vc,children:Q.time||"-"}),v.jsx("td",{style:vc,children:Q.departureTime||"-"}),v.jsx("td",{style:vc,children:Q.status||"-"})]},Q.date))})]})})]})]})}const yc={textAlign:"left",padding:"10px 10px",borderBottom:"1px solid #e5e7eb",color:"#374151",fontSize:13,fontWeight:900},vc={padding:"10px 10px",borderBottom:"1px solid #f1f5f9"};function L2(){var X;const r=localStorage.getItem("studentId"),e=D.useRef(!1),[i,a]=D.useState(null),[o,c]=D.useState([]),[f,m]=D.useState(0),[g,p]=D.useState({}),[b,S]=D.useState(!1),A=["","",""];D.useEffect(()=>{if(!r)return;const P=Ie(Ht(Tt,"students",r),lt=>{lt.exists()&&a({id:lt.id,...lt.data()})});return()=>P()},[r]),D.useEffect(()=>{if(!r)return;const P=Ie(Ae(Tt,"payments"),lt=>{const mt={};lt.docs.forEach(bt=>{const V=bt.data();V.studentId===r&&(mt[V.routineNumber]=V.paymentMethod)}),p(mt)});return()=>P()},[r]),D.useEffect(()=>{if(!r)return;const P=Ie(Ae(Tt,"routines"),async lt=>{const mt=lt.docs.filter(j=>{const C=j.data();return C.students&&C.students[r]});if(mt.length===0){c([]);return}let bt=[];mt.forEach(j=>{const C=j.data(),Gt=C.students[r],Ot=Gt.routineNumber||C.routineNumber||1,K=Gt.sessions||{};Object.values(K).sort((wt,Bt)=>(wt.session||0)-(Bt.session||0)).forEach(wt=>{bt.push({date:wt.date,session:wt.session,routineNumber:Ot})})});const V=Array.from(new Set(bt.map(j=>j.date))),R=i&&i.name||null,w=await Promise.all(V.map(async j=>{const C=await Ye(Ht(Tt,"attendance",j));if(!C.exists())return[j,{}];const Gt=C.data(),Ot=Gt[r]||R&&Gt[R]||{};return[j,Ot]})),L=Object.fromEntries(w),U=bt.map(j=>{var C,Gt;return{...j,status:((C=L[j.date])==null?void 0:C.status)||"",time:((Gt=L[j.date])==null?void 0:Gt.time)||""}});if(c(U),!e.current){e.current=!0;const j=new Date().toISOString().slice(0,10),C={};U.forEach(Ot=>{const K=Ot.routineNumber||1;C[K]||(C[K]=[]),C[K].push(Ot)}),Object.values(C).sort((Ot,K)=>Ot[0].routineNumber-K[0].routineNumber).findIndex(Ot=>Ot.some(K=>K.date===j)),m(0)}});return()=>P()},[r,i]);const I=async(P,lt)=>{p(mt=>({...mt,[lt]:P})),await Gm(Ht(Tt,"payments",`${r}_routine_${lt}`),{studentId:r,routineNumber:lt,paymentMethod:P,paymentComplete:!1,updatedAt:new Date().toISOString()},{merge:!0})},N={};o.forEach(P=>{const lt=P.routineNumber||1;N[lt]||(N[lt]=[]),N[lt].push(P)});const G=Object.values(N).sort((P,lt)=>lt[0].routineNumber-P[0].routineNumber),B=G[f]||[],H=((X=B[0])==null?void 0:X.routineNumber)??f+1;return D.useEffect(()=>{if(!i||!H){S(!1);return}const P=`${i.name}_${H}`;(async()=>{try{const mt=await Ye(Ht(Tt,"payment_completed",P));if(!mt.exists()){S(!1);return}const bt=mt.data();S(!!bt.paymentComplete)}catch(mt){console.error("payment_completed  :",mt),S(!1)}})()},[i,H]),i?v.jsxs("div",{className:"container-wide",style:{textAlign:"center"},children:[v.jsxs("h1",{style:{fontSize:20,marginBottom:16},children:[" ",i.name,"   ",H,""]}),v.jsx("p",{style:{fontSize:18,marginBottom:16},children:b?"  .":"  .    ."}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:24},children:[v.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:"bold"},children:""}),A.map(P=>v.jsx("button",{onClick:()=>I(P,H),style:{padding:"4px 8px",background:P===""?"#4caf50":P===""?"#2196f3":"#f44336",color:"white",borderRadius:4,minWidth:80},children:P},P))]}),v.jsxs("p",{style:{fontSize:16,marginBottom:16},children:["   : ",g[H]||"",g[H]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"      "}),g[H]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"  5  ."}),g[H]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:" 3333-31-6107963  * "})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24},children:[v.jsx("button",{onClick:()=>m(P=>Math.max(P-1,0)),disabled:f===0,style:{padding:"8px 16px",background:f===0?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f===0?"default":"pointer"},children:""}),v.jsx("button",{onClick:()=>m(P=>Math.min(P+1,G.length-1)),disabled:f>=G.length-1,style:{padding:"8px 16px",background:f>=G.length-1?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f>=G.length-1?"default":"pointer"},children:""})]}),v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""})]})}),v.jsxs("tbody",{children:[B.map((P,lt)=>{const mt=B.slice(0,lt).reduce((R,w)=>R+(w.status==="carryover"?1:0),0),bt=P.status==="carryover",V=bt?"X":(P.session||lt+1)-mt;return v.jsxs("tr",{children:[v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:V}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:v.jsx("span",{style:bt?{textDecoration:"line-through",color:"#999"}:{},children:P.date})}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:P.status}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:P.time||"-"})]},lt)}),B.length===0&&v.jsx("tr",{children:v.jsx("td",{colSpan:4,style:{padding:16,textAlign:"center",color:"#888"},children:"  ."})})]})]})]}):v.jsx("p",{children:" "})}const k2=6,U2=10;function z2(r=""){return r?r.split(`
`).map(e=>e||"&nbsp;").join("<br />"):""}function P2(){const r=new Date,e=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0");return`${e}-${i}`}function B2(){const r=localStorage.getItem("parentPhone")||"",[e,i]=D.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches),[a,o]=D.useState([]),[c,f]=D.useState(null),[m,g]=D.useState({}),[p,b]=D.useState(!0),[S,A]=D.useState([]),[I,N]=D.useState(!1),[G,B]=D.useState(!0),[H,X]=D.useState(!1),[P,lt]=D.useState(!0),[mt,bt]=D.useState(!1);D.useEffect(()=>{const F=window.matchMedia("(max-width: 640px)"),gt=St=>i(St.matches);return F.addEventListener?F.addEventListener("change",gt):F.addListener(gt),i(F.matches),()=>{F.removeEventListener?F.removeEventListener("change",gt):F.removeListener(gt)}},[]),D.useEffect(()=>{(async()=>{if(r)try{const F=await Ye(Ht(Tt,"parents",r));if(F.exists()){const gt=F.data()||{},St=gt.noticeAlertEnabled===void 0?!0:!!gt.noticeAlertEnabled;lt(St)}else lt(!0)}catch{lt(!0)}})()},[r]),D.useEffect(()=>{(async()=>{b(!0);try{const St=(await hs(Ae(Tt,"notices"))).docs.map(Q=>{const ft=Q.data()||{};return{id:Q.id,title:(ft.title||"").toString(),date:(ft.date||"").toString(),showOnParents:ft.showOnParents===void 0?!0:!!ft.showOnParents,mainOrder:typeof ft.mainOrder=="number"?ft.mainOrder:typeof ft.priority=="number"?ft.priority:9999,isPinned:ft.isPinned===!0}}).filter(Q=>Q.showOnParents!==!1);St.sort((Q,ft)=>{const Et=Q.isPinned?1:0,Ct=ft.isPinned?1:0;if(Et!==Ct)return Ct-Et;const Ut=Q.mainOrder??9999,jt=ft.mainOrder??9999;if(Ut!==jt)return Ut-jt;const ie=Q.date||"";return(ft.date||"").localeCompare(ie)}),o(St)}catch(F){console.error("notices  :",F),o([])}finally{b(!1)}})(),(async()=>{B(!0);try{const gt=(await hs(Ae(Tt,"holidays"))).docs.map(St=>({id:St.id,...St.data()||{}})).filter(St=>!!St.date);gt.sort((St,Q)=>(St.date||"").toString().localeCompare((Q.date||"").toString())),A(gt)}catch(F){console.error("holidays  :",F),A([])}finally{B(!1)}})()},[]);const V=D.useMemo(()=>P2(),[]),R=D.useMemo(()=>new Date().toISOString().slice(0,10),[]),{currentNotices:w,pastNotices:L}=D.useMemo(()=>{const F=[],gt=[];for(const Q of a)(Q.date||"").startsWith(V)?F.push(Q):gt.push(Q);const St=e?k2:U2;return{currentNotices:F.slice(0,St),pastNotices:gt}},[a,V,e]),{upcomingThisMonth:U,pastHolidays:j}=D.useMemo(()=>{const F=[],gt=[];for(const Q of S){const ft=(Q.date||"").toString();ft&&(ft.startsWith(V)&&F.push(Q),ft<R&&gt.push(Q))}return F.sort((Q,ft)=>(Q.date||"").toString().localeCompare((ft.date||"").toString())),gt.sort((Q,ft)=>(ft.date||"").toString().localeCompare((Q.date||"").toString())),{upcomingThisMonth:e?F.slice(0,6):F.slice(0,12),pastHolidays:gt}},[S,V,R,e]),C=async F=>{if(c===F){f(null);return}if(!m[F])try{const gt=await Ye(Ht(Tt,"notices",F));if(gt.exists()){const St=gt.data()||{},Q=(St.contentHtml||"").toString(),ft=(St.contentPlain||"").toString(),Et=(St.content||"").toString(),Ct=ft||Et;let Ut=Q;Ut||(Ut=z2(Ct)),g(jt=>({...jt,[F]:{html:Ut,plain:Ct}}))}else g(St=>({...St,[F]:{html:" .",plain:" ."}}))}catch(gt){console.error("notice detail  :",gt),g(St=>({...St,[F]:{html:"  .",plain:""}}))}f(F)},Gt=async()=>{if(!r){alert("  .  .");return}const F=!P;bt(!0);try{await Gm(Ht(Tt,"parents",r),{noticeAlertEnabled:F},{merge:!0}),lt(F)}catch(gt){console.error("    :",gt),alert(" .    .")}finally{bt(!1)}},Ot={maxWidth:820,margin:"0 auto",padding:e?10:16},K={display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexDirection:e?"column":"row"},pt=F=>({border:"1px solid "+(F?"#111827":"#d1d5db"),background:F?"#111827":"white",color:F?"white":"#111827",borderRadius:999,padding:"8px 12px",fontWeight:900,fontSize:12,cursor:"pointer",width:e?"100%":"auto",opacity:mt?.7:1}),wt={border:"1px solid #e5e7eb",borderRadius:14,background:"#fff"},Bt=F=>({padding:e?"12px 12px":"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:F?"#f8fafc":"#fff",cursor:"pointer"}),k={padding:"6px 10px",borderRadius:999,background:"#fff",border:"1px solid #e5e7eb",fontSize:12,display:"flex",gap:6,alignItems:"center"},st={border:"none",background:"none",color:"#2563eb",fontSize:13,fontWeight:800,cursor:"pointer",padding:0},yt=`${V.slice(0,4)} ${V.slice(5,7)}`;return v.jsxs("div",{style:Ot,children:[v.jsxs("div",{style:{...wt,background:"linear-gradient(135deg, #f0f9ff, #e0f2fe)",border:"1px solid #bae6fd",padding:e?"12px 12px":"14px 16px",marginBottom:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[v.jsx("span",{style:{fontSize:18},children:""}),v.jsx("div",{style:{fontWeight:900,fontSize:15},children:" "}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:yt})]}),j.length>0&&v.jsx("button",{onClick:()=>N(F=>!F),style:st,children:I?"   ":"   "})]}),v.jsxs("div",{style:{marginTop:10},children:[G?v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"  ..."}):U.length>0?v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:U.map(F=>v.jsxs("div",{style:k,children:[v.jsx("span",{style:{fontWeight:900},children:(F.name||"").toString()}),v.jsx("span",{style:{color:"#dc2626",fontSize:12,fontWeight:800},children:(F.date||"").toString()})]},F.id))}):v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"   ."}),I&&j.length>0&&v.jsx("div",{style:{marginTop:10,display:"flex",flexWrap:"wrap",gap:6},children:j.slice(0,e?12:30).map(F=>v.jsxs("div",{style:{fontSize:12,padding:"5px 10px",borderRadius:999,background:"#f8fafc",border:"1px solid #e5e7eb",color:"#6b7280",fontWeight:700},children:[(F.name||"").toString(),"  ",(F.date||"").toString()]},F.id))})]})]}),v.jsxs("div",{style:K,children:[v.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[v.jsx("h1",{style:{fontSize:e?18:20,fontWeight:900,margin:0},children:" "}),v.jsxs("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:[yt,"  "]})]}),v.jsx("button",{onClick:Gt,disabled:mt,style:pt(P),title:"  (/  ) ON/OFF",children:mt?" ...":P?"  ON":"  OFF"})]}),v.jsx("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:10},children:p?v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"  ..."}):w.length===0?v.jsx("div",{style:{fontSize:13,color:"#9ca3af"},children:"   ."}):w.map(F=>{const gt=c===F.id,St=m[F.id],Q=typeof F.mainOrder=="number"&&F.mainOrder<9999;return v.jsxs("div",{style:Bt(gt),onClick:()=>C(F.id),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[F.isPinned&&v.jsx("span",{style:{fontSize:11,background:"#fff7ed",color:"#ea580c",borderRadius:999,padding:"2px 8px",border:"1px solid #fed7aa",fontWeight:900},children:""}),Q&&v.jsx("span",{style:{fontSize:11,background:"#eff6ff",color:"#2563eb",borderRadius:999,padding:"2px 8px",border:"1px solid #bfdbfe",fontWeight:900},children:""})]}),v.jsx("div",{style:{marginTop:6,fontSize:15,fontWeight:900,lineHeight:1.35,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:F.title})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:6},children:[v.jsx("span",{style:{fontSize:12,color:"#9ca3af",fontWeight:800,whiteSpace:"nowrap"},children:F.date}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:gt?"":""})]})]}),gt&&v.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px dashed #e5e7eb",fontSize:14,lineHeight:1.65,color:"#111827",wordBreak:"break-word"},children:St?v.jsx("div",{dangerouslySetInnerHTML:{__html:St.html}}):v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:" ..."})})]},F.id)})}),!p&&L.length>0&&v.jsxs("div",{style:{marginTop:14},children:[v.jsx("button",{onClick:()=>X(F=>!F),style:st,children:H?"   ":`    (${L.length})`}),H&&v.jsxs("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:8},children:[L.slice(0,e?15:30).map(F=>v.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fafafa"},onClick:()=>C(F.id),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[v.jsx("div",{style:{fontWeight:900,fontSize:14,minWidth:0,flex:1},children:v.jsx("div",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:F.title})}),v.jsx("div",{style:{fontSize:12,color:"#9ca3af",fontWeight:800,whiteSpace:"nowrap"},children:F.date})]}),c===F.id&&v.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px dashed #e5e7eb",fontSize:14,lineHeight:1.65,color:"#111827",wordBreak:"break-word"},children:m[F.id]?v.jsx("div",{dangerouslySetInnerHTML:{__html:m[F.id].html}}):v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:" ..."})})]},F.id)),v.jsxs("div",{style:{fontSize:12,color:"#9ca3af",marginTop:2},children:["    ",e?"15":"30"," ."]})]})]})]})}function q2(){console.log("  !");const[r,e]=D.useState([]),[i,a]=D.useState(""),o=localStorage.getItem("studentId");D.useEffect(()=>{const m=Ae(Tt,"books");return Ie(m,g=>{const b=g.docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.studentId===o);e(b)})},[o]);const c=D.useMemo(()=>i?[...r].sort((g,p)=>i==="grade"?g.grade-p.grade:i==="title"?g.title.localeCompare(p.title):i==="completedDate"?g.completedDate.localeCompare(p.completedDate):0):r,[r,i]),f=()=>{const m=["","",""," ",""],g=c.map((I,N)=>[N+1,I.name,I.grade,I.title,I.completedDate]);let p=m.join(",")+`
`;g.forEach(I=>{p+=I.join(",")+`
`});const b=new Blob([p],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(b),A=document.createElement("a");A.href=S,A.download=`_${new Date().toISOString().slice(0,10)}.csv`,A.click(),URL.revokeObjectURL(S)};return v.jsxs("div",{className:"container",children:[v.jsxs("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:["   ( : ",r.length,")"]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[v.jsx("button",{onClick:f,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:()=>a("grade"),style:{padding:"8px 12px",marginLeft:"4px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:()=>a("title"),style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:()=>a("completedDate"),style:{padding:"8px 12px",backgroundColor:"#ffc107",color:"#000",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "})]}),v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:" "}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""})]})}),v.jsx("tbody",{children:c.length>0?c.map((m,g)=>v.jsxs("tr",{children:[v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:g+1}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.name}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.grade}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.title}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.completedDate})]},m.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:"5",style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"  ."})})})]})]})}function H2(){const[r,e]=D.useState([]),[i,a]=D.useState([]),[o,c]=D.useState({}),[f,m]=D.useState(null),[g,p]=D.useState(""),b=localStorage.getItem("studentId");D.useEffect(()=>{if(!b)return;const N=Ae(Tt,"comments");return Ie(N,G=>{const H=G.docs.map(X=>({id:X.id,...X.data()})).filter(X=>X.studentId===b);e(H.sort((X,P)=>(P.createdAt||"").localeCompare(X.createdAt||"")))})},[b]),D.useEffect(()=>{if(!b)return;const N=Ae(Tt,"answer");return Ie(N,G=>{const H=G.docs.map(X=>({id:X.id,...X.data()})).filter(X=>X.studentId===b);a(H.sort((X,P)=>(P.createdAt||"").localeCompare(X.createdAt||"")))})},[b]);const S=async N=>{var X;const G=(X=o[N])==null?void 0:X.trim();if(!G)return alert(" !");if(!b)return alert("  .    .");const B=await Ye(Ht(Tt,"students",b)),H=B.exists()?B.data().name:"";await C2(Ae(Tt,"answer"),{studentId:b,studentName:H,comment:G,date:new Date().toISOString().slice(0,10),createdAt:new Date().toISOString(),parentId:N}),c(P=>({...P,[N]:""})),alert(" !")},A=async N=>{window.confirm("   ?")&&await R2(Ht(Tt,"answer",N))},I=async N=>{if(!g.trim())return alert("  !");await V1(Ht(Tt,"answer",N),{comment:g}),m(null),p("")};return v.jsxs("div",{className:"container",style:{textAlign:"center",marginTop:"40px"},children:[v.jsx("h2",{style:{fontSize:"20px",marginBottom:"16px"},children:"  "}),v.jsx("h3",{style:{fontSize:"15px",marginBottom:"16px"},children:"**    ! **"}),v.jsxs("ul",{style:{listStyle:"none",padding:0,textAlign:"left"},children:[r.filter(N=>{var G;return!((G=N.comment)!=null&&G.startsWith(":"))}).map(N=>{var B;const G=i.filter(H=>H.parentId===N.id);return v.jsxs("li",{style:{marginBottom:16,borderBottom:"1px solid #eee",paddingBottom:8},children:[v.jsxs("div",{children:[N.comment," ",v.jsxs("span",{style:{color:"#888",fontSize:"12px"},children:["(",N.date,")"]})]}),v.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:[": ",(B=N.createdAt)==null?void 0:B.slice(0,19).replace("T"," ")]}),G.map(H=>v.jsx("div",{style:{marginTop:4,marginLeft:10,background:"#f8f8f8",padding:"4px 8px",borderRadius:4},children:f===H.id?v.jsxs(v.Fragment,{children:[v.jsx("input",{value:g,onChange:X=>p(X.target.value),style:{width:"60%",padding:4}}),v.jsx("button",{onClick:()=>I(H.id),style:{marginLeft:8},children:""}),v.jsx("button",{onClick:()=>m(null),style:{marginLeft:4},children:""})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{fontSize:"13px",color:"#333"},children:[" ",H.comment]}),v.jsxs("div",{style:{marginTop:4},children:[v.jsx("button",{onClick:()=>{m(H.id),p(H.comment||"")},style:{marginRight:6},children:""}),v.jsx("button",{onClick:()=>A(H.id),children:""})]})]})},H.id)),v.jsxs("div",{style:{marginTop:8},children:[v.jsx("input",{placeholder:" ",value:o[N.id]||"",onChange:H=>c(X=>({...X,[N.id]:H.target.value})),style:{width:"70%",padding:4}}),v.jsx("button",{onClick:()=>S(N.id),style:{marginLeft:8,padding:"4px 12px"},children:""})]})]},N.id)}),r.filter(N=>{var G;return!((G=N.comment)!=null&&G.startsWith(":"))}).length===0&&v.jsx("li",{style:{color:"#888"},children:"  ."})]})]})}function G2(){const[r,e]=D.useState("comments"),i=localStorage.getItem("parentPhone")||"",[a,o]=D.useState(localStorage.getItem("studentId")||""),[c,f]=D.useState((localStorage.getItem("studentName")||"").trim()),[m,g]=D.useState([]),[p,b]=D.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);D.useEffect(()=>{const X=window.matchMedia("(max-width: 640px)"),P=lt=>b(lt.matches);return X.addEventListener?X.addEventListener("change",P):X.addListener(P),b(X.matches),()=>{X.removeEventListener?X.removeEventListener("change",P):X.removeListener(P)}},[]),D.useEffect(()=>{const X=()=>{o(localStorage.getItem("studentId")||""),f((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",X),window.addEventListener("hashchange",X);const P=setInterval(X,800);return()=>{window.removeEventListener("storage",X),window.removeEventListener("hashchange",X),clearInterval(P)}},[]),D.useEffect(()=>{(async()=>{var X,P;if(i)try{const lt=await Ye(Ht(Tt,"parents",i));if(!lt.exists()){g([]);return}const mt=((X=lt.data())==null?void 0:X.children)||[],bt=[];for(const V of mt)try{const R=await Ye(Ht(Tt,"students",V)),w=R.exists()?(((P=R.data())==null?void 0:P.name)||"").toString().trim():"";bt.push({id:V,name:w||""})}catch{bt.push({id:V,name:""})}bt.sort((V,R)=>(V.name||"").localeCompare(R.name||"")),g(bt)}catch(lt){console.error("children  :",lt),g([])}})()},[i]);const S=async X=>{var mt;if(!X)return;const P=m.find(bt=>bt.id===X);let lt=((P==null?void 0:P.name)||"").trim();if(!lt)try{const bt=await Ye(Ht(Tt,"students",X));bt.exists()&&(lt=(((mt=bt.data())==null?void 0:mt.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",X),lt&&localStorage.setItem("studentName",lt),o(X),f(lt)},A=D.useMemo(()=>({maxWidth:980,margin:"0 auto",padding:p?10:16}),[p]),I={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},N=X=>({padding:p?"10px 12px":"10px 14px",borderRadius:12,border:"1px solid "+(X?"#2563eb":"#e5e7eb"),background:X?"#2563eb":"#f9fafb",color:X?"white":"#111827",cursor:"pointer",fontWeight:900,fontSize:14,width:p?"calc(50% - 4px)":"auto"}),G={fontSize:12,color:"#6b7280",fontWeight:800,whiteSpace:"nowrap"},B={padding:p?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",width:p?"100%":220,minWidth:p?"auto":180},H={padding:p?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer",fontWeight:900,width:p?"100%":"auto"};return v.jsxs("div",{style:A,children:[v.jsxs("div",{style:{...I,padding:p?12:14,marginBottom:12},children:[v.jsxs("div",{style:{display:"flex",gap:10,alignItems:p?"stretch":"center",justifyContent:"space-between",flexWrap:"wrap",flexDirection:p?"column":"row"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:p?18:22,fontWeight:900},children:"    "}),v.jsx("div",{style:{fontSize:13,color:"#6b7280",marginTop:4},children:c?` : ${c}`:"  ."})]}),m.length>0&&v.jsxs("div",{style:{display:"flex",gap:8,alignItems:p?"stretch":"center",flexDirection:p?"column":"row",width:p?"100%":"auto"},children:[v.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:v.jsx("span",{style:G,children:" "})}),v.jsx("select",{value:a,onChange:X=>S(X.target.value),style:B,children:m.map(X=>v.jsx("option",{value:X.id,children:X.name},X.id))}),v.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:H,children:" "})]})]}),v.jsxs("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap",width:"100%"},children:[v.jsx("button",{onClick:()=>e("comments"),style:N(r==="comments"),children:" "}),v.jsx("button",{onClick:()=>e("books"),style:N(r==="books"),children:" "})]})]}),v.jsxs("div",{style:{...I,padding:p?12:14},children:[r==="comments"&&v.jsx(H2,{},`comments_${a}`),r==="books"&&v.jsx(q2,{},`books_${a}`)]})]})}function F2(){const[r,e]=D.useState("intensive"),[i,a]=D.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);D.useEffect(()=>{const O=window.matchMedia("(max-width: 640px)"),tt=it=>a(it.matches);return O.addEventListener?O.addEventListener("change",tt):O.addListener(tt),a(O.matches),()=>{O.removeEventListener?O.removeEventListener("change",tt):O.removeListener(tt)}},[]);const o=localStorage.getItem("parentPhone")||"",[c,f]=D.useState([]),[m,g]=D.useState(localStorage.getItem("studentId")||""),[p,b]=D.useState((localStorage.getItem("studentName")||"").trim()),[S,A]=D.useState(null),[I,N]=D.useState([]),[G,B]=D.useState({}),[H,X]=D.useState({}),[P,lt]=D.useState([]),[mt,bt]=D.useState(null),[V,R]=D.useState({isOpen:!0,reserveOnly:!1}),w=["","","","",""],L=[{id:"A",label:"A (5 ~ 7)",timeRange:"5 ~ 7"},{id:"B",label:"B (7 ~ 9)",timeRange:"7 ~ 9"}],U=5,[j,C]=D.useState(null),[Gt,Ot]=D.useState({}),[K,pt]=D.useState(null),[wt,Bt]=D.useState(""),[k,st]=D.useState(null),[yt,F]=D.useState({}),gt=["","",""],St=["3","4","5"],Q=8,[ft,Et]=D.useState([]),[Ct,Ut]=D.useState([]),[jt,ie]=D.useState({}),[Te,Ve]=D.useState(null),Xe=["","","",""],Ze=6,[ce,Wn]=D.useState([]),[Xn,gi]=D.useState([]),[Ii,ml]=D.useState({}),[nr,Ni]=D.useState(null),[Es,he]=D.useState(!1),[Xt,Je]=D.useState(!1),[tn,la]=D.useState(0),[oa,Zn]=D.useState(null),ir=D.useMemo(()=>({elementary:{:["230"],:["3","4"],:["2","3","4"],:["3","4"],:["3","4"]},middle:{:["330","5","630"],:["5","630"],:["5","630"],:["5","630"],:["5","630"]}}),[]),rr={intensive:"(261)",elementary:"(263)",middle:"(263)",middleClinic:" (263)",high:"(263)",advanced:"(263)"},yn=r==="elementary"||r==="middle"?ir[r]:null,xn=(O,tt)=>`${O}|${tt}`,An=(O,tt,it)=>O.some(at=>at.day===tt&&at.time===it),sr=(O,tt)=>`${O}|${tt}`,Or=O=>O>=6?{text:"",tone:"danger"}:O>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},jr=O=>O>=8?{text:"",tone:"danger"}:O>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},yi=O=>O>=6?{text:"",tone:"danger"}:O>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},vi=O=>O==="danger"?{background:"#fee2e2",color:"#b91c1c",border:"1px solid #fecaca"}:O==="warn"?{background:"#fef3c7",color:"#92400e",border:"1px solid #fde68a"}:{background:"#dcfce7",color:"#166534",border:"1px solid #bbf7d0"},bs={padding:i?10:16,maxWidth:980,margin:"0 auto"},on={border:"1px solid #e5e7eb",borderRadius:14,background:"#fff",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},Vi=(O,tt=!1)=>({padding:i?"10px 10px":"10px 12px",borderRadius:14,border:`1px solid ${O?"#2563eb":"#d1d5db"}`,background:O?"#e7f1ff":"#fff",fontWeight:900,cursor:tt?"not-allowed":"pointer",opacity:tt?.55:1,textAlign:"left",width:i?"100%":"auto"}),Mi={padding:i?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",width:i?"100%":"auto",minWidth:i?"auto":180},Lr={display:"flex",gap:8,marginBottom:12,overflowX:i?"auto":"visible",WebkitOverflowScrolling:"touch",paddingBottom:i?4:0},Oi=O=>({padding:i?"9px 12px":"10px 14px",borderRadius:12,border:`1px solid ${O?"#2563eb":"#e5e7eb"}`,background:O?"#2563eb":"#fff",color:O?"#fff":"#111827",fontWeight:900,cursor:"pointer",whiteSpace:"nowrap",flex:"0 0 auto"}),ji=(O,tt)=>({fontSize:11,padding:"4px 8px",borderRadius:999,fontWeight:900,...vi(tt)});D.useEffect(()=>{(async()=>{var O,tt;if(o)try{const it=await Ye(Ht(Tt,"parents",o));if(!it.exists()){f([]);return}const at=((O=it.data())==null?void 0:O.children)||[],ht=[];for(const dt of at)try{const _t=await Ye(Ht(Tt,"students",dt)),Dt=_t.exists()?(((tt=_t.data())==null?void 0:tt.name)||"").toString().trim():"";ht.push({id:dt,name:Dt||""})}catch{ht.push({id:dt,name:""})}if(ht.sort((dt,_t)=>(dt.name||"").localeCompare(_t.name||"")),f(ht),!m&&ht.length){const dt=ht[0];localStorage.setItem("studentId",dt.id),localStorage.setItem("studentName",dt.name),g(dt.id),b(dt.name)}}catch(it){console.error("children  :",it),f([])}})()},[o]);const Ee=async O=>{var at;if(!O)return;const tt=c.find(ht=>ht.id===O);let it=((tt==null?void 0:tt.name)||"").trim();if(!it)try{const ht=await Ye(Ht(Tt,"students",O));ht.exists()&&(it=(((at=ht.data())==null?void 0:at.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",O),it&&localStorage.setItem("studentName",it),g(O),b(it),A(null),N([]),lt([]),bt(null),C(null),pt(null),Bt(""),st(null),Et([]),Ut([]),Ve(null),Wn([]),gi([]),Ni(null),he(!1),Je(!1),Zn(null)};D.useEffect(()=>{const O=Ht(Tt,"settings","enrollments"),tt=Ie(O,it=>{if(!it.exists())return;const at=it.data()||{};R({isOpen:at.isOpen!==void 0&&at.isOpen!==null?!!at.isOpen:!0,reserveOnly:at.reserveOnly!==void 0&&at.reserveOnly!==null?!!at.reserveOnly:!1})},it=>console.error("   :",it));return()=>tt()},[]),D.useEffect(()=>{if(r!=="elementary"&&r!=="middle"){B({}),X({});return}const O=Js(Ae(Tt,"enrollments"),ta("group","==",r)),tt=Ie(O,it=>{const at={},ht={};it.forEach(dt=>{const _t=dt.data(),Dt=`${_t.day}|${_t.time}`;if(_t.status==="reserve")ht[Dt]=(ht[Dt]||0)+1;else{if(_t.status==="waitlist")return;at[Dt]=(at[Dt]||0)+1}}),B(at),X(ht)});return()=>tt()},[r]),D.useEffect(()=>{if(!p.trim()){lt([]),N([]),bt(null);return}const O=Ht(Tt,"enrollments_by_student",p.trim()),tt=Ie(O,it=>{var at,ht;if(it.exists()){const dt=it.data(),_t=Array.isArray(dt.applied)?dt.applied:[];lt(_t),bt(((ht=(at=dt.updatedAt)==null?void 0:at.toDate)==null?void 0:ht.call(at))||null),N(_t.map(({day:Dt,time:ve,status:le})=>({day:Dt,time:ve,status:le})))}else lt([]),N([]),bt(null)});return()=>tt()},[p]),D.useEffect(()=>{if(!m){pt(null),C(null);return}const O=Ht(Tt,"middle_clinic_days",m),tt=Ie(O,it=>{if(!it.exists()){pt(null),C(null);return}const at=it.data()||{};pt(at),C(at.regular||null)});return()=>tt()},[m]),D.useEffect(()=>{const O=Ae(Tt,"middle_clinic_days"),tt=Ie(O,it=>{const at={};it.forEach(ht=>{const dt=ht.data()||{};if(dt.regular&&dt.regular.day&&dt.regular.blockId){const _t=sr(dt.regular.day,dt.regular.blockId);at[_t]=(at[_t]||0)+1}}),Ot(at)});return()=>tt()},[]);const Me=(O,tt,it=!1)=>{const at=sr(O,tt);let ht=Gt[at]||0;return it&&(K!=null&&K.regular)&&K.regular.day===O&&K.regular.blockId===tt&&(ht-=1),ht>=U};D.useEffect(()=>{if(!m){st(null),Bt("");return}const O=Ht(Tt,"operation_by_student",m),tt=Ie(O,it=>{if(it.exists()){const at=it.data()||{};st(at),Bt(at.time||"")}else st(null),Bt("")});return()=>tt()},[m]),D.useEffect(()=>{const O=Ae(Tt,"operation_enrollments"),tt=Ie(O,it=>{const at={};it.forEach(ht=>{const _t=(ht.data()||{}).time;_t&&(at[_t]=(at[_t]||0)+1)}),F(at)});return()=>tt()},[]),D.useEffect(()=>{if(!m){Ut([]),Et([]),Ve(null);return}const O=Ht(Tt,"intensive_by_student",m),tt=Ie(O,it=>{var dt,_t;if(!it.exists()){Ut([]),Et([]),Ve(null);return}const at=it.data()||{},ht=Array.isArray(at.applied)?at.applied:[];Ut(ht),Et(ht),Ve(((_t=(dt=at.updatedAt)==null?void 0:dt.toDate)==null?void 0:_t.call(dt))||null)});return()=>tt()},[m]),D.useEffect(()=>{const O=Ae(Tt,"intensive_enrollments"),tt=Ie(O,it=>{const at={};it.forEach(ht=>{const dt=ht.data()||{};if(!dt.day||!dt.time)return;const _t=xn(dt.day,dt.time);at[_t]=(at[_t]||0)+1}),ie(at)});return()=>tt()},[]);const Re=(O,tt)=>{if(An(ft,O,tt)){Et(ft.filter(ht=>!(ht.day===O&&ht.time===tt)));return}const at=ft.findIndex(ht=>ht.day===O);if(at!==-1){const ht=[...ft];ht[at]={day:O,time:tt},Et(ht);return}if(ft.length>=3){alert("  3   .");return}Et([...ft,{day:O,time:tt}])},Nn=async()=>{if(!m||!p.trim()){alert("   .     .");return}if(ft.length!==2&&ft.length!==3){alert(" 9  2  3  .");return}for(const{day:ht,time:dt}of ft){const _t=xn(ht,dt),Dt=jt[_t]||0;if((Ct.some(se=>se.day===ht&&se.time===dt)?Dt-1:Dt)>=Q){alert(`${ht} ${dt}  .`);return}}const O=vo(Tt),tt=Ht(Tt,"intensive_by_student",m);O.set(tt,{studentId:m,studentName:p.trim(),applied:ft.map(ht=>({day:ht.day,time:ht.time})),updatedAt:di()},{merge:!0});const it=Js(Ae(Tt,"intensive_enrollments"),ta("studentId","==",m));(await hs(it)).forEach(ht=>O.delete(ht.ref)),ft.forEach(({day:ht,time:dt})=>{const _t=`${m}|${ht}|${dt}`,Dt=Ht(Tt,"intensive_enrollments",_t);O.set(Dt,{studentId:m,studentName:p.trim(),day:ht,time:dt,createdAt:di()})}),await O.commit(),alert("  .")};D.useEffect(()=>{if(!m){gi([]),Wn([]),Ni(null);return}const O=Ht(Tt,"high_by_student",m),tt=Ie(O,it=>{var dt,_t;if(!it.exists()){gi([]),Wn([]),Ni(null);return}const at=it.data()||{},ht=Array.isArray(at.days)?at.days:[];gi(ht),Wn(ht),Ni(((_t=(dt=at.updatedAt)==null?void 0:dt.toDate)==null?void 0:_t.call(dt))||null)});return()=>tt()},[m]),D.useEffect(()=>{const O=Ae(Tt,"high_enrollments"),tt=Ie(O,it=>{const at={};it.forEach(ht=>{const _t=(ht.data()||{}).day;_t&&(at[_t]=(at[_t]||0)+1)}),ml(at)});return()=>tt()},[]);const Ss=O=>{if(ce.includes(O)){Wn(ce.filter(tt=>tt!==O));return}if(ce.length>=4){alert("  4    .");return}Wn([...ce,O])},pl=async()=>{if(!m||!p.trim()){alert("   .     .");return}for(const ht of ce){const dt=Ii[ht]||0;if((Xn.includes(ht)?dt-1:dt)>=Ze){alert(`${ht} .`);return}}const O=vo(Tt),tt=Ht(Tt,"high_by_student",m);O.set(tt,{studentId:m,studentName:p.trim(),days:ce,updatedAt:di()},{merge:!0});const it=Js(Ae(Tt,"high_enrollments"),ta("studentId","==",m));(await hs(it)).forEach(ht=>O.delete(ht.ref)),ce.forEach(ht=>{const dt=`${m}|${ht}`,_t=Ht(Tt,"high_enrollments",dt);O.set(_t,{studentId:m,studentName:p.trim(),day:ht,createdAt:di()})}),await O.commit(),alert("  .")};D.useEffect(()=>{if(!m){Je(!1),he(!1),Zn(null);return}const O=Ht(Tt,"advanced_by_student",m),tt=Ie(O,it=>{var dt,_t;if(!it.exists()){Je(!1),he(!1),Zn(null);return}const at=it.data()||{},ht=!!at.applied;Je(ht),he(ht),Zn(((_t=(dt=at.updatedAt)==null?void 0:dt.toDate)==null?void 0:_t.call(dt))||null)});return()=>tt()},[m]),D.useEffect(()=>{const O=Ae(Tt,"advanced_enrollments"),tt=Ie(O,it=>{la(it.size||0)});return()=>tt()},[]);const _i=async O=>{if(!m||!p.trim()){alert("   .     .");return}const tt=vo(Tt),it=Ht(Tt,"advanced_by_student",m);tt.set(it,{studentId:m,studentName:p.trim(),applied:!!O,updatedAt:di()},{merge:!0});const at=`${m}`,ht=Ht(Tt,"advanced_enrollments",at);O?tt.set(ht,{studentId:m,studentName:p.trim(),createdAt:di()}):tt.delete(ht),await tt.commit(),alert(O?"  .":"  .")},Ts=(O,tt)=>{const it=[["",""],["",""],["",""]];if(An(I,O,tt)){N(I.filter(at=>!(at.day===O&&at.time===tt)));return}if(I.length===0){N([{day:O,time:tt}]);return}if(I.length===1){const at=I[0];if(at.day===O){N([{day:O,time:tt}]);return}const ht=[at.day,O].sort().join("");if(!it.some(_t=>_t.slice().sort().join("")===ht)){alert(" '/', '/', '/'    .");return}N([at,{day:O,time:tt}]);return}if(I.length>=2){const at=I.findIndex(ht=>ht.day===O);if(at!==-1){const ht=[...I];ht[at]={day:O,time:tt},N(ht);return}alert("   '/', '/', '/'     .");return}},Li=(O,tt)=>{if(An(I,O,tt)){N(I.filter(it=>!(it.day===O&&it.time===tt)));return}if(I.length>=2){alert("    2   .");return}N([...I,{day:O,time:tt}])},ki=(O,tt)=>N(I.filter(it=>!(it.day===O&&it.time===tt))),Ei=O=>{C(tt=>({day:O,blockId:(tt==null?void 0:tt.blockId)||"A"}))},Jn=O=>{if(!(j!=null&&j.day)){alert("   .");return}C(tt=>({...tt||{day:w[0]},blockId:O}))},ti=async()=>{if(!m||!p.trim()){alert("   .     .");return}if(!j||!j.day||!j.blockId){alert("  (A/B)  .");return}const{day:O,blockId:tt}=j;if(Me(O,tt,!0)){alert(" /   .");return}const it=vo(Tt),at=Ht(Tt,"middle_clinic_days",m);it.set(at,{studentId:m,studentName:p.trim(),regular:{day:O,blockId:tt},extra:null,updatedAt:di()},{merge:!0}),await it.commit(),alert("  .")},un=async()=>{if(r!=="elementary"&&r!=="middle")return;if(!V.isOpen){alert("  .");return}if(!p.trim()){alert("   .     .");return}if(I.length===0){alert("  .");return}let O=[...I],tt=!1,it="";if(r==="elementary"){if(I.map(le=>le.day).length!==2){alert("  2  . (/, /, /)");return}const ve=[];if(I.forEach(({day:le,time:se})=>{const Un=xn(le,se),zn=G[Un]||0,Pn=H[Un]||0;let bi;if(V.reserveOnly){if(Pn>=10){tt=!0,it+=`${le} ${se}     .
`;return}bi="reserve"}else if(zn<6)bi="applied";else if(Pn<10)bi="reserve";else{tt=!0,it+=`${le} ${se}      .
`;return}ve.push({day:le,time:se,status:bi})}),tt){alert(it||"    .   .");return}O=ve}if(r==="middle"){const Dt=[];if(I.forEach(({day:ve,time:le})=>{const se=xn(ve,le),Un=G[se]||0,zn=H[se]||0;let Pn;if(V.reserveOnly){if(zn>=10){tt=!0,it+=`${ve} ${le}     .
`;return}Pn="reserve"}else if(Un<6)Pn="applied";else if(zn<10)Pn="reserve";else{tt=!0,it+=`${ve} ${le}      .
`;return}Dt.push({day:ve,time:le,status:Pn})}),tt){alert(it||"    .   .");return}O=Dt}const at=vo(Tt),ht=Ht(Tt,"enrollments_by_student",p.trim());at.set(ht,{studentName:p.trim(),applied:O.map(({day:Dt,time:ve,status:le})=>({day:Dt,time:ve,group:r,status:le==="reserve"?"reserve":"applied",label:le==="reserve"?"()":""})),waitlist:[],updatedAt:di()});const dt=Js(Ae(Tt,"enrollments"),ta("studentName","==",p.trim()));(await hs(dt)).forEach(Dt=>at.delete(Dt.ref)),O.forEach(({day:Dt,time:ve,status:le})=>{const se=le==="reserve"?"reserve":"applied",Un=`${p.trim()}|${r}|${Dt}|${ve}|${se}`,zn=Ht(Tt,"enrollments",Un);at.set(zn,{studentName:p.trim(),group:r,day:Dt,time:ve,status:se,createdAt:di()})}),await at.commit(),N(O),alert(".")},Ce=(()=>{var at,ht;const O=[];if(Ct!=null&&Ct.length){const dt=Ct.map(_t=>`${_t.day} ${_t.time}`).join(", ");O.push(` : ${dt} ()`)}const tt=P.filter(dt=>dt.group==="elementary"),it=P.filter(dt=>dt.group==="middle");if(tt.length){const dt=tt.map(_t=>`${_t.day} ${_t.time}${_t.status==="reserve"?" ()":" ()"}`).join(", ");O.push(` : ${dt}`)}if(it.length){const dt=it.map(_t=>`${_t.day} ${_t.time}${_t.status==="reserve"?" ()":" ()"}`).join(", ");O.push(` : ${dt}`)}if((at=K==null?void 0:K.regular)!=null&&at.day&&((ht=K==null?void 0:K.regular)!=null&&ht.blockId)){const dt=K.regular.blockId==="A"?"A(5~7)":"B(7~9)";O.push(` : ${K.regular.day} ${dt} ()`)}return Xn!=null&&Xn.length&&O.push(` : ${Xn.join(", ")} ()`),Xt&&O.push(" :  "),O.length||O.push("    ."),O})(),xs=["intensive","elementary","middle","middleClinic","high","advanced"],ar=({day:O,children:tt})=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:12,background:"#fff"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:10,fontSize:14},children:O}),tt]}),Vn=({children:O})=>v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:10},children:O});return v.jsxs("div",{style:bs,children:[v.jsxs("div",{style:{...on,padding:i?12:14,marginBottom:12},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:i?"stretch":"center",gap:10,flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsx("div",{style:{fontSize:i?18:20,fontWeight:900},children:""}),v.jsx("div",{style:{marginTop:6,fontSize:13,color:"#374151",lineHeight:1.65},children:Ce.map((O,tt)=>v.jsx("div",{style:{whiteSpace:"pre-wrap"},children:O},tt))})]}),c.length>0&&v.jsxs("div",{style:{width:i?"100%":"auto"},children:[v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900,marginBottom:6},children:" "}),v.jsx("select",{value:m,onChange:O=>Ee(O.target.value),style:Mi,children:c.map(O=>v.jsx("option",{value:O.id,children:O.name},O.id))})]})]}),v.jsx("div",{style:{marginTop:10,display:"flex",justifyContent:"flex-end"},children:v.jsx("span",{style:{fontSize:11,padding:"4px 10px",borderRadius:999,border:"1px solid #e5e7eb",backgroundColor:V.isOpen?V.reserveOnly?"#fef3c7":"#dcfce7":"#fee2e2",color:V.isOpen?V.reserveOnly?"#92400e":"#166534":"#b91c1c",fontWeight:900},children:V.isOpen?V.reserveOnly?" (/)":"(/)":" (/)"})})]}),v.jsx("div",{style:Lr,children:xs.map(O=>{const tt=r===O;return v.jsx("button",{onClick:()=>{e(O),A(null)},style:Oi(tt),children:rr[O]},O)})}),r==="intensive"?v.jsxs("div",{style:{...on,padding:i?12:14},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(261)"}),v.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[" 9  ",v.jsx("b",{children:"2  3"}),"  /     / :  "," ",v.jsxs("b",{children:[Q,""]})]})]}),!i&&v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:Te?`: ${Te.toLocaleString()}`:""})]}),i?v.jsx("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:10},children:gt.map(O=>v.jsx(ar,{day:`${O}`,children:v.jsx(Vn,{children:St.map(tt=>{const it=xn(O,tt),at=jt[it]||0,ht=jr(at),dt=An(ft,O,tt),_t=at>=Q&&!Ct.some(Dt=>Dt.day===O&&Dt.time===tt);return v.jsxs("button",{onClick:()=>{if(_t)return alert("  .");Re(O,tt)},disabled:_t,style:Vi(dt,_t),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[v.jsx("div",{style:{fontWeight:900},children:tt}),v.jsx("span",{style:ji(ht.text,ht.tone),children:ht.text})]}),v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280",fontWeight:900},children:[at,"/",Q,dt?v.jsx("span",{style:{color:"#2563eb"},children:"  "}):""]})]},`${O}-${tt}`)})})},O))}):v.jsx("div",{style:{marginTop:14,overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),v.jsx("tbody",{children:gt.map(O=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:O}),v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:St.map(tt=>{const it=xn(O,tt),at=jt[it]||0,ht=jr(at),dt=An(ft,O,tt),_t=at>=Q&&!Ct.some(Dt=>Dt.day===O&&Dt.time===tt);return v.jsxs("button",{onClick:()=>{if(_t)return alert("  .");Re(O,tt)},disabled:_t,style:{...Vi(dt,_t),minWidth:190},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[v.jsx("div",{style:{fontWeight:900},children:tt}),v.jsx("span",{style:ji(ht.text,ht.tone),children:ht.text})]}),dt&&v.jsx("div",{style:{marginTop:6,fontSize:11,fontWeight:900,color:"#2563eb"},children:" "})]},`${O}-${tt}`)})})})]},O))})]})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{fontWeight:900},children:[" :"," ",ft.length?v.jsxs("span",{children:[ft.map(O=>`${O.day} ${O.time}`).join(", ")," ",v.jsxs("span",{style:{color:"#6b7280",fontWeight:900},children:["(",ft.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:Nn,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),i&&Te&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[": ",Te.toLocaleString()]})]})]}):null,r==="high"?v.jsxs("div",{style:{...on,padding:i?12:14},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),v.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:["///   ( 4) /  : ",Ze,""]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:i?"repeat(2, 1fr)":"repeat(4, minmax(160px, 1fr))",gap:10},children:Xe.map(O=>{const tt=Ii[O]||0,it=yi(tt),at=tt>=Ze&&!Xn.includes(O),ht=ce.includes(O);return v.jsxs("button",{onClick:()=>{if(at)return alert(`${O} .`);Ss(O)},disabled:at,style:Vi(ht,at),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[v.jsxs("div",{style:{fontWeight:900},children:[O,""]}),v.jsx("span",{style:ji(it.text,it.tone),children:it.text})]}),v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280",fontWeight:900},children:[tt,"/",Ze,ht?v.jsx("span",{style:{color:"#2563eb"},children:"  "}):""]})]},O)})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{fontWeight:900},children:[":"," ",ce.length?v.jsxs("span",{children:[ce.join(", ")," ",v.jsxs("span",{style:{color:"#6b7280"},children:["(",ce.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:pl,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),nr&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[": ",nr.toLocaleString()]})]})]}):null,r==="middleClinic"?v.jsxs("div",{style:{...on,padding:i?12:14},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:10},children:" () "}),v.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:[" + A/B    (:   ",U,")"]}),v.jsxs("div",{style:{marginBottom:10},children:[v.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:900},children:" "}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8},children:w.map(O=>{const tt=(j==null?void 0:j.day)===O;return v.jsx("button",{onClick:()=>Ei(O),style:{padding:"10px 8px",borderRadius:12,border:tt?"1px solid #2563eb":"1px solid #e5e7eb",background:tt?"#e7f1ff":"#ffffff",cursor:"pointer",fontWeight:900,fontSize:13},children:O},O)})})]}),v.jsxs("div",{style:{marginBottom:10},children:[v.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:900},children:" "}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"1fr 1fr",gap:8},children:L.map(O=>{const tt=(j==null?void 0:j.blockId)===O.id,it=j!=null&&j.day?sr(j.day,O.id):null,at=it&&Gt[it]||0,ht=(j==null?void 0:j.day)&&Me(j.day,O.id,!0);return v.jsx("button",{onClick:()=>Jn(O.id),disabled:ht,style:{padding:"12px 12px",borderRadius:12,border:tt?"1px solid #2563eb":"1px solid #e5e7eb",background:tt?"#e7f1ff":"#ffffff",cursor:ht?"not-allowed":"pointer",opacity:ht?.6:1,fontWeight:900,textAlign:"left"},title:it?` ${at} /  ${U}`:void 0,children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[v.jsx("span",{children:O.label}),v.jsxs("span",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[at,"/",U]})]})},O.id)})})]}),v.jsx("button",{onClick:ti,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"white",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),v.jsxs("div",{style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:6},children:" "}),K!=null&&K.regular?v.jsxs("div",{style:{color:"#111827",fontWeight:900},children:[K.regular.day," ",K.regular.blockId==="A"?"A(5~7)":"B(7~9)"]}):v.jsx("div",{style:{color:"#6b7280"},children:"  ."})]})]}):null,r==="advanced"?v.jsxs("div",{style:{...on,padding:i?12:14},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:" /   ."}),v.jsxs("div",{style:{display:"flex",gap:10,alignItems:"stretch",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsx("button",{onClick:()=>{he(!0),_i(!0)},style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:Es?"#2563eb":"#fff",color:Es?"#fff":"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""}),v.jsx("button",{onClick:()=>{he(!1),_i(!1)},style:{padding:"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""}),v.jsx("span",{style:{fontSize:12,fontWeight:900,color:Xt?"#166534":"#6b7280",background:Xt?"#dcfce7":"#f3f4f6",border:"1px solid #e5e7eb",padding:"10px 12px",borderRadius:12,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:Xt?" : ":" : "})]}),v.jsxs("div",{style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"  "}),v.jsxs("div",{style:{fontSize:22,fontWeight:900},children:[tn,""]}),oa&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900,marginTop:6},children:[": ",oa.toLocaleString()]})]})]}):null,r==="elementary"||r==="middle"?v.jsxs("div",{style:{...on,padding:i?12:14},children:[i?v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:yn&&Object.entries(yn).map(([O,tt])=>v.jsx(ar,{day:`${O}`,children:v.jsx(Vn,{children:tt.map(it=>{const at=xn(O,it),ht=G[at]||0,dt=Or(ht),_t=S&&S.day===O&&S.time===it,Dt=An(I,O,it),ve=ht>=6,le=(H[at]||0)>=10,se=V.isOpen?(V.reserveOnly||ve)&&le:!0;return v.jsxs("button",{onClick:()=>{if(!V.isOpen)return alert("  .");A({day:O,time:it}),r==="elementary"?Ts(O,it):Li(O,it)},disabled:se,style:{...Vi(Dt||_t,se),border:`1px solid ${Dt||_t?"#2563eb":"#d1d5db"}`,background:Dt?"#e7f1ff":_t?"#f3f4ff":"#fff"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[v.jsx("div",{style:{fontWeight:900},children:it}),v.jsx("span",{style:ji(dt.text,dt.tone),children:dt.text})]}),v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280",fontWeight:900},children:[ht,"/6",V.reserveOnly?v.jsx("span",{style:{color:"#92400e"},children:"  "}):"",Dt?v.jsx("span",{style:{color:"#2563eb"},children:"  "}):""]})]},`${O}-${it}`)})})},O))}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),v.jsx("tbody",{children:yn&&Object.entries(yn).map(([O,tt])=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:O}),v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:tt.map(it=>{const at=xn(O,it),ht=G[at]||0,dt=Or(ht),_t=S&&S.day===O&&S.time===it,Dt=An(I,O,it),ve=ht>=6,le=(H[at]||0)>=10,se=V.isOpen?(V.reserveOnly||ve)&&le:!0;return v.jsxs("button",{onClick:()=>{if(!V.isOpen)return alert("  .");A({day:O,time:it}),r==="elementary"?Ts(O,it):Li(O,it)},disabled:se,style:{padding:"10px 12px",borderRadius:14,border:`1px solid ${Dt||_t?"#2563eb":"#d1d5db"}`,background:Dt?"#e7f1ff":_t?"#f3f4ff":"#fff",color:se?"#9ca3af":"#111827",fontWeight:900,cursor:se?"not-allowed":"pointer",whiteSpace:"nowrap",opacity:se?.6:1,textAlign:"left",minWidth:170},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[v.jsx("div",{children:it}),v.jsx("span",{style:ji(dt.text,dt.tone),children:dt.text})]}),V.reserveOnly&&v.jsx("div",{style:{marginTop:6,fontSize:11,fontWeight:900,color:"#92400e"},children:"( )"}),Dt&&v.jsx("div",{style:{marginTop:6,fontSize:11,fontWeight:900,color:"#2563eb"},children:" "})]},`${O}-${it}`)})})})]},O))})]})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsx("div",{style:{color:"#374151",fontWeight:900},children:S?v.jsxs("span",{children:[" : ",v.jsx("b",{children:S.day})," ",v.jsx("b",{children:S.time})]}):v.jsx("span",{style:{color:"#6b7280"},children:" "})}),v.jsx("button",{onClick:un,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""})]}),v.jsxs("div",{style:{marginTop:14},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:8},children:" ( 2)"}),I.length===0?v.jsx("div",{style:{color:"#6b7280"},children:""}):v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:I.map(({day:O,time:tt,status:it})=>v.jsxs("span",{style:{padding:"8px 12px",borderRadius:999,border:`1px solid ${it==="reserve"?"#6b7280":"#2563eb"}`,background:it==="reserve"?"#f3f4f6":"#e7f1ff",display:"inline-flex",alignItems:"center",gap:10,fontWeight:900,fontSize:13},children:[O," ",tt," ",it==="reserve"?"()":"",v.jsx("button",{onClick:()=>ki(O,tt),title:"",style:{border:"none",background:"transparent",cursor:"pointer",fontWeight:900,color:it==="reserve"?"#6b7280":"#2563eb"},children:""})]},`ap-${O}-${tt}`))})]}),v.jsxs("div",{style:{marginTop:14,padding:12,border:"1px solid #e5e7eb",borderRadius:12,background:"#f9fafb"},children:[v.jsxs("div",{style:{fontWeight:900,marginBottom:8},children:["  ",p?`: ${p}`:""]}),p?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{marginBottom:4},children:[v.jsx("b",{children:":"})," ",P.length?P.map(O=>{const tt=O.group==="elementary"?"":"",it=O.status==="reserve"||(O==null?void 0:O.label)==="()"?" ()":"";return`${tt} ${O.day} ${O.time}${it}`}).join(", "):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),mt&&v.jsxs("div",{style:{marginTop:6,fontSize:12,color:"#6b7280"},children:[": ",mt.toLocaleString()]})]}):v.jsx("div",{style:{color:"#6b7280"},children:"   "})]})]}):null]})}function Q2(){const r=(localStorage.getItem("parentPhone")||"").trim(),[e,i]=D.useState(()=>(localStorage.getItem("studentId")||"").trim()),[a,o]=D.useState(()=>(localStorage.getItem("studentName")||"").trim()),[c,f]=D.useState([]),[m,g]=D.useState(()=>(localStorage.getItem("studentId")||"").trim()),[p,b]=D.useState(()=>new Date().getFullYear()),[S,A]=D.useState(()=>new Date().getMonth()+1),[I,N]=D.useState([]),[G,B]=D.useState(null),H=D.useMemo(()=>{const w=new Date;return`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`},[]),X=D.useMemo(()=>`${p}-${String(S).padStart(2,"0")}`,[p,S]);D.useEffect(()=>{if(!r)return;const w=Js(Ae(Tt,"students"),ta("parentPhone","==",r)),L=Ie(w,U=>{var Gt;const j=U.docs.map(Ot=>{const K=Ot.data()||{},pt=String(K.name||K.studentName||K.student||"").trim();return{id:Ot.id,name:pt||"( )"}});j.sort((Ot,K)=>Ot.name.localeCompare(K.name,"ko")),f(j);const C=j.some(Ot=>Ot.id===m)?m:((Gt=j[0])==null?void 0:Gt.id)||"";g(C),!j.some(Ot=>Ot.id===e)&&j.length>0&&P(j[0].id,j[0].name)},U=>console.error("students snapshot error:",U));return()=>L()},[r]);const P=(w,L)=>{i(w),o(L),localStorage.setItem("studentId",w),localStorage.setItem("studentName",L),B(null)};D.useEffect(()=>{if(!e)return;const w=Js(Ae(Tt,"monthly_payments"),ta("studentId","==",e)),L=Ie(w,U=>{const j=U.docs.map(C=>({id:C.id,...C.data()}));j.sort((C,Gt)=>String(Gt.month||"").localeCompare(String(C.month||""))),N(j)},U=>console.error("monthly_payments snapshot error:",U));return()=>L()},[e]);const lt=D.useMemo(()=>I.find(w=>String(w.month||"")===H)||null,[I,H]),mt=D.useMemo(()=>I.filter(w=>String(w.month||"")===X),[I,X]),bt=()=>{const w=new Date(p,S-2,1);b(w.getFullYear()),A(w.getMonth()+1)},V=()=>{const w=new Date(p,S,1);b(w.getFullYear()),A(w.getMonth()+1)},R=!!(e&&a);return v.jsxs("div",{style:{padding:16,maxWidth:820,margin:"0 auto"},children:[v.jsxs("h1",{style:{fontSize:22,fontWeight:900,marginBottom:6},children:["     ",R?` ${a}`:""]}),v.jsxs("div",{style:{fontSize:13,color:"#6b7280",lineHeight:1.6},children:["2026 3     ",v.jsx("br",{}),"      ."]}),v.jsx("div",{style:X2,children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:13,color:"#374151"},children:" "}),v.jsx("select",{value:m,onChange:w=>g(w.target.value),style:Z2,children:c.length===0?v.jsx("option",{value:"",children:"(  )"}):c.map(w=>v.jsx("option",{value:w.id,children:w.name},w.id))}),v.jsx("button",{style:J2,onClick:()=>{const w=c.find(L=>L.id===m);w&&P(w.id,w.name)},disabled:!m,children:" "}),v.jsx("button",{style:tR,onClick:()=>window.location.hash="#/payment-history",children:" ()"}),R&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:[" : ",a]})]})}),R?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{marginTop:14,marginBottom:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[v.jsx("button",{onClick:bt,style:R0,children:" "}),v.jsxs("div",{style:{fontWeight:900,fontSize:16},children:[p," ",S,"",v.jsxs("span",{style:{marginLeft:10,fontSize:12,color:"#6b7280",fontWeight:700},children:["(: ",Ja(H),")"]})]}),v.jsx("button",{onClick:V,style:R0,children:" "})]}),lt?v.jsx($2,{data:lt}):v.jsx(Y2,{nowKey:H}),v.jsx("div",{style:{height:12}}),v.jsx("div",{style:{borderTop:"1px solid #e5e7eb"}}),v.jsx("div",{style:{height:10}}),v.jsxs("div",{style:{fontWeight:900,fontSize:15,marginBottom:8},children:["    ( : ",Ja(X),")"]}),mt.length===0?v.jsxs("div",{style:eR,children:[Ja(X),"    ."]}):v.jsx("div",{style:{display:"grid",gap:10},children:mt.map(w=>v.jsx(K2,{row:w,open:G===w.id,onToggle:()=>B(G===w.id?null:w.id)},w.id))})]}):v.jsxs("div",{style:{marginTop:12,color:"#6b7280",fontSize:13},children:["   ",v.jsx("b",{children:" "}),"  ."]})]})}function $2({data:r}){const e=String(r.month||""),i=r.summary||{},a=i.baseTotal,o=i.discountTotal,c=i.finalTotal,f=String(i.status||"pending"),m=String(i.memo||""),g=j1(r.updatedAt),p=f==="paid"||f==="",b=f==="partial",S=p?"#ecfdf3":b?"#eef2ff":"#fffbeb",A=p?"#4ade80":b?"#a5b4fc":"#facc15",I=p?" ":b?" ":"   ";return v.jsxs("div",{style:{width:"100%",marginTop:12,padding:12,borderRadius:12,border:`1px solid ${A}`,background:S},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:"    "}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:8},children:[v.jsx(O1,{text:I,isPaid:p,isPartial:b}),e&&v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:Ja(e)})]}),v.jsxs("div",{style:{marginTop:10,fontSize:13,lineHeight:1.55},children:[a!=null&&v.jsxs("div",{children:[" : ",Ri(a)]}),o!=null&&v.jsxs("div",{style:{color:"#ef4444"},children:[" : -",Ri(o)]}),c!=null&&v.jsxs("div",{style:{marginTop:4,fontWeight:900,fontSize:14},children:["    : ",Ri(c)]})]}),o!=null&&Number(o)>0&&v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:" /        2   ."}),m&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",m]}),g&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",g]}),v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:"          ."})]})}function Y2({nowKey:r}){return v.jsxs("div",{style:{width:"100%",marginTop:12,padding:12,borderRadius:12,border:"1px solid #bfdbfe",background:"#eff6ff"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:"    "}),v.jsxs("div",{style:{marginTop:8,fontSize:13,lineHeight:1.55},children:[Ja(r),"      ."]}),v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:"        ."})]})}function K2({row:r,open:e,onToggle:i}){const a=String(r.month||""),o=r.summary||{},c=o.baseTotal,f=o.discountTotal,m=o.finalTotal,g=String(o.status||"pending"),p=String(o.memo||""),b=j1(r.updatedAt),S=r.partials,A=Array.isArray(S)?S:[],I=g==="paid"||g==="",N=g==="partial";return v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,background:"#fff"},children:[v.jsxs("button",{onClick:i,style:{width:"100%",textAlign:"left",border:"none",background:"transparent",padding:"12px 12px",cursor:"pointer"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[v.jsx("div",{style:{fontWeight:900,fontSize:13,flex:1},children:a?Ja(a):" "}),v.jsx(O1,{text:I?" ":N?" ":"",isPaid:I,isPartial:N,small:!0})]}),v.jsxs("div",{style:{marginTop:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("div",{children:f!=null&&Number(f)>0&&v.jsxs("span",{style:{fontSize:11,color:"#ef4444",fontWeight:800},children:[": -",Ri(f)]})}),v.jsx("div",{style:{fontSize:13,fontWeight:900},children:m!=null?Ri(m):"-"})]}),v.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6b7280",fontWeight:800},children:e?" ":"  "})]}),e&&v.jsxs("div",{style:{padding:"0 12px 12px 12px"},children:[A.length>0&&v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:12,fontWeight:900,marginBottom:8},children:"   "}),v.jsx("div",{style:{display:"grid",gap:8},children:A.map((G,B)=>v.jsx(W2,{data:G},B))})]}),p&&v.jsxs("div",{style:{marginTop:10,fontSize:12,color:"#6b7280"},children:[" : ",p]}),b&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",b]}),c!=null&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[" : ",Ri(c)]})]})]})}function W2({data:r}){const e=String(r.classType||""),i=r.baseAmount,a=r.discountAmount,o=r.finalAmount,c=r.discountPerUse,f=r.maxDiscountCountPerMonth,m=String(r.status||"pending"),g=String(r.memo||""),p=r.discountLogs,b=Array.isArray(p)?p:[],S=r.discountCount??b.length,A=m==="paid"||m==="";return v.jsxs("div",{style:{background:"#f9fafb",borderRadius:10,padding:10},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[v.jsx("div",{style:{fontWeight:900,fontSize:12,flex:1},children:e||"  "}),A&&v.jsx("div",{style:{fontSize:11,color:"#166534",fontWeight:900},children:" "})]}),v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#111827",display:"flex",gap:10,flexWrap:"wrap"},children:[i!=null&&v.jsxs("span",{children:[": ",Ri(i)]}),a!=null&&Number(a)>0&&v.jsxs("span",{style:{color:"#ef4444"},children:[": -",Ri(a)]}),o!=null&&v.jsxs("span",{style:{fontWeight:900},children:[": ",Ri(o)]})]}),c!=null&&Number(c)>0&&v.jsxs("div",{style:{marginTop:6,fontSize:10,color:"#6b7280"},children:["1 : ",Ri(c)," /  ",S??0,"",f!=null?` (  ${f})`:""]}),b.length>0&&v.jsxs("div",{style:{marginTop:8},children:[v.jsx("div",{style:{fontSize:11,fontWeight:900,marginBottom:6},children:"  :"}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:b.map((I,N)=>{const G=String(I.date||""),B=String(I.reasonCategory||""),H=I.amount;return v.jsx("span",{style:{fontSize:10,color:"#6b7280",border:"1px solid #e5e7eb",background:"#fff",padding:"4px 8px",borderRadius:999},children:`${G||"-"}  ${B}  -${Ri(H)}`},N)})})]}),g&&v.jsxs("div",{style:{marginTop:6,fontSize:10,color:"#6b7280"},children:[": ",g]})]})}function O1({text:r,isPaid:e,isPartial:i,small:a=!1}){const o=e?"#dcfce7":i?"#e0e7ff":"#ffedd5",c=e?"#22c55e":i?"#6366f1":"#fb923c",f=e?"#166534":i?"#3730a3":"#9a3412";return v.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:a?"3px 7px":"4px 10px",borderRadius:999,border:`1px solid ${c}`,background:o,color:f,fontWeight:900,fontSize:a?10:11,whiteSpace:"nowrap"},children:r})}function Ri(r){if(r==null)return"-";let e=0;return typeof r=="number"?e=r:e=Number(String(r).replaceAll(",",""))||0,`${Math.trunc(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function j1(r){if(!r)return null;const e=typeof(r==null?void 0:r.toDate)=="function"?r.toDate():new Date(r);if(isNaN(e.getTime()))return null;const i=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),c=String(e.getHours()).padStart(2,"0"),f=String(e.getMinutes()).padStart(2,"0");return`${i}-${a}-${o} ${c}:${f}`}function Ja(r){try{const[e,i]=String(r).split("-"),a=Number(e),o=Number(i);if(a>0&&o>0)return`${a} ${o}`}catch{}return String(r)}const X2={marginTop:14,padding:12,borderRadius:16,border:"1px solid #e5e7eb",background:"#fff"},Z2={minWidth:180,height:40,borderRadius:12,border:"1px solid #d1d5db",padding:"0 12px",fontWeight:900,outline:"none"},R0={padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:12,background:"#fff",cursor:"pointer",fontWeight:900},J2={height:40,padding:"0 14px",borderRadius:12,border:"none",background:"#111827",color:"#fff",cursor:"pointer",fontWeight:900,fontSize:13,whiteSpace:"nowrap"},tR={height:40,padding:"0 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:900,fontSize:13,whiteSpace:"nowrap"},eR={color:"#6b7280",fontSize:13,lineHeight:1.6,padding:12,border:"1px solid #e5e7eb",borderRadius:12};function nR(){const[r,e]=D.useState(""),[i,a]=D.useState(""),[o,c]=D.useState(""),[f,m]=D.useState(!0),g=Uo(),p=localStorage.getItem("parentPhone")||"";D.useEffect(()=>{(async()=>{if(!p){g("/login");return}m(!1)})()},[p,g]);const b=async()=>{if(c(""),!p){c(" .");return}if(r.length<8){c("  8   .");return}if(r!==i){c("   .");return}try{const S=Ht(Tt,"parents",p),A=await Ye(S);if(!A.exists()){c("  .   .");return}await V1(S,{password:r,mustChangePassword:!1,updatedAt:di()}),localStorage.setItem("mustChangePassword","0");const N=(A.data()||{}).children||[];N.length<=1?(N[0]&&localStorage.setItem("studentId",N[0]),g("/attendance")):g("/select-child")}catch(S){console.error(S),c("    .")}};return f?null:v.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:900,marginBottom:10},children:" "}),v.jsxs("div",{style:{fontSize:13,color:"#6b7280",lineHeight:1.6},children:["  ",v.jsx("b",{children:"     "}),".",v.jsx("br",{}),"( 8  )"]}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:14},children:" "}),v.jsx("input",{value:r,onChange:S=>e(S.target.value),placeholder:"8 ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:10},children:"  "}),v.jsx("input",{value:i,onChange:S=>a(S.target.value),placeholder:"   ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("button",{onClick:b,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #16a34a",background:"#16a34a",color:"#fff",cursor:"pointer"},children:" "}),o&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:700},children:o})]})}function iR(){const[r,e]=D.useState([]),[i,a]=D.useState(""),o=Uo(),c=localStorage.getItem("parentPhone")||"",f=localStorage.getItem("mustChangePassword")==="1";D.useEffect(()=>{(async()=>{if(!c){o("/login");return}if(f){o("/change-password");return}try{const p=Ht(Tt,"parents",c),b=await Ye(p);if(!b.exists()){a("  .   .");return}const A=(b.data()||{}).children||[],I=[];for(const N of A){const G=await Ye(Ht(Tt,"students",N)),B=G.exists()?G.data():{};I.push({id:N,name:B.name||""})}e(I)}catch(p){console.error(p),a("   .")}})()},[c,f,o]);const m=p=>{localStorage.setItem("studentId",p),o("/attendance")},g=()=>{localStorage.removeItem("parentPhone"),localStorage.removeItem("studentId"),localStorage.removeItem("mustChangePassword"),o("/login")};return v.jsxs("div",{style:{maxWidth:520,margin:"40px auto",padding:16},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:900},children:" "}),v.jsx("button",{onClick:g,style:{border:"1px solid #d1d5db",background:"#fff",borderRadius:10,padding:"8px 10px",cursor:"pointer"},children:""})]}),i&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:700},children:i}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0,1fr))",gap:12,marginTop:14},children:r.map(p=>v.jsxs("button",{onClick:()=>m(p.id),style:{textAlign:"left",padding:14,borderRadius:14,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900},children:p.name}),v.jsx("div",{style:{marginTop:6,fontSize:12,color:"#6b7280"},children:"   "})]},p.id))})]})}class rR extends cb.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,i){console.error("ErrorBoundary caught:",e,i)}render(){return this.state.hasError?v.jsx("div",{style:{padding:16},children:" . (F5),       ."}):this.props.children}}const C0=r=>{if(!r)return null;if(typeof r.toDate=="function")return r.toDate();const e=new Date(r);return isNaN(e)?null:e};function sR(){return v.jsx(NS,{children:v.jsx(rR,{children:v.jsx(aR,{})})})}function aR(){const r=Mr(),[e,i]=D.useState(!!localStorage.getItem("parentPhone")),[a,o]=D.useState(localStorage.getItem("mustChangePassword")==="1"),[c,f]=D.useState(!!localStorage.getItem("studentId")),[m,g]=D.useState(!1);D.useEffect(()=>{const S=()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1"),f(!!localStorage.getItem("studentId"))};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[]),D.useEffect(()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1"),f(!!localStorage.getItem("studentId"))},[r]),D.useEffect(()=>{const S=localStorage.getItem("studentId");if(!S)return;(async()=>{const I=new Date,N=new Date;N.setDate(I.getDate()-3);const G=await hs(Ae(Tt,"comments")),B=await hs(Ae(Tt,"books")),H=G.docs.some(P=>{const lt=P.data();return lt.studentId===S&&(C0(lt.createdAt||lt.completedDate)??new Date(0))>=N}),X=B.docs.some(P=>{const lt=P.data();return lt.studentId===S&&(C0(lt.createdAt||lt.completedDate)??new Date(0))>=N});g(H||X)})()},[c]);const p=()=>{localStorage.clear(),i(!1),o(!1),f(!1),window.location.hash="#/login"},b=S=>e?a?v.jsx(wi,{to:"change-password",replace:!0}):c?S:v.jsx(wi,{to:"select-child",replace:!0}):v.jsx(wi,{to:"login",replace:!0});return v.jsxs("div",{className:"app-shell page",children:[e&&!a&&v.jsx("nav",{className:"nav",children:v.jsxs("div",{className:"nav-links",style:{justifyContent:"center"},children:[["/attendance","/payment","/notices","/myclass","/enroll"].map(S=>v.jsx(G0,{to:S,style:({isActive:A})=>({margin:"0 0",padding:"6px 12px",borderRadius:6,textDecoration:"none",fontWeight:A?"bold":"normal",color:A?"#fff":"#333",backgroundColor:A?"#007bff":"#f5f5f7",position:"relative",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap"}),children:{"/attendance":"","/payment":"","/notices":"","/myclass":v.jsxs(v.Fragment,{children:["",m&&v.jsx("span",{className:"pulse wiggle",style:{position:"absolute",top:-8,right:-12,backgroundColor:"red",color:"white",borderRadius:"12px",padding:"2px 6px",fontSize:"10px",fontWeight:"bold",fontFamily:"'Segoe UI','Apple SD Gothic Neo',sans-serif"},children:" "})]}),"/enroll":""}[S]},S)),v.jsx("button",{onClick:()=>{window.location.hash="#/change-password"},style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:p,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:""})]})}),v.jsxs(lS,{children:[v.jsx(fi,{index:!0,element:e?a?v.jsx(wi,{to:"change-password",replace:!0}):c?v.jsx(wi,{to:"notices",replace:!0}):v.jsx(wi,{to:"select-child",replace:!0}):v.jsx(wi,{to:"login",replace:!0})}),v.jsx(fi,{path:"login",element:v.jsx(O2,{})}),v.jsx(fi,{path:"change-password",element:e?v.jsx(nR,{}):v.jsx(wi,{to:"login",replace:!0})}),v.jsx(fi,{path:"select-child",element:e?a?v.jsx(wi,{to:"change-password",replace:!0}):v.jsx(iR,{}):v.jsx(wi,{to:"login",replace:!0})}),v.jsx(fi,{path:"attendance",element:b(v.jsx(j2,{}))}),v.jsx(fi,{path:"payment",element:b(v.jsx(Q2,{}))}),v.jsx(fi,{path:"payment-history",element:b(v.jsx(L2,{}))}),v.jsx(fi,{path:"notices",element:b(v.jsx(B2,{}))}),v.jsx(fi,{path:"myclass",element:b(v.jsx(G2,{}))}),v.jsx(fi,{path:"enroll",element:b(v.jsx(F2,{}))}),v.jsx(fi,{path:"*",element:v.jsx(wi,{to:"/",replace:!0})})]})]})}const lR="modulepreload",oR=function(r){return"/ysmath/"+r},D0={},uR=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let f=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=f(i.map(p=>{if(p=oR(p),p in D0)return;D0[p]=!0;const b=p.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const A=document.createElement("link");if(A.rel=b?"stylesheet":lR,b||(A.as="script"),A.crossOrigin="",A.href=p,g&&A.setAttribute("nonce",g),document.head.appendChild(A),b)return new Promise((I,N)=>{A.addEventListener("load",I),A.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};function cR(r={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:a,onRegistered:o,onRegisteredSW:c,onRegisterError:f}=r;let m,g;const p=async(S=!0)=>{await g};async function b(){if("serviceWorker"in navigator){if(m=await uR(async()=>{const{Workbox:S}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:S}},[]).then(({Workbox:S})=>new S("/ysmath/sw.js",{scope:"/ysmath/",type:"classic"})).catch(S=>{f==null||f(S)}),!m)return;m.addEventListener("activated",S=>{(S.isUpdate||S.isExternal)&&window.location.reload()}),m.addEventListener("installed",S=>{S.isUpdate||a==null||a()}),m.register({immediate:e}).then(S=>{c?c("/ysmath/sw.js",S):o==null||o(S)}).catch(S=>{f==null||f(S)})}}return g=b(),p}cR({immediate:!0});yb.createRoot(document.getElementById("root")).render(v.jsx(D.StrictMode,{children:v.jsx(sR,{})}));
