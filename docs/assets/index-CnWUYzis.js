(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function eb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ad={exports:{}},co={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function nb(){if(Jy)return co;Jy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return co.Fragment=e,co.jsx=i,co.jsxs=i,co}var tv;function ib(){return tv||(tv=1,ad.exports=nb()),ad.exports}var E=ib(),sd={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function rb(){if(ev)return kt;ev=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),T=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=T&&U[T]||U["@@iterator"],typeof U=="function"?U:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,B={};function P(U,et,dt){this.props=U,this.context=et,this.refs=B,this.updater=dt||C}P.prototype.isReactComponent={},P.prototype.setState=function(U,et){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,et,"setState")},P.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function q(){}q.prototype=P.prototype;function Z(U,et,dt){this.props=U,this.context=et,this.refs=B,this.updater=dt||C}var Q=Z.prototype=new q;Q.constructor=Z,I(Q,P.prototype),Q.isPureReactComponent=!0;var ft=Array.isArray,pt={H:null,A:null,T:null,S:null,V:null},wt=Object.prototype.hasOwnProperty;function k(U,et,dt,ht,vt,Rt){return dt=Rt.ref,{$$typeof:r,type:U,key:et,ref:dt!==void 0?dt:null,props:Rt}}function D(U,et){return k(U.type,et,void 0,void 0,void 0,U.props)}function V(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function w(U){var et={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(dt){return et[dt]})}var N=/\/+/g;function M(U,et){return typeof U=="object"&&U!==null&&U.key!=null?w(""+U.key):et.toString(36)}function R(){}function _t(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(R,R):(U.status="pending",U.then(function(et){U.status==="pending"&&(U.status="fulfilled",U.value=et)},function(et){U.status==="pending"&&(U.status="rejected",U.reason=et)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Et(U,et,dt,ht,vt){var Rt=typeof U;(Rt==="undefined"||Rt==="boolean")&&(U=null);var Dt=!1;if(U===null)Dt=!0;else switch(Rt){case"bigint":case"string":case"number":Dt=!0;break;case"object":switch(U.$$typeof){case r:case e:Dt=!0;break;case b:return Dt=U._init,Et(Dt(U._payload),et,dt,ht,vt)}}if(Dt)return vt=vt(U),Dt=ht===""?"."+M(U,0):ht,ft(vt)?(dt="",Dt!=null&&(dt=Dt.replace(N,"$&/")+"/"),Et(vt,et,dt,"",function(Dn){return Dn})):vt!=null&&(V(vt)&&(vt=D(vt,dt+(vt.key==null||U&&U.key===vt.key?"":(""+vt.key).replace(N,"$&/")+"/")+Dt)),et.push(vt)),1;Dt=0;var re=ht===""?".":ht+":";if(ft(U))for(var Qt=0;Qt<U.length;Qt++)ht=U[Qt],Rt=re+M(ht,Qt),Dt+=Et(ht,et,dt,Rt,vt);else if(Qt=x(U),typeof Qt=="function")for(U=Qt.call(U),Qt=0;!(ht=U.next()).done;)ht=ht.value,Rt=re+M(ht,Qt++),Dt+=Et(ht,et,dt,Rt,vt);else if(Rt==="object"){if(typeof U.then=="function")return Et(_t(U),et,dt,ht,vt);throw et=String(U),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Dt}function K(U,et,dt){if(U==null)return U;var ht=[],vt=0;return Et(U,ht,"","",function(Rt){return et.call(dt,Rt,vt++)}),ht}function Y(U){if(U._status===-1){var et=U._result;et=et(),et.then(function(dt){(U._status===0||U._status===-1)&&(U._status=1,U._result=dt)},function(dt){(U._status===0||U._status===-1)&&(U._status=2,U._result=dt)}),U._status===-1&&(U._status=0,U._result=et)}if(U._status===1)return U._result.default;throw U._result}var it=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function gt(){}return kt.Children={map:K,forEach:function(U,et,dt){K(U,function(){et.apply(this,arguments)},dt)},count:function(U){var et=0;return K(U,function(){et++}),et},toArray:function(U){return K(U,function(et){return et})||[]},only:function(U){if(!V(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},kt.Component=P,kt.Fragment=i,kt.Profiler=o,kt.PureComponent=Z,kt.StrictMode=s,kt.Suspense=y,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pt,kt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return pt.H.useMemoCache(U)}},kt.cache=function(U){return function(){return U.apply(null,arguments)}},kt.cloneElement=function(U,et,dt){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ht=I({},U.props),vt=U.key,Rt=void 0;if(et!=null)for(Dt in et.ref!==void 0&&(Rt=void 0),et.key!==void 0&&(vt=""+et.key),et)!wt.call(et,Dt)||Dt==="key"||Dt==="__self"||Dt==="__source"||Dt==="ref"&&et.ref===void 0||(ht[Dt]=et[Dt]);var Dt=arguments.length-2;if(Dt===1)ht.children=dt;else if(1<Dt){for(var re=Array(Dt),Qt=0;Qt<Dt;Qt++)re[Qt]=arguments[Qt+2];ht.children=re}return k(U.type,vt,void 0,void 0,Rt,ht)},kt.createContext=function(U){return U={$$typeof:f,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:u,_context:U},U},kt.createElement=function(U,et,dt){var ht,vt={},Rt=null;if(et!=null)for(ht in et.key!==void 0&&(Rt=""+et.key),et)wt.call(et,ht)&&ht!=="key"&&ht!=="__self"&&ht!=="__source"&&(vt[ht]=et[ht]);var Dt=arguments.length-2;if(Dt===1)vt.children=dt;else if(1<Dt){for(var re=Array(Dt),Qt=0;Qt<Dt;Qt++)re[Qt]=arguments[Qt+2];vt.children=re}if(U&&U.defaultProps)for(ht in Dt=U.defaultProps,Dt)vt[ht]===void 0&&(vt[ht]=Dt[ht]);return k(U,Rt,void 0,void 0,null,vt)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(U){return{$$typeof:m,render:U}},kt.isValidElement=V,kt.lazy=function(U){return{$$typeof:b,_payload:{_status:-1,_result:U},_init:Y}},kt.memo=function(U,et){return{$$typeof:p,type:U,compare:et===void 0?null:et}},kt.startTransition=function(U){var et=pt.T,dt={};pt.T=dt;try{var ht=U(),vt=pt.S;vt!==null&&vt(dt,ht),typeof ht=="object"&&ht!==null&&typeof ht.then=="function"&&ht.then(gt,it)}catch(Rt){it(Rt)}finally{pt.T=et}},kt.unstable_useCacheRefresh=function(){return pt.H.useCacheRefresh()},kt.use=function(U){return pt.H.use(U)},kt.useActionState=function(U,et,dt){return pt.H.useActionState(U,et,dt)},kt.useCallback=function(U,et){return pt.H.useCallback(U,et)},kt.useContext=function(U){return pt.H.useContext(U)},kt.useDebugValue=function(){},kt.useDeferredValue=function(U,et){return pt.H.useDeferredValue(U,et)},kt.useEffect=function(U,et,dt){var ht=pt.H;if(typeof dt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ht.useEffect(U,et)},kt.useId=function(){return pt.H.useId()},kt.useImperativeHandle=function(U,et,dt){return pt.H.useImperativeHandle(U,et,dt)},kt.useInsertionEffect=function(U,et){return pt.H.useInsertionEffect(U,et)},kt.useLayoutEffect=function(U,et){return pt.H.useLayoutEffect(U,et)},kt.useMemo=function(U,et){return pt.H.useMemo(U,et)},kt.useOptimistic=function(U,et){return pt.H.useOptimistic(U,et)},kt.useReducer=function(U,et,dt){return pt.H.useReducer(U,et,dt)},kt.useRef=function(U){return pt.H.useRef(U)},kt.useState=function(U){return pt.H.useState(U)},kt.useSyncExternalStore=function(U,et,dt){return pt.H.useSyncExternalStore(U,et,dt)},kt.useTransition=function(){return pt.H.useTransition()},kt.version="19.1.0",kt}var nv;function $d(){return nv||(nv=1,sd.exports=rb()),sd.exports}var O=$d();const ab=eb(O);var ld={exports:{}},ho={},od={exports:{}},ud={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function sb(){return iv||(iv=1,function(r){function e(K,Y){var it=K.length;K.push(Y);t:for(;0<it;){var gt=it-1>>>1,U=K[gt];if(0<o(U,Y))K[gt]=Y,K[it]=U,it=gt;else break t}}function i(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var Y=K[0],it=K.pop();if(it!==Y){K[0]=it;t:for(var gt=0,U=K.length,et=U>>>1;gt<et;){var dt=2*(gt+1)-1,ht=K[dt],vt=dt+1,Rt=K[vt];if(0>o(ht,it))vt<U&&0>o(Rt,ht)?(K[gt]=Rt,K[vt]=it,gt=vt):(K[gt]=ht,K[dt]=it,gt=dt);else if(vt<U&&0>o(Rt,it))K[gt]=Rt,K[vt]=it,gt=vt;else break t}}return Y}function o(K,Y){var it=K.sortIndex-Y.sortIndex;return it!==0?it:K.id-Y.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var y=[],p=[],b=1,T=null,x=3,C=!1,I=!1,B=!1,P=!1,q=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ft(K){for(var Y=i(p);Y!==null;){if(Y.callback===null)s(p);else if(Y.startTime<=K)s(p),Y.sortIndex=Y.expirationTime,e(y,Y);else break;Y=i(p)}}function pt(K){if(B=!1,ft(K),!I)if(i(y)!==null)I=!0,wt||(wt=!0,M());else{var Y=i(p);Y!==null&&Et(pt,Y.startTime-K)}}var wt=!1,k=-1,D=5,V=-1;function w(){return P?!0:!(r.unstable_now()-V<D)}function N(){if(P=!1,wt){var K=r.unstable_now();V=K;var Y=!0;try{t:{I=!1,B&&(B=!1,Z(k),k=-1),C=!0;var it=x;try{e:{for(ft(K),T=i(y);T!==null&&!(T.expirationTime>K&&w());){var gt=T.callback;if(typeof gt=="function"){T.callback=null,x=T.priorityLevel;var U=gt(T.expirationTime<=K);if(K=r.unstable_now(),typeof U=="function"){T.callback=U,ft(K),Y=!0;break e}T===i(y)&&s(y),ft(K)}else s(y);T=i(y)}if(T!==null)Y=!0;else{var et=i(p);et!==null&&Et(pt,et.startTime-K),Y=!1}}break t}finally{T=null,x=it,C=!1}Y=void 0}}finally{Y?M():wt=!1}}}var M;if(typeof Q=="function")M=function(){Q(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,_t=R.port2;R.port1.onmessage=N,M=function(){_t.postMessage(null)}}else M=function(){q(N,0)};function Et(K,Y){k=q(function(){K(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(K){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var it=x;x=Y;try{return K()}finally{x=it}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(K,Y){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var it=x;x=K;try{return Y()}finally{x=it}},r.unstable_scheduleCallback=function(K,Y,it){var gt=r.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?gt+it:gt):it=gt,K){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=it+U,K={id:b++,callback:Y,priorityLevel:K,startTime:it,expirationTime:U,sortIndex:-1},it>gt?(K.sortIndex=it,e(p,K),i(y)===null&&K===i(p)&&(B?(Z(k),k=-1):B=!0,Et(pt,it-gt))):(K.sortIndex=U,e(y,K),I||C||(I=!0,wt||(wt=!0,M()))),K},r.unstable_shouldYield=w,r.unstable_wrapCallback=function(K){var Y=x;return function(){var it=x;x=Y;try{return K.apply(this,arguments)}finally{x=it}}}}(ud)),ud}var rv;function lb(){return rv||(rv=1,od.exports=sb()),od.exports}var cd={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function ob(){if(av)return cn;av=1;var r=$d();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,p,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:y,containerInfo:p,implementation:b}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(y,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,b)},cn.flushSync=function(y){var p=f.T,b=s.p;try{if(f.T=null,s.p=2,y)return y()}finally{f.T=p,s.p=b,s.d.f()}},cn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},cn.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},cn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var b=p.as,T=m(b,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:C}):b==="script"&&s.d.X(y,{crossOrigin:T,integrity:x,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},cn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},cn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,T=m(b,p.crossOrigin);s.d.L(y,b,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},cn.preloadModule=function(y,p){if(typeof y=="string")if(p){var b=m(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},cn.requestFormReset=function(y){s.d.r(y)},cn.unstable_batchedUpdates=function(y,p){return y(p)},cn.useFormState=function(y,p,b){return f.H.useFormState(y,p,b)},cn.useFormStatus=function(){return f.H.useHostTransitionStatus()},cn.version="19.1.0",cn}var sv;function ub(){if(sv)return cd.exports;sv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cd.exports=ob(),cd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function cb(){if(lv)return ho;lv=1;var r=lb(),e=$d(),i=ub();function s(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function y(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(s(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),n;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,S=h.child;S;){if(S===a){_=!0,a=h,l=d;break}if(S===l){_=!0,l=h,a=d;break}S=S.sibling}if(!_){for(S=d.child;S;){if(S===a){_=!0,a=d,l=h;break}if(S===l){_=!0,l=d,a=h;break}S=S.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:n}function p(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=p(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),w=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function _t(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case P:return"Profiler";case B:return"StrictMode";case pt:return"Suspense";case wt:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case Q:return(t.displayName||"Context")+".Provider";case Z:return(t._context.displayName||"Context")+".Consumer";case ft:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return n=t.displayName||null,n!==null?n:_t(t.type)||"Memo";case D:n=t._payload,t=t._init;try{return _t(t(n))}catch{}}return null}var Et=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},gt=[],U=-1;function et(t){return{current:t}}function dt(t){0>U||(t.current=gt[U],gt[U]=null,U--)}function ht(t,n){U++,gt[U]=t.current,t.current=n}var vt=et(null),Rt=et(null),Dt=et(null),re=et(null);function Qt(t,n){switch(ht(Dt,n),ht(Rt,t),ht(vt,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ry(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ry(n),t=Cy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}dt(vt),ht(vt,t)}function Dn(){dt(vt),dt(Rt),dt(Dt)}function yi(t){t.memoizedState!==null&&ht(re,t);var n=vt.current,a=Cy(n,t.type);n!==a&&(ht(Rt,t),ht(vt,a))}function qn(t){Rt.current===t&&(dt(vt),dt(Rt)),re.current===t&&(dt(re),ao._currentValue=it)}var Hn=Object.prototype.hasOwnProperty,Hi=r.unstable_scheduleCallback,Gn=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,oi=r.unstable_requestPaint,Ue=r.unstable_now,xr=r.unstable_getCurrentPriorityLevel,wr=r.unstable_ImmediatePriority,Rr=r.unstable_UserBlockingPriority,vi=r.unstable_NormalPriority,Cr=r.unstable_LowPriority,Gi=r.unstable_IdlePriority,Fn=r.log,Fi=r.unstable_setDisableYieldValue,fe=null,te=null;function pn(t){if(typeof Fn=="function"&&Fi(t),te&&typeof te.setStrictMode=="function")try{te.setStrictMode(fe,t)}catch{}}var We=Math.clz32?Math.clz32:$i,Qi=Math.log,cl=Math.LN2;function $i(t){return t>>>=0,t===0?32:31-(Qi(t)/cl|0)|0}var _i=256,bn=4194304;function Ze(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ei(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=Ze(l):(_&=S,_!==0?h=Ze(_):a||(a=S&~t,a!==0&&(h=Ze(a))))):(S=l&~d,S!==0?h=Ze(S):_!==0?h=Ze(_):a||(a=l&~t,a!==0&&(h=Ze(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function Yi(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function da(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ma(){var t=_i;return _i<<=1,(_i&4194048)===0&&(_i=256),t}function Ki(){var t=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),t}function on(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Qn(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function pa(t,n,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,j=t.expirationTimes,$=t.hiddenUpdates;for(a=_&~a;0<a;){var nt=31-We(a),st=1<<nt;S[nt]=0,j[nt]=-1;var X=$[nt];if(X!==null)for($[nt]=null,nt=0;nt<X.length;nt++){var W=X[nt];W!==null&&(W.lane&=-536870913)}a&=~st}l!==0&&In(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~n))}function In(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-We(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function ga(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-We(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function bi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Dr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ti(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:$y(t.type))}function ya(t,n){var a=Y.p;try{return Y.p=t,n()}finally{Y.p=a}}var me=Math.random().toString(36).slice(2),Re="__reactFiber$"+me,Se="__reactProps$"+me,Tn="__reactContainer$"+me,va="__reactEvents$"+me,hl="__reactListeners$"+me,Si="__reactHandles$"+me,ts="__reactResources$"+me,Xi="__reactMarker$"+me;function z(t){delete t[Re],delete t[Se],delete t[va],delete t[hl],delete t[Si]}function tt(t){var n=t[Re];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Tn]||a[Re]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Ny(t);t!==null;){if(a=t[Re])return a;t=Ny(t)}return n}t=a,a=t.parentNode}return null}function at(t){if(t=t[Re]||t[Tn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function ct(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(s(33))}function ut(t){var n=t[ts];return n||(n=t[ts]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function mt(t){t[Xi]=!0}var bt=new Set,Pt={};function ae(t,n){Zt(t,n),Zt(t+"Capture",n)}function Zt(t,n){for(Pt[t]=n,t=0;t<n.length;t++)bt.add(n[t])}var _e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ui={},Sn={};function $n(t){return Hn.call(Sn,t)?!0:Hn.call(ui,t)?!1:_e.test(t)?Sn[t]=!0:(ui[t]=!0,!1)}function Vn(t,n,a){if($n(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Ai(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Je(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}var _a,$o;function Wi(t){if(_a===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);_a=n&&n[1]||"",$o=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_a+t+$o}var es=!1;function ns(t,n){if(!t||es)return"";es=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(W){var X=W}Reflect.construct(t,[],st)}else{try{st.call()}catch(W){X=W}t.call(st.prototype)}}else{try{throw Error()}catch(W){X=W}(st=t())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],S=d[1];if(_&&S){var j=_.split(`
`),$=S.split(`
`);for(h=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(l===j.length||h===$.length)for(l=j.length-1,h=$.length-1;1<=l&&0<=h&&j[l]!==$[h];)h--;for(;1<=l&&0<=h;l--,h--)if(j[l]!==$[h]){if(l!==1||h!==1)do if(l--,h--,0>h||j[l]!==$[h]){var nt=`
`+j[l].replace(" at new "," at ");return t.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",t.displayName)),nt}while(1<=l&&0<=h);break}}}finally{es=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Wi(a):""}function fl(t){switch(t.tag){case 26:case 27:case 5:return Wi(t.type);case 16:return Wi("Lazy");case 13:return Wi("Suspense");case 19:return Wi("SuspenseList");case 0:case 15:return ns(t.type,!1);case 11:return ns(t.type.render,!1);case 1:return ns(t.type,!0);case 31:return Wi("Activity");default:return""}}function is(t){try{var n="";do n+=fl(t),t=t.return;while(t);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dl(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oh(t){var n=dl(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,n,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function rs(t){t._valueTracker||(t._valueTracker=oh(t))}function ml(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=dl(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var uh=/[\n"\\]/g;function Ve(t){return t.replace(uh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Nn(t,n,a,l,h,d,_,S){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+gn(n)):t.value!==""+gn(n)&&(t.value=""+gn(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?Ir(t,_,gn(n)):a!=null?Ir(t,_,gn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+gn(S):t.removeAttribute("name")}function ba(t,n,a,l,h,d,_,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;a=a!=null?""+gn(a):"",n=n!=null?""+gn(n):a,S||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Ir(t,n,a){n==="number"&&Ea(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Zi(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+gn(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function oe(t,n,a){if(n!=null&&(n=""+gn(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+gn(a):""}function Ta(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(Et(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=gn(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Yn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Sa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yo(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Sa.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function pl(t,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Yo(t,h,l)}else for(var d in n)n.hasOwnProperty(d)&&Yo(t,d,n[d])}function gl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ch=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function as(t){return hh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ji=null;function Kn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tr=null,er=null;function yl(t){var n=at(t);if(n&&(t=n.stateNode)){var a=t[Se]||null;t:switch(t=n.stateNode,n.type){case"input":if(Nn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ve(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[Se]||null;if(!h)throw Error(s(90));Nn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&ml(l)}break t;case"textarea":oe(t,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Zi(t,!!a.multiple,n,!1)}}}var xi=!1;function Ko(t,n,a){if(xi)return t(n,a);xi=!0;try{var l=t(n);return l}finally{if(xi=!1,(tr!==null||er!==null)&&(qu(),tr&&(n=tr,t=er,er=tr=null,yl(n),t)))for(n=0;n<t.length;n++)yl(t[n])}}function Aa(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Se]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xn=!1;if(ci)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{Xn=!1}var wi=null,Vr=null,nr=null;function vl(){if(nr)return nr;var t,n=Vr,a=n.length,l,h="value"in wi?wi.value:wi.textContent,d=h.length;for(t=0;t<a&&n[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&n[a-l]===h[d-l];l++);return nr=h.slice(t,1<l?1-l:void 0)}function Ri(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ci(){return!0}function _l(){return!1}function Ge(t){function n(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ci:_l,this.isPropagationStopped=_l,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),n}var ne={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ss=Ge(ne),wa=b({},ne,{view:0,detail:0}),Xo=Ge(wa),ls,os,Di,Ra=b({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Di&&(Di&&t.type==="mousemove"?(ls=t.screenX-Di.screenX,os=t.screenY-Di.screenY):os=ls=0,Di=t),ls)},movementY:function(t){return"movementY"in t?t.movementY:os}}),Wn=Ge(Ra),Wo=b({},Ra,{dataTransfer:0}),fh=Ge(Wo),Ca=b({},wa,{relatedTarget:0}),us=Ge(Ca),El=b({},ne,{animationName:0,elapsedTime:0,pseudoElement:0}),cs=Ge(El),Zo=b({},ne,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hs=Ge(Zo),dh=b({},ne,{data:0}),bl=Ge(dh),Da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tl(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=tu[t])?!!n[t]:!1}function Ia(){return Tl}var eu=b({},wa,{key:function(t){if(t.key){var n=Da[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ri(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(t){return t.type==="keypress"?Ri(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ri(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fs=Ge(eu),nu=b({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Ge(nu),ir=b({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),iu=Ge(ir),ru=b({},ne,{propertyName:0,elapsedTime:0,pseudoElement:0}),au=Ge(ru),su=b({},Ra,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ds=Ge(su),yn=b({},ne,{newState:0,oldState:0}),lu=Ge(yn),ou=[9,13,27,32],Ii=ci&&"CompositionEvent"in window,c=null;ci&&"documentMode"in document&&(c=document.documentMode);var g=ci&&"TextEvent"in window&&!c,v=ci&&(!Ii||c&&8<c&&11>=c),A=" ",G=!1;function J(t,n){switch(t){case"keyup":return ou.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $t=!1;function ke(t,n){switch(t){case"compositionend":return yt(n);case"keypress":return n.which!==32?null:(G=!0,A);case"textInput":return t=n.data,t===A&&G?null:t;default:return null}}function Yt(t,n){if($t)return t==="compositionend"||!Ii&&J(t,n)?(t=vl(),nr=Vr=wi=null,$t=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return v&&n.locale!=="ko"?null:n.data;default:return null}}var Fe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Le(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Fe[t.type]:n==="textarea"}function rr(t,n,a,l){tr?er?er.push(l):er=[l]:tr=l,n=Yu(n,"onChange"),0<n.length&&(a=new ss("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var tn=null,Vi=null;function Al(t){Ty(t,0)}function uu(t){var n=ct(t);if(ml(n))return t}function Hm(t,n){if(t==="change")return n}var Gm=!1;if(ci){var mh;if(ci){var ph="oninput"in document;if(!ph){var Fm=document.createElement("div");Fm.setAttribute("oninput","return;"),ph=typeof Fm.oninput=="function"}mh=ph}else mh=!1;Gm=mh&&(!document.documentMode||9<document.documentMode)}function Qm(){tn&&(tn.detachEvent("onpropertychange",$m),Vi=tn=null)}function $m(t){if(t.propertyName==="value"&&uu(Vi)){var n=[];rr(n,Vi,t,Kn(t)),Ko(Al,n)}}function VE(t,n,a){t==="focusin"?(Qm(),tn=n,Vi=a,tn.attachEvent("onpropertychange",$m)):t==="focusout"&&Qm()}function NE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uu(Vi)}function OE(t,n){if(t==="click")return uu(n)}function ME(t,n){if(t==="input"||t==="change")return uu(n)}function jE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var On=typeof Object.is=="function"?Object.is:jE;function xl(t,n){if(On(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Hn.call(n,h)||!On(t[h],n[h]))return!1}return!0}function Ym(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Km(t,n){var a=Ym(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ym(a)}}function Xm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Xm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Wm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ea(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ea(t.document)}return n}function gh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var UE=ci&&"documentMode"in document&&11>=document.documentMode,ms=null,yh=null,wl=null,vh=!1;function Zm(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vh||ms==null||ms!==Ea(l)||(l=ms,"selectionStart"in l&&gh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wl&&xl(wl,l)||(wl=l,l=Yu(yh,"onSelect"),0<l.length&&(n=new ss("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=ms)))}function Va(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var ps={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionrun:Va("Transition","TransitionRun"),transitionstart:Va("Transition","TransitionStart"),transitioncancel:Va("Transition","TransitionCancel"),transitionend:Va("Transition","TransitionEnd")},_h={},Jm={};ci&&(Jm=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Na(t){if(_h[t])return _h[t];if(!ps[t])return t;var n=ps[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in Jm)return _h[t]=n[a];return t}var tp=Na("animationend"),ep=Na("animationiteration"),np=Na("animationstart"),kE=Na("transitionrun"),LE=Na("transitionstart"),PE=Na("transitioncancel"),ip=Na("transitionend"),rp=new Map,Eh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eh.push("scrollEnd");function hi(t,n){rp.set(t,n),ae(n,[t])}var ap=new WeakMap;function Zn(t,n){if(typeof t=="object"&&t!==null){var a=ap.get(t);return a!==void 0?a:(n={value:t,source:n,stack:is(n)},ap.set(t,n),n)}return{value:t,source:n,stack:is(n)}}var Jn=[],gs=0,bh=0;function cu(){for(var t=gs,n=bh=gs=0;n<t;){var a=Jn[n];Jn[n++]=null;var l=Jn[n];Jn[n++]=null;var h=Jn[n];Jn[n++]=null;var d=Jn[n];if(Jn[n++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&sp(a,h,d)}}function hu(t,n,a,l){Jn[gs++]=t,Jn[gs++]=n,Jn[gs++]=a,Jn[gs++]=l,bh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Th(t,n,a,l){return hu(t,n,a,l),fu(t)}function ys(t,n){return hu(t,null,null,n),fu(t)}function sp(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-We(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),d):null}function fu(t){if(50<Wl)throw Wl=0,Df=null,Error(s(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var vs={};function zE(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,n,a,l){return new zE(t,n,a,l)}function Sh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ar(t,n){var a=t.alternate;return a===null?(a=Mn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function lp(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function du(t,n,a,l,h,d){var _=0;if(l=t,typeof t=="function")Sh(t)&&(_=1);else if(typeof t=="string")_=q1(t,a,vt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case V:return t=Mn(31,a,n,h),t.elementType=V,t.lanes=d,t;case I:return Oa(a.children,h,d,n);case B:_=8,h|=24;break;case P:return t=Mn(12,a,n,h|2),t.elementType=P,t.lanes=d,t;case pt:return t=Mn(13,a,n,h),t.elementType=pt,t.lanes=d,t;case wt:return t=Mn(19,a,n,h),t.elementType=wt,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:case Q:_=10;break t;case Z:_=9;break t;case ft:_=11;break t;case k:_=14;break t;case D:_=16,l=null;break t}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return n=Mn(_,a,n,h),n.elementType=t,n.type=l,n.lanes=d,n}function Oa(t,n,a,l){return t=Mn(7,t,l,n),t.lanes=a,t}function Ah(t,n,a){return t=Mn(6,t,null,n),t.lanes=a,t}function xh(t,n,a){return n=Mn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var _s=[],Es=0,mu=null,pu=0,ti=[],ei=0,Ma=null,sr=1,lr="";function ja(t,n){_s[Es++]=pu,_s[Es++]=mu,mu=t,pu=n}function op(t,n,a){ti[ei++]=sr,ti[ei++]=lr,ti[ei++]=Ma,Ma=t;var l=sr;t=lr;var h=32-We(l)-1;l&=~(1<<h),a+=1;var d=32-We(n)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,sr=1<<32-We(n)+h|a<<h|l,lr=d+t}else sr=1<<d|a<<h|l,lr=t}function wh(t){t.return!==null&&(ja(t,1),op(t,1,0))}function Rh(t){for(;t===mu;)mu=_s[--Es],_s[Es]=null,pu=_s[--Es],_s[Es]=null;for(;t===Ma;)Ma=ti[--ei],ti[ei]=null,lr=ti[--ei],ti[ei]=null,sr=ti[--ei],ti[ei]=null}var vn=null,Ae=null,ee=!1,Ua=null,Ni=!1,Ch=Error(s(519));function ka(t){var n=Error(s(418,""));throw Dl(Zn(n,t)),Ch}function up(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Re]=t,n[Se]=l,a){case"dialog":Gt("cancel",n),Gt("close",n);break;case"iframe":case"object":case"embed":Gt("load",n);break;case"video":case"audio":for(a=0;a<Jl.length;a++)Gt(Jl[a],n);break;case"source":Gt("error",n);break;case"img":case"image":case"link":Gt("error",n),Gt("load",n);break;case"details":Gt("toggle",n);break;case"input":Gt("invalid",n),ba(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),rs(n);break;case"select":Gt("invalid",n);break;case"textarea":Gt("invalid",n),Ta(n,l.value,l.defaultValue,l.children),rs(n)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||wy(n.textContent,a)?(l.popover!=null&&(Gt("beforetoggle",n),Gt("toggle",n)),l.onScroll!=null&&Gt("scroll",n),l.onScrollEnd!=null&&Gt("scrollend",n),l.onClick!=null&&(n.onclick=Ku),n=!0):n=!1,n||ka(t)}function cp(t){for(vn=t.return;vn;)switch(vn.tag){case 5:case 13:Ni=!1;return;case 27:case 3:Ni=!0;return;default:vn=vn.return}}function Rl(t){if(t!==vn)return!1;if(!ee)return cp(t),ee=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Ff(t.type,t.memoizedProps)),a=!a),a&&Ae&&ka(t),cp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(n===0){Ae=di(t.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;t=t.nextSibling}Ae=null}}else n===27?(n=Ae,$r(t.type)?(t=Kf,Kf=null,Ae=t):Ae=n):Ae=vn?di(t.stateNode.nextSibling):null;return!0}function Cl(){Ae=vn=null,ee=!1}function hp(){var t=Ua;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),Ua=null),t}function Dl(t){Ua===null?Ua=[t]:Ua.push(t)}var Dh=et(null),La=null,or=null;function Nr(t,n,a){ht(Dh,n._currentValue),n._currentValue=a}function ur(t){t._currentValue=Dh.current,dt(Dh)}function Ih(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Vh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=h;for(var j=0;j<n.length;j++)if(S.context===n[j]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Ih(d.return,a,t),l||(_=null);break t}d=S.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Ih(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Il(t,n,a,l){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var S=h.type;On(h.pendingProps.value,_.value)||(t!==null?t.push(S):t=[S])}}else if(h===re.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ao):t=[ao])}h=h.return}t!==null&&Vh(n,t,a,l),n.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Pa(t){La=t,or=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return fp(La,t)}function yu(t,n){return La===null&&Pa(t),fp(t,n)}function fp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},or===null){if(t===null)throw Error(s(308));or=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else or=or.next=n;return a}var BE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},qE=r.unstable_scheduleCallback,HE=r.unstable_NormalPriority,Pe={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nh(){return{controller:new BE,data:new Map,refCount:0}}function Vl(t){t.refCount--,t.refCount===0&&qE(HE,function(){t.controller.abort()})}var Nl=null,Oh=0,bs=0,Ts=null;function GE(t,n){if(Nl===null){var a=Nl=[];Oh=0,bs=Uf(),Ts={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Oh++,n.then(dp,dp),n}function dp(){if(--Oh===0&&Nl!==null){Ts!==null&&(Ts.status="fulfilled");var t=Nl;Nl=null,bs=0,Ts=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function FE(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var mp=K.S;K.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&GE(t,n),mp!==null&&mp(t,n)};var za=et(null);function Mh(){var t=za.current;return t!==null?t:pe.pooledCache}function vu(t,n){n===null?ht(za,za.current):ht(za,n.pool)}function pp(){var t=Mh();return t===null?null:{parent:Pe._currentValue,pool:t}}var Ol=Error(s(460)),gp=Error(s(474)),_u=Error(s(542)),jh={then:function(){}};function yp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Eu(){}function vp(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Eu,Eu),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ep(t),t;default:if(typeof n.status=="string")n.then(Eu,Eu);else{if(t=pe,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ep(t),t}throw Ml=n,Ol}}var Ml=null;function _p(){if(Ml===null)throw Error(s(459));var t=Ml;return Ml=null,t}function Ep(t){if(t===Ol||t===_u)throw Error(s(483))}var Or=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function jr(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(se&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=fu(t),sp(t,null,a),n}return hu(t,l,n,a),fu(t)}function jl(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,ga(t,a)}}function Lh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Ph=!1;function Ul(){if(Ph){var t=Ts;if(t!==null)throw t}}function kl(t,n,a,l){Ph=!1;var h=t.updateQueue;Or=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var j=S,$=j.next;j.next=null,_===null?d=$:_.next=$,_=j;var nt=t.alternate;nt!==null&&(nt=nt.updateQueue,S=nt.lastBaseUpdate,S!==_&&(S===null?nt.firstBaseUpdate=$:S.next=$,nt.lastBaseUpdate=j))}if(d!==null){var st=h.baseState;_=0,nt=$=j=null,S=d;do{var X=S.lane&-536870913,W=X!==S.lane;if(W?(Kt&X)===X:(l&X)===X){X!==0&&X===bs&&(Ph=!0),nt!==null&&(nt=nt.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Ot=t,Vt=S;X=n;var he=a;switch(Vt.tag){case 1:if(Ot=Vt.payload,typeof Ot=="function"){st=Ot.call(he,st,X);break t}st=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Vt.payload,X=typeof Ot=="function"?Ot.call(he,st,X):Ot,X==null)break t;st=b({},st,X);break t;case 2:Or=!0}}X=S.callback,X!==null&&(t.flags|=64,W&&(t.flags|=8192),W=h.callbacks,W===null?h.callbacks=[X]:W.push(X))}else W={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},nt===null?($=nt=W,j=st):nt=nt.next=W,_|=X;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;W=S,S=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);nt===null&&(j=st),h.baseState=j,h.firstBaseUpdate=$,h.lastBaseUpdate=nt,d===null&&(h.shared.lanes=0),Hr|=_,t.lanes=_,t.memoizedState=st}}function bp(t,n){if(typeof t!="function")throw Error(s(191,t));t.call(n)}function Tp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)bp(a[t],n)}var Ss=et(null),bu=et(0);function Sp(t,n){t=gr,ht(bu,t),ht(Ss,n),gr=t|n.baseLanes}function zh(){ht(bu,gr),ht(Ss,Ss.current)}function Bh(){gr=bu.current,dt(Ss),dt(bu)}var Ur=0,zt=null,ue=null,Ne=null,Tu=!1,As=!1,Ba=!1,Su=0,Ll=0,xs=null,QE=0;function Ce(){throw Error(s(321))}function qh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!On(t[a],n[a]))return!1;return!0}function Hh(t,n,a,l,h,d){return Ur=d,zt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?sg:lg,Ba=!1,d=a(l,h),Ba=!1,As&&(d=xp(n,a,l,h)),Ap(t),d}function Ap(t){K.H=Du;var n=ue!==null&&ue.next!==null;if(Ur=0,Ne=ue=zt=null,Tu=!1,Ll=0,xs=null,n)throw Error(s(300));t===null||Qe||(t=t.dependencies,t!==null&&gu(t)&&(Qe=!0))}function xp(t,n,a,l){zt=t;var h=0;do{if(As&&(xs=null),Ll=0,As=!1,25<=h)throw Error(s(301));if(h+=1,Ne=ue=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=JE,d=n(a,l)}while(As);return d}function $E(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?Pl(n):n,t=t.useState()[0],(ue!==null?ue.memoizedState:null)!==t&&(zt.flags|=1024),n}function Gh(){var t=Su!==0;return Su=0,t}function Fh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Qh(t){if(Tu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Tu=!1}Ur=0,Ne=ue=zt=null,As=!1,Ll=Su=0,xs=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?zt.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function Oe(){if(ue===null){var t=zt.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var n=Ne===null?zt.memoizedState:Ne.next;if(n!==null)Ne=n,ue=t;else{if(t===null)throw zt.alternate===null?Error(s(467)):Error(s(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},Ne===null?zt.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function $h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(t){var n=Ll;return Ll+=1,xs===null&&(xs=[]),t=vp(xs,t,n),n=zt,(Ne===null?n.memoizedState:Ne.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?sg:lg),t}function Au(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pl(t);if(t.$$typeof===Q)return un(t)}throw Error(s(438,String(t)))}function Yh(t){var n=null,a=zt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=zt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=$h(),zt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=w;return n.index++,a}function cr(t,n){return typeof n=="function"?n(t):n}function xu(t){var n=Oe();return Kh(n,ue,t)}function Kh(t,n,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}n.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var S=_=null,j=null,$=n,nt=!1;do{var st=$.lane&-536870913;if(st!==$.lane?(Kt&st)===st:(Ur&st)===st){var X=$.revertLane;if(X===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),st===bs&&(nt=!0);else if((Ur&X)===X){$=$.next,X===bs&&(nt=!0);continue}else st={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(S=j=st,_=d):j=j.next=st,zt.lanes|=X,Hr|=X;st=$.action,Ba&&a(d,st),d=$.hasEagerState?$.eagerState:a(d,st)}else X={lane:st,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(S=j=X,_=d):j=j.next=X,zt.lanes|=st,Hr|=st;$=$.next}while($!==null&&$!==n);if(j===null?_=d:j.next=S,!On(d,t.memoizedState)&&(Qe=!0,nt&&(a=Ts,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=j,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xh(t){var n=Oe(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);On(d,n.memoizedState)||(Qe=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,l]}function wp(t,n,a){var l=zt,h=Oe(),d=ee;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=n();var _=!On((ue||h).memoizedState,a);_&&(h.memoizedState=a,Qe=!0),h=h.queue;var S=Dp.bind(null,l,h,t);if(zl(2048,8,S,[t]),h.getSnapshot!==n||_||Ne!==null&&Ne.memoizedState.tag&1){if(l.flags|=2048,ws(9,wu(),Cp.bind(null,l,h,a,n),null),pe===null)throw Error(s(349));d||(Ur&124)!==0||Rp(l,n,a)}return a}function Rp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=zt.updateQueue,n===null?(n=$h(),zt.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Cp(t,n,a,l){n.value=a,n.getSnapshot=l,Ip(n)&&Vp(t)}function Dp(t,n,a){return a(function(){Ip(n)&&Vp(t)})}function Ip(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!On(t,a)}catch{return!0}}function Vp(t){var n=ys(t,2);n!==null&&Pn(n,t,2)}function Wh(t){var n=An();if(typeof t=="function"){var a=t;if(t=a(),Ba){pn(!0);try{a()}finally{pn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:t},n}function Np(t,n,a,l){return t.baseState=a,Kh(t,ue,typeof l=="function"?l:cr)}function YE(t,n,a,l,h){if(Cu(t))throw Error(s(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=n.pending,a===null?(d.next=n.pending=d,Op(n,d)):(d.next=a.next,n.pending=a.next=d)}}function Op(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var d=K.T,_={};K.T=_;try{var S=a(h,l),j=K.S;j!==null&&j(_,S),Mp(t,n,S)}catch($){Zh(t,n,$)}finally{K.T=d}}else try{d=a(h,l),Mp(t,n,d)}catch($){Zh(t,n,$)}}function Mp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){jp(t,n,l)},function(l){return Zh(t,n,l)}):jp(t,n,a)}function jp(t,n,a){n.status="fulfilled",n.value=a,Up(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Op(t,a)))}function Zh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Up(n),n=n.next;while(n!==l)}t.action=null}function Up(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function kp(t,n){return n}function Lp(t,n){if(ee){var a=pe.formState;if(a!==null){t:{var l=zt;if(ee){if(Ae){e:{for(var h=Ae,d=Ni;h.nodeType!==8;){if(!d){h=null;break e}if(h=di(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Ae=di(h.nextSibling),l=h.data==="F!";break t}}ka(l)}l=!1}l&&(n=a[0])}}return a=An(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kp,lastRenderedState:n},a.queue=l,a=ig.bind(null,zt,l),l.dispatch=a,l=Wh(!1),d=rf.bind(null,zt,!1,l.queue),l=An(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=YE.bind(null,zt,h,d,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Pp(t){var n=Oe();return zp(n,ue,t)}function zp(t,n,a){if(n=Kh(t,n,kp)[0],t=xu(cr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Pl(n)}catch(_){throw _===Ol?_u:_}else l=n;n=Oe();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(zt.flags|=2048,ws(9,wu(),KE.bind(null,h,a),null)),[l,d,t]}function KE(t,n){t.action=n}function Bp(t){var n=Oe(),a=ue;if(a!==null)return zp(n,a,t);Oe(),n=n.memoizedState,a=Oe();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function ws(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=zt.updateQueue,n===null&&(n=$h(),zt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function wu(){return{destroy:void 0,resource:void 0}}function qp(){return Oe().memoizedState}function Ru(t,n,a,l){var h=An();l=l===void 0?null:l,zt.flags|=t,h.memoizedState=ws(1|n,wu(),a,l)}function zl(t,n,a,l){var h=Oe();l=l===void 0?null:l;var d=h.memoizedState.inst;ue!==null&&l!==null&&qh(l,ue.memoizedState.deps)?h.memoizedState=ws(n,d,a,l):(zt.flags|=t,h.memoizedState=ws(1|n,d,a,l))}function Hp(t,n){Ru(8390656,8,t,n)}function Gp(t,n){zl(2048,8,t,n)}function Fp(t,n){return zl(4,2,t,n)}function Qp(t,n){return zl(4,4,t,n)}function $p(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Yp(t,n,a){a=a!=null?a.concat([t]):null,zl(4,4,$p.bind(null,n,t),a)}function Jh(){}function Kp(t,n){var a=Oe();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&qh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function Xp(t,n){var a=Oe();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&qh(n,l[1]))return l[0];if(l=t(),Ba){pn(!0);try{t()}finally{pn(!1)}}return a.memoizedState=[l,n],l}function tf(t,n,a){return a===void 0||(Ur&1073741824)!==0?t.memoizedState=n:(t.memoizedState=a,t=Jg(),zt.lanes|=t,Hr|=t,a)}function Wp(t,n,a,l){return On(a,n)?a:Ss.current!==null?(t=tf(t,a,l),On(t,n)||(Qe=!0),t):(Ur&42)===0?(Qe=!0,t.memoizedState=a):(t=Jg(),zt.lanes|=t,Hr|=t,n)}function Zp(t,n,a,l,h){var d=Y.p;Y.p=d!==0&&8>d?d:8;var _=K.T,S={};K.T=S,rf(t,!1,n,a);try{var j=h(),$=K.S;if($!==null&&$(S,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var nt=FE(j,l);Bl(t,n,nt,Ln(t))}else Bl(t,n,l,Ln(t))}catch(st){Bl(t,n,{then:function(){},status:"rejected",reason:st},Ln())}finally{Y.p=d,K.T=_}}function XE(){}function ef(t,n,a,l){if(t.tag!==5)throw Error(s(476));var h=Jp(t).queue;Zp(t,h,n,it,a===null?XE:function(){return tg(t),a(l)})}function Jp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:it},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function tg(t){var n=Jp(t).next.queue;Bl(t,n,{},Ln())}function nf(){return un(ao)}function eg(){return Oe().memoizedState}function ng(){return Oe().memoizedState}function WE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Ln();t=Mr(a);var l=jr(n,t,a);l!==null&&(Pn(l,n,a),jl(l,n,a)),n={cache:Nh()},t.payload=n;return}n=n.return}}function ZE(t,n,a){var l=Ln();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Cu(t)?rg(n,a):(a=Th(t,n,a,l),a!==null&&(Pn(a,t,l),ag(a,n,l)))}function ig(t,n,a){var l=Ln();Bl(t,n,a,l)}function Bl(t,n,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cu(t))rg(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var _=n.lastRenderedState,S=d(_,a);if(h.hasEagerState=!0,h.eagerState=S,On(S,_))return hu(t,n,h,0),pe===null&&cu(),!1}catch{}finally{}if(a=Th(t,n,h,l),a!==null)return Pn(a,t,l),ag(a,n,l),!0}return!1}function rf(t,n,a,l){if(l={lane:2,revertLane:Uf(),action:l,hasEagerState:!1,eagerState:null,next:null},Cu(t)){if(n)throw Error(s(479))}else n=Th(t,a,l,2),n!==null&&Pn(n,t,2)}function Cu(t){var n=t.alternate;return t===zt||n!==null&&n===zt}function rg(t,n){As=Tu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function ag(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,ga(t,a)}}var Du={readContext:un,use:Au,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce},sg={readContext:un,use:Au,useCallback:function(t,n){return An().memoizedState=[t,n===void 0?null:n],t},useContext:un,useEffect:Hp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Ru(4194308,4,$p.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Ru(4194308,4,t,n)},useInsertionEffect:function(t,n){Ru(4,2,t,n)},useMemo:function(t,n){var a=An();n=n===void 0?null:n;var l=t();if(Ba){pn(!0);try{t()}finally{pn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=An();if(a!==void 0){var h=a(n);if(Ba){pn(!0);try{a(n)}finally{pn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=ZE.bind(null,zt,t),[l.memoizedState,t]},useRef:function(t){var n=An();return t={current:t},n.memoizedState=t},useState:function(t){t=Wh(t);var n=t.queue,a=ig.bind(null,zt,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Jh,useDeferredValue:function(t,n){var a=An();return tf(a,t,n)},useTransition:function(){var t=Wh(!1);return t=Zp.bind(null,zt,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=zt,h=An();if(ee){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),pe===null)throw Error(s(349));(Kt&124)!==0||Rp(l,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Hp(Dp.bind(null,l,d,t),[t]),l.flags|=2048,ws(9,wu(),Cp.bind(null,l,d,a,n),null),a},useId:function(){var t=An(),n=pe.identifierPrefix;if(ee){var a=lr,l=sr;a=(l&~(1<<32-We(l)-1)).toString(32)+a,n=""+n+"R"+a,a=Su++,0<a&&(n+="H"+a.toString(32)),n+=""}else a=QE++,n=""+n+"r"+a.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:nf,useFormState:Lp,useActionState:Lp,useOptimistic:function(t){var n=An();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=rf.bind(null,zt,!0,a),a.dispatch=n,[t,n]},useMemoCache:Yh,useCacheRefresh:function(){return An().memoizedState=WE.bind(null,zt)}},lg={readContext:un,use:Au,useCallback:Kp,useContext:un,useEffect:Gp,useImperativeHandle:Yp,useInsertionEffect:Fp,useLayoutEffect:Qp,useMemo:Xp,useReducer:xu,useRef:qp,useState:function(){return xu(cr)},useDebugValue:Jh,useDeferredValue:function(t,n){var a=Oe();return Wp(a,ue.memoizedState,t,n)},useTransition:function(){var t=xu(cr)[0],n=Oe().memoizedState;return[typeof t=="boolean"?t:Pl(t),n]},useSyncExternalStore:wp,useId:eg,useHostTransitionStatus:nf,useFormState:Pp,useActionState:Pp,useOptimistic:function(t,n){var a=Oe();return Np(a,ue,t,n)},useMemoCache:Yh,useCacheRefresh:ng},JE={readContext:un,use:Au,useCallback:Kp,useContext:un,useEffect:Gp,useImperativeHandle:Yp,useInsertionEffect:Fp,useLayoutEffect:Qp,useMemo:Xp,useReducer:Xh,useRef:qp,useState:function(){return Xh(cr)},useDebugValue:Jh,useDeferredValue:function(t,n){var a=Oe();return ue===null?tf(a,t,n):Wp(a,ue.memoizedState,t,n)},useTransition:function(){var t=Xh(cr)[0],n=Oe().memoizedState;return[typeof t=="boolean"?t:Pl(t),n]},useSyncExternalStore:wp,useId:eg,useHostTransitionStatus:nf,useFormState:Bp,useActionState:Bp,useOptimistic:function(t,n){var a=Oe();return ue!==null?Np(a,ue,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Yh,useCacheRefresh:ng},Rs=null,ql=0;function Iu(t){var n=ql;return ql+=1,Rs===null&&(Rs=[]),vp(Rs,t,n)}function Hl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Vu(t,n){throw n.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(n),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function og(t){var n=t._init;return n(t._payload)}function ug(t){function n(H,L){if(t){var F=H.deletions;F===null?(H.deletions=[L],H.flags|=16):F.push(L)}}function a(H,L){if(!t)return null;for(;L!==null;)n(H,L),L=L.sibling;return null}function l(H){for(var L=new Map;H!==null;)H.key!==null?L.set(H.key,H):L.set(H.index,H),H=H.sibling;return L}function h(H,L){return H=ar(H,L),H.index=0,H.sibling=null,H}function d(H,L,F){return H.index=F,t?(F=H.alternate,F!==null?(F=F.index,F<L?(H.flags|=67108866,L):F):(H.flags|=67108866,L)):(H.flags|=1048576,L)}function _(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function S(H,L,F,rt){return L===null||L.tag!==6?(L=Ah(F,H.mode,rt),L.return=H,L):(L=h(L,F),L.return=H,L)}function j(H,L,F,rt){var xt=F.type;return xt===I?nt(H,L,F.props.children,rt,F.key):L!==null&&(L.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===D&&og(xt)===L.type)?(L=h(L,F.props),Hl(L,F),L.return=H,L):(L=du(F.type,F.key,F.props,null,H.mode,rt),Hl(L,F),L.return=H,L)}function $(H,L,F,rt){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=xh(F,H.mode,rt),L.return=H,L):(L=h(L,F.children||[]),L.return=H,L)}function nt(H,L,F,rt,xt){return L===null||L.tag!==7?(L=Oa(F,H.mode,rt,xt),L.return=H,L):(L=h(L,F),L.return=H,L)}function st(H,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ah(""+L,H.mode,F),L.return=H,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case x:return F=du(L.type,L.key,L.props,null,H.mode,F),Hl(F,L),F.return=H,F;case C:return L=xh(L,H.mode,F),L.return=H,L;case D:var rt=L._init;return L=rt(L._payload),st(H,L,F)}if(Et(L)||M(L))return L=Oa(L,H.mode,F,null),L.return=H,L;if(typeof L.then=="function")return st(H,Iu(L),F);if(L.$$typeof===Q)return st(H,yu(H,L),F);Vu(H,L)}return null}function X(H,L,F,rt){var xt=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return xt!==null?null:S(H,L,""+F,rt);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case x:return F.key===xt?j(H,L,F,rt):null;case C:return F.key===xt?$(H,L,F,rt):null;case D:return xt=F._init,F=xt(F._payload),X(H,L,F,rt)}if(Et(F)||M(F))return xt!==null?null:nt(H,L,F,rt,null);if(typeof F.then=="function")return X(H,L,Iu(F),rt);if(F.$$typeof===Q)return X(H,L,yu(H,F),rt);Vu(H,F)}return null}function W(H,L,F,rt,xt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return H=H.get(F)||null,S(L,H,""+rt,xt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case x:return H=H.get(rt.key===null?F:rt.key)||null,j(L,H,rt,xt);case C:return H=H.get(rt.key===null?F:rt.key)||null,$(L,H,rt,xt);case D:var qt=rt._init;return rt=qt(rt._payload),W(H,L,F,rt,xt)}if(Et(rt)||M(rt))return H=H.get(F)||null,nt(L,H,rt,xt,null);if(typeof rt.then=="function")return W(H,L,F,Iu(rt),xt);if(rt.$$typeof===Q)return W(H,L,F,yu(L,rt),xt);Vu(L,rt)}return null}function Ot(H,L,F,rt){for(var xt=null,qt=null,Ct=L,Nt=L=0,Ye=null;Ct!==null&&Nt<F.length;Nt++){Ct.index>Nt?(Ye=Ct,Ct=null):Ye=Ct.sibling;var Jt=X(H,Ct,F[Nt],rt);if(Jt===null){Ct===null&&(Ct=Ye);break}t&&Ct&&Jt.alternate===null&&n(H,Ct),L=d(Jt,L,Nt),qt===null?xt=Jt:qt.sibling=Jt,qt=Jt,Ct=Ye}if(Nt===F.length)return a(H,Ct),ee&&ja(H,Nt),xt;if(Ct===null){for(;Nt<F.length;Nt++)Ct=st(H,F[Nt],rt),Ct!==null&&(L=d(Ct,L,Nt),qt===null?xt=Ct:qt.sibling=Ct,qt=Ct);return ee&&ja(H,Nt),xt}for(Ct=l(Ct);Nt<F.length;Nt++)Ye=W(Ct,H,Nt,F[Nt],rt),Ye!==null&&(t&&Ye.alternate!==null&&Ct.delete(Ye.key===null?Nt:Ye.key),L=d(Ye,L,Nt),qt===null?xt=Ye:qt.sibling=Ye,qt=Ye);return t&&Ct.forEach(function(Zr){return n(H,Zr)}),ee&&ja(H,Nt),xt}function Vt(H,L,F,rt){if(F==null)throw Error(s(151));for(var xt=null,qt=null,Ct=L,Nt=L=0,Ye=null,Jt=F.next();Ct!==null&&!Jt.done;Nt++,Jt=F.next()){Ct.index>Nt?(Ye=Ct,Ct=null):Ye=Ct.sibling;var Zr=X(H,Ct,Jt.value,rt);if(Zr===null){Ct===null&&(Ct=Ye);break}t&&Ct&&Zr.alternate===null&&n(H,Ct),L=d(Zr,L,Nt),qt===null?xt=Zr:qt.sibling=Zr,qt=Zr,Ct=Ye}if(Jt.done)return a(H,Ct),ee&&ja(H,Nt),xt;if(Ct===null){for(;!Jt.done;Nt++,Jt=F.next())Jt=st(H,Jt.value,rt),Jt!==null&&(L=d(Jt,L,Nt),qt===null?xt=Jt:qt.sibling=Jt,qt=Jt);return ee&&ja(H,Nt),xt}for(Ct=l(Ct);!Jt.done;Nt++,Jt=F.next())Jt=W(Ct,H,Nt,Jt.value,rt),Jt!==null&&(t&&Jt.alternate!==null&&Ct.delete(Jt.key===null?Nt:Jt.key),L=d(Jt,L,Nt),qt===null?xt=Jt:qt.sibling=Jt,qt=Jt);return t&&Ct.forEach(function(tb){return n(H,tb)}),ee&&ja(H,Nt),xt}function he(H,L,F,rt){if(typeof F=="object"&&F!==null&&F.type===I&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case x:t:{for(var xt=F.key;L!==null;){if(L.key===xt){if(xt=F.type,xt===I){if(L.tag===7){a(H,L.sibling),rt=h(L,F.props.children),rt.return=H,H=rt;break t}}else if(L.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===D&&og(xt)===L.type){a(H,L.sibling),rt=h(L,F.props),Hl(rt,F),rt.return=H,H=rt;break t}a(H,L);break}else n(H,L);L=L.sibling}F.type===I?(rt=Oa(F.props.children,H.mode,rt,F.key),rt.return=H,H=rt):(rt=du(F.type,F.key,F.props,null,H.mode,rt),Hl(rt,F),rt.return=H,H=rt)}return _(H);case C:t:{for(xt=F.key;L!==null;){if(L.key===xt)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(H,L.sibling),rt=h(L,F.children||[]),rt.return=H,H=rt;break t}else{a(H,L);break}else n(H,L);L=L.sibling}rt=xh(F,H.mode,rt),rt.return=H,H=rt}return _(H);case D:return xt=F._init,F=xt(F._payload),he(H,L,F,rt)}if(Et(F))return Ot(H,L,F,rt);if(M(F)){if(xt=M(F),typeof xt!="function")throw Error(s(150));return F=xt.call(F),Vt(H,L,F,rt)}if(typeof F.then=="function")return he(H,L,Iu(F),rt);if(F.$$typeof===Q)return he(H,L,yu(H,F),rt);Vu(H,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(H,L.sibling),rt=h(L,F),rt.return=H,H=rt):(a(H,L),rt=Ah(F,H.mode,rt),rt.return=H,H=rt),_(H)):a(H,L)}return function(H,L,F,rt){try{ql=0;var xt=he(H,L,F,rt);return Rs=null,xt}catch(Ct){if(Ct===Ol||Ct===_u)throw Ct;var qt=Mn(29,Ct,null,H.mode);return qt.lanes=rt,qt.return=H,qt}finally{}}}var Cs=ug(!0),cg=ug(!1),ni=et(null),Oi=null;function kr(t){var n=t.alternate;ht(ze,ze.current&1),ht(ni,t),Oi===null&&(n===null||Ss.current!==null||n.memoizedState!==null)&&(Oi=t)}function hg(t){if(t.tag===22){if(ht(ze,ze.current),ht(ni,t),Oi===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Oi=t)}}else Lr()}function Lr(){ht(ze,ze.current),ht(ni,ni.current)}function hr(t){dt(ni),Oi===t&&(Oi=null),dt(ze)}var ze=et(0);function Nu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Yf(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function af(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:b({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Ln(),h=Mr(l);h.payload=n,a!=null&&(h.callback=a),n=jr(t,h,l),n!==null&&(Pn(n,t,l),jl(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Ln(),h=Mr(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=jr(t,h,l),n!==null&&(Pn(n,t,l),jl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Ln(),l=Mr(a);l.tag=2,n!=null&&(l.callback=n),n=jr(t,l,a),n!==null&&(Pn(n,t,a),jl(n,t,a))}};function fg(t,n,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):n.prototype&&n.prototype.isPureReactComponent?!xl(a,l)||!xl(h,d):!0}function dg(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&sf.enqueueReplaceState(n,n.state,null)}function qa(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Ou=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function mg(t){Ou(t)}function pg(t){console.error(t)}function gg(t){Ou(t)}function Mu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function yg(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function lf(t,n,a){return a=Mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Mu(t,n)},a}function vg(t){return t=Mr(t),t.tag=3,t}function _g(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){yg(n,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){yg(n,a,l),typeof h!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function t1(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Il(n,a,h,!0),a=ni.current,a!==null){switch(a.tag){case 13:return Oi===null?Vf():a.alternate===null&&xe===0&&(xe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===jh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Of(t,l,h)),!1;case 22:return a.flags|=65536,l===jh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Of(t,l,h)),!1}throw Error(s(435,a.tag))}return Of(t,l,h),Vf(),!1}if(ee)return n=ni.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Ch&&(t=Error(s(422),{cause:l}),Dl(Zn(t,a)))):(l!==Ch&&(n=Error(s(423),{cause:l}),Dl(Zn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Zn(l,a),h=lf(t.stateNode,l,h),Lh(t,h),xe!==4&&(xe=2)),!1;var d=Error(s(520),{cause:l});if(d=Zn(d,a),Xl===null?Xl=[d]:Xl.push(d),xe!==4&&(xe=2),n===null)return!0;l=Zn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=lf(a.stateNode,l,t),Lh(a,t),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Gr===null||!Gr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=vg(h),_g(h,t,a,l),Lh(a,h),!1}a=a.return}while(a!==null);return!1}var Eg=Error(s(461)),Qe=!1;function en(t,n,a,l){n.child=t===null?cg(n,null,a,l):Cs(n,t.child,a,l)}function bg(t,n,a,l,h){a=a.render;var d=n.ref;if("ref"in l){var _={};for(var S in l)S!=="ref"&&(_[S]=l[S])}else _=l;return Pa(n),l=Hh(t,n,a,_,d,h),S=Gh(),t!==null&&!Qe?(Fh(t,n,h),fr(t,n,h)):(ee&&S&&wh(n),n.flags|=1,en(t,n,l,h),n.child)}function Tg(t,n,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Sh(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Sg(t,n,d,l,h)):(t=du(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!pf(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:xl,a(_,l)&&t.ref===n.ref)return fr(t,n,h)}return n.flags|=1,t=ar(d,l),t.ref=n.ref,t.return=n,n.child=t}function Sg(t,n,a,l,h){if(t!==null){var d=t.memoizedProps;if(xl(d,l)&&t.ref===n.ref)if(Qe=!1,n.pendingProps=l=d,pf(t,h))(t.flags&131072)!==0&&(Qe=!0);else return n.lanes=t.lanes,fr(t,n,h)}return of(t,n,a,l,h)}function Ag(t,n,a){var l=n.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=n.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;n.childLanes=d&~l}else n.childLanes=0,n.child=null;return xg(t,n,l,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&vu(n,d!==null?d.cachePool:null),d!==null?Sp(n,d):zh(),hg(n);else return n.lanes=n.childLanes=536870912,xg(t,n,d!==null?d.baseLanes|a:a,a)}else d!==null?(vu(n,d.cachePool),Sp(n,d),Lr(),n.memoizedState=null):(t!==null&&vu(n,null),zh(),Lr());return en(t,n,h,a),n.child}function xg(t,n,a,l){var h=Mh();return h=h===null?null:{parent:Pe._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},t!==null&&vu(n,null),zh(),hg(n),t!==null&&Il(t,n,l,!0),null}function ju(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function of(t,n,a,l,h){return Pa(n),a=Hh(t,n,a,l,void 0,h),l=Gh(),t!==null&&!Qe?(Fh(t,n,h),fr(t,n,h)):(ee&&l&&wh(n),n.flags|=1,en(t,n,a,h),n.child)}function wg(t,n,a,l,h,d){return Pa(n),n.updateQueue=null,a=xp(n,l,a,h),Ap(t),l=Gh(),t!==null&&!Qe?(Fh(t,n,d),fr(t,n,d)):(ee&&l&&wh(n),n.flags|=1,en(t,n,a,d),n.child)}function Rg(t,n,a,l,h){if(Pa(n),n.stateNode===null){var d=vs,_=a.contextType;typeof _=="object"&&_!==null&&(d=un(_)),d=new a(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},Uh(n),_=a.contextType,d.context=typeof _=="object"&&_!==null?un(_):vs,d.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(af(n,a,_,l),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&sf.enqueueReplaceState(d,d.state,null),kl(n,l,d,h),Ul(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){d=n.stateNode;var S=n.memoizedProps,j=qa(a,S);d.props=j;var $=d.context,nt=a.contextType;_=vs,typeof nt=="object"&&nt!==null&&(_=un(nt));var st=a.getDerivedStateFromProps;nt=typeof st=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,nt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||$!==_)&&dg(n,d,l,_),Or=!1;var X=n.memoizedState;d.state=X,kl(n,l,d,h),Ul(),$=n.memoizedState,S||X!==$||Or?(typeof st=="function"&&(af(n,a,st,l),$=n.memoizedState),(j=Or||fg(n,a,j,l,X,$,_))?(nt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=$),d.props=l,d.state=$,d.context=_,l=j):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,kh(t,n),_=n.memoizedProps,nt=qa(a,_),d.props=nt,st=n.pendingProps,X=d.context,$=a.contextType,j=vs,typeof $=="object"&&$!==null&&(j=un($)),S=a.getDerivedStateFromProps,($=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==st||X!==j)&&dg(n,d,l,j),Or=!1,X=n.memoizedState,d.state=X,kl(n,l,d,h),Ul();var W=n.memoizedState;_!==st||X!==W||Or||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof S=="function"&&(af(n,a,S,l),W=n.memoizedState),(nt=Or||fg(n,a,nt,l,X,W,j)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,W,j),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,W,j)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=W),d.props=l,d.state=W,d.context=j,l=nt):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&X===t.memoizedState||(n.flags|=1024),l=!1)}return d=l,ju(t,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&l?(n.child=Cs(n,t.child,null,h),n.child=Cs(n,null,a,h)):en(t,n,a,h),n.memoizedState=d.state,t=n.child):t=fr(t,n,h),t}function Cg(t,n,a,l){return Cl(),n.flags|=256,en(t,n,a,l),n.child}var uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(t){return{baseLanes:t,cachePool:pp()}}function hf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=ii),t}function Dg(t,n,a){var l=n.pendingProps,h=!1,d=(n.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(ze.current&2)!==0),_&&(h=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(ee){if(h?kr(n):Lr(),ee){var S=Ae,j;if(j=S){t:{for(j=S,S=Ni;j.nodeType!==8;){if(!S){S=null;break t}if(j=di(j.nextSibling),j===null){S=null;break t}}S=j}S!==null?(n.memoizedState={dehydrated:S,treeContext:Ma!==null?{id:sr,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},j=Mn(18,null,null,0),j.stateNode=S,j.return=n,n.child=j,vn=n,Ae=null,j=!0):j=!1}j||ka(n)}if(S=n.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Yf(S)?n.lanes=32:n.lanes=536870912,null;hr(n)}return S=l.children,l=l.fallback,h?(Lr(),h=n.mode,S=Uu({mode:"hidden",children:S},h),l=Oa(l,h,a,null),S.return=n,l.return=n,S.sibling=l,n.child=S,h=n.child,h.memoizedState=cf(a),h.childLanes=hf(t,_,a),n.memoizedState=uf,l):(kr(n),ff(n,S))}if(j=t.memoizedState,j!==null&&(S=j.dehydrated,S!==null)){if(d)n.flags&256?(kr(n),n.flags&=-257,n=df(t,n,a)):n.memoizedState!==null?(Lr(),n.child=t.child,n.flags|=128,n=null):(Lr(),h=l.fallback,S=n.mode,l=Uu({mode:"visible",children:l.children},S),h=Oa(h,S,a,null),h.flags|=2,l.return=n,h.return=n,l.sibling=h,n.child=l,Cs(n,t.child,null,a),l=n.child,l.memoizedState=cf(a),l.childLanes=hf(t,_,a),n.memoizedState=uf,n=h);else if(kr(n),Yf(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var $=_.dgst;_=$,l=Error(s(419)),l.stack="",l.digest=_,Dl({value:l,source:null,stack:null}),n=df(t,n,a)}else if(Qe||Il(t,n,a,!1),_=(a&t.childLanes)!==0,Qe||_){if(_=pe,_!==null&&(l=a&-a,l=(l&42)!==0?1:bi(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==j.retryLane))throw j.retryLane=l,ys(t,l),Pn(_,t,l),Eg;S.data==="$?"||Vf(),n=df(t,n,a)}else S.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=j.treeContext,Ae=di(S.nextSibling),vn=n,ee=!0,Ua=null,Ni=!1,t!==null&&(ti[ei++]=sr,ti[ei++]=lr,ti[ei++]=Ma,sr=t.id,lr=t.overflow,Ma=n),n=ff(n,l.children),n.flags|=4096);return n}return h?(Lr(),h=l.fallback,S=n.mode,j=t.child,$=j.sibling,l=ar(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,$!==null?h=ar($,h):(h=Oa(h,S,a,null),h.flags|=2),h.return=n,l.return=n,l.sibling=h,n.child=l,l=h,h=n.child,S=t.child.memoizedState,S===null?S=cf(a):(j=S.cachePool,j!==null?($=Pe._currentValue,j=j.parent!==$?{parent:$,pool:$}:j):j=pp(),S={baseLanes:S.baseLanes|a,cachePool:j}),h.memoizedState=S,h.childLanes=hf(t,_,a),n.memoizedState=uf,l):(kr(n),a=t.child,t=a.sibling,a=ar(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=a,n.memoizedState=null,a)}function ff(t,n){return n=Uu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Uu(t,n){return t=Mn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function df(t,n,a){return Cs(n,t.child,null,a),t=ff(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Ig(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Ih(t.return,n,a)}function mf(t,n,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Vg(t,n,a){var l=n.pendingProps,h=l.revealOrder,d=l.tail;if(en(t,n,l.children,a),l=ze.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ig(t,a,n);else if(t.tag===19)Ig(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ht(ze,l),h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&Nu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),mf(n,!1,h,a,d);break;case"backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Nu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}mf(n,!0,a,null,d);break;case"together":mf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fr(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Hr|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Il(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(s(153));if(n.child!==null){for(t=n.child,a=ar(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=ar(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function pf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function e1(t,n,a){switch(n.tag){case 3:Qt(n,n.stateNode.containerInfo),Nr(n,Pe,t.memoizedState.cache),Cl();break;case 27:case 5:yi(n);break;case 4:Qt(n,n.stateNode.containerInfo);break;case 10:Nr(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(kr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Dg(t,n,a):(kr(n),t=fr(t,n,a),t!==null?t.sibling:null);kr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Il(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return Vg(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ht(ze,ze.current),l)break;return null;case 22:case 23:return n.lanes=0,Ag(t,n,a);case 24:Nr(n,Pe,t.memoizedState.cache)}return fr(t,n,a)}function Ng(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Qe=!0;else{if(!pf(t,a)&&(n.flags&128)===0)return Qe=!1,e1(t,n,a);Qe=(t.flags&131072)!==0}else Qe=!1,ee&&(n.flags&1048576)!==0&&op(n,pu,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,h=l._init;if(l=h(l._payload),n.type=l,typeof l=="function")Sh(l)?(t=qa(l,t),n.tag=1,n=Rg(null,n,l,t,a)):(n.tag=0,n=of(null,n,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ft){n.tag=11,n=bg(null,n,l,t,a);break t}else if(h===k){n.tag=14,n=Tg(null,n,l,t,a);break t}}throw n=_t(l)||l,Error(s(306,n,""))}}return n;case 0:return of(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=qa(l,n.pendingProps),Rg(t,n,l,h,a);case 3:t:{if(Qt(n,n.stateNode.containerInfo),t===null)throw Error(s(387));l=n.pendingProps;var d=n.memoizedState;h=d.element,kh(t,n),kl(n,l,null,a);var _=n.memoizedState;if(l=_.cache,Nr(n,Pe,l),l!==d.cache&&Vh(n,[Pe],a,!0),Ul(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Cg(t,n,l,a);break t}else if(l!==h){h=Zn(Error(s(424)),n),Dl(h),n=Cg(t,n,l,a);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ae=di(t.firstChild),vn=n,ee=!0,Ua=null,Ni=!0,a=cg(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Cl(),l===h){n=fr(t,n,a);break t}en(t,n,l,a)}n=n.child}return n;case 26:return ju(t,n),t===null?(a=Uy(n.type,null,n.pendingProps,null))?n.memoizedState=a:ee||(a=n.type,t=n.pendingProps,l=Xu(Dt.current).createElement(a),l[Re]=n,l[Se]=t,rn(l,a,t),mt(l),n.stateNode=l):n.memoizedState=Uy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return yi(n),t===null&&ee&&(l=n.stateNode=Oy(n.type,n.pendingProps,Dt.current),vn=n,Ni=!0,h=Ae,$r(n.type)?(Kf=h,Ae=di(l.firstChild)):Ae=h),en(t,n,n.pendingProps.children,a),ju(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ee&&((h=l=Ae)&&(l=D1(l,n.type,n.pendingProps,Ni),l!==null?(n.stateNode=l,vn=n,Ae=di(l.firstChild),Ni=!1,h=!0):h=!1),h||ka(n)),yi(n),h=n.type,d=n.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Ff(h,d)?l=null:_!==null&&Ff(h,_)&&(n.flags|=32),n.memoizedState!==null&&(h=Hh(t,n,$E,null,null,a),ao._currentValue=h),ju(t,n),en(t,n,l,a),n.child;case 6:return t===null&&ee&&((t=a=Ae)&&(a=I1(a,n.pendingProps,Ni),a!==null?(n.stateNode=a,vn=n,Ae=null,t=!0):t=!1),t||ka(n)),null;case 13:return Dg(t,n,a);case 4:return Qt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Cs(n,null,l,a):en(t,n,l,a),n.child;case 11:return bg(t,n,n.type,n.pendingProps,a);case 7:return en(t,n,n.pendingProps,a),n.child;case 8:return en(t,n,n.pendingProps.children,a),n.child;case 12:return en(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Nr(n,n.type,l.value),en(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Pa(n),h=un(h),l=l(h),n.flags|=1,en(t,n,l,a),n.child;case 14:return Tg(t,n,n.type,n.pendingProps,a);case 15:return Sg(t,n,n.type,n.pendingProps,a);case 19:return Vg(t,n,a);case 31:return l=n.pendingProps,a=n.mode,l={mode:l.mode,children:l.children},t===null?(a=Uu(l,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=ar(t.child,l),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Ag(t,n,a);case 24:return Pa(n),l=un(Pe),t===null?(h=Mh(),h===null&&(h=pe,d=Nh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:l,cache:h},Uh(n),Nr(n,Pe,h)):((t.lanes&a)!==0&&(kh(t,n),kl(n,null,null,a),Ul()),h=t.memoizedState,d=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Nr(n,Pe,l)):(l=d.cache,Nr(n,Pe,l),l!==h.cache&&Vh(n,[Pe],a,!0))),en(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function dr(t){t.flags|=4}function Og(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!By(n)){if(n=ni.current,n!==null&&((Kt&4194048)===Kt?Oi!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||n!==Oi))throw Ml=jh,gp;t.flags|=8192}}function ku(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ki():536870912,t.lanes|=n,Ns|=n)}function Gl(t,n){if(!ee)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ee(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function n1(t,n,a){var l=n.pendingProps;switch(Rh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(n),null;case 1:return Ee(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ur(Pe),Dn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Rl(n)?dr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,hp())),Ee(n),null;case 26:return a=n.memoizedState,t===null?(dr(n),a!==null?(Ee(n),Og(n,a)):(Ee(n),n.flags&=-16777217)):a?a!==t.memoizedState?(dr(n),Ee(n),Og(n,a)):(Ee(n),n.flags&=-16777217):(t.memoizedProps!==l&&dr(n),Ee(n),n.flags&=-16777217),null;case 27:qn(n),a=Dt.current;var h=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&dr(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Ee(n),null}t=vt.current,Rl(n)?up(n):(t=Oy(h,l,a),n.stateNode=t,dr(n))}return Ee(n),null;case 5:if(qn(n),a=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&dr(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Ee(n),null}if(t=vt.current,Rl(n))up(n);else{switch(h=Xu(Dt.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Re]=n,t[Se]=l;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=t;t:switch(rn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&dr(n)}}return Ee(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&dr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(t=Dt.current,Rl(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=vn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Re]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||wy(t.nodeValue,a)),t||ka(n)}else t=Xu(t).createTextNode(l),t[Re]=n,n.stateNode=t}return Ee(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Rl(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Re]=n}else Cl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ee(n),h=!1}else h=hp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(hr(n),n):(hr(n),null)}if(hr(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(n.child.flags|=8192),ku(n,n.updateQueue),Ee(n),null;case 4:return Dn(),t===null&&zf(n.stateNode.containerInfo),Ee(n),null;case 10:return ur(n.type),Ee(n),null;case 19:if(dt(ze),h=n.memoizedState,h===null)return Ee(n),null;if(l=(n.flags&128)!==0,d=h.rendering,d===null)if(l)Gl(h,!1);else{if(xe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Nu(t),d!==null){for(n.flags|=128,Gl(h,!1),t=d.updateQueue,n.updateQueue=t,ku(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)lp(a,t),a=a.sibling;return ht(ze,ze.current&1|2),n.child}t=t.sibling}h.tail!==null&&Ue()>zu&&(n.flags|=128,l=!0,Gl(h,!1),n.lanes=4194304)}else{if(!l)if(t=Nu(d),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,ku(n,t),Gl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!ee)return Ee(n),null}else 2*Ue()-h.renderingStartTime>zu&&a!==536870912&&(n.flags|=128,l=!0,Gl(h,!1),n.lanes=4194304);h.isBackwards?(d.sibling=n.child,n.child=d):(t=h.last,t!==null?t.sibling=d:n.child=d,h.last=d)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Ue(),n.sibling=null,t=ze.current,ht(ze,l?t&1|2:t&1),n):(Ee(n),null);case 22:case 23:return hr(n),Bh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Ee(n),n.subtreeFlags&6&&(n.flags|=8192)):Ee(n),a=n.updateQueue,a!==null&&ku(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&dt(za),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),ur(Pe),Ee(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function i1(t,n){switch(Rh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ur(Pe),Dn(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return qn(n),null;case 13:if(hr(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Cl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return dt(ze),null;case 4:return Dn(),null;case 10:return ur(n.type),null;case 22:case 23:return hr(n),Bh(),t!==null&&dt(za),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return ur(Pe),null;case 25:return null;default:return null}}function Mg(t,n){switch(Rh(n),n.tag){case 3:ur(Pe),Dn();break;case 26:case 27:case 5:qn(n);break;case 4:Dn();break;case 13:hr(n);break;case 19:dt(ze);break;case 10:ur(n.type);break;case 22:case 23:hr(n),Bh(),t!==null&&dt(za);break;case 24:ur(Pe)}}function Fl(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(S){de(n,n.return,S)}}function Pr(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,h=n;var j=a,$=S;try{$()}catch(nt){de(h,j,nt)}}}l=l.next}while(l!==d)}}catch(nt){de(n,n.return,nt)}}function jg(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Tp(n,a)}catch(l){de(t,t.return,l)}}}function Ug(t,n,a){a.props=qa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){de(t,n,l)}}function Ql(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){de(t,n,h)}}function Mi(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){de(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){de(t,n,h)}else a.current=null}function kg(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){de(t,t.return,h)}}function gf(t,n,a){try{var l=t.stateNode;A1(l,t.type,a,n),l[Se]=n}catch(h){de(t,t.return,h)}}function Lg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$r(t.type)||t.tag===4}function yf(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Lg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$r(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ku));else if(l!==4&&(l===27&&$r(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(vf(t,n,a),t=t.sibling;t!==null;)vf(t,n,a),t=t.sibling}function Lu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&$r(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Lu(t,n,a),t=t.sibling;t!==null;)Lu(t,n,a),t=t.sibling}function Pg(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);rn(n,l,a),n[Re]=t,n[Se]=a}catch(d){de(t,t.return,d)}}var mr=!1,De=!1,_f=!1,zg=typeof WeakSet=="function"?WeakSet:Set,$e=null;function r1(t,n){if(t=t.containerInfo,Hf=nc,t=Wm(t),gh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,S=-1,j=-1,$=0,nt=0,st=t,X=null;e:for(;;){for(var W;st!==a||h!==0&&st.nodeType!==3||(S=_+h),st!==d||l!==0&&st.nodeType!==3||(j=_+l),st.nodeType===3&&(_+=st.nodeValue.length),(W=st.firstChild)!==null;)X=st,st=W;for(;;){if(st===t)break e;if(X===a&&++$===h&&(S=_),X===d&&++nt===l&&(j=_),(W=st.nextSibling)!==null)break;st=X,X=st.parentNode}st=W}a=S===-1||j===-1?null:{start:S,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gf={focusedElem:t,selectionRange:a},nc=!1,$e=n;$e!==null;)if(n=$e,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,$e=t;else for(;$e!==null;){switch(n=$e,d=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ot=qa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ot,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Vt){de(a,a.return,Vt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)$f(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$f(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=n.sibling,t!==null){t.return=n.return,$e=t;break}$e=n.return}}function Bg(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:zr(t,a),l&4&&Fl(5,a);break;case 1:if(zr(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(_){de(a,a.return,_)}else{var h=qa(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){de(a,a.return,_)}}l&64&&jg(a),l&512&&Ql(a,a.return);break;case 3:if(zr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Tp(t,n)}catch(_){de(a,a.return,_)}}break;case 27:n===null&&l&4&&Pg(a);case 26:case 5:zr(t,a),n===null&&l&4&&kg(a),l&512&&Ql(a,a.return);break;case 12:zr(t,a);break;case 13:zr(t,a),l&4&&Gg(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=d1.bind(null,a),V1(t,a))));break;case 22:if(l=a.memoizedState!==null||mr,!l){n=n!==null&&n.memoizedState!==null||De,h=mr;var d=De;mr=l,(De=n)&&!d?Br(t,a,(a.subtreeFlags&8772)!==0):zr(t,a),mr=h,De=d}break;case 30:break;default:zr(t,a)}}function qg(t){var n=t.alternate;n!==null&&(t.alternate=null,qg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&z(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ye=null,xn=!1;function pr(t,n,a){for(a=a.child;a!==null;)Hg(t,n,a),a=a.sibling}function Hg(t,n,a){if(te&&typeof te.onCommitFiberUnmount=="function")try{te.onCommitFiberUnmount(fe,a)}catch{}switch(a.tag){case 26:De||Mi(a,n),pr(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:De||Mi(a,n);var l=ye,h=xn;$r(a.type)&&(ye=a.stateNode,xn=!1),pr(t,n,a),eo(a.stateNode),ye=l,xn=h;break;case 5:De||Mi(a,n);case 6:if(l=ye,h=xn,ye=null,pr(t,n,a),ye=l,xn=h,ye!==null)if(xn)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(a.stateNode)}catch(d){de(a,n,d)}else try{ye.removeChild(a.stateNode)}catch(d){de(a,n,d)}break;case 18:ye!==null&&(xn?(t=ye,Vy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),uo(t)):Vy(ye,a.stateNode));break;case 4:l=ye,h=xn,ye=a.stateNode.containerInfo,xn=!0,pr(t,n,a),ye=l,xn=h;break;case 0:case 11:case 14:case 15:De||Pr(2,a,n),De||Pr(4,a,n),pr(t,n,a);break;case 1:De||(Mi(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ug(a,n,l)),pr(t,n,a);break;case 21:pr(t,n,a);break;case 22:De=(l=De)||a.memoizedState!==null,pr(t,n,a),De=l;break;default:pr(t,n,a)}}function Gg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{uo(t)}catch(a){de(n,n.return,a)}}function a1(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new zg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new zg),n;default:throw Error(s(435,t.tag))}}function Ef(t,n){var a=a1(t);n.forEach(function(l){var h=m1.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function jn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=n,S=_;t:for(;S!==null;){switch(S.tag){case 27:if($r(S.type)){ye=S.stateNode,xn=!1;break t}break;case 5:ye=S.stateNode,xn=!1;break t;case 3:case 4:ye=S.stateNode.containerInfo,xn=!0;break t}S=S.return}if(ye===null)throw Error(s(160));Hg(d,_,h),ye=null,xn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Fg(n,t),n=n.sibling}var fi=null;function Fg(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(n,t),Un(t),l&4&&(Pr(3,t,t.return),Fl(3,t),Pr(5,t,t.return));break;case 1:jn(n,t),Un(t),l&512&&(De||a===null||Mi(a,a.return)),l&64&&mr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=fi;if(jn(n,t),Un(t),l&512&&(De||a===null||Mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){t:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Xi]||d[Re]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),rn(d,l,a),d[Re]=t,mt(d),l=d;break t;case"link":var _=Py("link","href",h).get(l+(a.href||""));if(_){for(var S=0;S<_.length;S++)if(d=_[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(S,1);break e}}d=h.createElement(l),rn(d,l,a),h.head.appendChild(d);break;case"meta":if(_=Py("meta","content",h).get(l+(a.content||""))){for(S=0;S<_.length;S++)if(d=_[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(S,1);break e}}d=h.createElement(l),rn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Re]=t,mt(d),l=d}t.stateNode=l}else zy(h,t.type,t.stateNode);else t.stateNode=Ly(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?zy(h,t.type,t.stateNode):Ly(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&gf(t,t.memoizedProps,a.memoizedProps)}break;case 27:jn(n,t),Un(t),l&512&&(De||a===null||Mi(a,a.return)),a!==null&&l&4&&gf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(jn(n,t),Un(t),l&512&&(De||a===null||Mi(a,a.return)),t.flags&32){h=t.stateNode;try{Yn(h,"")}catch(W){de(t,t.return,W)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,gf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(_f=!0);break;case 6:if(jn(n,t),Un(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(W){de(t,t.return,W)}}break;case 3:if(Ju=null,h=fi,fi=Wu(n.containerInfo),jn(n,t),fi=h,Un(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{uo(n.containerInfo)}catch(W){de(t,t.return,W)}_f&&(_f=!1,Qg(t));break;case 4:l=fi,fi=Wu(t.stateNode.containerInfo),jn(n,t),Un(t),fi=l;break;case 12:jn(n,t),Un(t);break;case 13:jn(n,t),Un(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wf=Ue()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ef(t,l)));break;case 22:h=t.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,$=mr,nt=De;if(mr=$||h,De=nt||j,jn(n,t),De=nt,mr=$,Un(t),l&8192)t:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||j||mr||De||Ha(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){j=a=n;try{if(d=j.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=j.stateNode;var st=j.memoizedProps.style,X=st!=null&&st.hasOwnProperty("display")?st.display:null;S.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(W){de(j,j.return,W)}}}else if(n.tag===6){if(a===null){j=n;try{j.stateNode.nodeValue=h?"":j.memoizedProps}catch(W){de(j,j.return,W)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ef(t,a))));break;case 19:jn(n,t),Un(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ef(t,l)));break;case 30:break;case 21:break;default:jn(n,t),Un(t)}}function Un(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(Lg(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=yf(t);Lu(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Yn(_,""),a.flags&=-33);var S=yf(t);Lu(t,S,_);break;case 3:case 4:var j=a.stateNode.containerInfo,$=yf(t);vf(t,$,j);break;default:throw Error(s(161))}}catch(nt){de(t,t.return,nt)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Qg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Qg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function zr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Bg(t,n.alternate,n),n=n.sibling}function Ha(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Pr(4,n,n.return),Ha(n);break;case 1:Mi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Ug(n,n.return,a),Ha(n);break;case 27:eo(n.stateNode);case 26:case 5:Mi(n,n.return),Ha(n);break;case 22:n.memoizedState===null&&Ha(n);break;case 30:Ha(n);break;default:Ha(n)}t=t.sibling}}function Br(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,d=n,_=d.flags;switch(d.tag){case 0:case 11:case 15:Br(h,d,a),Fl(4,d);break;case 1:if(Br(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){de(l,l.return,$)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)bp(j[h],S)}catch($){de(l,l.return,$)}}a&&_&64&&jg(d),Ql(d,d.return);break;case 27:Pg(d);case 26:case 5:Br(h,d,a),a&&l===null&&_&4&&kg(d),Ql(d,d.return);break;case 12:Br(h,d,a);break;case 13:Br(h,d,a),a&&_&4&&Gg(h,d);break;case 22:d.memoizedState===null&&Br(h,d,a),Ql(d,d.return);break;case 30:break;default:Br(h,d,a)}n=n.sibling}}function bf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Vl(a))}function Tf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Vl(t))}function ji(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)$g(t,n,a,l),n=n.sibling}function $g(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ji(t,n,a,l),h&2048&&Fl(9,n);break;case 1:ji(t,n,a,l);break;case 3:ji(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Vl(t)));break;case 12:if(h&2048){ji(t,n,a,l),t=n.stateNode;try{var d=n.memoizedProps,_=d.id,S=d.onPostCommit;typeof S=="function"&&S(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){de(n,n.return,j)}}else ji(t,n,a,l);break;case 13:ji(t,n,a,l);break;case 23:break;case 22:d=n.stateNode,_=n.alternate,n.memoizedState!==null?d._visibility&2?ji(t,n,a,l):$l(t,n):d._visibility&2?ji(t,n,a,l):(d._visibility|=2,Ds(t,n,a,l,(n.subtreeFlags&10256)!==0)),h&2048&&bf(_,n);break;case 24:ji(t,n,a,l),h&2048&&Tf(n.alternate,n);break;default:ji(t,n,a,l)}}function Ds(t,n,a,l,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=t,_=n,S=a,j=l,$=_.flags;switch(_.tag){case 0:case 11:case 15:Ds(d,_,S,j,h),Fl(8,_);break;case 23:break;case 22:var nt=_.stateNode;_.memoizedState!==null?nt._visibility&2?Ds(d,_,S,j,h):$l(d,_):(nt._visibility|=2,Ds(d,_,S,j,h)),h&&$&2048&&bf(_.alternate,_);break;case 24:Ds(d,_,S,j,h),h&&$&2048&&Tf(_.alternate,_);break;default:Ds(d,_,S,j,h)}n=n.sibling}}function $l(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:$l(a,l),h&2048&&bf(l.alternate,l);break;case 24:$l(a,l),h&2048&&Tf(l.alternate,l);break;default:$l(a,l)}n=n.sibling}}var Yl=8192;function Is(t){if(t.subtreeFlags&Yl)for(t=t.child;t!==null;)Yg(t),t=t.sibling}function Yg(t){switch(t.tag){case 26:Is(t),t.flags&Yl&&t.memoizedState!==null&&G1(fi,t.memoizedState,t.memoizedProps);break;case 5:Is(t);break;case 3:case 4:var n=fi;fi=Wu(t.stateNode.containerInfo),Is(t),fi=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Yl,Yl=16777216,Is(t),Yl=n):Is(t));break;default:Is(t)}}function Kg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Kl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];$e=l,Wg(l,t)}Kg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xg(t),t=t.sibling}function Xg(t){switch(t.tag){case 0:case 11:case 15:Kl(t),t.flags&2048&&Pr(9,t,t.return);break;case 3:Kl(t);break;case 12:Kl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Pu(t)):Kl(t);break;default:Kl(t)}}function Pu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];$e=l,Wg(l,t)}Kg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Pr(8,n,n.return),Pu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Pu(n));break;default:Pu(n)}t=t.sibling}}function Wg(t,n){for(;$e!==null;){var a=$e;switch(a.tag){case 0:case 11:case 15:Pr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$e=l;else t:for(a=t;$e!==null;){l=$e;var h=l.sibling,d=l.return;if(qg(l),l===a){$e=null;break t}if(h!==null){h.return=d,$e=h;break t}$e=d}}}var s1={getCacheForType:function(t){var n=un(Pe),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a}},l1=typeof WeakMap=="function"?WeakMap:Map,se=0,pe=null,Ht=null,Kt=0,le=0,kn=null,qr=!1,Vs=!1,Sf=!1,gr=0,xe=0,Hr=0,Ga=0,Af=0,ii=0,Ns=0,Xl=null,wn=null,xf=!1,wf=0,zu=1/0,Bu=null,Gr=null,nn=0,Fr=null,Os=null,Ms=0,Rf=0,Cf=null,Zg=null,Wl=0,Df=null;function Ln(){if((se&2)!==0&&Kt!==0)return Kt&-Kt;if(K.T!==null){var t=bs;return t!==0?t:Uf()}return Ti()}function Jg(){ii===0&&(ii=(Kt&536870912)===0||ee?ma():536870912);var t=ni.current;return t!==null&&(t.flags|=32),ii}function Pn(t,n,a){(t===pe&&(le===2||le===9)||t.cancelPendingCommit!==null)&&(js(t,0),Qr(t,Kt,ii,!1)),Qn(t,a),((se&2)===0||t!==pe)&&(t===pe&&((se&2)===0&&(Ga|=a),xe===4&&Qr(t,Kt,ii,!1)),Ui(t))}function ty(t,n,a){if((se&6)!==0)throw Error(s(327));var l=!a&&(n&124)===0&&(n&t.expiredLanes)===0||Yi(t,n),h=l?c1(t,n):Nf(t,n,!0),d=l;do{if(h===0){Vs&&!l&&Qr(t,n,0,!1);break}else{if(a=t.current.alternate,d&&!o1(a)){h=Nf(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var S=t;h=Xl;var j=S.current.memoizedState.isDehydrated;if(j&&(js(S,_).flags|=256),_=Nf(S,_,!1),_!==2){if(Sf&&!j){S.errorRecoveryDisabledLanes|=d,Ga|=d,h=4;break t}d=wn,wn=h,d!==null&&(wn===null?wn=d:wn.push.apply(wn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){js(t,0),Qr(t,n,0,!0);break}t:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Qr(l,n,ii,!qr);break t;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=wf+300-Ue(),10<h)){if(Qr(l,n,ii,!qr),Ei(l,0,!0)!==0)break t;l.timeoutHandle=Dy(ey.bind(null,l,a,wn,Bu,xf,n,ii,Ga,Ns,qr,d,2,-0,0),h);break t}ey(l,a,wn,Bu,xf,n,ii,Ga,Ns,qr,d,0,-0,0)}}break}while(!0);Ui(t)}function ey(t,n,a,l,h,d,_,S,j,$,nt,st,X,W){if(t.timeoutHandle=-1,st=n.subtreeFlags,(st&8192||(st&16785408)===16785408)&&(ro={stylesheets:null,count:0,unsuspend:H1},Yg(n),st=F1(),st!==null)){t.cancelPendingCommit=st(oy.bind(null,t,n,d,a,l,h,_,S,j,nt,1,X,W)),Qr(t,d,_,!$);return}oy(t,n,d,a,l,h,_,S,j)}function o1(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!On(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Qr(t,n,a,l){n&=~Af,n&=~Ga,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var d=31-We(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&In(t,a,n)}function qu(){return(se&6)===0?(Zl(0),!1):!0}function If(){if(Ht!==null){if(le===0)var t=Ht.return;else t=Ht,or=La=null,Qh(t),Rs=null,ql=0,t=Ht;for(;t!==null;)Mg(t.alternate,t),t=t.return;Ht=null}}function js(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,w1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),If(),pe=t,Ht=a=ar(t.current,null),Kt=n,le=0,kn=null,qr=!1,Vs=Yi(t,n),Sf=!1,Ns=ii=Af=Ga=Hr=xe=0,wn=Xl=null,xf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-We(l),d=1<<h;n|=t[h],l&=~d}return gr=n,cu(),a}function ny(t,n){zt=null,K.H=Du,n===Ol||n===_u?(n=_p(),le=3):n===gp?(n=_p(),le=4):le=n===Eg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,kn=n,Ht===null&&(xe=1,Mu(t,Zn(n,t.current)))}function iy(){var t=K.H;return K.H=Du,t===null?Du:t}function ry(){var t=K.A;return K.A=s1,t}function Vf(){xe=4,qr||(Kt&4194048)!==Kt&&ni.current!==null||(Vs=!0),(Hr&134217727)===0&&(Ga&134217727)===0||pe===null||Qr(pe,Kt,ii,!1)}function Nf(t,n,a){var l=se;se|=2;var h=iy(),d=ry();(pe!==t||Kt!==n)&&(Bu=null,js(t,n)),n=!1;var _=xe;t:do try{if(le!==0&&Ht!==null){var S=Ht,j=kn;switch(le){case 8:If(),_=6;break t;case 3:case 2:case 9:case 6:ni.current===null&&(n=!0);var $=le;if(le=0,kn=null,Us(t,S,j,$),a&&Vs){_=0;break t}break;default:$=le,le=0,kn=null,Us(t,S,j,$)}}u1(),_=xe;break}catch(nt){ny(t,nt)}while(!0);return n&&t.shellSuspendCounter++,or=La=null,se=l,K.H=h,K.A=d,Ht===null&&(pe=null,Kt=0,cu()),_}function u1(){for(;Ht!==null;)ay(Ht)}function c1(t,n){var a=se;se|=2;var l=iy(),h=ry();pe!==t||Kt!==n?(Bu=null,zu=Ue()+500,js(t,n)):Vs=Yi(t,n);t:do try{if(le!==0&&Ht!==null){n=Ht;var d=kn;e:switch(le){case 1:le=0,kn=null,Us(t,n,d,1);break;case 2:case 9:if(yp(d)){le=0,kn=null,sy(n);break}n=function(){le!==2&&le!==9||pe!==t||(le=7),Ui(t)},d.then(n,n);break t;case 3:le=7;break t;case 4:le=5;break t;case 7:yp(d)?(le=0,kn=null,sy(n)):(le=0,kn=null,Us(t,n,d,7));break;case 5:var _=null;switch(Ht.tag){case 26:_=Ht.memoizedState;case 5:case 27:var S=Ht;if(!_||By(_)){le=0,kn=null;var j=S.sibling;if(j!==null)Ht=j;else{var $=S.return;$!==null?(Ht=$,Hu($)):Ht=null}break e}}le=0,kn=null,Us(t,n,d,5);break;case 6:le=0,kn=null,Us(t,n,d,6);break;case 8:If(),xe=6;break t;default:throw Error(s(462))}}h1();break}catch(nt){ny(t,nt)}while(!0);return or=La=null,K.H=l,K.A=h,se=a,Ht!==null?0:(pe=null,Kt=0,cu(),xe)}function h1(){for(;Ht!==null&&!Xe();)ay(Ht)}function ay(t){var n=Ng(t.alternate,t,gr);t.memoizedProps=t.pendingProps,n===null?Hu(t):Ht=n}function sy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=wg(a,n,n.pendingProps,n.type,void 0,Kt);break;case 11:n=wg(a,n,n.pendingProps,n.type.render,n.ref,Kt);break;case 5:Qh(n);default:Mg(a,n),n=Ht=lp(n,gr),n=Ng(a,n,gr)}t.memoizedProps=t.pendingProps,n===null?Hu(t):Ht=n}function Us(t,n,a,l){or=La=null,Qh(n),Rs=null,ql=0;var h=n.return;try{if(t1(t,h,n,a,Kt)){xe=1,Mu(t,Zn(a,t.current)),Ht=null;return}}catch(d){if(h!==null)throw Ht=h,d;xe=1,Mu(t,Zn(a,t.current)),Ht=null;return}n.flags&32768?(ee||l===1?t=!0:Vs||(Kt&536870912)!==0?t=!1:(qr=t=!0,(l===2||l===9||l===3||l===6)&&(l=ni.current,l!==null&&l.tag===13&&(l.flags|=16384))),ly(n,t)):Hu(n)}function Hu(t){var n=t;do{if((n.flags&32768)!==0){ly(n,qr);return}t=n.return;var a=n1(n.alternate,n,gr);if(a!==null){Ht=a;return}if(n=n.sibling,n!==null){Ht=n;return}Ht=n=t}while(n!==null);xe===0&&(xe=5)}function ly(t,n){do{var a=i1(t.alternate,t);if(a!==null){a.flags&=32767,Ht=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Ht=t;return}Ht=t=a}while(t!==null);xe=6,Ht=null}function oy(t,n,a,l,h,d,_,S,j){t.cancelPendingCommit=null;do Gu();while(nn!==0);if((se&6)!==0)throw Error(s(327));if(n!==null){if(n===t.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=bh,pa(t,a,d,_,S,j),t===pe&&(Ht=pe=null,Kt=0),Os=n,Fr=t,Ms=a,Rf=d,Cf=h,Zg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,p1(vi,function(){return dy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=Y.p,Y.p=2,_=se,se|=4;try{r1(t,n,a)}finally{se=_,Y.p=h,K.T=l}}nn=1,uy(),cy(),hy()}}function uy(){if(nn===1){nn=0;var t=Fr,n=Os,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=Y.p;Y.p=2;var h=se;se|=4;try{Fg(n,t);var d=Gf,_=Wm(t.containerInfo),S=d.focusedElem,j=d.selectionRange;if(_!==S&&S&&S.ownerDocument&&Xm(S.ownerDocument.documentElement,S)){if(j!==null&&gh(S)){var $=j.start,nt=j.end;if(nt===void 0&&(nt=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(nt,S.value.length);else{var st=S.ownerDocument||document,X=st&&st.defaultView||window;if(X.getSelection){var W=X.getSelection(),Ot=S.textContent.length,Vt=Math.min(j.start,Ot),he=j.end===void 0?Vt:Math.min(j.end,Ot);!W.extend&&Vt>he&&(_=he,he=Vt,Vt=_);var H=Km(S,Vt),L=Km(S,he);if(H&&L&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var F=st.createRange();F.setStart(H.node,H.offset),W.removeAllRanges(),Vt>he?(W.addRange(F),W.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),W.addRange(F))}}}}for(st=[],W=S;W=W.parentNode;)W.nodeType===1&&st.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<st.length;S++){var rt=st[S];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}nc=!!Hf,Gf=Hf=null}finally{se=h,Y.p=l,K.T=a}}t.current=n,nn=2}}function cy(){if(nn===2){nn=0;var t=Fr,n=Os,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=Y.p;Y.p=2;var h=se;se|=4;try{Bg(t,n.alternate,n)}finally{se=h,Y.p=l,K.T=a}}nn=3}}function hy(){if(nn===4||nn===3){nn=0,oi();var t=Fr,n=Os,a=Ms,l=Zg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?nn=5:(nn=0,Os=Fr=null,fy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Gr=null),Dr(a),n=n.stateNode,te&&typeof te.onCommitFiberRoot=="function")try{te.onCommitFiberRoot(fe,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=K.T,h=Y.p,Y.p=2,K.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var S=l[_];d(S.value,{componentStack:S.stack})}}finally{K.T=n,Y.p=h}}(Ms&3)!==0&&Gu(),Ui(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Df?Wl++:(Wl=0,Df=t):Wl=0,Zl(0)}}function fy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Vl(n)))}function Gu(t){return uy(),cy(),hy(),dy()}function dy(){if(nn!==5)return!1;var t=Fr,n=Rf;Rf=0;var a=Dr(Ms),l=K.T,h=Y.p;try{Y.p=32>a?32:a,K.T=null,a=Cf,Cf=null;var d=Fr,_=Ms;if(nn=0,Os=Fr=null,Ms=0,(se&6)!==0)throw Error(s(331));var S=se;if(se|=4,Xg(d.current),$g(d,d.current,_,a),se=S,Zl(0,!1),te&&typeof te.onPostCommitFiberRoot=="function")try{te.onPostCommitFiberRoot(fe,d)}catch{}return!0}finally{Y.p=h,K.T=l,fy(t,n)}}function my(t,n,a){n=Zn(a,n),n=lf(t.stateNode,n,2),t=jr(t,n,2),t!==null&&(Qn(t,2),Ui(t))}function de(t,n,a){if(t.tag===3)my(t,t,a);else for(;n!==null;){if(n.tag===3){my(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gr===null||!Gr.has(l))){t=Zn(a,t),a=vg(2),l=jr(n,a,2),l!==null&&(_g(a,l,n,t),Qn(l,2),Ui(l));break}}n=n.return}}function Of(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new l1;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(Sf=!0,h.add(a),t=f1.bind(null,t,n,a),n.then(t,t))}function f1(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,pe===t&&(Kt&a)===a&&(xe===4||xe===3&&(Kt&62914560)===Kt&&300>Ue()-wf?(se&2)===0&&js(t,0):Af|=a,Ns===Kt&&(Ns=0)),Ui(t)}function py(t,n){n===0&&(n=Ki()),t=ys(t,n),t!==null&&(Qn(t,n),Ui(t))}function d1(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),py(t,a)}function m1(t,n){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),py(t,a)}function p1(t,n){return Hi(t,n)}var Fu=null,ks=null,Mf=!1,Qu=!1,jf=!1,Fa=0;function Ui(t){t!==ks&&t.next===null&&(ks===null?Fu=ks=t:ks=ks.next=t),Qu=!0,Mf||(Mf=!0,y1())}function Zl(t,n){if(!jf&&Qu){jf=!0;do for(var a=!1,l=Fu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-We(42|t)+1)-1,d&=h&~(_&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,_y(l,d))}else d=Kt,d=Ei(l,l===pe?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Yi(l,d)||(a=!0,_y(l,d));l=l.next}while(a);jf=!1}}function g1(){gy()}function gy(){Qu=Mf=!1;var t=0;Fa!==0&&(x1()&&(t=Fa),Fa=0);for(var n=Ue(),a=null,l=Fu;l!==null;){var h=l.next,d=yy(l,n);d===0?(l.next=null,a===null?Fu=h:a.next=h,h===null&&(ks=a)):(a=l,(t!==0||(d&3)!==0)&&(Qu=!0)),l=h}Zl(t)}function yy(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-We(d),S=1<<_,j=h[_];j===-1?((S&a)===0||(S&l)!==0)&&(h[_]=da(S,n)):j<=n&&(t.expiredLanes|=S),d&=~S}if(n=pe,a=Kt,a=Ei(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(le===2||le===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Gn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yi(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Gn(l),Dr(a)){case 2:case 8:a=Rr;break;case 32:a=vi;break;case 268435456:a=Gi;break;default:a=vi}return l=vy.bind(null,t),a=Hi(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Gn(l),t.callbackPriority=2,t.callbackNode=null,2}function vy(t,n){if(nn!==0&&nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Gu()&&t.callbackNode!==a)return null;var l=Kt;return l=Ei(t,t===pe?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ty(t,l,n),yy(t,Ue()),t.callbackNode!=null&&t.callbackNode===a?vy.bind(null,t):null)}function _y(t,n){if(Gu())return null;ty(t,n,!0)}function y1(){R1(function(){(se&6)!==0?Hi(wr,g1):gy()})}function Uf(){return Fa===0&&(Fa=ma()),Fa}function Ey(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:as(""+t)}function by(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function v1(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var d=Ey((h[Se]||null).action),_=l.submitter;_&&(n=(n=_[Se]||null)?Ey(n.formAction):_.getAttribute("formAction"),n!==null&&(d=n,_=null));var S=new ss("action","action",null,l,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Fa!==0){var j=_?by(h,_):new FormData(h);ef(a,{pending:!0,data:j,method:h.method,action:d},null,j)}}else typeof d=="function"&&(S.preventDefault(),j=_?by(h,_):new FormData(h),ef(a,{pending:!0,data:j,method:h.method,action:d},d,j))},currentTarget:h}]})}}for(var kf=0;kf<Eh.length;kf++){var Lf=Eh[kf],_1=Lf.toLowerCase(),E1=Lf[0].toUpperCase()+Lf.slice(1);hi(_1,"on"+E1)}hi(tp,"onAnimationEnd"),hi(ep,"onAnimationIteration"),hi(np,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(kE,"onTransitionRun"),hi(LE,"onTransitionStart"),hi(PE,"onTransitionCancel"),hi(ip,"onTransitionEnd"),Zt("onMouseEnter",["mouseout","mouseover"]),Zt("onMouseLeave",["mouseout","mouseover"]),Zt("onPointerEnter",["pointerout","pointerover"]),Zt("onPointerLeave",["pointerout","pointerover"]),ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function Ty(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;t:{var d=void 0;if(n)for(var _=l.length-1;0<=_;_--){var S=l[_],j=S.instance,$=S.currentTarget;if(S=S.listener,j!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=$;try{d(h)}catch(nt){Ou(nt)}h.currentTarget=null,d=j}else for(_=0;_<l.length;_++){if(S=l[_],j=S.instance,$=S.currentTarget,S=S.listener,j!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=$;try{d(h)}catch(nt){Ou(nt)}h.currentTarget=null,d=j}}}}function Gt(t,n){var a=n[va];a===void 0&&(a=n[va]=new Set);var l=t+"__bubble";a.has(l)||(Sy(n,t,2,!1),a.add(l))}function Pf(t,n,a){var l=0;n&&(l|=4),Sy(a,t,l,n)}var $u="_reactListening"+Math.random().toString(36).slice(2);function zf(t){if(!t[$u]){t[$u]=!0,bt.forEach(function(a){a!=="selectionchange"&&(b1.has(a)||Pf(a,!1,t),Pf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[$u]||(n[$u]=!0,Pf("selectionchange",!1,n))}}function Sy(t,n,a,l){switch($y(n)){case 2:var h=Y1;break;case 8:h=K1;break;default:h=td}a=h.bind(null,n,a,t),h=void 0,!Xn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Bf(t,n,a,l,h){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var S=l.stateNode.containerInfo;if(S===h)break;if(_===4)for(_=l.return;_!==null;){var j=_.tag;if((j===3||j===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;S!==null;){if(_=tt(S),_===null)return;if(j=_.tag,j===5||j===6||j===26||j===27){l=d=_;continue t}S=S.parentNode}}l=l.return}Ko(function(){var $=d,nt=Kn(a),st=[];t:{var X=rp.get(t);if(X!==void 0){var W=ss,Ot=t;switch(t){case"keypress":if(Ri(a)===0)break t;case"keydown":case"keyup":W=fs;break;case"focusin":Ot="focus",W=us;break;case"focusout":Ot="blur",W=us;break;case"beforeblur":case"afterblur":W=us;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=iu;break;case tp:case ep:case np:W=cs;break;case ip:W=au;break;case"scroll":case"scrollend":W=Xo;break;case"wheel":W=ds;break;case"copy":case"cut":case"paste":W=hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Sl;break;case"toggle":case"beforetoggle":W=lu}var Vt=(n&4)!==0,he=!Vt&&(t==="scroll"||t==="scrollend"),H=Vt?X!==null?X+"Capture":null:X;Vt=[];for(var L=$,F;L!==null;){var rt=L;if(F=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||F===null||H===null||(rt=Aa(L,H),rt!=null&&Vt.push(to(L,rt,F))),he)break;L=L.return}0<Vt.length&&(X=new W(X,Ot,null,a,nt),st.push({event:X,listeners:Vt}))}}if((n&7)===0){t:{if(X=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",X&&a!==Ji&&(Ot=a.relatedTarget||a.fromElement)&&(tt(Ot)||Ot[Tn]))break t;if((W||X)&&(X=nt.window===nt?nt:(X=nt.ownerDocument)?X.defaultView||X.parentWindow:window,W?(Ot=a.relatedTarget||a.toElement,W=$,Ot=Ot?tt(Ot):null,Ot!==null&&(he=u(Ot),Vt=Ot.tag,Ot!==he||Vt!==5&&Vt!==27&&Vt!==6)&&(Ot=null)):(W=null,Ot=$),W!==Ot)){if(Vt=Wn,rt="onMouseLeave",H="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Vt=Sl,rt="onPointerLeave",H="onPointerEnter",L="pointer"),he=W==null?X:ct(W),F=Ot==null?X:ct(Ot),X=new Vt(rt,L+"leave",W,a,nt),X.target=he,X.relatedTarget=F,rt=null,tt(nt)===$&&(Vt=new Vt(H,L+"enter",Ot,a,nt),Vt.target=F,Vt.relatedTarget=he,rt=Vt),he=rt,W&&Ot)e:{for(Vt=W,H=Ot,L=0,F=Vt;F;F=Ls(F))L++;for(F=0,rt=H;rt;rt=Ls(rt))F++;for(;0<L-F;)Vt=Ls(Vt),L--;for(;0<F-L;)H=Ls(H),F--;for(;L--;){if(Vt===H||H!==null&&Vt===H.alternate)break e;Vt=Ls(Vt),H=Ls(H)}Vt=null}else Vt=null;W!==null&&Ay(st,X,W,Vt,!1),Ot!==null&&he!==null&&Ay(st,he,Ot,Vt,!0)}}t:{if(X=$?ct($):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var xt=Hm;else if(Le(X))if(Gm)xt=ME;else{xt=NE;var qt=VE}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?$&&gl($.elementType)&&(xt=Hm):xt=OE;if(xt&&(xt=xt(t,$))){rr(st,xt,a,nt);break t}qt&&qt(t,X,$),t==="focusout"&&$&&X.type==="number"&&$.memoizedProps.value!=null&&Ir(X,"number",X.value)}switch(qt=$?ct($):window,t){case"focusin":(Le(qt)||qt.contentEditable==="true")&&(ms=qt,yh=$,wl=null);break;case"focusout":wl=yh=ms=null;break;case"mousedown":vh=!0;break;case"contextmenu":case"mouseup":case"dragend":vh=!1,Zm(st,a,nt);break;case"selectionchange":if(UE)break;case"keydown":case"keyup":Zm(st,a,nt)}var Ct;if(Ii)t:{switch(t){case"compositionstart":var Nt="onCompositionStart";break t;case"compositionend":Nt="onCompositionEnd";break t;case"compositionupdate":Nt="onCompositionUpdate";break t}Nt=void 0}else $t?J(t,a)&&(Nt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Nt="onCompositionStart");Nt&&(v&&a.locale!=="ko"&&($t||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&$t&&(Ct=vl()):(wi=nt,Vr="value"in wi?wi.value:wi.textContent,$t=!0)),qt=Yu($,Nt),0<qt.length&&(Nt=new bl(Nt,t,null,a,nt),st.push({event:Nt,listeners:qt}),Ct?Nt.data=Ct:(Ct=yt(a),Ct!==null&&(Nt.data=Ct)))),(Ct=g?ke(t,a):Yt(t,a))&&(Nt=Yu($,"onBeforeInput"),0<Nt.length&&(qt=new bl("onBeforeInput","beforeinput",null,a,nt),st.push({event:qt,listeners:Nt}),qt.data=Ct)),v1(st,t,$,a,nt)}Ty(st,n)})}function to(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Yu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Aa(t,a),h!=null&&l.unshift(to(t,h,d)),h=Aa(t,n),h!=null&&l.push(to(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ay(t,n,a,l,h){for(var d=n._reactName,_=[];a!==null&&a!==l;){var S=a,j=S.alternate,$=S.stateNode;if(S=S.tag,j!==null&&j===l)break;S!==5&&S!==26&&S!==27||$===null||(j=$,h?($=Aa(a,d),$!=null&&_.unshift(to(a,$,j))):h||($=Aa(a,d),$!=null&&_.push(to(a,$,j)))),a=a.return}_.length!==0&&t.push({event:n,listeners:_})}var T1=/\r\n?/g,S1=/\u0000|\uFFFD/g;function xy(t){return(typeof t=="string"?t:""+t).replace(T1,`
`).replace(S1,"")}function wy(t,n){return n=xy(n),xy(t)===n}function Ku(){}function ce(t,n,a,l,h,d){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Yn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Yn(t,""+l);break;case"className":Ai(t,"class",l);break;case"tabIndex":Ai(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(t,a,l);break;case"style":pl(t,l,d);break;case"data":if(n!=="object"){Ai(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=as(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&ce(t,n,"name",h.name,h,null),ce(t,n,"formEncType",h.formEncType,h,null),ce(t,n,"formMethod",h.formMethod,h,null),ce(t,n,"formTarget",h.formTarget,h,null)):(ce(t,n,"encType",h.encType,h,null),ce(t,n,"method",h.method,h,null),ce(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=as(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"onScroll":l!=null&&Gt("scroll",t);break;case"onScrollEnd":l!=null&&Gt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=as(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Gt("beforetoggle",t),Gt("toggle",t),Vn(t,"popover",l);break;case"xlinkActuate":Je(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Je(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Je(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Je(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Je(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Je(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Je(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Je(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Je(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Vn(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ch.get(a)||a,Vn(t,a,l))}}function qf(t,n,a,l,h,d){switch(a){case"style":pl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Yn(t,l):(typeof l=="number"||typeof l=="bigint")&&Yn(t,""+l);break;case"onScroll":l!=null&&Gt("scroll",t);break;case"onScrollEnd":l!=null&&Gt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pt.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=t[Se]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break t}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Vn(t,a,l)}}}function rn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",t),Gt("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ce(t,n,d,_,a,null)}}h&&ce(t,n,"srcSet",a.srcSet,a,null),l&&ce(t,n,"src",a.src,a,null);return;case"input":Gt("invalid",t);var S=d=_=h=null,j=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var nt=a[l];if(nt!=null)switch(l){case"name":h=nt;break;case"type":_=nt;break;case"checked":j=nt;break;case"defaultChecked":$=nt;break;case"value":d=nt;break;case"defaultValue":S=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(s(137,n));break;default:ce(t,n,l,nt,a,null)}}ba(t,d,S,j,$,_,h,!1),rs(t);return;case"select":Gt("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":_=S;break;case"multiple":l=S;default:ce(t,n,h,S,a,null)}n=d,a=_,t.multiple=!!l,n!=null?Zi(t,!!l,n,!1):a!=null&&Zi(t,!!l,a,!0);return;case"textarea":Gt("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(S=a[_],S!=null))switch(_){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:ce(t,n,_,S,a,null)}Ta(t,l,h,d),rs(t);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ce(t,n,j,l,a,null)}return;case"dialog":Gt("beforetoggle",t),Gt("toggle",t),Gt("cancel",t),Gt("close",t);break;case"iframe":case"object":Gt("load",t);break;case"video":case"audio":for(l=0;l<Jl.length;l++)Gt(Jl[l],t);break;case"image":Gt("error",t),Gt("load",t);break;case"details":Gt("toggle",t);break;case"embed":case"source":case"link":Gt("error",t),Gt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:ce(t,n,$,l,a,null)}return;default:if(gl(n)){for(nt in a)a.hasOwnProperty(nt)&&(l=a[nt],l!==void 0&&qf(t,n,nt,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&ce(t,n,S,l,a,null))}function A1(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,S=null,j=null,$=null,nt=null;for(W in a){var st=a[W];if(a.hasOwnProperty(W)&&st!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":j=st;default:l.hasOwnProperty(W)||ce(t,n,W,null,l,st)}}for(var X in l){var W=l[X];if(st=a[X],l.hasOwnProperty(X)&&(W!=null||st!=null))switch(X){case"type":d=W;break;case"name":h=W;break;case"checked":$=W;break;case"defaultChecked":nt=W;break;case"value":_=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,n));break;default:W!==st&&ce(t,n,X,W,l,st)}}Nn(t,_,S,j,$,nt,d,h);return;case"select":W=_=S=X=null;for(d in a)if(j=a[d],a.hasOwnProperty(d)&&j!=null)switch(d){case"value":break;case"multiple":W=j;default:l.hasOwnProperty(d)||ce(t,n,d,null,l,j)}for(h in l)if(d=l[h],j=a[h],l.hasOwnProperty(h)&&(d!=null||j!=null))switch(h){case"value":X=d;break;case"defaultValue":S=d;break;case"multiple":_=d;default:d!==j&&ce(t,n,h,d,l,j)}n=S,a=_,l=W,X!=null?Zi(t,!!a,X,!1):!!l!=!!a&&(n!=null?Zi(t,!!a,n,!0):Zi(t,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ce(t,n,S,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":X=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ce(t,n,_,h,l,d)}oe(t,X,W);return;case"option":for(var Ot in a)if(X=a[Ot],a.hasOwnProperty(Ot)&&X!=null&&!l.hasOwnProperty(Ot))switch(Ot){case"selected":t.selected=!1;break;default:ce(t,n,Ot,null,l,X)}for(j in l)if(X=l[j],W=a[j],l.hasOwnProperty(j)&&X!==W&&(X!=null||W!=null))switch(j){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ce(t,n,j,X,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in a)X=a[Vt],a.hasOwnProperty(Vt)&&X!=null&&!l.hasOwnProperty(Vt)&&ce(t,n,Vt,null,l,X);for($ in l)if(X=l[$],W=a[$],l.hasOwnProperty($)&&X!==W&&(X!=null||W!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:ce(t,n,$,X,l,W)}return;default:if(gl(n)){for(var he in a)X=a[he],a.hasOwnProperty(he)&&X!==void 0&&!l.hasOwnProperty(he)&&qf(t,n,he,void 0,l,X);for(nt in l)X=l[nt],W=a[nt],!l.hasOwnProperty(nt)||X===W||X===void 0&&W===void 0||qf(t,n,nt,X,l,W);return}}for(var H in a)X=a[H],a.hasOwnProperty(H)&&X!=null&&!l.hasOwnProperty(H)&&ce(t,n,H,null,l,X);for(st in l)X=l[st],W=a[st],!l.hasOwnProperty(st)||X===W||X==null&&W==null||ce(t,n,st,X,l,W)}var Hf=null,Gf=null;function Xu(t){return t.nodeType===9?t:t.ownerDocument}function Ry(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ff(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Qf=null;function x1(){var t=window.event;return t&&t.type==="popstate"?t===Qf?!1:(Qf=t,!0):(Qf=null,!1)}var Dy=typeof setTimeout=="function"?setTimeout:void 0,w1=typeof clearTimeout=="function"?clearTimeout:void 0,Iy=typeof Promise=="function"?Promise:void 0,R1=typeof queueMicrotask=="function"?queueMicrotask:typeof Iy<"u"?function(t){return Iy.resolve(null).then(t).catch(C1)}:Dy;function C1(t){setTimeout(function(){throw t})}function $r(t){return t==="head"}function Vy(t,n){var a=n,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&eo(_.documentElement),a&2&&eo(_.body),a&4)for(a=_.head,eo(a),_=a.firstChild;_;){var S=_.nextSibling,j=_.nodeName;_[Xi]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}if(h===0){t.removeChild(d),uo(n);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);uo(n)}function $f(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$f(a),z(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function D1(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Xi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=di(t.nextSibling),t===null)break}return null}function I1(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=di(t.nextSibling),t===null))return null;return t}function Yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function V1(t,n){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function di(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Kf=null;function Ny(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return t;n--}else a==="/$"&&n++}t=t.previousSibling}return null}function Oy(t,n,a){switch(n=Xu(a),t){case"html":if(t=n.documentElement,!t)throw Error(s(452));return t;case"head":if(t=n.head,!t)throw Error(s(453));return t;case"body":if(t=n.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function eo(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);z(t)}var ri=new Map,My=new Set;function Wu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var yr=Y.d;Y.d={f:N1,r:O1,D:M1,C:j1,L:U1,m:k1,X:P1,S:L1,M:z1};function N1(){var t=yr.f(),n=qu();return t||n}function O1(t){var n=at(t);n!==null&&n.tag===5&&n.type==="form"?tg(n):yr.r(t)}var Ps=typeof document>"u"?null:document;function jy(t,n,a){var l=Ps;if(l&&typeof n=="string"&&n){var h=Ve(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),My.has(h)||(My.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),rn(n,"link",t),mt(n),l.head.appendChild(n)))}}function M1(t){yr.D(t),jy("dns-prefetch",t,null)}function j1(t,n){yr.C(t,n),jy("preconnect",t,n)}function U1(t,n,a){yr.L(t,n,a);var l=Ps;if(l&&t&&n){var h='link[rel="preload"][as="'+Ve(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ve(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ve(a.imageSizes)+'"]')):h+='[href="'+Ve(t)+'"]';var d=h;switch(n){case"style":d=zs(t);break;case"script":d=Bs(t)}ri.has(d)||(t=b({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),ri.set(d,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(no(d))||n==="script"&&l.querySelector(io(d))||(n=l.createElement("link"),rn(n,"link",t),mt(n),l.head.appendChild(n)))}}function k1(t,n){yr.m(t,n);var a=Ps;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Ve(l)+'"][href="'+Ve(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Bs(t)}if(!ri.has(d)&&(t=b({rel:"modulepreload",href:t},n),ri.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(io(d)))return}l=a.createElement("link"),rn(l,"link",t),mt(l),a.head.appendChild(l)}}}function L1(t,n,a){yr.S(t,n,a);var l=Ps;if(l&&t){var h=ut(l).hoistableStyles,d=zs(t);n=n||"default";var _=h.get(d);if(!_){var S={loading:0,preload:null};if(_=l.querySelector(no(d)))S.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},a),(a=ri.get(d))&&Xf(t,a);var j=_=l.createElement("link");mt(j),rn(j,"link",t),j._p=new Promise(function($,nt){j.onload=$,j.onerror=nt}),j.addEventListener("load",function(){S.loading|=1}),j.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zu(_,n,l)}_={type:"stylesheet",instance:_,count:1,state:S},h.set(d,_)}}}function P1(t,n){yr.X(t,n);var a=Ps;if(a&&t){var l=ut(a).hoistableScripts,h=Bs(t),d=l.get(h);d||(d=a.querySelector(io(h)),d||(t=b({src:t,async:!0},n),(n=ri.get(h))&&Wf(t,n),d=a.createElement("script"),mt(d),rn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function z1(t,n){yr.M(t,n);var a=Ps;if(a&&t){var l=ut(a).hoistableScripts,h=Bs(t),d=l.get(h);d||(d=a.querySelector(io(h)),d||(t=b({src:t,async:!0,type:"module"},n),(n=ri.get(h))&&Wf(t,n),d=a.createElement("script"),mt(d),rn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Uy(t,n,a,l){var h=(h=Dt.current)?Wu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=zs(a.href),a=ut(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=zs(a.href);var d=ut(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(no(t)))&&!d._p&&(_.instance=d,_.state.loading=5),ri.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ri.set(t,a),d||B1(h,t,a,_.state))),n&&l===null)throw Error(s(528,""));return _}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Bs(a),a=ut(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function zs(t){return'href="'+Ve(t)+'"'}function no(t){return'link[rel="stylesheet"]['+t+"]"}function ky(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function B1(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),rn(n,"link",a),mt(n),t.head.appendChild(n))}function Bs(t){return'[src="'+Ve(t)+'"]'}function io(t){return"script[async]"+t}function Ly(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Ve(a.href)+'"]');if(l)return n.instance=l,mt(l),l;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),mt(l),rn(l,"style",h),Zu(l,a.precedence,t),n.instance=l;case"stylesheet":h=zs(a.href);var d=t.querySelector(no(h));if(d)return n.state.loading|=4,n.instance=d,mt(d),d;l=ky(a),(h=ri.get(h))&&Xf(l,h),d=(t.ownerDocument||t).createElement("link"),mt(d);var _=d;return _._p=new Promise(function(S,j){_.onload=S,_.onerror=j}),rn(d,"link",l),n.state.loading|=4,Zu(d,a.precedence,t),n.instance=d;case"script":return d=Bs(a.src),(h=t.querySelector(io(d)))?(n.instance=h,mt(h),h):(l=a,(h=ri.get(d))&&(l=b({},a),Wf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),mt(h),rn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Zu(l,a.precedence,t));return n.instance}function Zu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var S=l[_];if(S.dataset.precedence===n)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Xf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Wf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Ju=null;function Py(t,n,a){if(Ju===null){var l=new Map,h=Ju=new Map;h.set(a,l)}else h=Ju,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Xi]||d[Re]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(n)||"";_=t+_;var S=l.get(_);S?S.push(d):l.set(_,[d])}}return l}function zy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function q1(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function By(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ro=null;function H1(){}function G1(t,n,a){if(ro===null)throw Error(s(475));var l=ro;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=zs(a.href),d=t.querySelector(no(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=tc.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=d,mt(d);return}d=t.ownerDocument||t,a=ky(a),(h=ri.get(h))&&Xf(a,h),d=d.createElement("link"),mt(d);var _=d;_._p=new Promise(function(S,j){_.onload=S,_.onerror=j}),rn(d,"link",a),n.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=tc.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function F1(){if(ro===null)throw Error(s(475));var t=ro;return t.stylesheets&&t.count===0&&Zf(t,t.stylesheets),0<t.count?function(n){var a=setTimeout(function(){if(t.stylesheets&&Zf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a)}}:null}function tc(){if(this.count--,this.count===0){if(this.stylesheets)Zf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ec=null;function Zf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ec=new Map,n.forEach(Q1,t),ec=null,tc.call(t))}function Q1(t,n){if(!(n.state.loading&4)){var a=ec.get(t);if(a)var l=a.get(null);else{a=new Map,ec.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=n.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=tc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var ao={$$typeof:Q,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function $1(t,n,a,l,h,d,_,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=on(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=on(0),this.hiddenUpdates=on(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function qy(t,n,a,l,h,d,_,S,j,$,nt,st){return t=new $1(t,n,a,_,S,j,$,st),n=1,d===!0&&(n|=24),d=Mn(3,null,null,n),t.current=d,d.stateNode=t,n=Nh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:n},Uh(d),t}function Hy(t){return t?(t=vs,t):vs}function Gy(t,n,a,l,h,d){h=Hy(h),l.context===null?l.context=h:l.pendingContext=h,l=Mr(n),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=jr(t,l,n),a!==null&&(Pn(a,t,n),jl(a,t,n))}function Fy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Jf(t,n){Fy(t,n),(t=t.alternate)&&Fy(t,n)}function Qy(t){if(t.tag===13){var n=ys(t,67108864);n!==null&&Pn(n,t,67108864),Jf(t,67108864)}}var nc=!0;function Y1(t,n,a,l){var h=K.T;K.T=null;var d=Y.p;try{Y.p=2,td(t,n,a,l)}finally{Y.p=d,K.T=h}}function K1(t,n,a,l){var h=K.T;K.T=null;var d=Y.p;try{Y.p=8,td(t,n,a,l)}finally{Y.p=d,K.T=h}}function td(t,n,a,l){if(nc){var h=ed(l);if(h===null)Bf(t,n,l,ic,a),Yy(t,l);else if(W1(h,t,n,a,l))l.stopPropagation();else if(Yy(t,l),n&4&&-1<X1.indexOf(t)){for(;h!==null;){var d=at(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ze(d.pendingLanes);if(_!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var j=1<<31-We(_);S.entanglements[1]|=j,_&=~j}Ui(d),(se&6)===0&&(zu=Ue()+500,Zl(0))}}break;case 13:S=ys(d,2),S!==null&&Pn(S,d,2),qu(),Jf(d,2)}if(d=ed(l),d===null&&Bf(t,n,l,ic,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Bf(t,n,l,null,a)}}function ed(t){return t=Kn(t),nd(t)}var ic=null;function nd(t){if(ic=null,t=tt(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return ic=t,null}function $y(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xr()){case wr:return 2;case Rr:return 8;case vi:case Cr:return 32;case Gi:return 268435456;default:return 32}default:return 32}}var id=!1,Yr=null,Kr=null,Xr=null,so=new Map,lo=new Map,Wr=[],X1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yy(t,n){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":so.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(n.pointerId)}}function oo(t,n,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},n!==null&&(n=at(n),n!==null&&Qy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function W1(t,n,a,l,h){switch(n){case"focusin":return Yr=oo(Yr,t,n,a,l,h),!0;case"dragenter":return Kr=oo(Kr,t,n,a,l,h),!0;case"mouseover":return Xr=oo(Xr,t,n,a,l,h),!0;case"pointerover":var d=h.pointerId;return so.set(d,oo(so.get(d)||null,t,n,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,lo.set(d,oo(lo.get(d)||null,t,n,a,l,h)),!0}return!1}function Ky(t){var n=tt(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,ya(t.priority,function(){if(a.tag===13){var l=Ln();l=bi(l);var h=ys(a,l);h!==null&&Pn(h,a,l),Jf(a,l)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=ed(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ji=l,a.target.dispatchEvent(l),Ji=null}else return n=at(a),n!==null&&Qy(n),t.blockedOn=a,!1;n.shift()}return!0}function Xy(t,n,a){rc(t)&&a.delete(n)}function Z1(){id=!1,Yr!==null&&rc(Yr)&&(Yr=null),Kr!==null&&rc(Kr)&&(Kr=null),Xr!==null&&rc(Xr)&&(Xr=null),so.forEach(Xy),lo.forEach(Xy)}function ac(t,n){t.blockedOn===n&&(t.blockedOn=null,id||(id=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Z1)))}var sc=null;function Wy(t){sc!==t&&(sc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sc===t&&(sc=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(nd(l||a)===null)continue;break}var d=at(a);d!==null&&(t.splice(n,3),n-=3,ef(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function uo(t){function n(j){return ac(j,t)}Yr!==null&&ac(Yr,t),Kr!==null&&ac(Kr,t),Xr!==null&&ac(Xr,t),so.forEach(n),lo.forEach(n);for(var a=0;a<Wr.length;a++){var l=Wr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Wr.length&&(a=Wr[0],a.blockedOn===null);)Ky(a),a.blockedOn===null&&Wr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[Se]||null;if(typeof d=="function")_||Wy(a);else if(_){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Se]||null)S=_.formAction;else if(nd(h)!==null)continue}else S=_.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),Wy(a)}}}function rd(t){this._internalRoot=t}lc.prototype.render=rd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=Ln();Gy(a,l,t,n,null,null)},lc.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Gy(t.current,2,null,t,null,null),qu(),n[Tn]=null}};function lc(t){this._internalRoot=t}lc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ti();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Wr.length&&n!==0&&n<Wr[a].priority;a++);Wr.splice(a,0,t),a===0&&Ky(t)}};var Zy=e.version;if(Zy!=="19.1.0")throw Error(s(527,Zy,"19.1.0"));Y.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(n),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var J1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{fe=oc.inject(J1),te=oc}catch{}}return ho.createRoot=function(t,n){if(!o(t))throw Error(s(299));var a=!1,l="",h=mg,d=pg,_=gg,S=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(S=n.unstable_transitionCallbacks)),n=qy(t,1,!1,null,null,a,l,h,d,_,S,null),t[Tn]=n.current,zf(t),new rd(n)},ho.hydrateRoot=function(t,n,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=mg,_=pg,S=gg,j=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(j=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),n=qy(t,1,!0,n,a??null,l,h,d,_,S,j,$),n.context=Hy(null),a=n.current,l=Ln(),l=bi(l),h=Mr(l),h.callback=null,jr(a,h,l),a=l,n.current.lanes=a,Qn(n,a),Ui(n),t[Tn]=n.current,zf(t),new lc(n)},ho.version="19.1.0",ho}var ov;function hb(){if(ov)return ld.exports;ov=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ld.exports=cb(),ld.exports}var fb=hb(),fo={},uv;function db(){if(uv)return fo;uv=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.parse=f,fo.serialize=p;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function f(x,C){const I=new u,B=x.length;if(B<2)return I;const P=(C==null?void 0:C.decode)||b;let q=0;do{const Z=x.indexOf("=",q);if(Z===-1)break;const Q=x.indexOf(";",q),ft=Q===-1?B:Q;if(Z>ft){q=x.lastIndexOf(";",Z-1)+1;continue}const pt=m(x,q,Z),wt=y(x,Z,pt),k=x.slice(pt,wt);if(I[k]===void 0){let D=m(x,Z+1,ft),V=y(x,ft,D);const w=P(x.slice(D,V));I[k]=w}q=ft+1}while(q<B);return I}function m(x,C,I){do{const B=x.charCodeAt(C);if(B!==32&&B!==9)return C}while(++C<I);return I}function y(x,C,I){for(;C>I;){const B=x.charCodeAt(--C);if(B!==32&&B!==9)return C+1}return I}function p(x,C,I){const B=(I==null?void 0:I.encode)||encodeURIComponent;if(!r.test(x))throw new TypeError(`argument name is invalid: ${x}`);const P=B(C);if(!e.test(P))throw new TypeError(`argument val is invalid: ${C}`);let q=x+"="+P;if(!I)return q;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);q+="; Max-Age="+I.maxAge}if(I.domain){if(!i.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);q+="; Domain="+I.domain}if(I.path){if(!s.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);q+="; Path="+I.path}if(I.expires){if(!T(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);q+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(q+="; HttpOnly"),I.secure&&(q+="; Secure"),I.partitioned&&(q+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return q}function b(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function T(x){return o.call(x)==="[object Date]"}return fo}db();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cv="popstate";function mb(r={}){function e(o,u){let{pathname:f="/",search:m="",hash:y=""}=Xa(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Td("",{pathname:f,search:m,hash:y},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(o,u){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let y=o.location.href,p=y.indexOf("#");m=p===-1?y:y.slice(0,p)}return m+"#"+(typeof u=="string"?u:Ao(u))}function s(o,u){si(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return gb(e,i,s,r)}function ve(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function si(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pb(){return Math.random().toString(36).substring(2,10)}function hv(r,e){return{usr:r.state,key:r.key,idx:e}}function Td(r,e,i=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Xa(e):e,state:i,key:e&&e.key||s||pb()}}function Ao({pathname:r="/",search:e="",hash:i=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function Xa(r){let e={};if(r){let i=r.indexOf("#");i>=0&&(e.hash=r.substring(i),r=r.substring(0,i));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function gb(r,e,i,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",y=null,p=b();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function b(){return(f.state||{idx:null}).idx}function T(){m="POP";let P=b(),q=P==null?null:P-p;p=P,y&&y({action:m,location:B.location,delta:q})}function x(P,q){m="PUSH";let Z=Td(B.location,P,q);i&&i(Z,P),p=b()+1;let Q=hv(Z,p),ft=B.createHref(Z);try{f.pushState(Q,"",ft)}catch(pt){if(pt instanceof DOMException&&pt.name==="DataCloneError")throw pt;o.location.assign(ft)}u&&y&&y({action:m,location:B.location,delta:1})}function C(P,q){m="REPLACE";let Z=Td(B.location,P,q);i&&i(Z,P),p=b();let Q=hv(Z,p),ft=B.createHref(Z);f.replaceState(Q,"",ft),u&&y&&y({action:m,location:B.location,delta:0})}function I(P){let q=o.location.origin!=="null"?o.location.origin:o.location.href,Z=typeof P=="string"?P:Ao(P);return Z=Z.replace(/ $/,"%20"),ve(q,`No window.location.(origin|href) available to create URL for href: ${Z}`),new URL(Z,q)}let B={get action(){return m},get location(){return r(o,f)},listen(P){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(cv,T),y=P,()=>{o.removeEventListener(cv,T),y=null}},createHref(P){return e(o,P)},createURL:I,encodeLocation(P){let q=I(P);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:x,replace:C,go(P){return f.go(P)}};return B}function R_(r,e,i="/"){return yb(r,e,i,!1)}function yb(r,e,i,s){let o=typeof e=="string"?Xa(e):e,u=Er(o.pathname||"/",i);if(u==null)return null;let f=C_(r);vb(f);let m=null;for(let y=0;m==null&&y<f.length;++y){let p=Db(u);m=Rb(f[y],p,s)}return m}function C_(r,e=[],i=[],s=""){let o=(u,f,m)=>{let y={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};y.relativePath.startsWith("/")&&(ve(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length));let p=vr([s,y.relativePath]),b=i.concat(y);u.children&&u.children.length>0&&(ve(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),C_(u.children,e,b,p)),!(u.path==null&&!u.index)&&e.push({path:p,score:xb(p,u.index),routesMeta:b})};return r.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let y of D_(u.path))o(u,f,y)}),e}function D_(r){let e=r.split("/");if(e.length===0)return[];let[i,...s]=e,o=i.endsWith("?"),u=i.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=D_(s.join("/")),m=[];return m.push(...f.map(y=>y===""?u:[u,y].join("/"))),o&&m.push(...f),m.map(y=>r.startsWith("/")&&y===""?"/":y)}function vb(r){r.sort((e,i)=>e.score!==i.score?i.score-e.score:wb(e.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var _b=/^:[\w-]+$/,Eb=3,bb=2,Tb=1,Sb=10,Ab=-2,fv=r=>r==="*";function xb(r,e){let i=r.split("/"),s=i.length;return i.some(fv)&&(s+=Ab),e&&(s+=bb),i.filter(o=>!fv(o)).reduce((o,u)=>o+(_b.test(u)?Eb:u===""?Tb:Sb),s)}function wb(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Rb(r,e,i=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let y=s[m],p=m===s.length-1,b=u==="/"?e:e.slice(u.length)||"/",T=xc({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},b),x=y.route;if(!T&&p&&i&&!s[s.length-1].route.index&&(T=xc({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},b)),!T)return null;Object.assign(o,T.params),f.push({params:o,pathname:vr([u,T.pathname]),pathnameBase:Ob(vr([u,T.pathnameBase])),route:x}),T.pathnameBase!=="/"&&(u=vr([u,T.pathnameBase]))}return f}function xc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,s]=Cb(r.path,r.caseSensitive,r.end),o=e.match(i);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((p,{paramName:b,isOptional:T},x)=>{if(b==="*"){let I=m[x]||"";f=u.slice(0,u.length-I.length).replace(/(.)\/+$/,"$1")}const C=m[x];return T&&!C?p[b]=void 0:p[b]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:f,pattern:r}}function Cb(r,e=!1,i=!0){si(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,y)=>(s.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Db(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Er(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,s=r.charAt(i);return s&&s!=="/"?null:r.slice(i)||"/"}function Ib(r,e="/"){let{pathname:i,search:s="",hash:o=""}=typeof r=="string"?Xa(r):r;return{pathname:i?i.startsWith("/")?i:Vb(i,e):e,search:Mb(s),hash:jb(o)}}function Vb(r,e){let i=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function hd(r,e,i,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nb(r){return r.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function Yd(r){let e=Nb(r);return e.map((i,s)=>s===e.length-1?i.pathname:i.pathnameBase)}function Kd(r,e,i,s=!1){let o;typeof r=="string"?o=Xa(r):(o={...r},ve(!o.pathname||!o.pathname.includes("?"),hd("?","pathname","search",o)),ve(!o.pathname||!o.pathname.includes("#"),hd("#","pathname","hash",o)),ve(!o.search||!o.search.includes("#"),hd("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=i;else{let T=e.length-1;if(!s&&f.startsWith("..")){let x=f.split("/");for(;x[0]==="..";)x.shift(),T-=1;o.pathname=x.join("/")}m=T>=0?e[T]:"/"}let y=Ib(o,m),p=f&&f!=="/"&&f.endsWith("/"),b=(u||f===".")&&i.endsWith("/");return!y.pathname.endsWith("/")&&(p||b)&&(y.pathname+="/"),y}var vr=r=>r.join("/").replace(/\/\/+/g,"/"),Ob=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Mb=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jb=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Ub(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var I_=["POST","PUT","PATCH","DELETE"];new Set(I_);var kb=["GET",...I_];new Set(kb);var il=O.createContext(null);il.displayName="DataRouter";var qc=O.createContext(null);qc.displayName="DataRouterState";var V_=O.createContext({isTransitioning:!1});V_.displayName="ViewTransition";var Lb=O.createContext(new Map);Lb.displayName="Fetchers";var Pb=O.createContext(null);Pb.displayName="Await";var gi=O.createContext(null);gi.displayName="Navigation";var Mo=O.createContext(null);Mo.displayName="Location";var qi=O.createContext({outlet:null,matches:[],isDataRoute:!1});qi.displayName="Route";var Xd=O.createContext(null);Xd.displayName="RouteError";function zb(r,{relative:e}={}){ve(rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=O.useContext(gi),{hash:o,pathname:u,search:f}=Uo(r,{relative:e}),m=u;return i!=="/"&&(m=u==="/"?i:vr([i,u])),s.createHref({pathname:m,search:f,hash:o})}function rl(){return O.useContext(Mo)!=null}function Ar(){return ve(rl(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Mo).location}var N_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function O_(r){O.useContext(gi).static||O.useLayoutEffect(r)}function jo(){let{isDataRoute:r}=O.useContext(qi);return r?Jb():Bb()}function Bb(){ve(rl(),"useNavigate() may be used only in the context of a <Router> component.");let r=O.useContext(il),{basename:e,navigator:i}=O.useContext(gi),{matches:s}=O.useContext(qi),{pathname:o}=Ar(),u=JSON.stringify(Yd(s)),f=O.useRef(!1);return O_(()=>{f.current=!0}),O.useCallback((y,p={})=>{if(si(f.current,N_),!f.current)return;if(typeof y=="number"){i.go(y);return}let b=Kd(y,JSON.parse(u),o,p.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:vr([e,b.pathname])),(p.replace?i.replace:i.push)(b,p.state,p)},[e,i,u,o,r])}O.createContext(null);function Uo(r,{relative:e}={}){let{matches:i}=O.useContext(qi),{pathname:s}=Ar(),o=JSON.stringify(Yd(i));return O.useMemo(()=>Kd(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function qb(r,e){return M_(r,e)}function M_(r,e,i,s){var Z;ve(rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=O.useContext(gi),{matches:f}=O.useContext(qi),m=f[f.length-1],y=m?m.params:{},p=m?m.pathname:"/",b=m?m.pathnameBase:"/",T=m&&m.route;{let Q=T&&T.path||"";j_(p,!T||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let x=Ar(),C;if(e){let Q=typeof e=="string"?Xa(e):e;ve(b==="/"||((Z=Q.pathname)==null?void 0:Z.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),C=Q}else C=x;let I=C.pathname||"/",B=I;if(b!=="/"){let Q=b.replace(/^\//,"").split("/");B="/"+I.replace(/^\//,"").split("/").slice(Q.length).join("/")}let P=!u&&i&&i.matches&&i.matches.length>0?i.matches:R_(r,{pathname:B});si(T||P!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),si(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=$b(P&&P.map(Q=>Object.assign({},Q,{params:Object.assign({},y,Q.params),pathname:vr([b,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?b:vr([b,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),f,i,s);return e&&q?O.createElement(Mo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},q):q}function Hb(){let r=Zb(),e=Ub(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:u},"ErrorBoundary")," or"," ",O.createElement("code",{style:u},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),i?O.createElement("pre",{style:o},i):null,f)}var Gb=O.createElement(Hb,null),Fb=class extends O.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?O.createElement(qi.Provider,{value:this.props.routeContext},O.createElement(Xd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qb({routeContext:r,match:e,children:i}){let s=O.useContext(il);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(qi.Provider,{value:r},i)}function $b(r,e=[],i=null,s=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let o=r,u=i==null?void 0:i.errors;if(u!=null){let y=o.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);ve(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let f=!1,m=-1;if(i)for(let y=0;y<o.length;y++){let p=o[y];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=y),p.route.id){let{loaderData:b,errors:T}=i,x=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||x){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((y,p,b)=>{let T,x=!1,C=null,I=null;i&&(T=u&&p.route.id?u[p.route.id]:void 0,C=p.route.errorElement||Gb,f&&(m<0&&b===0?(j_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,I=null):m===b&&(x=!0,I=p.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,b+1)),P=()=>{let q;return T?q=C:x?q=I:p.route.Component?q=O.createElement(p.route.Component,null):p.route.element?q=p.route.element:q=y,O.createElement(Qb,{match:p,routeContext:{outlet:y,matches:B,isDataRoute:i!=null},children:q})};return i&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?O.createElement(Fb,{location:i.location,revalidation:i.revalidation,component:C,error:T,children:P(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):P()},null)}function Wd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yb(r){let e=O.useContext(il);return ve(e,Wd(r)),e}function Kb(r){let e=O.useContext(qc);return ve(e,Wd(r)),e}function Xb(r){let e=O.useContext(qi);return ve(e,Wd(r)),e}function Zd(r){let e=Xb(r),i=e.matches[e.matches.length-1];return ve(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function Wb(){return Zd("useRouteId")}function Zb(){var s;let r=O.useContext(Xd),e=Kb("useRouteError"),i=Zd("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[i]}function Jb(){let{router:r}=Yb("useNavigate"),e=Zd("useNavigate"),i=O.useRef(!1);return O_(()=>{i.current=!0}),O.useCallback(async(o,u={})=>{si(i.current,N_),i.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var dv={};function j_(r,e,i){!e&&!dv[r]&&(dv[r]=!0,si(!1,i))}O.memo(tT);function tT({routes:r,future:e,state:i}){return M_(r,void 0,i,e)}function mi({to:r,replace:e,state:i,relative:s}){ve(rl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=O.useContext(gi);si(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=O.useContext(qi),{pathname:f}=Ar(),m=jo(),y=Kd(r,Yd(u),f,s==="path"),p=JSON.stringify(y);return O.useEffect(()=>{m(JSON.parse(p),{replace:e,state:i,relative:s})},[m,p,s,e,i]),null}function ai(r){ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eT({basename:r="/",children:e=null,location:i,navigationType:s="POP",navigator:o,static:u=!1}){ve(!rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof i=="string"&&(i=Xa(i));let{pathname:y="/",search:p="",hash:b="",state:T=null,key:x="default"}=i,C=O.useMemo(()=>{let I=Er(y,f);return I==null?null:{location:{pathname:I,search:p,hash:b,state:T,key:x},navigationType:s}},[f,y,p,b,T,x,s]);return si(C!=null,`<Router basename="${f}"> is not able to match the URL "${y}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:O.createElement(gi.Provider,{value:m},O.createElement(Mo.Provider,{children:e,value:C}))}function nT({children:r,location:e}){return qb(Sd(r),e)}function Sd(r,e=[]){let i=[];return O.Children.forEach(r,(s,o)=>{if(!O.isValidElement(s))return;let u=[...e,o];if(s.type===O.Fragment){i.push.apply(i,Sd(s.props.children,u));return}ve(s.type===ai,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ve(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Sd(s.props.children,u)),i.push(f)}),i}var yc="get",vc="application/x-www-form-urlencoded";function Hc(r){return r!=null&&typeof r.tagName=="string"}function iT(r){return Hc(r)&&r.tagName.toLowerCase()==="button"}function rT(r){return Hc(r)&&r.tagName.toLowerCase()==="form"}function aT(r){return Hc(r)&&r.tagName.toLowerCase()==="input"}function sT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function lT(r,e){return r.button===0&&(!e||e==="_self")&&!sT(r)}var uc=null;function oT(){if(uc===null)try{new FormData(document.createElement("form"),0),uc=!1}catch{uc=!0}return uc}var uT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fd(r){return r!=null&&!uT.has(r)?(si(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):r}function cT(r,e){let i,s,o,u,f;if(rT(r)){let m=r.getAttribute("action");s=m?Er(m,e):null,i=r.getAttribute("method")||yc,o=fd(r.getAttribute("enctype"))||vc,u=new FormData(r)}else if(iT(r)||aT(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=r.getAttribute("formaction")||m.getAttribute("action");if(s=y?Er(y,e):null,i=r.getAttribute("formmethod")||m.getAttribute("method")||yc,o=fd(r.getAttribute("formenctype"))||fd(m.getAttribute("enctype"))||vc,u=new FormData(m,r),!oT()){let{name:p,type:b,value:T}=r;if(b==="image"){let x=p?`${p}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else p&&u.append(p,T)}}else{if(Hc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=yc,s=null,o=vc,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:i.toLowerCase(),encType:o,formData:u,body:f}}function Jd(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function hT(r,e){if(r.id in e)return e[r.id];try{let i=await import(r.module);return e[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function dT(r,e,i){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await hT(u,i);return f.links?f.links():[]}return[]}));return yT(s.flat(1).filter(fT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function mv(r,e,i,s,o,u){let f=(y,p)=>i[p]?y.route.id!==i[p].route.id:!0,m=(y,p)=>{var b;return i[p].pathname!==y.pathname||((b=i[p].route.path)==null?void 0:b.endsWith("*"))&&i[p].params["*"]!==y.params["*"]};return u==="assets"?e.filter((y,p)=>f(y,p)||m(y,p)):u==="data"?e.filter((y,p)=>{var T;let b=s.routes[y.route.id];if(!b||!b.hasLoader)return!1;if(f(y,p)||m(y,p))return!0;if(y.route.shouldRevalidate){let x=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=i[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function mT(r,e,{includeHydrateFallback:i}={}){return pT(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function pT(r){return[...new Set(r)]}function gT(r){let e={},i=Object.keys(r).sort();for(let s of i)e[s]=r[s];return e}function yT(r,e){let i=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(gT(o));return i.has(u)||(i.add(u),s.push({key:u,link:o})),s},[])}var vT=new Set([100,101,204,205]);function _T(r,e){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname="_root.data":e&&Er(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function U_(){let r=O.useContext(il);return Jd(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function ET(){let r=O.useContext(qc);return Jd(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var tm=O.createContext(void 0);tm.displayName="FrameworkContext";function k_(){let r=O.useContext(tm);return Jd(r,"You must render this element inside a <HydratedRouter> element"),r}function bT(r,e){let i=O.useContext(tm),[s,o]=O.useState(!1),[u,f]=O.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:p,onMouseLeave:b,onTouchStart:T}=e,x=O.useRef(null);O.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let B=q=>{q.forEach(Z=>{f(Z.isIntersecting)})},P=new IntersectionObserver(B,{threshold:.5});return x.current&&P.observe(x.current),()=>{P.disconnect()}}},[r]),O.useEffect(()=>{if(s){let B=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(B)}}},[s]);let C=()=>{o(!0)},I=()=>{o(!1),f(!1)};return i?r!=="intent"?[u,x,{}]:[u,x,{onFocus:mo(m,C),onBlur:mo(y,I),onMouseEnter:mo(p,C),onMouseLeave:mo(b,I),onTouchStart:mo(T,C)}]:[!1,x,{}]}function mo(r,e){return i=>{r&&r(i),i.defaultPrevented||e(i)}}function TT({page:r,...e}){let{router:i}=U_(),s=O.useMemo(()=>R_(i.routes,r,i.basename),[i.routes,r,i.basename]);return s?O.createElement(AT,{page:r,matches:s,...e}):null}function ST(r){let{manifest:e,routeModules:i}=k_(),[s,o]=O.useState([]);return O.useEffect(()=>{let u=!1;return dT(r,e,i).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,i]),s}function AT({page:r,matches:e,...i}){let s=Ar(),{manifest:o,routeModules:u}=k_(),{basename:f}=U_(),{loaderData:m,matches:y}=ET(),p=O.useMemo(()=>mv(r,e,y,o,s,"data"),[r,e,y,o,s]),b=O.useMemo(()=>mv(r,e,y,o,s,"assets"),[r,e,y,o,s]),T=O.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let I=new Set,B=!1;if(e.forEach(q=>{var Q;let Z=o.routes[q.route.id];!Z||!Z.hasLoader||(!p.some(ft=>ft.route.id===q.route.id)&&q.route.id in m&&((Q=u[q.route.id])!=null&&Q.shouldRevalidate)||Z.hasClientLoader?B=!0:I.add(q.route.id))}),I.size===0)return[];let P=_T(r,f);return B&&I.size>0&&P.searchParams.set("_routes",e.filter(q=>I.has(q.route.id)).map(q=>q.route.id).join(",")),[P.pathname+P.search]},[f,m,s,o,p,e,r,u]),x=O.useMemo(()=>mT(b,o),[b,o]),C=ST(b);return O.createElement(O.Fragment,null,T.map(I=>O.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...i})),x.map(I=>O.createElement("link",{key:I,rel:"modulepreload",href:I,...i})),C.map(({key:I,link:B})=>O.createElement("link",{key:I,...B})))}function xT(...r){return e=>{r.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var L_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{L_&&(window.__reactRouterVersion="7.5.1")}catch{}function wT({basename:r,children:e,window:i}){let s=O.useRef();s.current==null&&(s.current=mb({window:i,v5Compat:!0}));let o=s.current,[u,f]=O.useState({action:o.action,location:o.location}),m=O.useCallback(y=>{O.startTransition(()=>f(y))},[f]);return O.useLayoutEffect(()=>o.listen(m),[o,m]),O.createElement(eT,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var P_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z_=O.forwardRef(function({onClick:e,discover:i="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:y,to:p,preventScrollReset:b,viewTransition:T,...x},C){let{basename:I}=O.useContext(gi),B=typeof p=="string"&&P_.test(p),P,q=!1;if(typeof p=="string"&&B&&(P=p,L_))try{let V=new URL(window.location.href),w=p.startsWith("//")?new URL(V.protocol+p):new URL(p),N=Er(w.pathname,I);w.origin===V.origin&&N!=null?p=N+w.search+w.hash:q=!0}catch{si(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=zb(p,{relative:o}),[Q,ft,pt]=bT(s,x),wt=DT(p,{replace:f,state:m,target:y,preventScrollReset:b,relative:o,viewTransition:T});function k(V){e&&e(V),V.defaultPrevented||wt(V)}let D=O.createElement("a",{...x,...pt,href:P||Z,onClick:q||u?e:k,ref:xT(C,ft),target:y,"data-discover":!B&&i==="render"?"true":void 0});return Q&&!B?O.createElement(O.Fragment,null,D,O.createElement(TT,{page:Z})):D});z_.displayName="Link";var B_=O.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:y,...p},b){let T=Uo(f,{relative:p.relative}),x=Ar(),C=O.useContext(qc),{navigator:I,basename:B}=O.useContext(gi),P=C!=null&&MT(T)&&m===!0,q=I.encodeLocation?I.encodeLocation(T).pathname:T.pathname,Z=x.pathname,Q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(Z=Z.toLowerCase(),Q=Q?Q.toLowerCase():null,q=q.toLowerCase()),Q&&B&&(Q=Er(Q,B)||Q);const ft=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let pt=Z===q||!o&&Z.startsWith(q)&&Z.charAt(ft)==="/",wt=Q!=null&&(Q===q||!o&&Q.startsWith(q)&&Q.charAt(q.length)==="/"),k={isActive:pt,isPending:wt,isTransitioning:P},D=pt?e:void 0,V;typeof s=="function"?V=s(k):V=[s,pt?"active":null,wt?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let w=typeof u=="function"?u(k):u;return O.createElement(z_,{...p,"aria-current":D,className:V,ref:b,style:w,to:f,viewTransition:m},typeof y=="function"?y(k):y)});B_.displayName="NavLink";var RT=O.forwardRef(({discover:r="render",fetcherKey:e,navigate:i,reloadDocument:s,replace:o,state:u,method:f=yc,action:m,onSubmit:y,relative:p,preventScrollReset:b,viewTransition:T,...x},C)=>{let I=NT(),B=OT(m,{relative:p}),P=f.toLowerCase()==="get"?"get":"post",q=typeof m=="string"&&P_.test(m),Z=Q=>{if(y&&y(Q),Q.defaultPrevented)return;Q.preventDefault();let ft=Q.nativeEvent.submitter,pt=(ft==null?void 0:ft.getAttribute("formmethod"))||f;I(ft||Q.currentTarget,{fetcherKey:e,method:pt,navigate:i,replace:o,state:u,relative:p,preventScrollReset:b,viewTransition:T})};return O.createElement("form",{ref:C,method:P,action:B,onSubmit:s?y:Z,...x,"data-discover":!q&&r==="render"?"true":void 0})});RT.displayName="Form";function CT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q_(r){let e=O.useContext(il);return ve(e,CT(r)),e}function DT(r,{target:e,replace:i,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=jo(),y=Ar(),p=Uo(r,{relative:u});return O.useCallback(b=>{if(lT(b,e)){b.preventDefault();let T=i!==void 0?i:Ao(y)===Ao(p);m(r,{replace:T,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[y,m,p,i,s,e,r,o,u,f])}var IT=0,VT=()=>`__${String(++IT)}__`;function NT(){let{router:r}=q_("useSubmit"),{basename:e}=O.useContext(gi),i=Wb();return O.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:y,body:p}=cT(s,e);if(o.navigate===!1){let b=o.fetcherKey||VT();await r.fetch(b,i,o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,i])}function OT(r,{relative:e}={}){let{basename:i}=O.useContext(gi),s=O.useContext(qi);ve(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Uo(r||".",{relative:e})},f=Ar();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),y=m.getAll("index");if(y.some(b=>b==="")){m.delete("index"),y.filter(T=>T).forEach(T=>m.append("index",T));let b=m.toString();u.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:vr([i,u.pathname])),Ao(u)}function MT(r,e={}){let i=O.useContext(V_);ve(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=q_("useViewTransitionState"),o=Uo(r,{relative:e.relative});if(!i.isTransitioning)return!1;let u=Er(i.currentLocation.pathname,s)||i.currentLocation.pathname,f=Er(i.nextLocation.pathname,s)||i.nextLocation.pathname;return xc(o.pathname,f)!=null||xc(o.pathname,u)!=null}new TextEncoder;[...vT];const jT=()=>{};var pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=function(r){const e=[];let i=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},UT=function(r){const e=[];let i=0,s=0;for(;i<r.length;){const o=r[i++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[i++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[i++],f=r[i++],m=r[i++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=r[i++],f=r[i++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},G_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,y=o+2<r.length,p=y?r[o+2]:0,b=u>>2,T=(u&3)<<4|m>>4;let x=(m&15)<<2|p>>6,C=p&63;y||(C=64,f||(x=64)),s.push(i[b],i[T],i[x],i[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(H_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):UT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=i[r.charAt(o++)],m=o<r.length?i[r.charAt(o)]:0;++o;const p=o<r.length?i[r.charAt(o)]:64;++o;const T=o<r.length?i[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new kT;const x=u<<2|m>>4;if(s.push(x),p!==64){const C=m<<4&240|p>>2;if(s.push(C),T!==64){const I=p<<6&192|T;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class kT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LT=function(r){const e=H_(r);return G_.encodeByteArray(e,!0)},wc=function(r){return LT(r).replace(/\./g,"")},PT=function(r){try{return G_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=()=>zT().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof pv>"u")return;const r=pv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},HT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&PT(r[1]);return e&&JSON.parse(e)},em=()=>{try{return jT()||BT()||qT()||HT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},GT=r=>{var e,i;return(i=(e=em())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[r]},FT=r=>{const e=GT(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),s]:[e.substring(0,i),s]},F_=()=>{var r;return(r=em())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[wc(JSON.stringify(i)),wc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){var r;const e=(r=em())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XT(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WT(){try{return typeof indexedDB=="object"}catch{return!1}}function ZT(){return new Promise((r,e)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="FirebaseError";class al extends Error{constructor(e,i,s){super(i),this.code=e,this.customData=s,this.name=JT,Object.setPrototypeOf(this,al.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Q_.prototype.create)}}class Q_{constructor(e,i,s){this.service=e,this.serviceName=i,this.errors=s}create(e,...i){const s=i[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?tS(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new al(o,m,s)}}function tS(r,e){return r.replace(eS,(i,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const eS=/\{\$([^}]+)}/g;function Rc(r,e){if(r===e)return!0;const i=Object.keys(r),s=Object.keys(e);for(const o of i){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(gv(u)&&gv(f)){if(!Rc(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!i.includes(o))return!1;return!0}function gv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(r){return r&&r._delegate?r._delegate:r}class xo{constructor(e,i,s){this.name=e,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const s=new QT;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rS(e))try{this.getOrInitializeService({instanceIdentifier:Qa})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qa){return this.instances.has(e)}getOptions(e=Qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,i){var s;const o=this.normalizeInstanceIdentifier(i),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,i){const s=this.onInitCallbacks.get(i);if(s)for(const o of s)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iS(e),options:i}),this.instances.set(e,s),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qa){return this.component?this.component.multipleInstances?e:Qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iS(r){return r===Qa?void 0:r}function rS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new nS(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Wt||(Wt={}));const sS={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},lS=Wt.INFO,oS={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},uS=(r,e,...i)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=oS[e];if(o)console[o](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $_{constructor(e){this.name=e,this._logLevel=lS,this._logHandler=uS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...e),this._logHandler(this,Wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...e),this._logHandler(this,Wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...e),this._logHandler(this,Wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...e),this._logHandler(this,Wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...e),this._logHandler(this,Wt.ERROR,...e)}}const cS=(r,e)=>e.some(i=>r instanceof i);let yv,vv;function hS(){return yv||(yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fS(){return vv||(vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y_=new WeakMap,Ad=new WeakMap,K_=new WeakMap,dd=new WeakMap,nm=new WeakMap;function dS(r){const e=new Promise((i,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{i(ta(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&Y_.set(i,r)}).catch(()=>{}),nm.set(e,r),e}function mS(r){if(Ad.has(r))return;const e=new Promise((i,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Ad.set(r,e)}let xd={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return Ad.get(r);if(e==="objectStoreNames")return r.objectStoreNames||K_.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ta(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function pS(r){xd=r(xd)}function gS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const s=r.call(md(this),e,...i);return K_.set(s,e.sort?e.sort():[e]),ta(s)}:fS().includes(r)?function(...e){return r.apply(md(this),e),ta(Y_.get(this))}:function(...e){return ta(r.apply(md(this),e))}}function yS(r){return typeof r=="function"?gS(r):(r instanceof IDBTransaction&&mS(r),cS(r,hS())?new Proxy(r,xd):r)}function ta(r){if(r instanceof IDBRequest)return dS(r);if(dd.has(r))return dd.get(r);const e=yS(r);return e!==r&&(dd.set(r,e),nm.set(e,r)),e}const md=r=>nm.get(r);function vS(r,e,{blocked:i,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=ta(f);return s&&f.addEventListener("upgradeneeded",y=>{s(ta(f.result),y.oldVersion,y.newVersion,ta(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const _S=["get","getKey","getAll","getAllKeys","count"],ES=["put","add","delete","clear"],pd=new Map;function _v(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const i=e.replace(/FromIndex$/,""),s=e!==i,o=ES.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(o||_S.includes(i)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let p=y.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[i](...m),o&&y.done]))[0]};return pd.set(e,u),u}pS(r=>({...r,get:(e,i,s)=>_v(e,i)||r.get(e,i,s),has:(e,i)=>!!_v(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(TS(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function TS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wd="@firebase/app",Ev="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new $_("@firebase/app"),SS="@firebase/app-compat",AS="@firebase/analytics-compat",xS="@firebase/analytics",wS="@firebase/app-check-compat",RS="@firebase/app-check",CS="@firebase/auth",DS="@firebase/auth-compat",IS="@firebase/database",VS="@firebase/data-connect",NS="@firebase/database-compat",OS="@firebase/functions",MS="@firebase/functions-compat",jS="@firebase/installations",US="@firebase/installations-compat",kS="@firebase/messaging",LS="@firebase/messaging-compat",PS="@firebase/performance",zS="@firebase/performance-compat",BS="@firebase/remote-config",qS="@firebase/remote-config-compat",HS="@firebase/storage",GS="@firebase/storage-compat",FS="@firebase/firestore",QS="@firebase/vertexai",$S="@firebase/firestore-compat",YS="firebase",KS="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="[DEFAULT]",XS={[wd]:"fire-core",[SS]:"fire-core-compat",[xS]:"fire-analytics",[AS]:"fire-analytics-compat",[RS]:"fire-app-check",[wS]:"fire-app-check-compat",[CS]:"fire-auth",[DS]:"fire-auth-compat",[IS]:"fire-rtdb",[VS]:"fire-data-connect",[NS]:"fire-rtdb-compat",[OS]:"fire-fn",[MS]:"fire-fn-compat",[jS]:"fire-iid",[US]:"fire-iid-compat",[kS]:"fire-fcm",[LS]:"fire-fcm-compat",[PS]:"fire-perf",[zS]:"fire-perf-compat",[BS]:"fire-rc",[qS]:"fire-rc-compat",[HS]:"fire-gcs",[GS]:"fire-gcs-compat",[FS]:"fire-fst",[$S]:"fire-fst-compat",[QS]:"fire-vertex","fire-js":"fire-js",[YS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,WS=new Map,Cd=new Map;function bv(r,e){try{r.container.addComponent(e)}catch(i){br.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function Dc(r){const e=r.name;if(Cd.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Cd.set(e,r);for(const i of Cc.values())bv(i,r);for(const i of WS.values())bv(i,r);return!0}function ZS(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function JS(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ea=new Q_("app","Firebase",tA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,i,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=KS;function X_(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Rd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw ea.create("bad-app-name",{appName:String(o)});if(i||(i=F_()),!i)throw ea.create("no-options");const u=Cc.get(o);if(u){if(Rc(i,u.options)&&Rc(s,u.config))return u;throw ea.create("duplicate-app",{appName:o})}const f=new aS(o);for(const y of Cd.values())f.addComponent(y);const m=new eA(i,s,f);return Cc.set(o,m),m}function iA(r=Rd){const e=Cc.get(r);if(!e&&r===Rd&&F_())return X_();if(!e)throw ea.create("no-app",{appName:r});return e}function Ys(r,e,i){var s;let o=(s=XS[r])!==null&&s!==void 0?s:r;i&&(o+=`-${i}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(m.join(" "));return}Dc(new xo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebase-heartbeat-database",aA=1,wo="firebase-heartbeat-store";let gd=null;function W_(){return gd||(gd=vS(rA,aA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(wo)}catch(i){console.warn(i)}}}}).catch(r=>{throw ea.create("idb-open",{originalErrorMessage:r.message})})),gd}async function sA(r){try{const i=(await W_()).transaction(wo),s=await i.objectStore(wo).get(Z_(r));return await i.done,s}catch(e){if(e instanceof al)br.warn(e.message);else{const i=ea.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(i.message)}}}async function Tv(r,e){try{const s=(await W_()).transaction(wo,"readwrite");await s.objectStore(wo).put(e,Z_(r)),await s.done}catch(i){if(i instanceof al)br.warn(i.message);else{const s=ea.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});br.warn(s.message)}}}function Z_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=1024,oA=30;class uA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new hA(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Sv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>oA){const f=fA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){br.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Sv(),{heartbeatsToSend:s,unsentEntries:o}=cA(this._heartbeatsCache.heartbeats),u=wc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return br.warn(i),""}}}function Sv(){return new Date().toISOString().substring(0,10)}function cA(r,e=lA){const i=[];let s=r.slice();for(const o of r){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Av(i)>e){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Av(i)>e){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class hA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WT()?ZT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await sA(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Av(r){return wc(JSON.stringify({version:2,heartbeats:r})).length}function fA(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(r){Dc(new xo("platform-logger",e=>new bS(e),"PRIVATE")),Dc(new xo("heartbeat",e=>new uA(e),"PRIVATE")),Ys(wd,Ev,r),Ys(wd,Ev,"esm2017"),Ys("fire-js","")}dA("");var mA="firebase",pA="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(mA,pA,"app");var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var na,J_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,D){function V(){}V.prototype=D.prototype,k.D=D.prototype,k.prototype=new V,k.prototype.constructor=k,k.C=function(w,N,M){for(var R=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)R[_t-2]=arguments[_t];return D.prototype[N].apply(w,R)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,i),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,D,V){V||(V=0);var w=Array(16);if(typeof D=="string")for(var N=0;16>N;++N)w[N]=D.charCodeAt(V++)|D.charCodeAt(V++)<<8|D.charCodeAt(V++)<<16|D.charCodeAt(V++)<<24;else for(N=0;16>N;++N)w[N]=D[V++]|D[V++]<<8|D[V++]<<16|D[V++]<<24;D=k.g[0],V=k.g[1],N=k.g[2];var M=k.g[3],R=D+(M^V&(N^M))+w[0]+3614090360&4294967295;D=V+(R<<7&4294967295|R>>>25),R=M+(N^D&(V^N))+w[1]+3905402710&4294967295,M=D+(R<<12&4294967295|R>>>20),R=N+(V^M&(D^V))+w[2]+606105819&4294967295,N=M+(R<<17&4294967295|R>>>15),R=V+(D^N&(M^D))+w[3]+3250441966&4294967295,V=N+(R<<22&4294967295|R>>>10),R=D+(M^V&(N^M))+w[4]+4118548399&4294967295,D=V+(R<<7&4294967295|R>>>25),R=M+(N^D&(V^N))+w[5]+1200080426&4294967295,M=D+(R<<12&4294967295|R>>>20),R=N+(V^M&(D^V))+w[6]+2821735955&4294967295,N=M+(R<<17&4294967295|R>>>15),R=V+(D^N&(M^D))+w[7]+4249261313&4294967295,V=N+(R<<22&4294967295|R>>>10),R=D+(M^V&(N^M))+w[8]+1770035416&4294967295,D=V+(R<<7&4294967295|R>>>25),R=M+(N^D&(V^N))+w[9]+2336552879&4294967295,M=D+(R<<12&4294967295|R>>>20),R=N+(V^M&(D^V))+w[10]+4294925233&4294967295,N=M+(R<<17&4294967295|R>>>15),R=V+(D^N&(M^D))+w[11]+2304563134&4294967295,V=N+(R<<22&4294967295|R>>>10),R=D+(M^V&(N^M))+w[12]+1804603682&4294967295,D=V+(R<<7&4294967295|R>>>25),R=M+(N^D&(V^N))+w[13]+4254626195&4294967295,M=D+(R<<12&4294967295|R>>>20),R=N+(V^M&(D^V))+w[14]+2792965006&4294967295,N=M+(R<<17&4294967295|R>>>15),R=V+(D^N&(M^D))+w[15]+1236535329&4294967295,V=N+(R<<22&4294967295|R>>>10),R=D+(N^M&(V^N))+w[1]+4129170786&4294967295,D=V+(R<<5&4294967295|R>>>27),R=M+(V^N&(D^V))+w[6]+3225465664&4294967295,M=D+(R<<9&4294967295|R>>>23),R=N+(D^V&(M^D))+w[11]+643717713&4294967295,N=M+(R<<14&4294967295|R>>>18),R=V+(M^D&(N^M))+w[0]+3921069994&4294967295,V=N+(R<<20&4294967295|R>>>12),R=D+(N^M&(V^N))+w[5]+3593408605&4294967295,D=V+(R<<5&4294967295|R>>>27),R=M+(V^N&(D^V))+w[10]+38016083&4294967295,M=D+(R<<9&4294967295|R>>>23),R=N+(D^V&(M^D))+w[15]+3634488961&4294967295,N=M+(R<<14&4294967295|R>>>18),R=V+(M^D&(N^M))+w[4]+3889429448&4294967295,V=N+(R<<20&4294967295|R>>>12),R=D+(N^M&(V^N))+w[9]+568446438&4294967295,D=V+(R<<5&4294967295|R>>>27),R=M+(V^N&(D^V))+w[14]+3275163606&4294967295,M=D+(R<<9&4294967295|R>>>23),R=N+(D^V&(M^D))+w[3]+4107603335&4294967295,N=M+(R<<14&4294967295|R>>>18),R=V+(M^D&(N^M))+w[8]+1163531501&4294967295,V=N+(R<<20&4294967295|R>>>12),R=D+(N^M&(V^N))+w[13]+2850285829&4294967295,D=V+(R<<5&4294967295|R>>>27),R=M+(V^N&(D^V))+w[2]+4243563512&4294967295,M=D+(R<<9&4294967295|R>>>23),R=N+(D^V&(M^D))+w[7]+1735328473&4294967295,N=M+(R<<14&4294967295|R>>>18),R=V+(M^D&(N^M))+w[12]+2368359562&4294967295,V=N+(R<<20&4294967295|R>>>12),R=D+(V^N^M)+w[5]+4294588738&4294967295,D=V+(R<<4&4294967295|R>>>28),R=M+(D^V^N)+w[8]+2272392833&4294967295,M=D+(R<<11&4294967295|R>>>21),R=N+(M^D^V)+w[11]+1839030562&4294967295,N=M+(R<<16&4294967295|R>>>16),R=V+(N^M^D)+w[14]+4259657740&4294967295,V=N+(R<<23&4294967295|R>>>9),R=D+(V^N^M)+w[1]+2763975236&4294967295,D=V+(R<<4&4294967295|R>>>28),R=M+(D^V^N)+w[4]+1272893353&4294967295,M=D+(R<<11&4294967295|R>>>21),R=N+(M^D^V)+w[7]+4139469664&4294967295,N=M+(R<<16&4294967295|R>>>16),R=V+(N^M^D)+w[10]+3200236656&4294967295,V=N+(R<<23&4294967295|R>>>9),R=D+(V^N^M)+w[13]+681279174&4294967295,D=V+(R<<4&4294967295|R>>>28),R=M+(D^V^N)+w[0]+3936430074&4294967295,M=D+(R<<11&4294967295|R>>>21),R=N+(M^D^V)+w[3]+3572445317&4294967295,N=M+(R<<16&4294967295|R>>>16),R=V+(N^M^D)+w[6]+76029189&4294967295,V=N+(R<<23&4294967295|R>>>9),R=D+(V^N^M)+w[9]+3654602809&4294967295,D=V+(R<<4&4294967295|R>>>28),R=M+(D^V^N)+w[12]+3873151461&4294967295,M=D+(R<<11&4294967295|R>>>21),R=N+(M^D^V)+w[15]+530742520&4294967295,N=M+(R<<16&4294967295|R>>>16),R=V+(N^M^D)+w[2]+3299628645&4294967295,V=N+(R<<23&4294967295|R>>>9),R=D+(N^(V|~M))+w[0]+4096336452&4294967295,D=V+(R<<6&4294967295|R>>>26),R=M+(V^(D|~N))+w[7]+1126891415&4294967295,M=D+(R<<10&4294967295|R>>>22),R=N+(D^(M|~V))+w[14]+2878612391&4294967295,N=M+(R<<15&4294967295|R>>>17),R=V+(M^(N|~D))+w[5]+4237533241&4294967295,V=N+(R<<21&4294967295|R>>>11),R=D+(N^(V|~M))+w[12]+1700485571&4294967295,D=V+(R<<6&4294967295|R>>>26),R=M+(V^(D|~N))+w[3]+2399980690&4294967295,M=D+(R<<10&4294967295|R>>>22),R=N+(D^(M|~V))+w[10]+4293915773&4294967295,N=M+(R<<15&4294967295|R>>>17),R=V+(M^(N|~D))+w[1]+2240044497&4294967295,V=N+(R<<21&4294967295|R>>>11),R=D+(N^(V|~M))+w[8]+1873313359&4294967295,D=V+(R<<6&4294967295|R>>>26),R=M+(V^(D|~N))+w[15]+4264355552&4294967295,M=D+(R<<10&4294967295|R>>>22),R=N+(D^(M|~V))+w[6]+2734768916&4294967295,N=M+(R<<15&4294967295|R>>>17),R=V+(M^(N|~D))+w[13]+1309151649&4294967295,V=N+(R<<21&4294967295|R>>>11),R=D+(N^(V|~M))+w[4]+4149444226&4294967295,D=V+(R<<6&4294967295|R>>>26),R=M+(V^(D|~N))+w[11]+3174756917&4294967295,M=D+(R<<10&4294967295|R>>>22),R=N+(D^(M|~V))+w[2]+718787259&4294967295,N=M+(R<<15&4294967295|R>>>17),R=V+(M^(N|~D))+w[9]+3951481745&4294967295,k.g[0]=k.g[0]+D&4294967295,k.g[1]=k.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+M&4294967295}s.prototype.u=function(k,D){D===void 0&&(D=k.length);for(var V=D-this.blockSize,w=this.B,N=this.h,M=0;M<D;){if(N==0)for(;M<=V;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<D;)if(w[N++]=k.charCodeAt(M++),N==this.blockSize){o(this,w),N=0;break}}else for(;M<D;)if(w[N++]=k[M++],N==this.blockSize){o(this,w),N=0;break}}this.h=N,this.o+=D},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var D=1;D<k.length-8;++D)k[D]=0;var V=8*this.o;for(D=k.length-8;D<k.length;++D)k[D]=V&255,V/=256;for(this.u(k),k=Array(16),D=V=0;4>D;++D)for(var w=0;32>w;w+=8)k[V++]=this.g[D]>>>w&255;return k};function u(k,D){var V=m;return Object.prototype.hasOwnProperty.call(V,k)?V[k]:V[k]=D(k)}function f(k,D){this.h=D;for(var V=[],w=!0,N=k.length-1;0<=N;N--){var M=k[N]|0;w&&M==D||(V[N]=M,w=!1)}this.g=V}var m={};function y(k){return-128<=k&&128>k?u(k,function(D){return new f([D|0],0>D?-1:0)}):new f([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return T;if(0>k)return P(p(-k));for(var D=[],V=1,w=0;k>=V;w++)D[w]=k/V|0,V*=4294967296;return new f(D,0)}function b(k,D){if(k.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(k.charAt(0)=="-")return P(b(k.substring(1),D));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=p(Math.pow(D,8)),w=T,N=0;N<k.length;N+=8){var M=Math.min(8,k.length-N),R=parseInt(k.substring(N,N+M),D);8>M?(M=p(Math.pow(D,M)),w=w.j(M).add(p(R))):(w=w.j(V),w=w.add(p(R)))}return w}var T=y(0),x=y(1),C=y(16777216);r=f.prototype,r.m=function(){if(B(this))return-P(this).m();for(var k=0,D=1,V=0;V<this.g.length;V++){var w=this.i(V);k+=(0<=w?w:4294967296+w)*D,D*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(B(this))return"-"+P(this).toString(k);for(var D=p(Math.pow(k,6)),V=this,w="";;){var N=ft(V,D).g;V=q(V,N.j(D));var M=((0<V.g.length?V.g[0]:V.h)>>>0).toString(k);if(V=N,I(V))return M+w;for(;6>M.length;)M="0"+M;w=M+w}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function I(k){if(k.h!=0)return!1;for(var D=0;D<k.g.length;D++)if(k.g[D]!=0)return!1;return!0}function B(k){return k.h==-1}r.l=function(k){return k=q(this,k),B(k)?-1:I(k)?0:1};function P(k){for(var D=k.g.length,V=[],w=0;w<D;w++)V[w]=~k.g[w];return new f(V,~k.h).add(x)}r.abs=function(){return B(this)?P(this):this},r.add=function(k){for(var D=Math.max(this.g.length,k.g.length),V=[],w=0,N=0;N<=D;N++){var M=w+(this.i(N)&65535)+(k.i(N)&65535),R=(M>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);w=R>>>16,M&=65535,R&=65535,V[N]=R<<16|M}return new f(V,V[V.length-1]&-2147483648?-1:0)};function q(k,D){return k.add(P(D))}r.j=function(k){if(I(this)||I(k))return T;if(B(this))return B(k)?P(this).j(P(k)):P(P(this).j(k));if(B(k))return P(this.j(P(k)));if(0>this.l(C)&&0>k.l(C))return p(this.m()*k.m());for(var D=this.g.length+k.g.length,V=[],w=0;w<2*D;w++)V[w]=0;for(w=0;w<this.g.length;w++)for(var N=0;N<k.g.length;N++){var M=this.i(w)>>>16,R=this.i(w)&65535,_t=k.i(N)>>>16,Et=k.i(N)&65535;V[2*w+2*N]+=R*Et,Z(V,2*w+2*N),V[2*w+2*N+1]+=M*Et,Z(V,2*w+2*N+1),V[2*w+2*N+1]+=R*_t,Z(V,2*w+2*N+1),V[2*w+2*N+2]+=M*_t,Z(V,2*w+2*N+2)}for(w=0;w<D;w++)V[w]=V[2*w+1]<<16|V[2*w];for(w=D;w<2*D;w++)V[w]=0;return new f(V,0)};function Z(k,D){for(;(k[D]&65535)!=k[D];)k[D+1]+=k[D]>>>16,k[D]&=65535,D++}function Q(k,D){this.g=k,this.h=D}function ft(k,D){if(I(D))throw Error("division by zero");if(I(k))return new Q(T,T);if(B(k))return D=ft(P(k),D),new Q(P(D.g),P(D.h));if(B(D))return D=ft(k,P(D)),new Q(P(D.g),D.h);if(30<k.g.length){if(B(k)||B(D))throw Error("slowDivide_ only works with positive integers.");for(var V=x,w=D;0>=w.l(k);)V=pt(V),w=pt(w);var N=wt(V,1),M=wt(w,1);for(w=wt(w,2),V=wt(V,2);!I(w);){var R=M.add(w);0>=R.l(k)&&(N=N.add(V),M=R),w=wt(w,1),V=wt(V,1)}return D=q(k,N.j(D)),new Q(N,D)}for(N=T;0<=k.l(D);){for(V=Math.max(1,Math.floor(k.m()/D.m())),w=Math.ceil(Math.log(V)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),M=p(V),R=M.j(D);B(R)||0<R.l(k);)V-=w,M=p(V),R=M.j(D);I(M)&&(M=x),N=N.add(M),k=q(k,R)}return new Q(N,k)}r.A=function(k){return ft(this,k).h},r.and=function(k){for(var D=Math.max(this.g.length,k.g.length),V=[],w=0;w<D;w++)V[w]=this.i(w)&k.i(w);return new f(V,this.h&k.h)},r.or=function(k){for(var D=Math.max(this.g.length,k.g.length),V=[],w=0;w<D;w++)V[w]=this.i(w)|k.i(w);return new f(V,this.h|k.h)},r.xor=function(k){for(var D=Math.max(this.g.length,k.g.length),V=[],w=0;w<D;w++)V[w]=this.i(w)^k.i(w);return new f(V,this.h^k.h)};function pt(k){for(var D=k.g.length+1,V=[],w=0;w<D;w++)V[w]=k.i(w)<<1|k.i(w-1)>>>31;return new f(V,k.h)}function wt(k,D){var V=D>>5;D%=32;for(var w=k.g.length-V,N=[],M=0;M<w;M++)N[M]=0<D?k.i(M+V)>>>D|k.i(M+V+1)<<32-D:k.i(M+V);return new f(N,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,J_=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=b,na=f}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t0,go,e0,_c,Dd,n0,i0,r0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof cc=="object"&&cc];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=i(this);function o(c,g){if(g)t:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var G=c[A];if(!(G in v))break t;v=v[G]}c=c[c.length-1],A=v[c],g=g(A),g!=A&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var v=0,A=!1,G={next:function(){if(!A&&v<c.length){var J=v++;return{value:g(J,c[J]),done:!1}}return A=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function b(c,g,v){return c.call.apply(c.bind,arguments)}function T(c,g,v){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,A),c.apply(g,G)}}return function(){return c.apply(g,arguments)}}function x(c,g,v){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:T,x.apply(null,arguments)}function C(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function I(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(A,G,J){for(var yt=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)yt[$t-2]=arguments[$t];return g.prototype[G].apply(A,yt)}}function B(c){const g=c.length;if(0<g){const v=Array(g);for(let A=0;A<g;A++)v[A]=c[A];return v}return[]}function P(c,g){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(y(A)){const G=c.length||0,J=A.length||0;c.length=G+J;for(let yt=0;yt<J;yt++)c[G+yt]=A[yt]}else c.push(A)}}class q{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Z(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ft(c){return ft[" "](c),c}ft[" "]=function(){};var pt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function wt(c,g,v){for(const A in c)g.call(v,c[A],A,c)}function k(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function D(c){const g={};for(const v in c)g[v]=c[v];return g}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,g){let v,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(v in A)c[v]=A[v];for(let J=0;J<V.length;J++)v=V[J],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function N(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function M(c){m.setTimeout(()=>{throw c},0)}function R(){var c=gt;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class _t{constructor(){this.h=this.g=null}add(g,v){const A=Et.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Et=new q(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,it=!1,gt=new _t,U=()=>{const c=m.Promise.resolve(void 0);Y=()=>{c.then(et)}};var et=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(v){M(v)}var g=Et;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}it=!1};function dt(){this.s=this.s,this.C=this.C}dt.prototype.s=!1,dt.prototype.ma=function(){this.s||(this.s=!0,this.N())},dt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var vt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,g),m.removeEventListener("test",v,g)}catch{}return c}();function Rt(c,g){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(pt){t:{try{ft(g.nodeName);var G=!0;break t}catch{}G=!1}G||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Dt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Rt.aa.h.call(this)}}I(Rt,ht);var Dt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),Qt=0;function Dn(c,g,v,A,G){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=G,this.key=++Qt,this.da=this.fa=!1}function yi(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qn(c){this.src=c,this.g={},this.h=0}qn.prototype.add=function(c,g,v,A,G){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var yt=Hi(c,g,A,G);return-1<yt?(g=c[yt],v||(g.fa=!1)):(g=new Dn(g,this.src,J,!!A,G),g.fa=v,c.push(g)),g};function Hn(c,g){var v=g.type;if(v in c.g){var A=c.g[v],G=Array.prototype.indexOf.call(A,g,void 0),J;(J=0<=G)&&Array.prototype.splice.call(A,G,1),J&&(yi(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Hi(c,g,v,A){for(var G=0;G<c.length;++G){var J=c[G];if(!J.da&&J.listener==g&&J.capture==!!v&&J.ha==A)return G}return-1}var Gn="closure_lm_"+(1e6*Math.random()|0),Xe={};function oi(c,g,v,A,G){if(Array.isArray(g)){for(var J=0;J<g.length;J++)oi(c,g[J],v,A,G);return null}return v=Fi(v),c&&c[re]?c.K(g,v,p(A)?!!A.capture:!1,G):Ue(c,g,v,!1,A,G)}function Ue(c,g,v,A,G,J){if(!g)throw Error("Invalid event type");var yt=p(G)?!!G.capture:!!G,$t=Gi(c);if($t||(c[Gn]=$t=new qn(c)),v=$t.add(g,v,A,yt,J),v.proxy)return v;if(A=xr(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)vt||(G=yt),G===void 0&&(G=!1),c.addEventListener(g.toString(),A,G);else if(c.attachEvent)c.attachEvent(vi(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xr(){function c(v){return g.call(c.src,c.listener,v)}const g=Cr;return c}function wr(c,g,v,A,G){if(Array.isArray(g))for(var J=0;J<g.length;J++)wr(c,g[J],v,A,G);else A=p(A)?!!A.capture:!!A,v=Fi(v),c&&c[re]?(c=c.i,g=String(g).toString(),g in c.g&&(J=c.g[g],v=Hi(J,v,A,G),-1<v&&(yi(J[v]),Array.prototype.splice.call(J,v,1),J.length==0&&(delete c.g[g],c.h--)))):c&&(c=Gi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Hi(g,v,A,G)),(v=-1<c?g[c]:null)&&Rr(v))}function Rr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[re])Hn(g.i,c);else{var v=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(v,A,c.capture):g.detachEvent?g.detachEvent(vi(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=Gi(g))?(Hn(v,c),v.h==0&&(v.src=null,g[Gn]=null)):yi(c)}}}function vi(c){return c in Xe?Xe[c]:Xe[c]="on"+c}function Cr(c,g){if(c.da)c=!0;else{g=new Rt(g,this);var v=c.listener,A=c.ha||c.src;c.fa&&Rr(c),c=v.call(A,g)}return c}function Gi(c){return c=c[Gn],c instanceof qn?c:null}var Fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fi(c){return typeof c=="function"?c:(c[Fn]||(c[Fn]=function(g){return c.handleEvent(g)}),c[Fn])}function fe(){dt.call(this),this.i=new qn(this),this.M=this,this.F=null}I(fe,dt),fe.prototype[re]=!0,fe.prototype.removeEventListener=function(c,g,v,A){wr(this,c,g,v,A)};function te(c,g){var v,A=c.F;if(A)for(v=[];A;A=A.F)v.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new ht(g,c);else if(g instanceof ht)g.target=g.target||c;else{var G=g;g=new ht(A,c),w(g,G)}if(G=!0,v)for(var J=v.length-1;0<=J;J--){var yt=g.g=v[J];G=pn(yt,A,!0,g)&&G}if(yt=g.g=c,G=pn(yt,A,!0,g)&&G,G=pn(yt,A,!1,g)&&G,v)for(J=0;J<v.length;J++)yt=g.g=v[J],G=pn(yt,A,!1,g)&&G}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],A=0;A<v.length;A++)yi(v[A]);delete c.g[g],c.h--}}this.F=null},fe.prototype.K=function(c,g,v,A){return this.i.add(String(c),g,!1,v,A)},fe.prototype.L=function(c,g,v,A){return this.i.add(String(c),g,!0,v,A)};function pn(c,g,v,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var G=!0,J=0;J<g.length;++J){var yt=g[J];if(yt&&!yt.da&&yt.capture==v){var $t=yt.listener,ke=yt.ha||yt.src;yt.fa&&Hn(c.i,yt),G=$t.call(ke,A)!==!1&&G}}return G&&!A.defaultPrevented}function We(c,g,v){if(typeof c=="function")v&&(c=x(c,v));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function Qi(c){c.g=We(()=>{c.g=null,c.i&&(c.i=!1,Qi(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class cl extends dt{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Qi(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(c){dt.call(this),this.h=c,this.g={}}I($i,dt);var _i=[];function bn(c){wt(c.g,function(g,v){this.g.hasOwnProperty(v)&&Rr(g)},c),c.g={}}$i.prototype.N=function(){$i.aa.N.call(this),bn(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=m.JSON.stringify,Ei=m.JSON.parse,Yi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function da(){}da.prototype.h=null;function ma(c){return c.h||(c.h=c.i())}function Ki(){}var on={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){ht.call(this,"d")}I(Qn,ht);function pa(){ht.call(this,"c")}I(pa,ht);var In={},ga=null;function bi(){return ga=ga||new fe}In.La="serverreachability";function Dr(c){ht.call(this,In.La,c)}I(Dr,ht);function Ti(c){const g=bi();te(g,new Dr(g))}In.STAT_EVENT="statevent";function ya(c,g){ht.call(this,In.STAT_EVENT,c),this.stat=g}I(ya,ht);function me(c){const g=bi();te(g,new ya(g,c))}In.Ma="timingevent";function Re(c,g){ht.call(this,In.Ma,c),this.size=g}I(Re,ht);function Se(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function Tn(){this.g=!0}Tn.prototype.xa=function(){this.g=!1};function va(c,g,v,A,G,J){c.info(function(){if(c.g)if(J)for(var yt="",$t=J.split("&"),ke=0;ke<$t.length;ke++){var Yt=$t[ke].split("=");if(1<Yt.length){var Fe=Yt[0];Yt=Yt[1];var Le=Fe.split("_");yt=2<=Le.length&&Le[1]=="type"?yt+(Fe+"="+Yt+"&"):yt+(Fe+"=redacted&")}}else yt=null;else yt=J;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+g+`
`+v+`
`+yt})}function hl(c,g,v,A,G,J,yt){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+g+`
`+v+`
`+J+" "+yt})}function Si(c,g,v,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Xi(c,v)+(A?" "+A:"")})}function ts(c,g){c.info(function(){return"TIMEOUT: "+g})}Tn.prototype.info=function(){};function Xi(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var A=v[c];if(!(2>A.length)){var G=A[1];if(Array.isArray(G)&&!(1>G.length)){var J=G[0];if(J!="noop"&&J!="stop"&&J!="close")for(var yt=1;yt<G.length;yt++)G[yt]=""}}}}return Ze(v)}catch{return g}}var z={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},at;function ct(){}I(ct,da),ct.prototype.g=function(){return new XMLHttpRequest},ct.prototype.i=function(){return{}},at=new ct;function ut(c,g,v,A){this.j=c,this.i=g,this.l=v,this.R=A||1,this.U=new $i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var bt={},Pt={};function ae(c,g,v){c.L=1,c.v=Ta(Nn(g)),c.m=v,c.P=!0,Zt(c,null)}function Zt(c,g){c.F=Date.now(),Sn(c),c.A=Nn(c.v);var v=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),yl(v.i,"t",A),c.C=0,v=c.j.J,c.h=new mt,c.g=au(c.j,v?g:null,!c.m),0<c.O&&(c.M=new cl(x(c.Y,c,c.g),c.O)),g=c.U,v=c.g,A=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(_i[0]=G.toString()),G=_i);for(var J=0;J<G.length;J++){var yt=oi(v,G[J],A||g.handleEvent,!1,g.h||g);if(!yt)break;g.g[yt.key]=yt}g=c.H?D(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Ti(),va(c.i,c.u,c.A,c.l,c.R,c.m)}ut.prototype.ca=function(c){c=c.target;const g=this.M;g&&Wn(c)==3?g.j():this.Y(c)},ut.prototype.Y=function(c){try{if(c==this.g)t:{const Le=Wn(this.g);var g=this.g.Ba();const rr=this.g.Z();if(!(3>Le)&&(Le!=3||this.g&&(this.h.h||this.g.oa()||Wo(this.g)))){this.J||Le!=4||g==7||(g==8||0>=rr?Ti(3):Ti(2)),Vn(this);var v=this.g.Z();this.X=v;e:if(_e(this)){var A=Wo(this.g);c="";var G=A.length,J=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Je(this),Ai(this);var yt="";break e}this.h.i=new m.TextDecoder}for(g=0;g<G;g++)this.h.h=!0,c+=this.h.i.decode(A[g],{stream:!(J&&g==G-1)});A.length=0,this.h.g+=c,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=v==200,hl(this.i,this.u,this.A,this.l,this.R,Le,v),this.o){if(this.T&&!this.K){e:{if(this.g){var $t,ke=this.g;if(($t=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z($t)){var Yt=$t;break e}}Yt=null}if(v=Yt)Si(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,v);else{this.o=!1,this.s=3,me(12),Je(this),Ai(this);break t}}if(this.P){v=!0;let tn;for(;!this.J&&this.C<yt.length;)if(tn=ui(this,yt),tn==Pt){Le==4&&(this.s=4,me(14),v=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==bt){this.s=4,me(15),Si(this.i,this.l,yt,"[Invalid Chunk]"),v=!1;break}else Si(this.i,this.l,tn,null),_a(this,tn);if(_e(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||yt.length!=0||this.h.h||(this.s=1,me(16),v=!1),this.o=this.o&&v,!v)Si(this.i,this.l,yt,"[Invalid Chunked Response]"),Je(this),Ai(this);else if(0<yt.length&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.ba&&!Fe.M&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),Ia(Fe),Fe.M=!0,me(11))}}else Si(this.i,this.l,yt,null),_a(this,yt);Le==4&&Je(this),this.o&&!this.J&&(Le==4?nu(this.j,this):(this.o=!1,Sn(this)))}else fh(this.g),v==400&&0<yt.indexOf("Unknown SID")?(this.s=3,me(12)):(this.s=0,me(13)),Je(this),Ai(this)}}}catch{}finally{}};function _e(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ui(c,g){var v=c.C,A=g.indexOf(`
`,v);return A==-1?Pt:(v=Number(g.substring(v,A)),isNaN(v)?bt:(A+=1,A+v>g.length?Pt:(g=g.slice(A,A+v),c.C=A+v,g)))}ut.prototype.cancel=function(){this.J=!0,Je(this)};function Sn(c){c.S=Date.now()+c.I,$n(c,c.I)}function $n(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Se(x(c.ba,c),g)}function Vn(c){c.B&&(m.clearTimeout(c.B),c.B=null)}ut.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ts(this.i,this.A),this.L!=2&&(Ti(),me(17)),Je(this),this.s=2,Ai(this)):$n(this,this.S-c)};function Ai(c){c.j.G==0||c.J||nu(c.j,c)}function Je(c){Vn(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,bn(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function _a(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||fl(v.h,c))){if(!c.K&&fl(v.h,c)&&v.G==3){try{var A=v.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)fs(v),cs(v);else break t;Tl(v),me(18)}}else v.za=G[1],0<v.za-v.T&&37500>G[2]&&v.F&&v.v==0&&!v.C&&(v.C=Se(x(v.Za,v),6e3));if(1>=ns(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ir(v,11)}else if((c.K||v.g==c)&&fs(v),!Z(g))for(G=v.Da.g.parse(g),g=0;g<G.length;g++){let Yt=G[g];if(v.T=Yt[0],Yt=Yt[1],v.G==2)if(Yt[0]=="c"){v.K=Yt[1],v.ia=Yt[2];const Fe=Yt[3];Fe!=null&&(v.la=Fe,v.j.info("VER="+v.la));const Le=Yt[4];Le!=null&&(v.Aa=Le,v.j.info("SVER="+v.Aa));const rr=Yt[5];rr!=null&&typeof rr=="number"&&0<rr&&(A=1.5*rr,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const tn=c.g;if(tn){const Vi=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vi){var J=A.h;J.g||Vi.indexOf("spdy")==-1&&Vi.indexOf("quic")==-1&&Vi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(is(J,J.h),J.h=null))}if(A.D){const Al=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Al&&(A.ya=Al,oe(A.I,A.D,Al))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var yt=c;if(A.qa=ru(A,A.J?A.ia:null,A.W),yt.K){gn(A.h,yt);var $t=yt,ke=A.L;ke&&($t.I=ke),$t.B&&(Vn($t),Sn($t)),A.g=yt}else tu(A);0<v.i.length&&hs(v)}else Yt[0]!="stop"&&Yt[0]!="close"||ir(v,7);else v.G==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?ir(v,7):El(v):Yt[0]!="noop"&&v.l&&v.l.ta(Yt),v.v=0)}}Ti(4)}catch{}}var $o=class{constructor(c,g){this.g=c,this.map=g}};function Wi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function es(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ns(c){return c.h?1:c.g?c.g.size:0}function fl(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function is(c,g){c.g?c.g.add(g):c.h=g}function gn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Wi.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function dl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return B(c.i)}function oh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var g=[],v=c.length,A=0;A<v;A++)g.push(c[A]);return g}g=[],v=0;for(A in c)g[v++]=c[A];return g}function rs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const A in c)g[v++]=A;return g}}}function ml(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=rs(c),A=oh(c),G=A.length,J=0;J<G;J++)g.call(void 0,A[J],v&&v[J],c)}var Ea=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uh(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var A=c[v].indexOf("="),G=null;if(0<=A){var J=c[v].substring(0,A);G=c[v].substring(A+1)}else J=c[v];g(J,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ve(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ve){this.h=c.h,ba(this,c.j),this.o=c.o,this.g=c.g,Ir(this,c.s),this.l=c.l;var g=c.i,v=new Ji;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Zi(this,v),this.m=c.m}else c&&(g=String(c).match(Ea))?(this.h=!1,ba(this,g[1]||"",!0),this.o=Yn(g[2]||""),this.g=Yn(g[3]||"",!0),Ir(this,g[4]),this.l=Yn(g[5]||"",!0),Zi(this,g[6]||"",!0),this.m=Yn(g[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}Ve.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Sa(g,pl,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Sa(g,pl,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Sa(v,v.charAt(0)=="/"?ch:gl,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Sa(v,as)),c.join("")};function Nn(c){return new Ve(c)}function ba(c,g,v){c.j=v?Yn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ir(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Zi(c,g,v){g instanceof Ji?(c.i=g,Ko(c.i,c.h)):(v||(g=Sa(g,hh)),c.i=new Ji(g,c.h))}function oe(c,g,v){c.i.set(g,v)}function Ta(c){return oe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Yn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sa(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,Yo),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Yo(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var pl=/[#\/\?@]/g,gl=/[#\?:]/g,ch=/[#\?]/g,hh=/[#\?@]/g,as=/#/g;function Ji(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Kn(c){c.g||(c.g=new Map,c.h=0,c.i&&uh(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=Ji.prototype,r.add=function(c,g){Kn(this),this.i=null,c=xi(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function tr(c,g){Kn(c),g=xi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function er(c,g){return Kn(c),g=xi(c,g),c.g.has(g)}r.forEach=function(c,g){Kn(this),this.g.forEach(function(v,A){v.forEach(function(G){c.call(g,G,A,this)},this)},this)},r.na=function(){Kn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let A=0;A<g.length;A++){const G=c[A];for(let J=0;J<G.length;J++)v.push(g[A])}return v},r.V=function(c){Kn(this);let g=[];if(typeof c=="string")er(this,c)&&(g=g.concat(this.g.get(xi(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},r.set=function(c,g){return Kn(this),this.i=null,c=xi(this,c),er(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function yl(c,g,v){tr(c,g),0<v.length&&(c.i=null,c.g.set(xi(c,g),B(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var A=g[v];const J=encodeURIComponent(String(A)),yt=this.V(A);for(A=0;A<yt.length;A++){var G=J;yt[A]!==""&&(G+="="+encodeURIComponent(String(yt[A]))),c.push(G)}}return this.i=c.join("&")};function xi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Ko(c,g){g&&!c.j&&(Kn(c),c.i=null,c.g.forEach(function(v,A){var G=A.toLowerCase();A!=G&&(tr(this,A),yl(this,G,v))},c)),c.j=g}function Aa(c,g){const v=new Tn;if(m.Image){const A=new Image;A.onload=C(Xn,v,"TestLoadImage: loaded",!0,g,A),A.onerror=C(Xn,v,"TestLoadImage: error",!1,g,A),A.onabort=C(Xn,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=C(Xn,v,"TestLoadImage: timeout",!1,g,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function ci(c,g){const v=new Tn,A=new AbortController,G=setTimeout(()=>{A.abort(),Xn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(J=>{clearTimeout(G),J.ok?Xn(v,"TestPingServer: ok",!0,g):Xn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(G),Xn(v,"TestPingServer: error",!1,g)})}function Xn(c,g,v,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(v)}catch{}}function xa(){this.g=new Yi}function wi(c,g,v){const A=v||"";try{ml(c,function(G,J){let yt=G;p(G)&&(yt=Ze(G)),g.push(A+J+"="+encodeURIComponent(yt))})}catch(G){throw g.push(A+"type="+encodeURIComponent("_badmap")),G}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Vr,da),Vr.prototype.g=function(){return new nr(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function nr(c,g){fe.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(nr,fe),r=nr.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Ci(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function vl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ri(this):Ci(this),this.readyState==3&&vl(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Ri(this))},r.Qa=function(c){this.g&&(this.response=c,Ri(this))},r.ga=function(){this.g&&Ri(this)};function Ri(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ci(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Ci(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _l(c){let g="";return wt(c,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function Ge(c,g,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=_l(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):oe(c,g,v))}function ne(c){fe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ne,fe);var ss=/^https?$/i,wa=["POST","PUT"];r=ne.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():at.g(),this.v=this.o?ma(this.o):ma(at),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(J){Xo(this,J);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)v.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())v.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),G=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(wa,g,void 0))||A||G||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,yt]of v)this.g.setRequestHeader(J,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ra(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){Xo(this,J)}};function Xo(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ls(c),Di(c)}function ls(c){c.A||(c.A=!0,te(c,"complete"),te(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,te(this,"complete"),te(this,"abort"),Di(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),ne.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?os(this):this.bb())},r.bb=function(){os(this)};function os(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Wn(c)!=4||c.Z()!=2)){if(c.u&&Wn(c)==4)We(c.Ea,0,c);else if(te(c,"readystatechange"),Wn(c)==4){c.h=!1;try{const yt=c.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var v;if(!(v=g)){var A;if(A=yt===0){var G=String(c.D).match(Ea)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),A=!ss.test(G?G.toLowerCase():"")}v=A}if(v)te(c,"complete"),te(c,"success");else{c.m=6;try{var J=2<Wn(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",ls(c)}}finally{Di(c)}}}}function Di(c,g){if(c.g){Ra(c);const v=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||te(c,"ready");try{v.onreadystatechange=A}catch{}}}function Ra(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ei(g)}};function Wo(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function fh(c){const g={};c=(c.g&&2<=Wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(Z(c[A]))continue;var v=N(c[A]);const G=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=g[G]||[];g[G]=J,J.push(v)}k(g,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function us(c){this.Aa=0,this.i=[],this.j=new Tn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,c),this.cb=Ca("retryDelaySeedMs",1e4,c),this.Wa=Ca("forwardChannelMaxRetries",2,c),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Wi(c&&c.concurrentRequestLimit),this.Da=new xa,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=us.prototype,r.la=8,r.G=1,r.connect=function(c,g,v,A){me(0),this.W=c,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=ru(this,null,this.W),hs(this)};function El(c){if(Zo(c),c.G==3){var g=c.U++,v=Nn(c.I);if(oe(v,"SID",c.K),oe(v,"RID",g),oe(v,"TYPE","terminate"),Da(c,v),g=new ut(c,c.j,g),g.L=2,g.v=Ta(Nn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=g.v,v=!0),v||(g.g=au(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Sn(g)}iu(c)}function cs(c){c.g&&(Ia(c),c.g.cancel(),c.g=null)}function Zo(c){cs(c),c.u&&(m.clearTimeout(c.u),c.u=null),fs(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function hs(c){if(!es(c.h)&&!c.s){c.s=!0;var g=c.Ga;Y||U(),it||(Y(),it=!0),gt.add(g,c),c.B=0}}function dh(c,g){return ns(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Se(x(c.Ga,c,g),Sl(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new ut(this,this.j,c);let J=this.o;if(this.S&&(J?(J=D(J),w(J,this.S)):J=this.S),this.m!==null||this.O||(G.H=J,J=null),this.P)t:{for(var g=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=v;break t}if(g===4096||v===this.i.length-1){g=v+1;break t}}g=1e3}else g=1e3;g=Jo(this,G,g),v=Nn(this.I),oe(v,"RID",c),oe(v,"CVER",22),this.D&&oe(v,"X-HTTP-Session-Id",this.D),Da(this,v),J&&(this.O?g="headers="+encodeURIComponent(String(_l(J)))+"&"+g:this.m&&Ge(v,this.m,J)),is(this.h,G),this.Ua&&oe(v,"TYPE","init"),this.P?(oe(v,"$req",g),oe(v,"SID","null"),G.T=!0,ae(G,v,null)):ae(G,v,g),this.G=2}}else this.G==3&&(c?bl(this,c):this.i.length==0||es(this.h)||bl(this))};function bl(c,g){var v;g?v=g.l:v=c.U++;const A=Nn(c.I);oe(A,"SID",c.K),oe(A,"RID",v),oe(A,"AID",c.T),Da(c,A),c.m&&c.o&&Ge(A,c.m,c.o),v=new ut(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Jo(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),is(c.h,v),ae(v,A,g)}function Da(c,g){c.H&&wt(c.H,function(v,A){oe(g,A,v)}),c.l&&ml({},function(v,A){oe(g,A,v)})}function Jo(c,g,v){v=Math.min(c.i.length,v);var A=c.l?x(c.l.Na,c.l,c):null;t:{var G=c.i;let J=-1;for(;;){const yt=["count="+v];J==-1?0<v?(J=G[0].g,yt.push("ofs="+J)):J=0:yt.push("ofs="+J);let $t=!0;for(let ke=0;ke<v;ke++){let Yt=G[ke].g;const Fe=G[ke].map;if(Yt-=J,0>Yt)J=Math.max(0,G[ke].g-100),$t=!1;else try{wi(Fe,yt,"req"+Yt+"_")}catch{A&&A(Fe)}}if($t){A=yt.join("&");break t}}}return c=c.i.splice(0,v),g.D=c,A}function tu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Y||U(),it||(Y(),it=!0),gt.add(g,c),c.v=0}}function Tl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Se(x(c.Fa,c),Sl(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Se(x(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,me(10),cs(this),eu(this))};function Ia(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function eu(c){c.g=new ut(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Nn(c.qa);oe(g,"RID","rpc"),oe(g,"SID",c.K),oe(g,"AID",c.T),oe(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&oe(g,"TO",c.ja),oe(g,"TYPE","xmlhttp"),Da(c,g),c.m&&c.o&&Ge(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ta(Nn(g)),v.m=null,v.P=!0,Zt(v,c)}r.Za=function(){this.C!=null&&(this.C=null,cs(this),Tl(this),me(19))};function fs(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function nu(c,g){var v=null;if(c.g==g){fs(c),Ia(c),c.g=null;var A=2}else if(fl(c.h,g))v=g.D,gn(c.h,g),A=1;else return;if(c.G!=0){if(g.o)if(A==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var G=c.B;A=bi(),te(A,new Re(A,v)),hs(c)}else tu(c);else if(G=g.s,G==3||G==0&&0<g.X||!(A==1&&dh(c,g)||A==2&&Tl(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),G){case 1:ir(c,5);break;case 4:ir(c,10);break;case 3:ir(c,6);break;default:ir(c,2)}}}function Sl(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function ir(c,g){if(c.j.info("Error code "+g),g==2){var v=x(c.fb,c),A=c.Xa;const G=!A;A=new Ve(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ba(A,"https"),Ta(A),G?Aa(A.toString(),v):ci(A.toString(),v)}else me(2);c.G=0,c.l&&c.l.sa(g),iu(c),Zo(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function iu(c){if(c.G=0,c.ka=[],c.l){const g=dl(c.h);(g.length!=0||c.i.length!=0)&&(P(c.ka,g),P(c.ka,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.ra()}}function ru(c,g,v){var A=v instanceof Ve?Nn(v):new Ve(v);if(A.g!="")g&&(A.g=g+"."+A.g),Ir(A,A.s);else{var G=m.location;A=G.protocol,g=g?g+"."+G.hostname:G.hostname,G=+G.port;var J=new Ve(null);A&&ba(J,A),g&&(J.g=g),G&&Ir(J,G),v&&(J.l=v),A=J}return v=c.D,g=c.ya,v&&g&&oe(A,v,g),oe(A,"VER",c.la),Da(c,A),A}function au(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new ne(new Vr({eb:v})):new ne(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function su(){}r=su.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ds(){}ds.prototype.g=function(c,g){return new yn(c,g)};function yn(c,g){fe.call(this),this.g=new us(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Z(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Z(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Ii(this)}I(yn,fe),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){El(this.g)},yn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Ze(c),c=v);g.i.push(new $o(g.Ya++,c)),g.G==3&&hs(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,yn.aa.N.call(this)};function lu(c){Qn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){t:{for(const v in g){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}I(lu,Qn);function ou(){pa.call(this),this.status=1}I(ou,pa);function Ii(c){this.g=c}I(Ii,su),Ii.prototype.ua=function(){te(this.g,"a")},Ii.prototype.ta=function(c){te(this.g,new lu(c))},Ii.prototype.sa=function(c){te(this.g,new ou)},Ii.prototype.ra=function(){te(this.g,"b")},ds.prototype.createWebChannel=ds.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,r0=function(){return new ds},i0=function(){return bi()},n0=In,Dd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},z.NO_ERROR=0,z.TIMEOUT=8,z.HTTP_ERROR=6,_c=z,tt.COMPLETE="complete",e0=tt,Ki.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",fe.prototype.listen=fe.prototype.K,go=Ki,ne.prototype.listenOnce=ne.prototype.L,ne.prototype.getLastError=ne.prototype.Ka,ne.prototype.getLastErrorCode=ne.prototype.Ba,ne.prototype.getStatus=ne.prototype.Z,ne.prototype.getResponseJson=ne.prototype.Oa,ne.prototype.getResponseText=ne.prototype.oa,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Ha,t0=ne}).apply(typeof cc<"u"?cc:typeof self<"u"?self:typeof window<"u"?window:{});const wv="@firebase/firestore",Rv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new $_("@firebase/firestore");function qs(){return Ya.logLevel}function St(r,...e){if(Ya.logLevel<=Wt.DEBUG){const i=e.map(im);Ya.debug(`Firestore (${sl}): ${r}`,...i)}}function Tr(r,...e){if(Ya.logLevel<=Wt.ERROR){const i=e.map(im);Ya.error(`Firestore (${sl}): ${r}`,...i)}}function Xs(r,...e){if(Ya.logLevel<=Wt.WARN){const i=e.map(im);Ya.warn(`Firestore (${sl}): ${r}`,...i)}}function im(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r="Unexpected state"){const e=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: `+r;throw Tr(e),new Error(e)}function ie(r,e){r||Mt()}function Ut(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends al{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(fn.UNAUTHENTICATED))}shutdown(){}}class yA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class vA{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){ie(this.o===void 0);let s=this.i;const o=y=>this.i!==s?(s=this.i,i(y)):Promise.resolve();let u=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new _r,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new _r)}},0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ie(typeof s.accessToken=="string"),new a0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new fn(e)}}class _A{constructor(e,i,s){this.l=e,this.h=i,this.P=s,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class EA{constructor(e,i,s){this.l=e,this.h=i,this.P=s}getToken(){return Promise.resolve(new _A(this.l,this.h,this.P))}start(e,i){e.enqueueRetryable(()=>i(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bA{constructor(e,i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,JS(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,i){ie(this.o===void 0);const s=u=>{u.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,St("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Cv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(ie(typeof i.token=="string"),this.R=i.token,new Cv(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=TA(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<i&&(s+=e.charAt(o[u]%62))}return s}}function Bt(r,e){return r<e?-1:r>e?1:0}function Id(r,e){let i=0;for(;i<r.length&&i<e.length;){const s=r.codePointAt(i),o=e.codePointAt(i);if(s!==o){if(s<128&&o<128)return Bt(s,o);{const u=s0(),f=SA(u.encode(Dv(r,i)),u.encode(Dv(e,i)));return f!==0?f:Bt(s,o)}}i+=s>65535?2:1}return Bt(r.length,e.length)}function Dv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function SA(r,e){for(let i=0;i<r.length&&i<e.length;++i)if(r[i]!==e[i])return Bt(r[i],e[i]);return Bt(r.length,e.length)}function Ws(r,e,i){return r.length===e.length&&r.every((s,o)=>i(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=-62135596800,Vv=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),s=Math.floor((e-1e3*i)*Vv);return new qe(i,s)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new At(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new At(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Iv)throw new At(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new At(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vv}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Iv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{static fromTimestamp(e){return new jt(e)}static min(){return new jt(new qe(0,0))}static max(){return new jt(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="__name__";class ki{constructor(e,i,s){i===void 0?i=0:i>e.length&&Mt(),s===void 0?s=e.length-i:s>e.length-i&&Mt(),this.segments=e,this.offset=i,this.len=s}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(s=>{i.push(s)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,s=this.limit();i<s;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const s=Math.min(e.length,i.length);for(let o=0;o<s;o++){const u=ki.compareSegments(e.get(o),i.get(o));if(u!==0)return u}return Bt(e.length,i.length)}static compareSegments(e,i){const s=ki.isNumericId(e),o=ki.isNumericId(i);return s&&!o?-1:!s&&o?1:s&&o?ki.extractNumericId(e).compare(ki.extractNumericId(i)):Id(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return na.fromString(e.substring(4,e.length-2))}}class ge extends ki{construct(e,i,s){return new ge(e,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const s of e){if(s.indexOf("//")>=0)throw new At(lt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(o=>o.length>0))}return new ge(i)}static emptyPath(){return new ge([])}}const AA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends ki{construct(e,i,s){return new sn(e,i,s)}static isValidIdentifier(e){return AA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nv}static keyField(){return new sn([Nv])}static fromServerFormat(e){const i=[];let s="",o=0;const u=()=>{if(s.length===0)throw new At(lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new At(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new At(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new At(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(i)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.path=e}static fromPath(e){return new It(ge.fromString(e))}static fromName(e){return new It(ge.fromString(e).popFirst(5))}static empty(){return new It(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return ge.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new ge(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=-1;function xA(r,e){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=jt.fromTimestamp(s===1e9?new qe(i+1,0):new qe(i,s));return new aa(o,It.empty(),e)}function wA(r){return new aa(r.readTime,r.key,Ro)}class aa{constructor(e,i,s){this.readTime=e,this.documentKey=i,this.largestBatchId=s}static min(){return new aa(jt.min(),It.empty(),Ro)}static max(){return new aa(jt.max(),It.empty(),Ro)}}function RA(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=It.comparator(r.documentKey,e.documentKey),i!==0?i:Bt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(r){if(r.code!==lt.FAILED_PRECONDITION||r.message!==CA)throw r;St("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ot((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(i,u).next(s,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof ot?i:ot.resolve(i)}catch(i){return ot.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):ot.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):ot.reject(i)}static resolve(e){return new ot((i,s)=>{i(e)})}static reject(e){return new ot((i,s)=>{s(e)})}static waitFor(e){return new ot((i,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&i()},y=>s(y))}),f=!0,u===o&&i()})}static or(e){let i=ot.resolve(!1);for(const s of e)i=i.next(o=>o?ot.resolve(o):s());return i}static forEach(e,i){const s=[];return e.forEach((o,u)=>{s.push(i.call(this,o,u))}),this.waitFor(s)}static mapArray(e,i){return new ot((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const p=y;i(e[p]).next(b=>{f[p]=b,++m,m===u&&s(f)},b=>o(b))}})}static doWhile(e,i){return new ot((s,o)=>{const u=()=>{e()===!0?i().next(()=>{u()},o):s()};u()})}}function IA(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function ol(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=s=>this.oe(s),this._e=s=>i.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Gc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=-1;function Fc(r){return r==null}function Ic(r){return r===0&&1/r==-1/0}function VA(r){return typeof r=="number"&&Number.isInteger(r)&&!Ic(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="";function NA(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=Ov(e)),e=OA(r.get(i),e);return Ov(e)}function OA(r,e){let i=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":i+="";break;case o0:i+="";break;default:i+=u}}return i}function Ov(r){return r+o0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function ha(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function u0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,i){this.comparator=e,this.root=i||an.EMPTY}insert(e,i){return new Te(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(e){let i=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return i+s.left.size;o<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,s)=>(e(i,s),!1))}toString(){const e=[];return this.inorderTraversal((i,s)=>(e.push(`${i}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}}class hc{constructor(e,i,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=i?s(e.key,i):1,i&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,i,s,o,u){this.key=e,this.value=i,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=u??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,s,o,u){return new an(e??this.key,i??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,i,s),null):u===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let s,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mt();const e=this.left.check();if(e!==this.right.check())throw Mt();return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt()}get value(){throw Mt()}get color(){throw Mt()}get left(){throw Mt()}get right(){throw Mt()}copy(e,i,s,o,u){return this}insert(e,i,s){return new an(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,s)=>(e(i),!1))}forEachInRange(e,i){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(s=>{i=i.add(s)}),i}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const i=this.data.getIterator(),s=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new He(this.comparator);return i.data=e,i}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Bn([])}unionWith(e){let i=new He(sn.comparator);for(const s of this.fields)i=i.add(s);for(const s of e)i=i.add(s);return new Bn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(i,s)=>i.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new c0("Invalid base64 string: "+u):u}}(e);return new ln(i)}static fromUint8Array(e){const i=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new ln(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const MA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(r){if(ie(!!r),typeof r=="string"){let e=0;const i=MA.exec(r);if(ie(!!i),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ie(r.seconds),nanos:Ie(r.nanos)}}function Ie(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function la(r){return typeof r=="string"?ln.fromBase64String(r):ln.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="server_timestamp",f0="__type__",d0="__previous_value__",m0="__local_write_time__";function am(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[f0])===null||i===void 0?void 0:i.stringValue)===h0}function Qc(r){const e=r.mapValue.fields[d0];return am(e)?Qc(e):e}function Co(r){const e=sa(r.mapValue.fields[m0].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,i,s,o,u,f,m,y,p){this.databaseId=e,this.appId=i,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=p}}const Vc="(default)";class Do{constructor(e,i){this.projectId=e,this.database=i||Vc}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(e){return e instanceof Do&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="__type__",UA="__max__",fc={mapValue:{}},g0="__vector__",Nc="value";function oa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?am(r)?4:LA(r)?9007199254740991:kA(r)?10:11:Mt()}function zi(r,e){if(r===e)return!0;const i=oa(r);if(i!==oa(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Co(r).isEqual(Co(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=sa(o.timestampValue),m=sa(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return la(o.bytesValue).isEqual(la(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return Ie(o.geoPointValue.latitude)===Ie(u.geoPointValue.latitude)&&Ie(o.geoPointValue.longitude)===Ie(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ie(o.integerValue)===Ie(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Ie(o.doubleValue),m=Ie(u.doubleValue);return f===m?Ic(f)===Ic(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return Ws(r.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Mv(f)!==Mv(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!zi(f[y],m[y])))return!1;return!0}(r,e);default:return Mt()}}function Io(r,e){return(r.values||[]).find(i=>zi(i,e))!==void 0}function Zs(r,e){if(r===e)return 0;const i=oa(r),s=oa(e);if(i!==s)return Bt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Bt(r.booleanValue,e.booleanValue);case 2:return function(u,f){const m=Ie(u.integerValue||u.doubleValue),y=Ie(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(r,e);case 3:return Uv(r.timestampValue,e.timestampValue);case 4:return Uv(Co(r),Co(e));case 5:return Id(r.stringValue,e.stringValue);case 6:return function(u,f){const m=la(u),y=la(f);return m.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),y=f.split("/");for(let p=0;p<m.length&&p<y.length;p++){const b=Bt(m[p],y[p]);if(b!==0)return b}return Bt(m.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Bt(Ie(u.latitude),Ie(f.latitude));return m!==0?m:Bt(Ie(u.longitude),Ie(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return kv(r.arrayValue,e.arrayValue);case 10:return function(u,f){var m,y,p,b;const T=u.fields||{},x=f.fields||{},C=(m=T[Nc])===null||m===void 0?void 0:m.arrayValue,I=(y=x[Nc])===null||y===void 0?void 0:y.arrayValue,B=Bt(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((b=I==null?void 0:I.values)===null||b===void 0?void 0:b.length)||0);return B!==0?B:kv(C,I)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===fc.mapValue&&f===fc.mapValue)return 0;if(u===fc.mapValue)return 1;if(f===fc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),p=f.fields||{},b=Object.keys(p);y.sort(),b.sort();for(let T=0;T<y.length&&T<b.length;++T){const x=Id(y[T],b[T]);if(x!==0)return x;const C=Zs(m[y[T]],p[b[T]]);if(C!==0)return C}return Bt(y.length,b.length)}(r.mapValue,e.mapValue);default:throw Mt()}}function Uv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Bt(r,e);const i=sa(r),s=sa(e),o=Bt(i.seconds,s.seconds);return o!==0?o:Bt(i.nanos,s.nanos)}function kv(r,e){const i=r.values||[],s=e.values||[];for(let o=0;o<i.length&&o<s.length;++o){const u=Zs(i[o],s[o]);if(u)return u}return Bt(i.length,s.length)}function Js(r){return Vd(r)}function Vd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const s=sa(i);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return la(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return It.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let s="[",o=!0;for(const u of i.values||[])o?o=!1:s+=",",s+=Vd(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(i){const s=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Vd(i.fields[f])}`;return o+"}"}(r.mapValue):Mt()}function Ec(r){switch(oa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qc(r);return e?16+Ec(e):16;case 5:return 2*r.stringValue.length;case 6:return la(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Ec(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return ha(s.fields,(u,f)=>{o+=u.length+Ec(f)}),o}(r.mapValue);default:throw Mt()}}function Lv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Nd(r){return!!r&&"integerValue"in r}function sm(r){return!!r&&"arrayValue"in r}function Pv(r){return!!r&&"nullValue"in r}function zv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function bc(r){return!!r&&"mapValue"in r}function kA(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[p0])===null||i===void 0?void 0:i.stringValue)===g0}function Eo(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ha(r.mapValue.fields,(i,s)=>e.mapValue.fields[i]=Eo(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Eo(r.arrayValue.values[i]);return e}return Object.assign({},r)}function LA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===UA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let s=0;s<e.length-1;++s)if(i=(i.mapValue.fields||{})[e.get(s)],!bc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eo(i)}setAll(e){let i=sn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,s,o),s={},o=[],i=m.popLast()}f?s[m.lastSegment()]=Eo(f):o.push(m.lastSegment())});const u=this.getFieldsMap(i);this.applyChanges(u,s,o)}delete(e){const i=this.field(e.popLast());bc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=i.mapValue.fields[e.get(s)];bc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(s)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,s){ha(i,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new Cn(Eo(this.value))}}function y0(r){const e=[];return ha(r.fields,(i,s)=>{const o=new sn([i]);if(bc(s)){const u=y0(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,i,s,o,u,f,m){this.key=e,this.documentType=i,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new dn(e,0,jt.min(),jt.min(),jt.min(),Cn.empty(),0)}static newFoundDocument(e,i,s,o){return new dn(e,1,i,jt.min(),s,o,0)}static newNoDocument(e,i){return new dn(e,2,i,jt.min(),jt.min(),Cn.empty(),0)}static newUnknownDocument(e,i){return new dn(e,3,i,jt.min(),jt.min(),Cn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,i){this.position=e,this.inclusive=i}}function Bv(r,e,i){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=It.comparator(It.fromName(f.referenceValue),i.key):s=Zs(f,i.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function qv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!zi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,i="asc"){this.field=e,this.dir=i}}function PA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{}class je extends v0{constructor(e,i,s){super(),this.field=e,this.op=i,this.value=s}static create(e,i,s){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,s):new BA(e,i,s):i==="array-contains"?new GA(e,s):i==="in"?new FA(e,s):i==="not-in"?new QA(e,s):i==="array-contains-any"?new $A(e,s):new je(e,i,s)}static createKeyFieldInFilter(e,i,s){return i==="in"?new qA(e,s):new HA(e,s)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(Zs(i,this.value)):i!==null&&oa(this.value)===oa(i)&&this.matchesComparison(Zs(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends v0{constructor(e,i){super(),this.filters=e,this.op=i,this.ce=null}static create(e,i){return new pi(e,i)}matches(e){return _0(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function _0(r){return r.op==="and"}function E0(r){return zA(r)&&_0(r)}function zA(r){for(const e of r.filters)if(e instanceof pi)return!1;return!0}function Od(r){if(r instanceof je)return r.field.canonicalString()+r.op.toString()+Js(r.value);if(E0(r))return r.filters.map(e=>Od(e)).join(",");{const e=r.filters.map(i=>Od(i)).join(",");return`${r.op}(${e})`}}function b0(r,e){return r instanceof je?function(s,o){return o instanceof je&&s.op===o.op&&s.field.isEqual(o.field)&&zi(s.value,o.value)}(r,e):r instanceof pi?function(s,o){return o instanceof pi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&b0(f,o.filters[m]),!0):!1}(r,e):void Mt()}function T0(r){return r instanceof je?function(i){return`${i.field.canonicalString()} ${i.op} ${Js(i.value)}`}(r):r instanceof pi?function(i){return i.op.toString()+" {"+i.getFilters().map(T0).join(" ,")+"}"}(r):"Filter"}class BA extends je{constructor(e,i,s){super(e,i,s),this.key=It.fromName(s.referenceValue)}matches(e){const i=It.comparator(e.key,this.key);return this.matchesComparison(i)}}class qA extends je{constructor(e,i){super(e,"in",i),this.keys=S0("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class HA extends je{constructor(e,i){super(e,"not-in",i),this.keys=S0("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function S0(r,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(s=>It.fromName(s.referenceValue))}class GA extends je{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return sm(i)&&Io(i.arrayValue,this.value)}}class FA extends je{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Io(this.value.arrayValue,i)}}class QA extends je{constructor(e,i){super(e,"not-in",i)}matches(e){if(Io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&!Io(this.value.arrayValue,i)}}class $A extends je{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!sm(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>Io(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,i=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=i,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function Hv(r,e=null,i=[],s=[],o=null,u=null,f=null){return new YA(r,e,i,s,o,u,f)}function lm(r){const e=Ut(r);if(e.le===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(s=>Od(s)).join(","),i+="|ob:",i+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Fc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>Js(s)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>Js(s)).join(",")),e.le=i}return e.le}function om(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!PA(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!b0(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!qv(r.startAt,e.startAt)&&qv(r.endAt,e.endAt)}function Md(r){return It.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,i=null,s=[],o=[],u=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function KA(r,e,i,s,o,u,f,m){return new ko(r,e,i,s,o,u,f,m)}function $c(r){return new ko(r)}function Gv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function A0(r){return r.collectionGroup!==null}function bo(r){const e=Ut(r);if(e.he===null){e.he=[];const i=new Set;for(const u of e.explicitOrderBy)e.he.push(u),i.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new He(sn.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(p=>{p.isInequality()&&(m=m.add(p.field))})}),m})(e).forEach(u=>{i.has(u.canonicalString())||u.isKeyField()||e.he.push(new Mc(u,s))}),i.has(sn.keyField().canonicalString())||e.he.push(new Mc(sn.keyField(),s))}return e.he}function Li(r){const e=Ut(r);return e.Pe||(e.Pe=XA(e,bo(r))),e.Pe}function XA(r,e){if(r.limitType==="F")return Hv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Mc(o.field,u)});const i=r.endAt?new Oc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Oc(r.startAt.position,r.startAt.inclusive):null;return Hv(r.path,r.collectionGroup,e,r.filters,r.limit,i,s)}}function jd(r,e){const i=r.filters.concat([e]);return new ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Ud(r,e,i){return new ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Yc(r,e){return om(Li(r),Li(e))&&r.limitType===e.limitType}function x0(r){return`${lm(Li(r))}|lt:${r.limitType}`}function Hs(r){return`Query(target=${function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(o=>T0(o)).join(", ")}]`),Fc(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(o=>Js(o)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(o=>Js(o)).join(",")),`Target(${s})`}(Li(r))}; limitType=${r.limitType})`}function Kc(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):It.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of bo(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(f,m,y){const p=Bv(f,m,y);return f.inclusive?p<=0:p<0}(s.startAt,bo(s),o)||s.endAt&&!function(f,m,y){const p=Bv(f,m,y);return f.inclusive?p>=0:p>0}(s.endAt,bo(s),o))}(r,e)}function WA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function w0(r){return(e,i)=>{let s=!1;for(const o of bo(r)){const u=ZA(o,e,i);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function ZA(r,e,i){const s=r.field.isKeyField()?It.comparator(e.key,i.key):function(u,f,m){const y=f.data.field(u),p=m.data.field(u);return y!==null&&p!==null?Zs(y,p):Mt()}(r.field,e,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,i){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,i]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[i]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(i,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return u0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new Te(It.comparator);function Sr(){return JA}const R0=new Te(It.comparator);function yo(...r){let e=R0;for(const i of r)e=e.insert(i.key,i);return e}function C0(r){let e=R0;return r.forEach((i,s)=>e=e.insert(i,s.overlayedDocument)),e}function $a(){return To()}function D0(){return To()}function To(){return new Wa(r=>r.toString(),(r,e)=>r.isEqual(e))}const tx=new Te(It.comparator),ex=new He(It.comparator);function Ft(...r){let e=ex;for(const i of r)e=e.add(i);return e}const nx=new He(Bt);function ix(){return nx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function I0(r){return{integerValue:""+r}}function rx(r,e){return VA(e)?I0(e):um(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function ax(r,e,i){return r instanceof Vo?function(o,u){const f={fields:{[f0]:{stringValue:h0},[m0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&am(u)&&(u=Qc(u)),u&&(f.fields[d0]=u),{mapValue:f}}(i,e):r instanceof No?N0(r,e):r instanceof Oo?O0(r,e):function(o,u){const f=V0(o,u),m=Fv(f)+Fv(o.Ie);return Nd(f)&&Nd(o.Ie)?I0(m):um(o.serializer,m)}(r,e)}function sx(r,e,i){return r instanceof No?N0(r,e):r instanceof Oo?O0(r,e):i}function V0(r,e){return r instanceof jc?function(s){return Nd(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Vo extends Xc{}class No extends Xc{constructor(e){super(),this.elements=e}}function N0(r,e){const i=M0(e);for(const s of r.elements)i.some(o=>zi(o,s))||i.push(s);return{arrayValue:{values:i}}}class Oo extends Xc{constructor(e){super(),this.elements=e}}function O0(r,e){let i=M0(e);for(const s of r.elements)i=i.filter(o=>!zi(o,s));return{arrayValue:{values:i}}}class jc extends Xc{constructor(e,i){super(),this.serializer=e,this.Ie=i}}function Fv(r){return Ie(r.integerValue||r.doubleValue)}function M0(r){return sm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,i){this.field=e,this.transform=i}}function ox(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof No&&o instanceof No||s instanceof Oo&&o instanceof Oo?Ws(s.elements,o.elements,zi):s instanceof jc&&o instanceof jc?zi(s.Ie,o.Ie):s instanceof Vo&&o instanceof Vo}(r.transform,e.transform)}class ux{constructor(e,i){this.version=e,this.transformResults=i}}class _n{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Wc{}function j0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zc(r.key,_n.none()):new Lo(r.key,r.data,_n.none());{const i=r.data,s=Cn.empty();let o=new He(sn.comparator);for(let u of e.fields)if(!o.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new fa(r.key,s,new Bn(o.toArray()),_n.none())}}function cx(r,e,i){r instanceof Lo?function(o,u,f){const m=o.value.clone(),y=$v(o.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,i):r instanceof fa?function(o,u,f){if(!Tc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=$v(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(U0(o)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(r,e,i):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,i)}function So(r,e,i,s){return r instanceof Lo?function(u,f,m,y){if(!Tc(u.precondition,f))return m;const p=u.value.clone(),b=Yv(u.fieldTransforms,y,f);return p.setAll(b),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(r,e,i,s):r instanceof fa?function(u,f,m,y){if(!Tc(u.precondition,f))return m;const p=Yv(u.fieldTransforms,y,f),b=f.data;return b.setAll(U0(u)),b.setAll(p),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(r,e,i,s):function(u,f,m){return Tc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,i)}function hx(r,e){let i=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=V0(s.transform,o||null);u!=null&&(i===null&&(i=Cn.empty()),i.set(s.field,u))}return i||null}function Qv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ws(s,o,(u,f)=>ox(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Lo extends Wc{constructor(e,i,s,o=[]){super(),this.key=e,this.value=i,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Wc{constructor(e,i,s,o,u=[]){super(),this.key=e,this.data=i,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function U0(r){const e=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=r.data.field(i);e.set(i,s)}}),e}function $v(r,e,i){const s=new Map;ie(r.length===i.length);for(let o=0;o<i.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,sx(f,m,i[o]))}return s}function Yv(r,e,i){const s=new Map;for(const o of r){const u=o.transform,f=i.data.field(o.field);s.set(o.field,ax(u,f,e))}return s}class Zc extends Wc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fx extends Wc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,i,s,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,i){const s=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&cx(u,e,s[o])}}applyToLocalView(e,i){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(i=So(s,e,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(i=So(s,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const s=D0();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(o.key)?null:m;const y=j0(f,m);y!==null&&s.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(jt.min())}),s}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(i,s)=>Qv(i,s))&&Ws(this.baseMutations,e.baseMutations,(i,s)=>Qv(i,s))}}class cm{constructor(e,i,s,o){this.batch=e,this.commitVersion=i,this.mutationResults=s,this.docVersions=o}static from(e,i,s){ie(e.mutations.length===s.length);let o=function(){return tx}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new cm(e,i,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,Xt;function gx(r){switch(r){case lt.OK:return Mt();case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return Mt()}}function k0(r){if(r===void 0)return Tr("GRPC error has no .code"),lt.UNKNOWN;switch(r){case Me.OK:return lt.OK;case Me.CANCELLED:return lt.CANCELLED;case Me.UNKNOWN:return lt.UNKNOWN;case Me.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case Me.INTERNAL:return lt.INTERNAL;case Me.UNAVAILABLE:return lt.UNAVAILABLE;case Me.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case Me.NOT_FOUND:return lt.NOT_FOUND;case Me.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case Me.ABORTED:return lt.ABORTED;case Me.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case Me.DATA_LOSS:return lt.DATA_LOSS;default:return Mt()}}(Xt=Me||(Me={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new na([4294967295,4294967295],0);function Kv(r){const e=s0().encode(r),i=new J_;return i.update(e),new Uint8Array(i.digest())}function Xv(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new na([i,s],0),new na([o,u],0)]}class hm{constructor(e,i,s){if(this.bitmap=e,this.padding=i,this.hashCount=s,i<0||i>=8)throw new vo(`Invalid padding: ${i}`);if(s<0)throw new vo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${s}`);if(e.length===0&&i!==0)throw new vo(`Invalid padding when bitmap length is 0: ${i}`);this.Ee=8*e.length-i,this.de=na.fromNumber(this.Ee)}Ae(e,i,s){let o=e.add(i.multiply(na.fromNumber(s)));return o.compare(yx)===1&&(o=new na([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const i=Kv(e),[s,o]=Xv(i);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,i,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new hm(u,o,i);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const i=Kv(e),[s,o]=Xv(i);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const i=Math.floor(e/8),s=e%8;this.bitmap[i]|=1<<s}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,i,s,o,u){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,i,s){const o=new Map;return o.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,i,s)),new Jc(jt.min(),o,new Te(Bt),Sr(),Ft())}}class Po{constructor(e,i,s,o,u){this.resumeToken=e,this.current=i,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,i,s){return new Po(s,i,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,i,s,o){this.me=e,this.removedTargetIds=i,this.key=s,this.fe=o}}class L0{constructor(e,i){this.targetId=e,this.ge=i}}class P0{constructor(e,i,s=ln.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=s,this.cause=o}}class Wv{constructor(){this.pe=0,this.ye=Zv(),this.we=ln.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ft(),i=Ft(),s=Ft();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:s=s.add(o);break;default:Mt()}}),new Po(this.we,this.Se,e,i,s)}Me(){this.be=!1,this.ye=Zv()}xe(e,i){this.be=!0,this.ye=this.ye.insert(e,i)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ie(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class vx{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Sr(),this.$e=dc(),this.Ue=dc(),this.Ke=new Te(Bt)}We(e){for(const i of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(i,e.fe):this.ze(i,e.key,e.fe);for(const i of e.removedTargetIds)this.ze(i,e.key,e.fe)}je(e){this.forEachTarget(e,i=>{const s=this.He(i);switch(e.state){case 0:this.Je(i)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(i);break;case 3:this.Je(i)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(i)&&(this.Ye(i),s.Ce(e.resumeToken));break;default:Mt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.qe.forEach((s,o)=>{this.Je(o)&&i(o)})}Ze(e){const i=e.targetId,s=e.ge.count,o=this.Xe(i);if(o){const u=o.target;if(Md(u))if(s===0){const f=new It(u.path);this.ze(i,f,dn.newNoDocument(f,jt.min()))}else ie(s===1);else{const f=this.et(i);if(f!==s){const m=this.tt(e),y=m?this.nt(m,e,f):1;if(y!==0){this.Ye(i);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,p)}}}}}tt(e){const i=e.ge.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=i;let f,m;try{f=la(s).toUint8Array()}catch(y){if(y instanceof c0)return Xs("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new hm(f,o,u)}catch(y){return Xs(y instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Ee===0?null:m}nt(e,i,s){return i.ge.count===s-this.st(e,i.targetId)?0:2}st(e,i){const s=this.ke.getRemoteKeysForTarget(i);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(i,u,null),o++)}),o}ot(e){const i=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&Md(m.target)){const y=new It(m.target.path);this._t(y).has(f)||this.ut(f,y)||this.ze(f,y,dn.newNoDocument(y,e))}u.ve&&(i.set(f,u.Fe()),u.Me())}});let s=Ft();this.Ue.forEach((u,f)=>{let m=!0;f.forEachWhile(y=>{const p=this.Xe(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new Jc(e,i,this.Ke,this.Qe,s);return this.Qe=Sr(),this.$e=dc(),this.Ue=dc(),this.Ke=new Te(Bt),o}Ge(e,i){if(!this.Je(e))return;const s=this.ut(e,i.key)?2:0;this.He(e).xe(i.key,s),this.Qe=this.Qe.insert(i.key,i),this.$e=this.$e.insert(i.key,this._t(i.key).add(e)),this.Ue=this.Ue.insert(i.key,this.ct(i.key).add(e))}ze(e,i,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,i)?o.xe(i,1):o.Oe(i),this.Ue=this.Ue.insert(i,this.ct(i).delete(e)),this.Ue=this.Ue.insert(i,this.ct(i).add(e)),s&&(this.Qe=this.Qe.insert(i,s))}removeTarget(e){this.qe.delete(e)}et(e){const i=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let i=this.qe.get(e);return i||(i=new Wv,this.qe.set(e,i)),i}ct(e){let i=this.Ue.get(e);return i||(i=new He(Bt),this.Ue=this.Ue.insert(e,i)),i}_t(e){let i=this.$e.get(e);return i||(i=new He(Bt),this.$e=this.$e.insert(e,i)),i}Je(e){const i=this.Xe(e)!==null;return i||St("WatchChangeAggregator","Detected inactive target",e),i}Xe(e){const i=this.qe.get(e);return i&&i.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Wv),this.ke.getRemoteKeysForTarget(e).forEach(i=>{this.ze(e,i,null)})}ut(e,i){return this.ke.getRemoteKeysForTarget(e).has(i)}}function dc(){return new Te(It.comparator)}function Zv(){return new Te(It.comparator)}const _x={asc:"ASCENDING",desc:"DESCENDING"},Ex={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bx={and:"AND",or:"OR"};class Tx{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function kd(r,e){return r.useProto3Json||Fc(e)?e:{value:e}}function Uc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Sx(r,e){return Uc(r,e.toTimestamp())}function Pi(r){return ie(!!r),jt.fromTimestamp(function(i){const s=sa(i);return new qe(s.seconds,s.nanos)}(r))}function fm(r,e){return Ld(r,e).canonicalString()}function Ld(r,e){const i=function(o){return new ge(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?i:i.child(e)}function B0(r){const e=ge.fromString(r);return ie(Q0(e)),e}function Pd(r,e){return fm(r.databaseId,e.path)}function yd(r,e){const i=B0(e);if(i.get(1)!==r.databaseId.projectId)throw new At(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new At(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new It(H0(i))}function q0(r,e){return fm(r.databaseId,e)}function Ax(r){const e=B0(r);return e.length===4?ge.emptyPath():H0(e)}function zd(r){return new ge(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function H0(r){return ie(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Jv(r,e,i){return{name:Pd(r,e),fields:i.value.mapValue.fields}}function xx(r,e){let i;if("targetChange"in e){e.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Mt()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(p,b){return p.useProto3Json?(ie(b===void 0||typeof b=="string"),ln.fromBase64String(b||"")):(ie(b===void 0||b instanceof Buffer||b instanceof Uint8Array),ln.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(p){const b=p.code===void 0?lt.UNKNOWN:k0(p.code);return new At(b,p.message||"")}(f);i=new P0(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=yd(r,s.document.name),u=Pi(s.document.updateTime),f=s.document.createTime?Pi(s.document.createTime):jt.min(),m=new Cn({mapValue:{fields:s.document.fields}}),y=dn.newFoundDocument(o,u,f,m),p=s.targetIds||[],b=s.removedTargetIds||[];i=new Sc(p,b,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=yd(r,s.document),u=s.readTime?Pi(s.readTime):jt.min(),f=dn.newNoDocument(o,u),m=s.removedTargetIds||[];i=new Sc([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=yd(r,s.document),u=s.removedTargetIds||[];i=new Sc([],u,o,null)}else{if(!("filter"in e))return Mt();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new px(o,u),m=s.targetId;i=new L0(m,f)}}return i}function wx(r,e){let i;if(e instanceof Lo)i={update:Jv(r,e.key,e.value)};else if(e instanceof Zc)i={delete:Pd(r,e.key)};else if(e instanceof fa)i={update:Jv(r,e.key,e.data),updateMask:jx(e.fieldMask)};else{if(!(e instanceof fx))return Mt();i={verify:Pd(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof Vo)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof No)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Oo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof jc)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Mt()}(0,s))),e.precondition.isNone||(i.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:Sx(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Mt()}(r,e.precondition)),i}function Rx(r,e){return r&&r.length>0?(ie(e!==void 0),r.map(i=>function(o,u){let f=o.updateTime?Pi(o.updateTime):Pi(u);return f.isEqual(jt.min())&&(f=Pi(u)),new ux(f,o.transformResults||[])}(i,e))):[]}function Cx(r,e){return{documents:[q0(r,e.path)]}}function Dx(r,e){const i={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=q0(r,o);const u=function(p){if(p.length!==0)return F0(pi.create(p,"and"))}(e.filters);u&&(i.structuredQuery.where=u);const f=function(p){if(p.length!==0)return p.map(b=>function(x){return{field:Gs(x.field),direction:Nx(x.dir)}}(b))}(e.orderBy);f&&(i.structuredQuery.orderBy=f);const m=kd(r,e.limit);return m!==null&&(i.structuredQuery.limit=m),e.startAt&&(i.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:i,parent:o}}function Ix(r){let e=Ax(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let o=null;if(s>0){ie(s===1);const b=i.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];i.where&&(u=function(T){const x=G0(T);return x instanceof pi&&E0(x)?x.getFilters():[x]}(i.where));let f=[];i.orderBy&&(f=function(T){return T.map(x=>function(I){return new Mc(Fs(I.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(x))}(i.orderBy));let m=null;i.limit&&(m=function(T){let x;return x=typeof T=="object"?T.value:T,Fc(x)?null:x}(i.limit));let y=null;i.startAt&&(y=function(T){const x=!!T.before,C=T.values||[];return new Oc(C,x)}(i.startAt));let p=null;return i.endAt&&(p=function(T){const x=!T.before,C=T.values||[];return new Oc(C,x)}(i.endAt)),KA(e,o,f,u,m,"F",y,p)}function Vx(r,e){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt()}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function G0(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Fs(i.unaryFilter.field);return je.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Fs(i.unaryFilter.field);return je.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Fs(i.unaryFilter.field);return je.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Fs(i.unaryFilter.field);return je.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Mt()}}(r):r.fieldFilter!==void 0?function(i){return je.create(Fs(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mt()}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return pi.create(i.compositeFilter.filters.map(s=>G0(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Mt()}}(i.compositeFilter.op))}(r):Mt()}function Nx(r){return _x[r]}function Ox(r){return Ex[r]}function Mx(r){return bx[r]}function Gs(r){return{fieldPath:r.canonicalString()}}function Fs(r){return sn.fromServerFormat(r.fieldPath)}function F0(r){return r instanceof je?function(i){if(i.op==="=="){if(zv(i.value))return{unaryFilter:{field:Gs(i.field),op:"IS_NAN"}};if(Pv(i.value))return{unaryFilter:{field:Gs(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(zv(i.value))return{unaryFilter:{field:Gs(i.field),op:"IS_NOT_NAN"}};if(Pv(i.value))return{unaryFilter:{field:Gs(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(i.field),op:Ox(i.op),value:i.value}}}(r):r instanceof pi?function(i){const s=i.getFilters().map(o=>F0(o));return s.length===1?s[0]:{compositeFilter:{op:Mx(i.op),filters:s}}}(r):Mt()}function jx(r){const e=[];return r.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function Q0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,i,s,o,u=jt.min(),f=jt.min(),m=ln.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.Tt=e}}function kx(r){const e=Ix({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.Tn=new Px}addToCollectionParentIndex(e,i){return this.Tn.add(i),ot.resolve()}getCollectionParents(e,i){return ot.resolve(this.Tn.getEntries(i))}addFieldIndex(e,i){return ot.resolve()}deleteFieldIndex(e,i){return ot.resolve()}deleteAllFieldIndexes(e){return ot.resolve()}createTargetIndexes(e,i){return ot.resolve()}getDocumentsMatchingTarget(e,i){return ot.resolve(null)}getIndexType(e,i){return ot.resolve(0)}getFieldIndexes(e,i){return ot.resolve([])}getNextCollectionGroupToUpdate(e){return ot.resolve(null)}getMinOffset(e,i){return ot.resolve(aa.min())}getMinOffsetFromCollectionGroup(e,i){return ot.resolve(aa.min())}updateCollectionGroup(e,i,s){return ot.resolve()}updateIndexEntries(e,i){return ot.resolve()}}class Px{constructor(){this.index={}}add(e){const i=e.lastSegment(),s=e.popLast(),o=this.index[i]||new He(ge.comparator),u=!o.has(s);return this.index[i]=o.add(s),u}has(e){const i=e.lastSegment(),s=e.popLast(),o=this.index[i];return o&&o.has(s)}getEntries(e){return(this.index[e]||new He(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$0=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn($0,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new tl(0)}static Kn(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="LruGarbageCollector",zx=1048576;function n_([r,e],[i,s]){const o=Bt(r,i);return o===0?Bt(e,s):o}class Bx{constructor(e){this.Hn=e,this.buffer=new He(n_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const i=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();n_(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class qx{constructor(e,i,s){this.garbageCollector=e,this.asyncQueue=i,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){St(e_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){ol(i)?St(e_,"Ignoring IndexedDB error during garbage collection: ",i):await ll(i)}await this.er(3e5)})}}class Hx{constructor(e,i){this.tr=e,this.params=i}calculateTargetCount(e,i){return this.tr.nr(e).next(s=>Math.floor(i/100*s))}nthSequenceNumber(e,i){if(i===0)return ot.resolve(Gc.ae);const s=new Bx(i);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,i,s){return this.tr.removeTargets(e,i,s)}removeOrphanedDocuments(e,i){return this.tr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(St("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(t_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t_):this.ir(e,i))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,i){let s,o,u,f,m,y,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,m=Date.now(),this.removeTargets(e,s,i))).next(T=>(u=T,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(p=Date.now(),qs()<=Wt.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${T} documents in `+(p-y)+`ms
Total Duration: ${p-b}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T})))}}function Gx(r,e){return new Hx(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.changes=new Wa(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?ot.resolve(s):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,i,s,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,i){let s=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,i))).next(o=>(s!==null&&So(s.mutation,o,Bn.empty(),qe.now()),o))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(s=>this.getLocalViewOfDocuments(e,s,Ft()).next(()=>s))}getLocalViewOfDocuments(e,i,s=Ft()){const o=$a();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,s).next(u=>{let f=yo();return u.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,i){const s=$a();return this.populateOverlays(e,s,i).next(()=>this.computeViews(e,i,s,Ft()))}populateOverlays(e,i,s){const o=[];return s.forEach(u=>{i.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{i.set(f,m)})})}computeViews(e,i,s,o){let u=Sr();const f=To(),m=function(){return To()}();return i.forEach((y,p)=>{const b=s.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof fa)?u=u.insert(p.key,p):b!==void 0?(f.set(p.key,b.mutation.getFieldMask()),So(b.mutation,p,b.mutation.getFieldMask(),qe.now())):f.set(p.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((p,b)=>f.set(p,b)),i.forEach((p,b)=>{var T;return m.set(p,new Qx(b,(T=f.get(p))!==null&&T!==void 0?T:null))}),m))}recalculateAndSaveOverlays(e,i){const s=To();let o=new Te((f,m)=>f-m),u=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(f=>{for(const m of f)m.keys().forEach(y=>{const p=i.get(y);if(p===null)return;let b=s.get(y)||Bn.empty();b=m.applyToLocalView(p,b),s.set(y,b);const T=(o.get(m.batchId)||Ft()).add(y);o=o.insert(m.batchId,T)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),p=y.key,b=y.value,T=D0();b.forEach(x=>{if(!u.has(x)){const C=j0(i.get(x),s.get(x));C!==null&&T.set(x,C),u=u.add(x)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,T))}return ot.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,i,s,o){return function(f){return It.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):A0(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,s,o):this.getDocumentsMatchingCollectionQuery(e,i,s,o)}getNextDocuments(e,i,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,s.largestBatchId,o-u.size):ot.resolve($a());let m=Ro,y=u;return f.next(p=>ot.forEach(p,(b,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(b)?ot.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{y=y.insert(b,x)}))).next(()=>this.populateOverlays(e,p,u)).next(()=>this.computeViews(e,y,p,Ft())).next(b=>({batchId:m,changes:C0(b)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new It(i)).next(s=>{let o=yo();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,i,s,o){const u=i.collectionGroup;let f=yo();return this.indexManager.getCollectionParents(e,u).next(m=>ot.forEach(m,y=>{const p=function(T,x){return new ko(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next(b=>{b.forEach((T,x)=>{f=f.insert(T,x)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,i,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,s,u,o))).next(f=>{u.forEach((y,p)=>{const b=p.getKey();f.get(b)===null&&(f=f.insert(b,dn.newInvalidDocument(b)))});let m=yo();return f.forEach((y,p)=>{const b=u.get(y);b!==void 0&&So(b.mutation,p,Bn.empty(),qe.now()),Kc(i,p)&&(m=m.insert(y,p))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,i){return ot.resolve(this.dr.get(i))}saveBundleMetadata(e,i){return this.dr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:Pi(o.createTime)}}(i)),ot.resolve()}getNamedQuery(e,i){return ot.resolve(this.Ar.get(i))}saveNamedQuery(e,i){return this.Ar.set(i.name,function(o){return{name:o.name,query:kx(o.bundledQuery),readTime:Pi(o.readTime)}}(i)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.overlays=new Te(It.comparator),this.Rr=new Map}getOverlay(e,i){return ot.resolve(this.overlays.get(i))}getOverlays(e,i){const s=$a();return ot.forEach(i,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,i,s){return s.forEach((o,u)=>{this.Et(e,i,u)}),ot.resolve()}removeOverlaysForBatchId(e,i,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ot.resolve()}getOverlaysForCollection(e,i,s){const o=$a(),u=i.length+1,f=new It(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,p=y.getKey();if(!i.isPrefixOf(p.path))break;p.path.length===u&&y.largestBatchId>s&&o.set(y.getKey(),y)}return ot.resolve(o)}getOverlaysForCollectionGroup(e,i,s,o){let u=new Te((p,b)=>p-b);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===i&&p.largestBatchId>s){let b=u.get(p.largestBatchId);b===null&&(b=$a(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const m=$a(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((p,b)=>m.set(p,b)),!(m.size()>=o)););return ot.resolve(m)}Et(e,i,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new mx(i,s));let u=this.Rr.get(i);u===void 0&&(u=Ft(),this.Rr.set(i,u)),this.Rr.set(i,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return ot.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.Vr=new He(Ke.mr),this.gr=new He(Ke.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,i){const s=new Ke(e,i);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,i){e.forEach(s=>this.addReference(s,i))}removeReference(e,i){this.wr(new Ke(e,i))}Sr(e,i){e.forEach(s=>this.removeReference(s,i))}br(e){const i=new It(new ge([])),s=new Ke(i,e),o=new Ke(i,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const i=new It(new ge([])),s=new Ke(i,e),o=new Ke(i,e+1);let u=Ft();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const i=new Ke(e,0),s=this.Vr.firstAfterOrEqual(i);return s!==null&&e.isEqual(s.key)}}class Ke{constructor(e,i){this.key=e,this.Cr=i}static mr(e,i){return It.comparator(e.key,i.key)||Bt(e.Cr,i.Cr)}static pr(e,i){return Bt(e.Cr,i.Cr)||It.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.Fr=1,this.Mr=new He(Ke.mr)}checkEmpty(e){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new dx(u,i,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Ke(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ot.resolve(f)}lookupMutationBatch(e,i){return ot.resolve(this.Or(i))}getNextMutationBatchAfterBatchId(e,i){const s=i+1,o=this.Nr(s),u=o<0?0:o;return ot.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?rm:this.Fr-1)}getAllMutationBatches(e){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const s=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),ot.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,i){let s=new He(Bt);return i.forEach(o=>{const u=new Ke(o,0),f=new Ke(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),ot.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,i){const s=i.path,o=s.length+1;let u=s;It.isDocumentKey(u)||(u=u.child(""));const f=new Ke(new It(u),0);let m=new He(Bt);return this.Mr.forEachWhile(y=>{const p=y.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(y.Cr)),!0)},f),ot.resolve(this.Br(m))}Br(e){const i=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&i.push(o)}),i}removeMutationBatch(e,i){ie(this.Lr(i.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ot.forEach(i.mutations,o=>{const u=new Ke(o.key,i.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,i){const s=new Ke(i,0),o=this.Mr.firstAfterOrEqual(s);return ot.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ot.resolve()}Lr(e,i){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const i=this.Nr(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.kr=e,this.docs=function(){return new Te(It.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const s=i.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const s=this.docs.get(i);return ot.resolve(s?s.document.mutableCopy():dn.newInvalidDocument(i))}getEntries(e,i){let s=Sr();return i.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))}),ot.resolve(s)}getDocumentsMatchingQuery(e,i,s,o){let u=Sr();const f=i.path,m=new It(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:p,value:{document:b}}=y.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||RA(wA(b),s)<=0||(o.has(b.key)||Kc(i,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ot.resolve(u)}getAllFromCollectionGroup(e,i,s,o){Mt()}qr(e,i){return ot.forEach(this.docs,s=>i(s))}newChangeBuffer(e){return new Jx(this)}getSize(e){return ot.resolve(this.size)}}class Jx extends Fx{constructor(e){super(),this.Ir=e}applyChanges(e){const i=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?i.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ot.waitFor(i)}getFromCache(e,i){return this.Ir.getEntry(e,i)}getAllFromCache(e,i){return this.Ir.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.persistence=e,this.Qr=new Wa(i=>lm(i),om),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new dm,this.targetCount=0,this.Kr=tl.Un()}forEachTarget(e,i){return this.Qr.forEach((s,o)=>i(o)),ot.resolve()}getLastRemoteSnapshotVersion(e){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ot.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(e,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.$r&&(this.$r=i),ot.resolve()}zn(e){this.Qr.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Kr=new tl(i),this.highestTargetId=i),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,i){return this.zn(i),this.targetCount+=1,ot.resolve()}updateTargetData(e,i){return this.zn(i),ot.resolve()}removeTargetData(e,i){return this.Qr.delete(i.target),this.Ur.br(i.targetId),this.targetCount-=1,ot.resolve()}removeTargets(e,i,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=i&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ot.waitFor(u).next(()=>o)}getTargetCount(e){return ot.resolve(this.targetCount)}getTargetData(e,i){const s=this.Qr.get(i)||null;return ot.resolve(s)}addMatchingKeys(e,i,s){return this.Ur.yr(i,s),ot.resolve()}removeMatchingKeys(e,i,s){this.Ur.Sr(i,s);const o=this.persistence.referenceDelegate,u=[];return o&&i.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ot.waitFor(u)}removeMatchingKeysForTargetId(e,i){return this.Ur.br(i),ot.resolve()}getMatchingKeysForTargetId(e,i){const s=this.Ur.vr(i);return ot.resolve(s)}containsKey(e,i){return ot.resolve(this.Ur.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,i){this.Wr={},this.overlays={},this.Gr=new Gc(0),this.zr=!1,this.zr=!0,this.jr=new Xx,this.referenceDelegate=e(this),this.Hr=new tw(this),this.indexManager=new Lx,this.remoteDocumentCache=function(o){return new Zx(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new Ux(i),this.Yr=new Yx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new Kx,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let s=this.Wr[e.toKey()];return s||(s=new Wx(i,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,i,s){St("MemoryPersistence","Starting transaction:",e);const o=new ew(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,i){return ot.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,i)))}}class ew extends DA{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.ti=new dm,this.ni=null}static ri(e){return new mm(e)}get ii(){if(this.ni)return this.ni;throw Mt()}addReference(e,i,s){return this.ti.addReference(s,i),this.ii.delete(s.toString()),ot.resolve()}removeReference(e,i,s){return this.ti.removeReference(s,i),this.ii.add(s.toString()),ot.resolve()}markPotentiallyOrphaned(e,i){return this.ii.add(i.toString()),ot.resolve()}removeTarget(e,i){this.ti.br(i.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,i.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,i))}Zr(){this.ni=new Set}Xr(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.ii,s=>{const o=It.fromPath(s);return this.si(e,o).next(u=>{u||i.removeEntry(o,jt.min())})}).next(()=>(this.ni=null,i.apply(e)))}updateLimboDocument(e,i){return this.si(e,i).next(s=>{s?this.ii.delete(i.toString()):this.ii.add(i.toString())})}Jr(e){return 0}si(e,i){return ot.or([()=>ot.resolve(this.ti.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.ei(e,i)])}}class kc{constructor(e,i){this.persistence=e,this.oi=new Wa(s=>NA(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=Gx(this,i)}static ri(e,i){return new kc(e,i)}Zr(){}Xr(e){return ot.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}nr(e){const i=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>i.next(o=>s+o))}sr(e){let i=0;return this.rr(e,s=>{i++}).next(()=>i)}rr(e,i){return ot.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ot.resolve():i(o)))}removeTargets(e,i,s){return this.persistence.getTargetCache().removeTargets(e,i,s)}removeOrphanedDocuments(e,i){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,i).next(m=>{m||(s++,u.removeEntry(f,jt.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,i){return this.oi.set(i,e.currentSequenceNumber),ot.resolve()}removeTarget(e,i){const s=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,i,s){return this.oi.set(s,e.currentSequenceNumber),ot.resolve()}removeReference(e,i,s){return this.oi.set(s,e.currentSequenceNumber),ot.resolve()}updateLimboDocument(e,i){return this.oi.set(i,e.currentSequenceNumber),ot.resolve()}Jr(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Ec(e.data.value)),i}ar(e,i,s){return ot.or([()=>this.persistence.ei(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.oi.get(i);return ot.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,i,s,o){this.targetId=e,this.fromCache=i,this.Hi=s,this.Ji=o}static Yi(e,i){let s=Ft(),o=Ft();for(const u of i.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new pm(e,i.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return XT()?8:IA(YT())>0?6:4}()}initialize(e,i){this.ns=e,this.indexManager=i,this.Zi=!0}getDocumentsMatchingQuery(e,i,s,o){const u={result:null};return this.rs(e,i).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,i,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new nw;return this._s(e,i,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,i,f,m.size)})}).next(()=>u.result)}us(e,i,s,o){return s.documentReadCount<this.es?(qs()<=Wt.DEBUG&&St("QueryEngine","SDK will not create cache indexes for query:",Hs(i),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ot.resolve()):(qs()<=Wt.DEBUG&&St("QueryEngine","Query:",Hs(i),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(qs()<=Wt.DEBUG&&St("QueryEngine","The SDK decides to create cache indexes for query:",Hs(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(i))):ot.resolve())}rs(e,i){if(Gv(i))return ot.resolve(null);let s=Li(i);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=Ud(i,null,"F"),s=Li(i)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=Ft(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const p=this.cs(i,m);return this.ls(i,p,f,y.readTime)?this.rs(e,Ud(i,null,"F")):this.hs(e,p,i,y)}))})))}ss(e,i,s,o){return Gv(i)||o.isEqual(jt.min())?ot.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(i,u);return this.ls(i,f,s,o)?ot.resolve(null):(qs()<=Wt.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Hs(i)),this.hs(e,f,i,xA(o,Ro)).next(m=>m))})}cs(e,i){let s=new He(w0(e));return i.forEach((o,u)=>{Kc(e,u)&&(s=s.add(u))}),s}ls(e,i,s,o){if(e.limit===null)return!1;if(s.size!==i.size)return!0;const u=e.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,i,s){return qs()<=Wt.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",Hs(i)),this.ns.getDocumentsMatchingQuery(e,i,aa.min(),s)}hs(e,i,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(i.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="LocalStore",rw=3e8;class aw{constructor(e,i,s,o){this.persistence=e,this.Ps=i,this.serializer=o,this.Ts=new Te(Bt),this.Is=new Wa(u=>lm(u),om),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $x(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ts))}}function sw(r,e,i,s){return new aw(r,e,i,s)}async function K0(r,e){const i=Ut(r);return await i.persistence.runTransaction("Handle user change","readonly",s=>{let o;return i.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,i.As(e),i.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let y=Ft();for(const p of o){f.push(p.batchId);for(const b of p.mutations)y=y.add(b.key)}for(const p of u){m.push(p.batchId);for(const b of p.mutations)y=y.add(b.key)}return i.localDocuments.getDocuments(s,y).next(p=>({Rs:p,removedBatchIds:f,addedBatchIds:m}))})})}function lw(r,e){const i=Ut(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=i.ds.newChangeBuffer({trackRemovals:!0});return function(m,y,p,b){const T=p.batch,x=T.keys();let C=ot.resolve();return x.forEach(I=>{C=C.next(()=>b.getEntry(y,I)).next(B=>{const P=p.docVersions.get(I);ie(P!==null),B.version.compareTo(P)<0&&(T.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),b.addEntry(B)))})}),C.next(()=>m.mutationQueue.removeMutationBatch(y,T))}(i,s,e,u).next(()=>u.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Ft();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(y=y.add(m.batch.mutations[p].key));return y}(e))).next(()=>i.localDocuments.getDocuments(s,o))})}function X0(r){const e=Ut(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Hr.getLastRemoteSnapshotVersion(i))}function ow(r,e){const i=Ut(r),s=e.snapshotVersion;let o=i.Ts;return i.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=i.ds.newChangeBuffer({trackRemovals:!0});o=i.Ts;const m=[];e.targetChanges.forEach((b,T)=>{const x=o.get(T);if(!x)return;m.push(i.Hr.removeMatchingKeys(u,b.removedDocuments,T).next(()=>i.Hr.addMatchingKeys(u,b.addedDocuments,T)));let C=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(ln.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,s)),o=o.insert(T,C),function(B,P,q){return B.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=rw?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(x,C,b)&&m.push(i.Hr.updateTargetData(u,C))});let y=Sr(),p=Ft();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(uw(u,f,e.documentUpdates).next(b=>{y=b.Vs,p=b.fs})),!s.isEqual(jt.min())){const b=i.Hr.getLastRemoteSnapshotVersion(u).next(T=>i.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(b)}return ot.waitFor(m).next(()=>f.apply(u)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,y,p)).next(()=>y)}).then(u=>(i.Ts=o,u))}function uw(r,e,i){let s=Ft(),o=Ft();return i.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let f=Sr();return i.forEach((m,y)=>{const p=u.get(m);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(jt.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):St(gm,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",y.version)}),{Vs:f,fs:o}})}function cw(r,e){const i=Ut(r);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=rm),i.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hw(r,e){const i=Ut(r);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return i.Hr.getTargetData(s,e).next(u=>u?(o=u,ot.resolve(o)):i.Hr.allocateTargetId(s).next(f=>(o=new Jr(e,f,"TargetPurposeListen",s.currentSequenceNumber),i.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=i.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ts=i.Ts.insert(s.targetId,s),i.Is.set(e,s.targetId)),s})}async function Bd(r,e,i){const s=Ut(r),o=s.Ts.get(e),u=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!ol(f))throw f;St(gm,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function i_(r,e,i){const s=Ut(r);let o=jt.min(),u=Ft();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,p,b){const T=Ut(y),x=T.Is.get(b);return x!==void 0?ot.resolve(T.Ts.get(x)):T.Hr.getTargetData(p,b)}(s,f,Li(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(y=>{u=y})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,i?o:jt.min(),i?u:Ft())).next(m=>(fw(s,WA(e),m),{documents:m,gs:u})))}function fw(r,e,i){let s=r.Es.get(e)||jt.min();i.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Es.set(e,s)}class r_{constructor(){this.activeTargetIds=ix()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dw{constructor(){this.ho=new r_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,s){}addLocalQueryTarget(e,i=!0){return i&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,i,s){this.Po[e]=i}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new r_,Promise.resolve()}handleUserChange(e,i,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="ConnectivityMonitor";class s_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){St(a_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){St(a_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function qd(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="RestConnection",pw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gw{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=i+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Vc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,i,s,o,u){const f=qd(),m=this.bo(e,i.toUriEncodedString());St(vd,`Sending RPC '${e}' ${f}:`,m,s);const y={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(y,o,u),this.vo(e,m,y,s).then(p=>(St(vd,`Received RPC '${e}' ${f}: `,p),p),p=>{throw Xs(vd,`RPC '${e}' ${f} failed with error: `,p,"url: ",m,"request:",s),p})}Co(e,i,s,o,u,f){return this.So(e,i,s,o,u)}Do(e,i,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,i){const s=pw[e];return`${this.po}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class vw extends gw{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,i,s,o){const u=qd();return new Promise((f,m)=>{const y=new t0;y.setWithCredentials(!0),y.listenOnce(e0.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case _c.NO_ERROR:const b=y.getResponseJson();St(hn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),f(b);break;case _c.TIMEOUT:St(hn,`RPC '${e}' ${u} timed out`),m(new At(lt.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:const T=y.getStatus();if(St(hn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let x=y.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x==null?void 0:x.error;if(C&&C.status&&C.message){const I=function(P){const q=P.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(q)>=0?q:lt.UNKNOWN}(C.status);m(new At(I,C.message))}else m(new At(lt.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new At(lt.UNAVAILABLE,"Connection failed."));break;default:Mt()}}finally{St(hn,`RPC '${e}' ${u} completed.`)}});const p=JSON.stringify(o);St(hn,`RPC '${e}' ${u} sending request:`,o),y.send(i,"POST",p,s,15)})}Wo(e,i,s){const o=qd(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=r0(),m=i0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Do(y.initMessageHeaders,i,s),y.encodeInitMessageHeaders=!0;const b=u.join("");St(hn,`Creating RPC '${e}' stream ${o}: ${b}`,y);const T=f.createWebChannel(b,y);let x=!1,C=!1;const I=new yw({Fo:P=>{C?St(hn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(x||(St(hn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),x=!0),St(hn,`RPC '${e}' stream ${o} sending:`,P),T.send(P))},Mo:()=>T.close()}),B=(P,q,Z)=>{P.listen(q,Q=>{try{Z(Q)}catch(ft){setTimeout(()=>{throw ft},0)}})};return B(T,go.EventType.OPEN,()=>{C||(St(hn,`RPC '${e}' stream ${o} transport opened.`),I.Qo())}),B(T,go.EventType.CLOSE,()=>{C||(C=!0,St(hn,`RPC '${e}' stream ${o} transport closed`),I.Uo())}),B(T,go.EventType.ERROR,P=>{C||(C=!0,Xs(hn,`RPC '${e}' stream ${o} transport errored:`,P),I.Uo(new At(lt.UNAVAILABLE,"The operation could not be completed")))}),B(T,go.EventType.MESSAGE,P=>{var q;if(!C){const Z=P.data[0];ie(!!Z);const Q=Z,ft=(Q==null?void 0:Q.error)||((q=Q[0])===null||q===void 0?void 0:q.error);if(ft){St(hn,`RPC '${e}' stream ${o} received error:`,ft);const pt=ft.status;let wt=function(V){const w=Me[V];if(w!==void 0)return k0(w)}(pt),k=ft.message;wt===void 0&&(wt=lt.INTERNAL,k="Unknown error status: "+pt+" with message "+ft.message),C=!0,I.Uo(new At(wt,k)),T.close()}else St(hn,`RPC '${e}' stream ${o} received:`,Z),I.Ko(Z)}}),B(m,n0.STAT_EVENT,P=>{P.stat===Dd.PROXY?St(hn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===Dd.NOPROXY&&St(hn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.$o()},0),I}}function _d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(r){return new Tx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,i,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=i,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const i=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,i-s);o>0&&St("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="PersistentStream";class Z0{constructor(e,i,s,o,u,f,m,y){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new W0(e,i)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,i){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():i&&i.code===lt.RESOURCE_EXHAUSTED?(Tr(i.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):i&&i.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(i)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),i=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===i&&this.V_(s,o)},s=>{e(()=>{const o=new At(lt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,i){const s=this.R_(this.i_);this.stream=this.f_(e,i),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return St(l_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return i=>{this.Ti.enqueueAndForget(()=>this.i_===e?i():(St(l_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _w extends Z0{constructor(e,i,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,o,f),this.serializer=u}f_(e,i){return this.connection.Wo("Listen",e,i)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const i=xx(this.serializer,e),s=function(u){if(!("targetChange"in u))return jt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?jt.min():f.readTime?Pi(f.readTime):jt.min()}(e);return this.listener.p_(i,s)}y_(e){const i={};i.database=zd(this.serializer),i.addTarget=function(u,f){let m;const y=f.target;if(m=Md(y)?{documents:Cx(u,y)}:{query:Dx(u,y).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=z0(u,f.resumeToken);const p=kd(u,f.expectedCount);p!==null&&(m.expectedCount=p)}else if(f.snapshotVersion.compareTo(jt.min())>0){m.readTime=Uc(u,f.snapshotVersion.toTimestamp());const p=kd(u,f.expectedCount);p!==null&&(m.expectedCount=p)}return m}(this.serializer,e);const s=Vx(this.serializer,e);s&&(i.labels=s),this.I_(i)}w_(e){const i={};i.database=zd(this.serializer),i.removeTarget=e,this.I_(i)}}class Ew extends Z0{constructor(e,i,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,i){return this.connection.Wo("Write",e,i)}g_(e){return ie(!!e.streamToken),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const i=Rx(e.writeResults,e.commitTime),s=Pi(e.commitTime);return this.listener.v_(s,i)}C_(){const e={};e.database=zd(this.serializer),this.I_(e)}b_(e){const i={streamToken:this.lastStreamToken,writes:e.map(s=>wx(this.serializer,s))};this.I_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{}class Tw extends bw{constructor(e,i,s,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new At(lt.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,i,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,Ld(i,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new At(lt.UNKNOWN,u.toString())})}Co(e,i,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,Ld(i,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new At(lt.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Sw{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Tr(i),this.N_=!1):St("OnlineStateTracker",i)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class Aw{constructor(e,i,s,o,u){this.localStore=e,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{Za(this)&&(St(Ka,"Restarting streams for network reachability change."),await async function(y){const p=Ut(y);p.W_.add(4),await zo(p),p.j_.set("Unknown"),p.W_.delete(4),await eh(p)}(this))})}),this.j_=new Sw(s,o)}}async function eh(r){if(Za(r))for(const e of r.G_)await e(!0)}async function zo(r){for(const e of r.G_)await e(!1)}function J0(r,e){const i=Ut(r);i.K_.has(e.targetId)||(i.K_.set(e.targetId,e),Em(i)?_m(i):ul(i).c_()&&vm(i,e))}function ym(r,e){const i=Ut(r),s=ul(i);i.K_.delete(e),s.c_()&&tE(i,e),i.K_.size===0&&(s.c_()?s.P_():Za(i)&&i.j_.set("Unknown"))}function vm(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(jt.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}ul(r).y_(e)}function tE(r,e){r.H_.Ne(e),ul(r).w_(e)}function _m(r){r.H_=new vx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),ul(r).start(),r.j_.B_()}function Em(r){return Za(r)&&!ul(r).u_()&&r.K_.size>0}function Za(r){return Ut(r).W_.size===0}function eE(r){r.H_=void 0}async function xw(r){r.j_.set("Online")}async function ww(r){r.K_.forEach((e,i)=>{vm(r,e)})}async function Rw(r,e){eE(r),Em(r)?(r.j_.q_(e),_m(r)):r.j_.set("Unknown")}async function Cw(r,e,i){if(r.j_.set("Online"),e instanceof P0&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(r,e)}catch(s){St(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Lc(r,s)}else if(e instanceof Sc?r.H_.We(e):e instanceof L0?r.H_.Ze(e):r.H_.je(e),!i.isEqual(jt.min()))try{const s=await X0(r.localStore);i.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const b=u.K_.get(p);b&&u.K_.set(p,b.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,p)=>{const b=u.K_.get(y);if(!b)return;u.K_.set(y,b.withResumeToken(ln.EMPTY_BYTE_STRING,b.snapshotVersion)),tE(u,y);const T=new Jr(b.target,y,p,b.sequenceNumber);vm(u,T)}),u.remoteSyncer.applyRemoteEvent(m)}(r,i)}catch(s){St(Ka,"Failed to raise snapshot:",s),await Lc(r,s)}}async function Lc(r,e,i){if(!ol(e))throw e;r.W_.add(1),await zo(r),r.j_.set("Offline"),i||(i=()=>X0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{St(Ka,"Retrying IndexedDB access"),await i(),r.W_.delete(1),await eh(r)})}function nE(r,e){return e().catch(i=>Lc(r,i,e))}async function nh(r){const e=Ut(r),i=ua(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:rm;for(;Dw(e);)try{const o=await cw(e.localStore,s);if(o===null){e.U_.length===0&&i.P_();break}s=o.batchId,Iw(e,o)}catch(o){await Lc(e,o)}iE(e)&&rE(e)}function Dw(r){return Za(r)&&r.U_.length<10}function Iw(r,e){r.U_.push(e);const i=ua(r);i.c_()&&i.S_&&i.b_(e.mutations)}function iE(r){return Za(r)&&!ua(r).u_()&&r.U_.length>0}function rE(r){ua(r).start()}async function Vw(r){ua(r).C_()}async function Nw(r){const e=ua(r);for(const i of r.U_)e.b_(i.mutations)}async function Ow(r,e,i){const s=r.U_.shift(),o=cm.from(s,e,i);await nE(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await nh(r)}async function Mw(r,e){e&&ua(r).S_&&await async function(s,o){if(function(f){return gx(f)&&f!==lt.ABORTED}(o.code)){const u=s.U_.shift();ua(s).h_(),await nE(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await nh(s)}}(r,e),iE(r)&&rE(r)}async function o_(r,e){const i=Ut(r);i.asyncQueue.verifyOperationInProgress(),St(Ka,"RemoteStore received new credentials");const s=Za(i);i.W_.add(3),await zo(i),s&&i.j_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.W_.delete(3),await eh(i)}async function jw(r,e){const i=Ut(r);e?(i.W_.delete(2),await eh(i)):e||(i.W_.add(2),await zo(i),i.j_.set("Unknown"))}function ul(r){return r.J_||(r.J_=function(i,s,o){const u=Ut(i);return u.M_(),new _w(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:xw.bind(null,r),No:ww.bind(null,r),Lo:Rw.bind(null,r),p_:Cw.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Em(r)?_m(r):r.j_.set("Unknown")):(await r.J_.stop(),eE(r))})),r.J_}function ua(r){return r.Y_||(r.Y_=function(i,s,o){const u=Ut(i);return u.M_(),new Ew(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:Vw.bind(null,r),Lo:Mw.bind(null,r),D_:Nw.bind(null,r),v_:Ow.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await nh(r)):(await r.Y_.stop(),r.U_.length>0&&(St(Ka,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,i,s,o,u){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,s,o,u){const f=Date.now()+s,m=new bm(e,i,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tm(r,e){if(Tr("AsyncQueue",`${e}: ${r}`),ol(r))return new At(lt.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{static emptySet(e){return new Ks(e.comparator)}constructor(e){this.comparator=e?(i,s)=>e(i,s)||It.comparator(i.key,s.key):(i,s)=>It.comparator(i.key,s.key),this.keyedMap=yo(),this.sortedSet=new Te(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,s)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const s=new Ks;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.Z_=new Te(It.comparator)}track(e){const i=e.doc.key,s=this.Z_.get(i);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(i,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(i,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(i,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(i):e.type===1&&s.type===2?this.Z_=this.Z_.insert(i,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):Mt():this.Z_=this.Z_.insert(i,e)}X_(){const e=[];return this.Z_.inorderTraversal((i,s)=>{e.push(s)}),e}}class el{constructor(e,i,s,o,u,f,m,y,p){this.query=e,this.docs=i,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,i,s,o,u){const f=[];return i.forEach(m=>{f.push({type:0,doc:m})}),new el(e,i,Ks.emptySet(i),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,s=e.docChanges;if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==s[o].type||!i[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class kw{constructor(){this.queries=c_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(i,s){const o=Ut(i),u=o.queries;o.queries=c_(),u.forEach((f,m)=>{for(const y of m.ta)y.onError(s)})})(this,new At(lt.ABORTED,"Firestore shutting down"))}}function c_(){return new Wa(r=>x0(r),Yc)}async function Sm(r,e){const i=Ut(r);let s=3;const o=e.query;let u=i.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new Uw,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await i.onListen(o,!0);break;case 1:u.ea=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=Tm(f,`Initialization of query '${Hs(e.query)}' failed`);return void e.onError(m)}i.queries.set(o,u),u.ta.push(e),e.sa(i.onlineState),u.ea&&e.oa(u.ea)&&xm(i)}async function Am(r,e){const i=Ut(r),s=e.query;let o=3;const u=i.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function Lw(r,e){const i=Ut(r);let s=!1;for(const o of e){const u=o.query,f=i.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&xm(i)}function Pw(r,e,i){const s=Ut(r),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(i);s.queries.delete(e)}function xm(r){r.ia.forEach(e=>{e.next()})}var Hd,h_;(h_=Hd||(Hd={}))._a="default",h_.Cache="cache";class wm{constructor(e,i,s){this.query=e,this.aa=i,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new el(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.ua?this.la(e)&&(this.aa.next(e),i=!0):this.ha(e,this.onlineState)&&(this.Pa(e),i=!0),this.ca=e,i}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let i=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),i=!0),i}ha(e,i){if(!e.fromCache||!this.ra())return!0;const s=i!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}la(e){if(e.docChanges.length>0)return!0;const i=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Pa(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.key=e}}class sE{constructor(e){this.key=e}}class zw{constructor(e,i){this.query=e,this.fa=i,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ft(),this.mutatedKeys=Ft(),this.ya=w0(e),this.wa=new Ks(this.ya)}get Sa(){return this.fa}ba(e,i){const s=i?i.Da:new u_,o=i?i.wa:this.wa;let u=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,T)=>{const x=o.get(b),C=Kc(this.query,T)?T:null,I=!!x&&this.mutatedKeys.has(x.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let P=!1;x&&C?x.data.isEqual(C.data)?I!==B&&(s.track({type:3,doc:C}),P=!0):this.va(x,C)||(s.track({type:2,doc:C}),P=!0,(y&&this.ya(C,y)>0||p&&this.ya(C,p)<0)&&(m=!0)):!x&&C?(s.track({type:0,doc:C}),P=!0):x&&!C&&(s.track({type:1,doc:x}),P=!0,(y||p)&&(m=!0)),P&&(C?(f=f.add(C),u=B?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),s.track({type:1,doc:b})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((b,T)=>function(C,I){const B=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt()}};return B(C)-B(I)}(b.type,T.type)||this.ya(b.doc,T.doc)),this.Ca(s),o=o!=null&&o;const m=i&&!o?this.Fa():[],y=this.pa.size===0&&this.current&&!o?1:0,p=y!==this.ga;return this.ga=y,f.length!==0||p?{snapshot:new el(this.query,e.wa,u,f,e.mutatedKeys,y===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new u_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(i=>this.fa=this.fa.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.fa=this.fa.delete(i)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ft(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const i=[];return e.forEach(s=>{this.pa.has(s)||i.push(new sE(s))}),this.pa.forEach(s=>{e.has(s)||i.push(new aE(s))}),i}Oa(e){this.fa=e.gs,this.pa=Ft();const i=this.ba(e.documents);return this.applyChanges(i,!0)}Na(){return el.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Rm="SyncEngine";class Bw{constructor(e,i,s){this.query=e,this.targetId=i,this.view=s}}class qw{constructor(e){this.key=e,this.Ba=!1}}class Hw{constructor(e,i,s,o,u,f){this.localStore=e,this.remoteStore=i,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new Wa(m=>x0(m),Yc),this.qa=new Map,this.Qa=new Set,this.$a=new Te(It.comparator),this.Ua=new Map,this.Ka=new dm,this.Wa={},this.Ga=new Map,this.za=tl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Gw(r,e,i=!0){const s=fE(r);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await lE(s,e,i,!0),o}async function Fw(r,e){const i=fE(r);await lE(i,e,!0,!1)}async function lE(r,e,i,s){const o=await hw(r.localStore,Li(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,i);let m;return s&&(m=await Qw(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&i&&J0(r.remoteStore,o),m}async function Qw(r,e,i,s,o){r.Ha=(T,x,C)=>async function(B,P,q,Z){let Q=P.view.ba(q);Q.ls&&(Q=await i_(B.localStore,P.query,!1).then(({documents:k})=>P.view.ba(k,Q)));const ft=Z&&Z.targetChanges.get(P.targetId),pt=Z&&Z.targetMismatches.get(P.targetId)!=null,wt=P.view.applyChanges(Q,B.isPrimaryClient,ft,pt);return d_(B,P.targetId,wt.Ma),wt.snapshot}(r,T,x,C);const u=await i_(r.localStore,e,!0),f=new zw(e,u.gs),m=f.ba(u.documents),y=Po.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",o),p=f.applyChanges(m,r.isPrimaryClient,y);d_(r,i,p.Ma);const b=new Bw(e,i,f);return r.ka.set(e,b),r.qa.has(i)?r.qa.get(i).push(e):r.qa.set(i,[e]),p.snapshot}async function $w(r,e,i){const s=Ut(r),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!Yc(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Bd(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),i&&ym(s.remoteStore,o.targetId),Gd(s,o.targetId)}).catch(ll)):(Gd(s,o.targetId),await Bd(s.localStore,o.targetId,!0))}async function Yw(r,e){const i=Ut(r),s=i.ka.get(e),o=i.qa.get(s.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),ym(i.remoteStore,s.targetId))}async function Kw(r,e,i){const s=nR(r);try{const o=await function(f,m){const y=Ut(f),p=qe.now(),b=m.reduce((C,I)=>C.add(I.key),Ft());let T,x;return y.persistence.runTransaction("Locally write mutations","readwrite",C=>{let I=Sr(),B=Ft();return y.ds.getEntries(C,b).next(P=>{I=P,I.forEach((q,Z)=>{Z.isValidDocument()||(B=B.add(q))})}).next(()=>y.localDocuments.getOverlayedDocuments(C,I)).next(P=>{T=P;const q=[];for(const Z of m){const Q=hx(Z,T.get(Z.key).overlayedDocument);Q!=null&&q.push(new fa(Z.key,Q,y0(Q.value.mapValue),_n.exists(!0)))}return y.mutationQueue.addMutationBatch(C,p,q,m)}).next(P=>{x=P;const q=P.applyToLocalDocumentSet(T,B);return y.documentOverlayCache.saveOverlays(C,P.batchId,q)})}).then(()=>({batchId:x.batchId,changes:C0(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let p=f.Wa[f.currentUser.toKey()];p||(p=new Te(Bt)),p=p.insert(m,y),f.Wa[f.currentUser.toKey()]=p}(s,o.batchId,i),await Bo(s,o.changes),await nh(s.remoteStore)}catch(o){const u=Tm(o,"Failed to persist write");i.reject(u)}}async function oE(r,e){const i=Ut(r);try{const s=await ow(i.localStore,e);e.targetChanges.forEach((o,u)=>{const f=i.Ua.get(u);f&&(ie(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?ie(f.Ba):o.removedDocuments.size>0&&(ie(f.Ba),f.Ba=!1))}),await Bo(i,s,e)}catch(s){await ll(s)}}function f_(r,e,i){const s=Ut(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Ut(f);y.onlineState=m;let p=!1;y.queries.forEach((b,T)=>{for(const x of T.ta)x.sa(m)&&(p=!0)}),p&&xm(y)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Xw(r,e,i){const s=Ut(r);s.sharedClientState.updateQueryState(e,"rejected",i);const o=s.Ua.get(e),u=o&&o.key;if(u){let f=new Te(It.comparator);f=f.insert(u,dn.newNoDocument(u,jt.min()));const m=Ft().add(u),y=new Jc(jt.min(),new Map,new Te(Bt),f,m);await oE(s,y),s.$a=s.$a.remove(u),s.Ua.delete(e),Cm(s)}else await Bd(s.localStore,e,!1).then(()=>Gd(s,e,i)).catch(ll)}async function Ww(r,e){const i=Ut(r),s=e.batch.batchId;try{const o=await lw(i.localStore,e);cE(i,s,null),uE(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Bo(i,o)}catch(o){await ll(o)}}async function Zw(r,e,i){const s=Ut(r);try{const o=await function(f,m){const y=Ut(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let b;return y.mutationQueue.lookupMutationBatch(p,m).next(T=>(ie(T!==null),b=T.keys(),y.mutationQueue.removeMutationBatch(p,T))).next(()=>y.mutationQueue.performConsistencyCheck(p)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(p,b,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b)).next(()=>y.localDocuments.getDocuments(p,b))})}(s.localStore,e);cE(s,e,i),uE(s,e),s.sharedClientState.updateMutationState(e,"rejected",i),await Bo(s,o)}catch(o){await ll(o)}}function uE(r,e){(r.Ga.get(e)||[]).forEach(i=>{i.resolve()}),r.Ga.delete(e)}function cE(r,e,i){const s=Ut(r);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(i?u.reject(i):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function Gd(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.qa.get(e))r.ka.delete(s),i&&r.La.Ja(s,i);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(s=>{r.Ka.containsKey(s)||hE(r,s)})}function hE(r,e){r.Qa.delete(e.path.canonicalString());const i=r.$a.get(e);i!==null&&(ym(r.remoteStore,i),r.$a=r.$a.remove(e),r.Ua.delete(i),Cm(r))}function d_(r,e,i){for(const s of i)s instanceof aE?(r.Ka.addReference(s.key,e),Jw(r,s)):s instanceof sE?(St(Rm,"Document no longer in limbo: "+s.key),r.Ka.removeReference(s.key,e),r.Ka.containsKey(s.key)||hE(r,s.key)):Mt()}function Jw(r,e){const i=e.key,s=i.path.canonicalString();r.$a.get(i)||r.Qa.has(s)||(St(Rm,"New document in limbo: "+i),r.Qa.add(s),Cm(r))}function Cm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const i=new It(ge.fromString(e)),s=r.za.next();r.Ua.set(s,new qw(i)),r.$a=r.$a.insert(i,s),J0(r.remoteStore,new Jr(Li($c(i.path)),s,"TargetPurposeLimboResolution",Gc.ae))}}async function Bo(r,e,i){const s=Ut(r),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,y)=>{f.push(s.Ha(y,e,i).then(p=>{var b;if((p||i)&&s.isPrimaryClient){const T=p?!p.fromCache:(b=i==null?void 0:i.targetChanges.get(y.targetId))===null||b===void 0?void 0:b.current;s.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(p){o.push(p);const T=pm.Yi(y.targetId,p);u.push(T)}}))}),await Promise.all(f),s.La.p_(o),await async function(y,p){const b=Ut(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ot.forEach(p,x=>ot.forEach(x.Hi,C=>b.persistence.referenceDelegate.addReference(T,x.targetId,C)).next(()=>ot.forEach(x.Ji,C=>b.persistence.referenceDelegate.removeReference(T,x.targetId,C)))))}catch(T){if(!ol(T))throw T;St(gm,"Failed to update sequence numbers: "+T)}for(const T of p){const x=T.targetId;if(!T.fromCache){const C=b.Ts.get(x),I=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(I);b.Ts=b.Ts.insert(x,B)}}}(s.localStore,u))}async function tR(r,e){const i=Ut(r);if(!i.currentUser.isEqual(e)){St(Rm,"User change. New user:",e.toKey());const s=await K0(i.localStore,e);i.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(y=>{y.reject(new At(lt.CANCELLED,f))})}),u.Ga.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Bo(i,s.Rs)}}function eR(r,e){const i=Ut(r),s=i.Ua.get(e);if(s&&s.Ba)return Ft().add(s.key);{let o=Ft();const u=i.qa.get(e);if(!u)return o;for(const f of u){const m=i.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function fE(r){const e=Ut(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xw.bind(null,e),e.La.p_=Lw.bind(null,e.eventManager),e.La.Ja=Pw.bind(null,e.eventManager),e}function nR(r){const e=Ut(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ww.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zw.bind(null,e),e}class Pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=th(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,i){return null}nu(e,i){return null}eu(e){return sw(this.persistence,new iw,e.initialUser,this.serializer)}Xa(e){return new Y0(mm.ri,this.serializer)}Za(e){return new dw}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pc.provider={build:()=>new Pc};class iR extends Pc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,i){ie(this.persistence.referenceDelegate instanceof kc);const s=this.persistence.referenceDelegate.garbageCollector;return new qx(s,e.asyncQueue,i)}Xa(e){const i=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new Y0(s=>kc.ri(s,i),this.serializer)}}class Fd{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>f_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tR.bind(null,this.syncEngine),await jw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kw}()}createDatastore(e){const i=th(e.databaseInfo.databaseId),s=function(u){return new vw(u)}(e.databaseInfo);return function(u,f,m,y){return new Tw(u,f,m,y)}(e.authCredentials,e.appCheckCredentials,s,i)}createRemoteStore(e){return function(s,o,u,f,m){return new Aw(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,i=>f_(this.syncEngine,i,0),function(){return s_.D()?new s_:new mw}())}createSyncEngine(e,i){return function(o,u,f,m,y,p,b){const T=new Hw(o,u,f,m,y,p);return b&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(o){const u=Ut(o);St(Ka,"RemoteStore shutting down."),u.W_.add(5),await zo(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}Fd.provider={build:()=>new Fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class rR{constructor(e,i,s,o,u){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=l0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{St(ca,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(St(ca,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const s=Tm(i,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ed(r,e){r.asyncQueue.verifyOperationInProgress(),St(ca,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let s=i.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await K0(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function m_(r,e){r.asyncQueue.verifyOperationInProgress();const i=await aR(r);St(ca,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener(s=>o_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>o_(e.remoteStore,o)),r._onlineComponents=e}async function aR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){St(ca,"Using user provided OfflineComponentProvider");try{await Ed(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(o){return o.name==="FirebaseError"?o.code===lt.FAILED_PRECONDITION||o.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;Xs("Error using user provided cache. Falling back to memory cache: "+i),await Ed(r,new Pc)}}else St(ca,"Using default OfflineComponentProvider"),await Ed(r,new iR(void 0));return r._offlineComponents}async function dE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(St(ca,"Using user provided OnlineComponentProvider"),await m_(r,r._uninitializedComponentsProvider._online)):(St(ca,"Using default OnlineComponentProvider"),await m_(r,new Fd))),r._onlineComponents}function sR(r){return dE(r).then(e=>e.syncEngine)}async function zc(r){const e=await dE(r),i=e.eventManager;return i.onListen=Gw.bind(null,e.syncEngine),i.onUnlisten=$w.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Fw.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=Yw.bind(null,e.syncEngine),i}function lR(r,e,i={}){const s=new _r;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,p){const b=new Dm({next:x=>{b.su(),f.enqueueAndForget(()=>Am(u,T));const C=x.docs.has(m);!C&&x.fromCache?p.reject(new At(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&x.fromCache&&y&&y.source==="server"?p.reject(new At(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),T=new wm($c(m.path),b,{includeMetadataChanges:!0,Ta:!0});return Sm(u,T)}(await zc(r),r.asyncQueue,e,i,s)),s.promise}function oR(r,e,i={}){const s=new _r;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,p){const b=new Dm({next:x=>{b.su(),f.enqueueAndForget(()=>Am(u,T)),x.fromCache&&y.source==="server"?p.reject(new At(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),T=new wm(m,b,{includeMetadataChanges:!0,Ta:!0});return Sm(u,T)}(await zc(r),r.asyncQueue,e,i,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(r,e,i){if(!i)throw new At(lt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function uR(r,e,i,s){if(e===!0&&s===!0)throw new At(lt.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function g_(r){if(!It.isDocumentKey(r))throw new At(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function y_(r){if(It.isDocumentKey(r))throw new At(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ih(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Mt()}function En(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new At(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=ih(r);throw new At(lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firestore.googleapis.com",v_=!0;class __{constructor(e){var i,s;if(e.host===void 0){if(e.ssl!==void 0)throw new At(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gE,this.ssl=v_}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:v_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zx)throw new At(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mE((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new At(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new At(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new At(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,i,s,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new At(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new gA;switch(s.type){case"firstParty":return new EA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new At(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=p_.get(i);s&&(St("ComponentProvider","Removing Datastore"),p_.delete(i),s.terminate())}(this),Promise.resolve()}}function cR(r,e,i,s={}){var o;const u=(r=En(r,rh))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${i}`;u.host!==gE&&u.host!==m&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!Rc(y,f)&&(r._setSettings(y),s.mockUserToken)){let p,b;if(typeof s.mockUserToken=="string")p=s.mockUserToken,b=fn.MOCK_USER;else{p=$T(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new At(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fn(T)}r._authCredentials=new yA(new a0(p,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ja(this.firestore,e,this._query)}}class mn{constructor(e,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class ia extends Ja{constructor(e,i,s){super(e,i,$c(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new It(e))}withConverter(e){return new ia(this.firestore,e,this._path)}}function be(r,e,...i){if(r=li(r),pE("collection","path",e),r instanceof rh){const s=ge.fromString(e,...i);return y_(s),new ia(r,null,s)}{if(!(r instanceof mn||r instanceof ia))throw new At(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ge.fromString(e,...i));return y_(s),new ia(r.firestore,null,s)}}function Lt(r,e,...i){if(r=li(r),arguments.length===1&&(e=l0.newId()),pE("doc","path",e),r instanceof rh){const s=ge.fromString(e,...i);return g_(s),new mn(r,null,new It(s))}{if(!(r instanceof mn||r instanceof ia))throw new At(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ge.fromString(e,...i));return g_(s),new mn(r.firestore,r instanceof ia?r.converter:null,new It(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="AsyncQueue";class b_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new W0(this,"async_queue_retry"),this.Su=()=>{const s=_d();s&&St(E_,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const i=_d();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const i=_d();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const i=new _r;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ol(e))throw e;St(E_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const i=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw Tr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=i,i}enqueueAfterDelay(e,i,s){this.Du(),this.wu.indexOf(e)>-1&&(i=0);const o=bm.createAndSchedule(this,e,i,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Mt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const i of this.fu)if(i.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.fu)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const i=this.fu.indexOf(e);this.fu.splice(i,1)}}function T_(r){return function(i,s){if(typeof i!="object"||i===null)return!1;const o=i;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class Bi extends rh{constructor(e,i,s,o){super(e,i,s,o),this.type="firestore",this._queue=new b_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b_(e),this._firestoreClient=void 0,await e}}}function hR(r,e){const i=typeof r=="object"?r:iA(),s=typeof r=="string"?r:Vc,o=ZS(i,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=FT("firestore");u&&cR(o,...u)}return o}function qo(r){if(r._terminated)throw new At(lt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||fR(r),r._firestoreClient}function fR(r){var e,i,s;const o=r._freezeSettings(),u=function(m,y,p,b){return new jA(m,y,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,mE(b.experimentalLongPollingOptions),b.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new rR(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nl(ln.fromBase64String(e))}catch(i){throw new At(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new nl(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new At(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new At(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new At(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=/^__.*__$/;class mR{constructor(e,i,s){this.data=e,this.fieldMask=i,this.fieldTransforms=s}toMutation(e,i){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,i,this.fieldTransforms):new Lo(e,this.data,i,this.fieldTransforms)}}class yE{constructor(e,i,s){this.data=e,this.fieldMask=i,this.fieldTransforms=s}toMutation(e,i){return new fa(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function vE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt()}}class Nm{constructor(e,i,s,o,u,f){this.settings=e,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Nm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var i;const s=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var i;const s=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Bc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(vE(this.Lu)&&dR.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class pR{constructor(e,i,s){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=s||th(e)}ju(e,i,s,o=!1){return new Nm({Lu:e,methodName:i,zu:s,path:sn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Go(r){const e=r._freezeSettings(),i=th(r._databaseId);return new pR(r._databaseId,!!e.ignoreUndefinedProperties,i)}function Om(r,e,i,s,o,u={}){const f=r.ju(u.merge||u.mergeFields?2:0,e,i,o);jm("Data must be an object, but it was:",f,s);const m=bE(s,f);let y,p;if(u.merge)y=new Bn(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const T of u.mergeFields){const x=Qd(e,T,i);if(!f.contains(x))throw new At(lt.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);SE(b,x)||b.push(x)}y=new Bn(b),p=f.fieldTransforms.filter(T=>y.covers(T.field))}else y=null,p=f.fieldTransforms;return new mR(new Cn(m),y,p)}class sh extends ah{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}class Mm extends ah{_toFieldTransform(e){return new lx(e.path,new Vo)}isEqual(e){return e instanceof Mm}}function _E(r,e,i,s){const o=r.ju(1,e,i);jm("Data must be an object, but it was:",o,s);const u=[],f=Cn.empty();ha(s,(y,p)=>{const b=Um(e,y,i);p=li(p);const T=o.Uu(b);if(p instanceof sh)u.push(b);else{const x=Fo(p,T);x!=null&&(u.push(b),f.set(b,x))}});const m=new Bn(u);return new yE(f,m,o.fieldTransforms)}function EE(r,e,i,s,o,u){const f=r.ju(1,e,i),m=[Qd(e,s,i)],y=[o];if(u.length%2!=0)throw new At(lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(Qd(e,u[x])),y.push(u[x+1]);const p=[],b=Cn.empty();for(let x=m.length-1;x>=0;--x)if(!SE(p,m[x])){const C=m[x];let I=y[x];I=li(I);const B=f.Uu(C);if(I instanceof sh)p.push(C);else{const P=Fo(I,B);P!=null&&(p.push(C),b.set(C,P))}}const T=new Bn(p);return new yE(b,T,f.fieldTransforms)}function gR(r,e,i,s=!1){return Fo(i,r.ju(s?4:3,e))}function Fo(r,e){if(TE(r=li(r)))return jm("Unsupported field value:",e,r),bE(r,e);if(r instanceof ah)return function(s,o){if(!vE(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let y=Fo(m,o.Ku(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=li(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rx(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=qe.fromDate(s);return{timestampValue:Uc(o.serializer,u)}}if(s instanceof qe){const u=new qe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uc(o.serializer,u)}}if(s instanceof Im)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof nl)return{bytesValue:z0(o.serializer,s._byteString)};if(s instanceof mn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:fm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Vm)return function(f,m){return{mapValue:{fields:{[p0]:{stringValue:g0},[Nc]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw m.Wu("VectorValues must only contain numeric values.");return um(m.serializer,p)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${ih(s)}`)}(r,e)}function bE(r,e){const i={};return u0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(r,(s,o)=>{const u=Fo(o,e.qu(s));u!=null&&(i[s]=u)}),{mapValue:{fields:i}}}function TE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof qe||r instanceof Im||r instanceof nl||r instanceof mn||r instanceof ah||r instanceof Vm)}function jm(r,e,i){if(!TE(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const s=ih(i);throw s==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+s)}}function Qd(r,e,i){if((e=li(e))instanceof Ho)return e._internalPath;if(typeof e=="string")return Um(r,e);throw Bc("Field path arguments must be of type string or ",r,!1,void 0,i)}const yR=new RegExp("[~\\*/\\[\\]]");function Um(r,e,i){if(e.search(yR)>=0)throw Bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Ho(...e.split("."))._internalPath}catch{throw Bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Bc(r,e,i,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${s}`),f&&(y+=` in document ${o}`),y+=")"),new At(lt.INVALID_ARGUMENT,m+r+y)}function SE(r,e){return r.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,i,s,o,u){this._firestore=e,this._userDataWriter=i,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(km("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class vR extends AE{data(){return super.data()}}function km(r,e){return typeof e=="string"?Um(r,e):e instanceof Ho?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new At(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lm{}class _R extends Lm{}function Qs(r,e,...i){let s=[];e instanceof Lm&&s.push(e),s=s.concat(i),function(u){const f=u.filter(y=>y instanceof Pm).length,m=u.filter(y=>y instanceof lh).length;if(f>1||f>0&&m>0)throw new At(lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class lh extends _R{constructor(e,i,s){super(),this._field=e,this._op=i,this._value=s,this.type="where"}static _create(e,i,s){return new lh(e,i,s)}_apply(e){const i=this._parse(e);return wE(e._query,i),new Ja(e.firestore,e.converter,jd(e._query,i))}_parse(e){const i=Go(e.firestore);return function(u,f,m,y,p,b,T){let x;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new At(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){A_(T,b);const I=[];for(const B of T)I.push(S_(y,u,B));x={arrayValue:{values:I}}}else x=S_(y,u,T)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||A_(T,b),x=gR(m,f,T,b==="in"||b==="not-in");return je.create(p,b,x)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function $s(r,e,i){const s=e,o=km("where",r);return lh._create(o,s,i)}class Pm extends Lm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Pm(e,i)}_parse(e){const i=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return i.length===1?i[0]:pi.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const y of m)wE(f,y),f=jd(f,y)}(e._query,i),new Ja(e.firestore,e.converter,jd(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function S_(r,e,i){if(typeof(i=li(i))=="string"){if(i==="")throw new At(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A0(e)&&i.indexOf("/")!==-1)throw new At(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const s=e.path.child(ge.fromString(i));if(!It.isDocumentKey(s))throw new At(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Lv(r,new It(s))}if(i instanceof mn)return Lv(r,i._key);throw new At(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ih(i)}.`)}function A_(r,e){if(!Array.isArray(r)||r.length===0)throw new At(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wE(r,e){const i=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new At(lt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new At(lt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class ER{convertValue(e,i="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Mt()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const s={};return ha(e,(o,u)=>{s[o]=this.convertValue(u,i)}),s}convertVectorValue(e){var i,s,o;const u=(o=(s=(i=e.fields)===null||i===void 0?void 0:i[Nc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>Ie(f.doubleValue));return new Vm(u)}convertGeoPoint(e){return new Im(Ie(e.latitude),Ie(e.longitude))}convertArray(e,i){return(e.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(e,i){switch(i){case"previous":const s=Qc(e);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const i=sa(e);return new qe(i.seconds,i.nanos)}convertDocumentKey(e,i){const s=ge.fromString(e);ie(Q0(s));const o=new Do(s.get(1),s.get(3)),u=new It(s.popFirst(5));return o.isEqual(i)||Tr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(r,e,i){let s;return s=r?i&&(i.merge||i.mergeFields)?r.toFirestore(e,i):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RE extends AE{constructor(e,i,s,o,u,f){super(e,i,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const s=this._document.data.field(km("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}}class Ac extends RE{data(e={}){return super.data(e)}}class CE{constructor(e,i,s,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new _o(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(s=>{e.call(i,new Ac(this._firestore,this._userDataWriter,s.key,s,new _o(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new At(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new Ac(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _o(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new Ac(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _o(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return m.type!==0&&(p=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),b=f.indexOf(m.doc.key)),{type:bR(m.type),doc:y,oldIndex:p,newIndex:b}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function bR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(r){r=En(r,mn);const e=En(r.firestore,Bi);return lR(qo(e),r._key).then(i=>IE(e,r,i))}class Bm extends ER{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,i)}}function ra(r){r=En(r,Ja);const e=En(r.firestore,Bi),i=qo(e),s=new Bm(e);return xE(r._query),oR(i,r._query).then(o=>new CE(e,s,r,o))}function qm(r,e,i){r=En(r,mn);const s=En(r.firestore,Bi),o=zm(r.converter,e,i);return Qo(s,[Om(Go(s),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,_n.none())])}function DE(r,e,i,...s){r=En(r,mn);const o=En(r.firestore,Bi),u=Go(o);let f;return f=typeof(e=li(e))=="string"||e instanceof Ho?EE(u,"updateDoc",r._key,e,i,s):_E(u,"updateDoc",r._key,e),Qo(o,[f.toMutation(r._key,_n.exists(!0))])}function TR(r){return Qo(En(r.firestore,Bi),[new Zc(r._key,_n.none())])}function SR(r,e){const i=En(r.firestore,Bi),s=Lt(r),o=zm(r.converter,e);return Qo(i,[Om(Go(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,_n.exists(!1))]).then(()=>s)}function we(r,...e){var i,s,o;r=li(r);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||T_(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(T_(e[f])){const T=e[f];e[f]=(i=T.next)===null||i===void 0?void 0:i.bind(T),e[f+1]=(s=T.error)===null||s===void 0?void 0:s.bind(T),e[f+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let y,p,b;if(r instanceof mn)p=En(r.firestore,Bi),b=$c(r._key.path),y={next:T=>{e[f]&&e[f](IE(p,r,T))},error:e[f+1],complete:e[f+2]};else{const T=En(r,Ja);p=En(T.firestore,Bi),b=T._query;const x=new Bm(p);y={next:C=>{e[f]&&e[f](new CE(p,x,T,C))},error:e[f+1],complete:e[f+2]},xE(r._query)}return function(x,C,I,B){const P=new Dm(B),q=new wm(C,P,I);return x.asyncQueue.enqueueAndForget(async()=>Sm(await zc(x),q)),()=>{P.su(),x.asyncQueue.enqueueAndForget(async()=>Am(await zc(x),q))}}(qo(p),b,m,y)}function Qo(r,e){return function(s,o){const u=new _r;return s.asyncQueue.enqueueAndForget(async()=>Kw(await sR(s),o,u)),u.promise}(qo(r),e)}function IE(r,e,i){const s=i.docs.get(e._key),o=new Bm(r);return new RE(r,o,e._key,s,new _o(i.hasPendingWrites,i.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=Go(e)}set(e,i,s){this._verifyNotCommitted();const o=bd(e,this._firestore),u=zm(o.converter,i,s),f=Om(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(f.toMutation(o._key,_n.none())),this}update(e,i,s,...o){this._verifyNotCommitted();const u=bd(e,this._firestore);let f;return f=typeof(i=li(i))=="string"||i instanceof Ho?EE(this._dataReader,"WriteBatch.update",u._key,i,s,o):_E(this._dataReader,"WriteBatch.update",u._key,i),this._mutations.push(f.toMutation(u._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=bd(e,this._firestore);return this._mutations=this._mutations.concat(new Zc(i._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new At(lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bd(r,e){if((r=li(r)).firestore!==e)throw new At(lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function zn(){return new Mm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(r){return qo(r=En(r,Bi)),new AR(r,e=>Qo(r,e))}(function(e,i=!0){(function(o){sl=o})(nA),Dc(new xo("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Bi(new vA(s.getProvider("auth-internal")),new bA(f,s.getProvider("app-check-internal")),function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new At(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(p.options.projectId,b)}(f,o),f);return u=Object.assign({useFetchStreams:i},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Ys(wv,Rv,e),Ys(wv,Rv,"esm2017")})();const xR={apiKey:"AIzaSyA",authDomain:"myattendanceproject-45c1b.firebaseapp.com",projectId:"myattendanceproject-45c1b",storageBucket:"myattendanceproject-45c1b.appspot.com",messagingSenderId:"347137303283",appId:"1:347137303283:web:9369753f976dffcf65cd86"},wR=X_(xR),Tt=hR(wR),RR=r=>(r||"").toString().replace(/[^0-9]/g,""),CR=r=>r.slice(-8);function DR(){const[r,e]=O.useState(""),[i,s]=O.useState(""),[o,u]=O.useState(""),f=jo(),m=async()=>{u("");const y=RR(r),p=(i||"").trim();if(y.length!==11||!y.startsWith("010")){u("   11(010...)  .");return}if(p.length<6){u("  . (    8)");return}try{const b=Lt(Tt,"parents",y),T=await Be(b);let x=null;if(T.exists())x=T.data();else{const I=Qs(be(Tt,"students"),$s("parentPhone","==",y)),B=await ra(I),P=[];if(B.forEach(Z=>P.push(Z.id)),P.length===0){u("  . (/    .)");return}const q=CR(y);await qm(b,{phone:y,password:q,mustChangePassword:!0,children:P,createdAt:zn(),updatedAt:zn()}),x={phone:y,password:q,mustChangePassword:!0,children:P}}if(!(x!=null&&x.password)||x.password!==p){u("  .");return}if(localStorage.setItem("parentPhone",y),localStorage.setItem("mustChangePassword",x.mustChangePassword?"1":"0"),x.mustChangePassword){f("/change-password");return}const C=x.children||[];C.length<=1?(C[0]&&localStorage.setItem("studentId",C[0]),f("/attendance")):f("/select-child")}catch(b){console.error(b),u("   .")}};return E.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[E.jsx("h1",{style:{fontSize:22,fontWeight:800,marginBottom:12},children:" "}),E.jsx("label",{style:{display:"block",fontWeight:700,marginTop:8},children:"( )"}),E.jsx("input",{value:r,onChange:y=>e(y.target.value),placeholder:": 01012345678",inputMode:"numeric",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),E.jsx("label",{style:{display:"block",fontWeight:700,marginTop:12},children:""}),E.jsx("input",{value:i,onChange:y=>s(y.target.value),placeholder:" :   8",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),E.jsx("button",{onClick:m,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #0d6efd",background:"#0d6efd",color:"#fff",cursor:"pointer"},children:""}),o&&E.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:600},children:o}),E.jsxs("div",{style:{marginTop:12,fontSize:12,color:"#6b7280",lineHeight:1.6},children:["   ",E.jsx("b",{children:"  8"}),".",E.jsx("br",{}),"       ."]})]})}function IR(){const r=localStorage.getItem("parentPhone")||"",[e,i]=O.useState(localStorage.getItem("studentId")||""),[s,o]=O.useState((localStorage.getItem("studentName")||"").trim()),[u,f]=O.useState([]),[m,y]=O.useState(null),[p,b]=O.useState({}),[T,x]=O.useState({}),[C,I]=O.useState(()=>new Date().getFullYear()),[B,P]=O.useState(()=>new Date().getMonth());O.useEffect(()=>{const w=()=>{i(localStorage.getItem("studentId")||""),o((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",w),window.addEventListener("hashchange",w);const N=setInterval(w,800);return()=>{window.removeEventListener("storage",w),window.removeEventListener("hashchange",w),clearInterval(N)}},[]),O.useEffect(()=>{(async()=>{var w;if(!s&&e)try{const N=await Be(Lt(Tt,"students",e));if(N.exists()){const M=(((w=N.data())==null?void 0:w.name)||"").toString().trim();M&&(o(M),localStorage.setItem("studentName",M))}}catch(N){console.error("selected studentName  :",N)}})()},[e,s]),O.useEffect(()=>{(async()=>{if(r)try{const w=await Be(Lt(Tt,"parents",r));if(!w.exists()){f([]);return}const M=(w.data()||{}).children||[],R=[];for(const _t of M)try{const Et=await Be(Lt(Tt,"students",_t)),K=Et.exists()?Et.data():{};R.push({id:_t,name:(K.name||"").toString().trim()||""})}catch{R.push({id:_t,name:""})}R.sort((_t,Et)=>(_t.name||"").localeCompare(Et.name||"")),f(R)}catch(w){console.error("children  :",w),f([])}})()},[r]),O.useEffect(()=>{const w=we(be(Tt,"attendance"),N=>{const M={};N.forEach(R=>{M[R.id]=R.data()||{}}),b(M)});return()=>w()},[]),O.useEffect(()=>{const w=we(be(Tt,"holidays"),N=>{const M={};N.forEach(R=>{const _t=R.data()||{},Et=(_t.date||"").toString(),K=(_t.name||"").toString();Et&&(M[Et]=K||"")}),x(M)});return()=>w()},[]),O.useEffect(()=>{if(!u.length)return;const N=(()=>{const R=new Date;return new Date(R.getTime()+9*60*60*1e3).toISOString().slice(0,10)})(),M=(p==null?void 0:p[N])||{};for(const R of u){const _t=(R.name||"").trim();if(!_t)continue;const Et=M==null?void 0:M[_t],K=((Et==null?void 0:Et.time)||"").toString().trim(),Y=((Et==null?void 0:Et.departureTime)||"").toString().trim(),it=((Et==null?void 0:Et.status)||"").toString().trim(),gt=`lastSeen_${_t}`;let U={};try{U=JSON.parse(localStorage.getItem(gt)||"{}")}catch{U={}}const et=(U.time||"").toString().trim(),dt=(U.departureTime||"").toString().trim();K&&K!==et&&y({title:`${_t} `,message:`${K}   ${it?`(${it})`:""}`}),Y&&Y!==dt&&y({title:`${_t} `,message:`${Y}  `}),localStorage.setItem(gt,JSON.stringify({time:K,departureTime:Y}))}},[p,u]);const q=async w=>{var R;if(!w)return;const N=u.find(_t=>_t.id===w);let M=((N==null?void 0:N.name)||"").trim();if(!M)try{const _t=await Be(Lt(Tt,"students",w));_t.exists()&&(M=(((R=_t.data())==null?void 0:R.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",w),M&&localStorage.setItem("studentName",M),i(w),o(M)},Z=O.useMemo(()=>s?Object.entries(p).map(([w,N])=>{const M=N==null?void 0:N[s];return M?{date:w,time:M.time||"",departureTime:M.departureTime||"",status:M.status||""}:null}).filter(Boolean).sort((w,N)=>N.date.localeCompare(w.date)):[],[p,s]),Q=O.useMemo(()=>{const w=`${C}-${String(B+1).padStart(2,"0")}`;return Z.filter(N=>N.date.startsWith(w))},[Z,C,B]),ft=O.useMemo(()=>{const w=new Date(C,B,1),N=[],M=w.getDay(),R=new Date(w),_t=(M+6)%7;R.setDate(w.getDate()-_t);for(let Et=0;Et<6;Et++){const K=[],Y=new Date(R);Y.setDate(R.getDate()+Et*7);for(let it=0;it<7;it++){const gt=new Date(Y);gt.setDate(Y.getDate()+it);const U=gt.getDay();U>=1&&U<=5&&K.push(new Date(gt))}K.some(it=>it.getMonth()===B||it.getMonth()!==B&&it.getDate()<=7)&&N.push(K)}for(;N.length&&N[N.length-1].every(Et=>Et.getMonth()!==B);)N.pop();return N},[C,B]),pt=w=>{const N=w.getFullYear(),M=String(w.getMonth()+1).padStart(2,"0"),R=String(w.getDate()).padStart(2,"0");return`${N}-${M}-${R}`},wt=`${C} ${String(B+1).padStart(2,"0")}`,k=()=>{const w=new Date(C,B-1,1);I(w.getFullYear()),P(w.getMonth())},D=()=>{const w=new Date(C,B+1,1);I(w.getFullYear()),P(w.getMonth())},V={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"};return E.jsxs("div",{style:{padding:16,maxWidth:980,margin:"0 auto"},children:[m&&E.jsx("div",{style:{position:"fixed",left:0,right:0,top:12,display:"flex",justifyContent:"center",zIndex:999999,pointerEvents:"none"},children:E.jsxs("div",{style:{pointerEvents:"auto",minWidth:260,maxWidth:460,background:"#111827",color:"white",padding:"12px 14px",borderRadius:14,boxShadow:"0 10px 25px rgba(0,0,0,0.25)"},onClick:()=>y(null),children:[E.jsx("div",{style:{fontWeight:900,fontSize:15},children:m.title}),E.jsx("div",{style:{marginTop:6,fontSize:13,opacity:.92},children:m.message}),E.jsx("div",{style:{marginTop:10,textAlign:"right"},children:E.jsx("button",{onClick:()=>y(null),style:{border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"white",borderRadius:10,padding:"6px 10px",cursor:"pointer"},children:""})})]})}),E.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:22,fontWeight:900},children:"  "}),E.jsxs("div",{style:{color:"#6b7280",fontSize:13,marginTop:2},children:[s?` : ${s}`:"  .",u.length>1&&E.jsx("span",{style:{marginLeft:8,color:"#10b981",fontWeight:700},children:"(  )"})]})]}),u.length>0&&E.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[E.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:" "}),E.jsx("select",{value:e,onChange:w=>q(w.target.value),style:{padding:"8px 10px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:700,cursor:"pointer"},children:u.map(w=>E.jsx("option",{value:w.id,children:w.name},w.id))}),E.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:{padding:"8px 10px",borderRadius:12,border:"1px solid #d1d5db",background:"#f9fafb",cursor:"pointer",fontWeight:800},children:" "})]})]}),E.jsxs("div",{style:{...V,padding:14,marginBottom:14},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[E.jsx("button",{onClick:k,style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:12,background:"white",cursor:"pointer",fontWeight:800},children:""}),E.jsx("div",{style:{fontWeight:900,fontSize:16},children:wt}),E.jsx("button",{onClick:D,style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:12,background:"white",cursor:"pointer",fontWeight:800},children:""})]}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:10,paddingBottom:10,borderBottom:"1px solid #f1f5f9",fontWeight:800,color:"#6b7280"},children:["","","","",""].map(w=>E.jsx("div",{style:{textAlign:"center"},children:w},w))}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10,marginTop:10},children:ft.map((w,N)=>E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:10},children:w.map(M=>{var it;const R=pt(M),_t=M.getMonth()===B,Et=s?(it=p==null?void 0:p[R])==null?void 0:it[s]:null,K=!!T[R],Y=!!(Et!=null&&Et.time||Et!=null&&Et.departureTime);return E.jsxs("div",{title:K?`${R}  ${T[R]}`:R,style:{minHeight:86,border:`1px solid ${K?"#fecaca":"#e5e7eb"}`,borderRadius:14,padding:10,background:_t?K?"#fff1f2":Y?"#ecfeff":"white":"#fafafa",opacity:_t?1:.55},children:[E.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginBottom:6},children:[E.jsx("div",{style:{fontWeight:900,fontSize:14,color:K?"#ef4444":"#111827"},children:M.getDate()}),K&&E.jsx("span",{style:{fontSize:11,color:"#ef4444",fontWeight:900,background:"rgba(239,68,68,0.10)",padding:"2px 8px",borderRadius:999},children:T[R]})]}),Et?E.jsxs("div",{style:{fontSize:12,color:"#111827",lineHeight:1.5},children:[E.jsxs("div",{children:[E.jsx("span",{style:{color:"#0284c7",fontWeight:800},children:""})," ",Et.time||"-"]}),E.jsxs("div",{children:[E.jsx("span",{style:{color:"#16a34a",fontWeight:800},children:""})," ",Et.departureTime||"-"]})]}):E.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:" "})]},R)})},N))})]}),E.jsxs("div",{style:{...V,padding:14},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[E.jsx("div",{style:{fontSize:18,fontWeight:900},children:"    (/)"}),E.jsxs("div",{children:[E.jsx("button",{onClick:k,style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:10,background:"white",cursor:"pointer",marginRight:6,fontWeight:800},children:""}),E.jsx("span",{style:{fontWeight:900},children:wt}),E.jsx("button",{onClick:D,style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:10,background:"white",cursor:"pointer",marginLeft:6,fontWeight:800},children:""})]})]}),Q.length===0?E.jsx("div",{style:{color:"#6b7280"},children:"    ."}):E.jsx("div",{style:{overflowX:"auto"},children:E.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[E.jsx("thead",{children:E.jsxs("tr",{style:{background:"#f8fafc"},children:[E.jsx("th",{style:pc,children:""}),E.jsx("th",{style:pc,children:""}),E.jsx("th",{style:pc,children:""}),E.jsx("th",{style:pc,children:""})]})}),E.jsx("tbody",{children:Q.slice().sort((w,N)=>N.date.localeCompare(w.date)).map(w=>E.jsxs("tr",{children:[E.jsxs("td",{style:gc,children:[E.jsx("span",{style:{fontWeight:800},children:w.date}),T[w.date]&&E.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#ef4444",fontWeight:900},children:["(",T[w.date],")"]})]}),E.jsx("td",{style:gc,children:w.time||"-"}),E.jsx("td",{style:gc,children:w.departureTime||"-"}),E.jsx("td",{style:gc,children:w.status||"-"})]},w.date))})]})})]})]})}const pc={textAlign:"left",padding:"10px 10px",borderBottom:"1px solid #e5e7eb",color:"#374151",fontSize:13,fontWeight:900},gc={padding:"10px 10px",borderBottom:"1px solid #f1f5f9"};function VR(){var Z;const r=localStorage.getItem("studentId"),e=O.useRef(!1),[i,s]=O.useState(null),[o,u]=O.useState([]),[f,m]=O.useState(0),[y,p]=O.useState({}),[b,T]=O.useState(!1),x=["","",""];O.useEffect(()=>{if(!r)return;const Q=we(Lt(Tt,"students",r),ft=>{ft.exists()&&s({id:ft.id,...ft.data()})});return()=>Q()},[r]),O.useEffect(()=>{if(!r)return;const Q=we(be(Tt,"payments"),ft=>{const pt={};ft.docs.forEach(wt=>{const k=wt.data();k.studentId===r&&(pt[k.routineNumber]=k.paymentMethod)}),p(pt)});return()=>Q()},[r]),O.useEffect(()=>{if(!r)return;const Q=we(be(Tt,"routines"),async ft=>{const pt=ft.docs.filter(M=>{const R=M.data();return R.students&&R.students[r]});if(pt.length===0){u([]);return}let wt=[];pt.forEach(M=>{const R=M.data(),_t=R.students[r],Et=_t.routineNumber||R.routineNumber||1,K=_t.sessions||{};Object.values(K).sort((it,gt)=>(it.session||0)-(gt.session||0)).forEach(it=>{wt.push({date:it.date,session:it.session,routineNumber:Et})})});const k=Array.from(new Set(wt.map(M=>M.date))),D=i&&i.name||null,V=await Promise.all(k.map(async M=>{const R=await Be(Lt(Tt,"attendance",M));if(!R.exists())return[M,{}];const _t=R.data(),Et=_t[r]||D&&_t[D]||{};return[M,Et]})),w=Object.fromEntries(V),N=wt.map(M=>{var R,_t;return{...M,status:((R=w[M.date])==null?void 0:R.status)||"",time:((_t=w[M.date])==null?void 0:_t.time)||""}});if(u(N),!e.current){e.current=!0;const M=new Date().toISOString().slice(0,10),R={};N.forEach(Et=>{const K=Et.routineNumber||1;R[K]||(R[K]=[]),R[K].push(Et)}),Object.values(R).sort((Et,K)=>Et[0].routineNumber-K[0].routineNumber).findIndex(Et=>Et.some(K=>K.date===M)),m(0)}});return()=>Q()},[r,i]);const C=async(Q,ft)=>{p(pt=>({...pt,[ft]:Q})),await qm(Lt(Tt,"payments",`${r}_routine_${ft}`),{studentId:r,routineNumber:ft,paymentMethod:Q,paymentComplete:!1,updatedAt:new Date().toISOString()},{merge:!0})},I={};o.forEach(Q=>{const ft=Q.routineNumber||1;I[ft]||(I[ft]=[]),I[ft].push(Q)});const B=Object.values(I).sort((Q,ft)=>ft[0].routineNumber-Q[0].routineNumber),P=B[f]||[],q=((Z=P[0])==null?void 0:Z.routineNumber)??f+1;return O.useEffect(()=>{if(!i||!q){T(!1);return}const Q=`${i.name}_${q}`;(async()=>{try{const pt=await Be(Lt(Tt,"payment_completed",Q));if(!pt.exists()){T(!1);return}const wt=pt.data();T(!!wt.paymentComplete)}catch(pt){console.error("payment_completed  :",pt),T(!1)}})()},[i,q]),i?E.jsxs("div",{className:"container-wide",style:{textAlign:"center"},children:[E.jsxs("h1",{style:{fontSize:20,marginBottom:16},children:[" ",i.name,"   ",q,""]}),E.jsx("p",{style:{fontSize:18,marginBottom:16},children:b?"  .":"  .    ."}),E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:24},children:[E.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:"bold"},children:""}),x.map(Q=>E.jsx("button",{onClick:()=>C(Q,q),style:{padding:"4px 8px",background:Q===""?"#4caf50":Q===""?"#2196f3":"#f44336",color:"white",borderRadius:4,minWidth:80},children:Q},Q))]}),E.jsxs("p",{style:{fontSize:16,marginBottom:16},children:["   : ",y[q]||"",y[q]===""&&E.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"      "}),y[q]===""&&E.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"  5  ."}),y[q]===""&&E.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:" 3333-31-6107963  * "})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24},children:[E.jsx("button",{onClick:()=>m(Q=>Math.max(Q-1,0)),disabled:f===0,style:{padding:"8px 16px",background:f===0?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f===0?"default":"pointer"},children:""}),E.jsx("button",{onClick:()=>m(Q=>Math.min(Q+1,B.length-1)),disabled:f>=B.length-1,style:{padding:"8px 16px",background:f>=B.length-1?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f>=B.length-1?"default":"pointer"},children:""})]}),E.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),E.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),E.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),E.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""})]})}),E.jsxs("tbody",{children:[P.map((Q,ft)=>{const pt=P.slice(0,ft).reduce((D,V)=>D+(V.status==="carryover"?1:0),0),wt=Q.status==="carryover",k=wt?"X":(Q.session||ft+1)-pt;return E.jsxs("tr",{children:[E.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:k}),E.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:E.jsx("span",{style:wt?{textDecoration:"line-through",color:"#999"}:{},children:Q.date})}),E.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:Q.status}),E.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:Q.time||"-"})]},ft)}),P.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:4,style:{padding:16,textAlign:"center",color:"#888"},children:"  ."})})]})]})]}):E.jsx("p",{children:" "})}const NR=8;function OR(r=""){return r?r.split(`
`).map(e=>e||"&nbsp;").join("<br />"):""}function MR(){const[r,e]=O.useState([]),[i,s]=O.useState(null),[o,u]=O.useState({}),[f,m]=O.useState([]),[y,p]=O.useState([]),[b,T]=O.useState(!1);O.useEffect(()=>{(async()=>{const B=(await ra(be(Tt,"notices"))).docs.map(P=>{const q=P.data()||{};return{id:P.id,title:(q.title||"").toString(),date:(q.date||"").toString(),showOnParents:q.showOnParents===void 0?!0:!!q.showOnParents,mainOrder:typeof q.mainOrder=="number"?q.mainOrder:typeof q.priority=="number"?q.priority:9999,isPinned:q.isPinned===!0}}).filter(P=>P.showOnParents!==!1);B.sort((P,q)=>{const Z=P.isPinned?1:0,Q=q.isPinned?1:0;if(Z!==Q)return Q-Z;const ft=P.mainOrder??9999,pt=q.mainOrder??9999;if(ft!==pt)return ft-pt;const wt=P.date||"";return(q.date||"").localeCompare(wt)}),e(B.slice(0,NR))})(),(async()=>{const C=await ra(be(Tt,"holidays")),I=new Date().toISOString().slice(0,10),B=C.docs.map(Z=>({id:Z.id,...Z.data()||{}})).filter(Z=>!!Z.date),P=B.filter(Z=>(Z.date||"").toString()>=I).sort((Z,Q)=>(Z.date||"").toString().localeCompare((Q.date||"").toString())),q=B.filter(Z=>(Z.date||"").toString()<I).sort((Z,Q)=>(Q.date||"").toString().localeCompare((Z.date||"").toString()));m(P),p(q)})()},[]);const x=async C=>{if(i===C){s(null);return}if(!o[C]){const I=await Be(Lt(Tt,"notices",C));if(I.exists()){const B=I.data()||{},P=(B.contentHtml||"").toString(),q=(B.contentPlain||"").toString(),Z=(B.content||"").toString(),Q=q||Z;let ft=P;ft||(ft=OR(Q)),u(pt=>({...pt,[C]:{html:ft,plain:Q}}))}}s(C)};return E.jsxs("div",{style:{maxWidth:820,margin:"0 auto",padding:16},children:[E.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f9ff, #e0f2fe)",padding:"16px 18px",borderRadius:14,marginBottom:22,border:"1px solid #bae6fd"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:10},children:[E.jsx("span",{style:{fontSize:20,marginRight:6},children:""}),E.jsx("h2",{style:{fontSize:18,fontWeight:800,margin:0},children:" "})]}),f.length>0?E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:f.map(C=>E.jsxs("div",{style:{padding:"6px 12px",borderRadius:999,background:"#fff",border:"1px solid #e5e7eb",fontSize:13,display:"flex",gap:6,alignItems:"center"},children:[E.jsx("span",{style:{fontWeight:700},children:(C.name||"").toString()}),E.jsx("span",{style:{color:"#dc2626",fontSize:12},children:(C.date||"").toString()})]},C.id))}):E.jsx("p",{style:{fontSize:13,color:"#6b7280",margin:0},children:"  ."}),y.length>0&&E.jsxs("div",{style:{marginTop:12},children:[E.jsx("button",{onClick:()=>T(C=>!C),style:{fontSize:12,background:"transparent",border:"none",color:"#2563eb",cursor:"pointer",padding:0,fontWeight:700},children:b?"   ":"   "}),b&&E.jsx("div",{style:{marginTop:8,display:"flex",flexWrap:"wrap",gap:6},children:y.map(C=>E.jsxs("div",{style:{fontSize:12,padding:"4px 10px",borderRadius:999,background:"#f8fafc",border:"1px solid #e5e7eb",color:"#6b7280"},children:[(C.name||"").toString(),"  ",(C.date||"").toString()]},C.id))})]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[E.jsx("h1",{style:{fontSize:22,fontWeight:900,margin:0},children:" "}),E.jsx("span",{style:{fontSize:12,color:"#6b7280"}})]}),r.length===0&&E.jsx("p",{style:{fontSize:14,color:"#6b7280",marginTop:10},children:"    ."}),E.jsx("div",{style:{marginTop:14,display:"flex",flexDirection:"column",gap:12},children:r.map(C=>{const I=i===C.id,B=o[C.id],P=typeof C.mainOrder=="number"&&C.mainOrder<9999;return E.jsxs("div",{style:{padding:"14px 16px",borderRadius:14,background:"#fff",border:"1px solid #e5e7eb",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"},children:[E.jsxs("div",{onClick:()=>x(C.id),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[E.jsxs("div",{style:{flex:1},children:[C.isPinned&&E.jsx("span",{style:{display:"inline-block",fontSize:11,background:"#fff7ed",color:"#ea580c",borderRadius:999,padding:"2px 8px",marginRight:6,border:"1px solid #fed7aa",fontWeight:800},children:""}),P&&E.jsx("span",{style:{display:"inline-block",fontSize:11,background:"#eff6ff",color:"#2563eb",borderRadius:999,padding:"2px 8px",marginRight:6,border:"1px solid #bfdbfe",fontWeight:800},children:""}),E.jsx("span",{style:{fontSize:15,fontWeight:700},children:C.title})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[E.jsx("span",{style:{fontSize:12,color:"#9ca3af",whiteSpace:"nowrap"},children:C.date}),E.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:I?"":""})]})]}),I&&E.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px dashed #e5e7eb",fontSize:14,lineHeight:1.7,color:"#111827"},children:B?E.jsx("div",{dangerouslySetInnerHTML:{__html:B.html}}):E.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:" ..."})})]},C.id)})})]})}function jR(){console.log("  !");const[r,e]=O.useState([]),[i,s]=O.useState(""),o=localStorage.getItem("studentId");O.useEffect(()=>{const m=be(Tt,"books");return we(m,y=>{const b=y.docs.map(T=>({id:T.id,...T.data()})).filter(T=>T.studentId===o);e(b)})},[o]);const u=O.useMemo(()=>i?[...r].sort((y,p)=>i==="grade"?y.grade-p.grade:i==="title"?y.title.localeCompare(p.title):i==="completedDate"?y.completedDate.localeCompare(p.completedDate):0):r,[r,i]),f=()=>{const m=["","",""," ",""],y=u.map((C,I)=>[I+1,C.name,C.grade,C.title,C.completedDate]);let p=m.join(",")+`
`;y.forEach(C=>{p+=C.join(",")+`
`});const b=new Blob([p],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(b),x=document.createElement("a");x.href=T,x.download=`_${new Date().toISOString().slice(0,10)}.csv`,x.click(),URL.revokeObjectURL(T)};return E.jsxs("div",{className:"container",children:[E.jsxs("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:["   ( : ",r.length,")"]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[E.jsx("button",{onClick:f,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),E.jsx("button",{onClick:()=>s("grade"),style:{padding:"8px 12px",marginLeft:"4px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),E.jsx("button",{onClick:()=>s("title"),style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),E.jsx("button",{onClick:()=>s("completedDate"),style:{padding:"8px 12px",backgroundColor:"#ffc107",color:"#000",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "})]}),E.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),E.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),E.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),E.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:" "}),E.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""})]})}),E.jsx("tbody",{children:u.length>0?u.map((m,y)=>E.jsxs("tr",{children:[E.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:y+1}),E.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.name}),E.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.grade}),E.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.title}),E.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.completedDate})]},m.id)):E.jsx("tr",{children:E.jsx("td",{colSpan:"5",style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"  ."})})})]})]})}function UR(){const[r,e]=O.useState([]),[i,s]=O.useState([]),[o,u]=O.useState({}),[f,m]=O.useState(null),[y,p]=O.useState(""),b=localStorage.getItem("studentId");O.useEffect(()=>{if(!b)return;const I=be(Tt,"comments");return we(I,B=>{const q=B.docs.map(Z=>({id:Z.id,...Z.data()})).filter(Z=>Z.studentId===b);e(q.sort((Z,Q)=>(Q.createdAt||"").localeCompare(Z.createdAt||"")))})},[b]),O.useEffect(()=>{if(!b)return;const I=be(Tt,"answer");return we(I,B=>{const q=B.docs.map(Z=>({id:Z.id,...Z.data()})).filter(Z=>Z.studentId===b);s(q.sort((Z,Q)=>(Q.createdAt||"").localeCompare(Z.createdAt||"")))})},[b]);const T=async I=>{var Z;const B=(Z=o[I])==null?void 0:Z.trim();if(!B)return alert(" !");if(!b)return alert("  .    .");const P=await Be(Lt(Tt,"students",b)),q=P.exists()?P.data().name:"";await SR(be(Tt,"answer"),{studentId:b,studentName:q,comment:B,date:new Date().toISOString().slice(0,10),createdAt:new Date().toISOString(),parentId:I}),u(Q=>({...Q,[I]:""})),alert(" !")},x=async I=>{window.confirm("   ?")&&await TR(Lt(Tt,"answer",I))},C=async I=>{if(!y.trim())return alert("  !");await DE(Lt(Tt,"answer",I),{comment:y}),m(null),p("")};return E.jsxs("div",{className:"container",style:{textAlign:"center",marginTop:"40px"},children:[E.jsx("h2",{style:{fontSize:"20px",marginBottom:"16px"},children:"  "}),E.jsx("h3",{style:{fontSize:"15px",marginBottom:"16px"},children:"**    ! **"}),E.jsxs("ul",{style:{listStyle:"none",padding:0,textAlign:"left"},children:[r.filter(I=>{var B;return!((B=I.comment)!=null&&B.startsWith(":"))}).map(I=>{var P;const B=i.filter(q=>q.parentId===I.id);return E.jsxs("li",{style:{marginBottom:16,borderBottom:"1px solid #eee",paddingBottom:8},children:[E.jsxs("div",{children:[I.comment," ",E.jsxs("span",{style:{color:"#888",fontSize:"12px"},children:["(",I.date,")"]})]}),E.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:[": ",(P=I.createdAt)==null?void 0:P.slice(0,19).replace("T"," ")]}),B.map(q=>E.jsx("div",{style:{marginTop:4,marginLeft:10,background:"#f8f8f8",padding:"4px 8px",borderRadius:4},children:f===q.id?E.jsxs(E.Fragment,{children:[E.jsx("input",{value:y,onChange:Z=>p(Z.target.value),style:{width:"60%",padding:4}}),E.jsx("button",{onClick:()=>C(q.id),style:{marginLeft:8},children:""}),E.jsx("button",{onClick:()=>m(null),style:{marginLeft:4},children:""})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{fontSize:"13px",color:"#333"},children:[" ",q.comment]}),E.jsxs("div",{style:{marginTop:4},children:[E.jsx("button",{onClick:()=>{m(q.id),p(q.comment||"")},style:{marginRight:6},children:""}),E.jsx("button",{onClick:()=>x(q.id),children:""})]})]})},q.id)),E.jsxs("div",{style:{marginTop:8},children:[E.jsx("input",{placeholder:" ",value:o[I.id]||"",onChange:q=>u(Z=>({...Z,[I.id]:q.target.value})),style:{width:"70%",padding:4}}),E.jsx("button",{onClick:()=>T(I.id),style:{marginLeft:8,padding:"4px 12px"},children:""})]})]},I.id)}),r.filter(I=>{var B;return!((B=I.comment)!=null&&B.startsWith(":"))}).length===0&&E.jsx("li",{style:{color:"#888"},children:"  ."})]})]})}function kR(){const[r,e]=O.useState("comments"),i=localStorage.getItem("parentPhone")||"",[s,o]=O.useState(localStorage.getItem("studentId")||""),[u,f]=O.useState((localStorage.getItem("studentName")||"").trim()),[m,y]=O.useState([]);O.useEffect(()=>{const C=()=>{o(localStorage.getItem("studentId")||""),f((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",C),window.addEventListener("hashchange",C);const I=setInterval(C,800);return()=>{window.removeEventListener("storage",C),window.removeEventListener("hashchange",C),clearInterval(I)}},[]),O.useEffect(()=>{(async()=>{var C,I;if(i)try{const B=await Be(Lt(Tt,"parents",i));if(!B.exists()){y([]);return}const P=((C=B.data())==null?void 0:C.children)||[],q=[];for(const Z of P)try{const Q=await Be(Lt(Tt,"students",Z)),ft=Q.exists()?(((I=Q.data())==null?void 0:I.name)||"").toString().trim():"";q.push({id:Z,name:ft||""})}catch{q.push({id:Z,name:""})}q.sort((Z,Q)=>(Z.name||"").localeCompare(Q.name||"")),y(q)}catch(B){console.error("children  :",B),y([])}})()},[i]);const p=async C=>{var P;if(!C)return;const I=m.find(q=>q.id===C);let B=((I==null?void 0:I.name)||"").trim();if(!B)try{const q=await Be(Lt(Tt,"students",C));q.exists()&&(B=(((P=q.data())==null?void 0:P.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",C),B&&localStorage.setItem("studentName",B),o(C),f(B)},b={maxWidth:980,margin:"0 auto",padding:16},T={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},x=C=>({padding:"10px 14px",borderRadius:12,border:"1px solid "+(C?"#2563eb":"#e5e7eb"),background:C?"#2563eb":"#f9fafb",color:C?"white":"#111827",cursor:"pointer",fontWeight:900,fontSize:14});return E.jsxs("div",{style:b,children:[E.jsxs("div",{style:{...T,padding:14,marginBottom:14},children:[E.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:22,fontWeight:900},children:"    "}),E.jsx("div",{style:{fontSize:13,color:"#6b7280",marginTop:4},children:u?` : ${u}`:"  ."})]}),m.length>0&&E.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[E.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:" "}),E.jsx("select",{value:s,onChange:C=>p(C.target.value),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",minWidth:180},children:m.map(C=>E.jsx("option",{value:C.id,children:C.name},C.id))}),E.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:{padding:"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer",fontWeight:900},children:" "})]})]}),E.jsxs("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap"},children:[E.jsx("button",{onClick:()=>e("comments"),style:x(r==="comments"),children:" "}),E.jsx("button",{onClick:()=>e("books"),style:x(r==="books"),children:" "})]})]}),E.jsxs("div",{style:{...T,padding:14},children:[r==="comments"&&E.jsx(UR,{},`comments_${s}`),r==="books"&&E.jsx(jR,{},`books_${s}`)]})]})}function LR(){const[r,e]=O.useState("intensive"),i=localStorage.getItem("parentPhone")||"",[s,o]=O.useState([]),[u,f]=O.useState(localStorage.getItem("studentId")||""),[m,y]=O.useState((localStorage.getItem("studentName")||"").trim()),[p,b]=O.useState(null),[T,x]=O.useState([]),[C,I]=O.useState({}),[B,P]=O.useState({}),[q,Z]=O.useState([]),[Q,ft]=O.useState(null),[pt,wt]=O.useState({isOpen:!0,reserveOnly:!1}),k=["","","","",""],D=[{id:"A",label:"A (5 ~ 7)",timeRange:"5 ~ 7"},{id:"B",label:"B (7 ~ 9)",timeRange:"7 ~ 9"}],V=5,[w,N]=O.useState(null),[M,R]=O.useState({}),[_t,Et]=O.useState(null),[K,Y]=O.useState(""),[it,gt]=O.useState(null),[U,et]=O.useState({}),dt=["","",""],ht=["3","4","5"],vt=8,[Rt,Dt]=O.useState([]),[re,Qt]=O.useState([]),[Dn,yi]=O.useState({}),[qn,Hn]=O.useState(null),Hi=["","","",""],Gn=6,[Xe,oi]=O.useState([]),[Ue,xr]=O.useState([]),[wr,Rr]=O.useState({}),[vi,Cr]=O.useState(null),[Gi,Fn]=O.useState(!1),[Fi,fe]=O.useState(!1),[te,pn]=O.useState(0),[We,Qi]=O.useState(null),cl=O.useMemo(()=>({elementary:{:["230"],:["3","4"],:["2","3","4"],:["3","4"],:["3","4"]},middle:{:["330","5","630"],:["5","630"],:["5","630"],:["5","630"],:["5","630"]}}),[]),$i={intensive:"(261)",elementary:"(263)",middle:"(263)",middleClinic:" (263)",high:"(263)",advanced:"(263)"},_i=r==="elementary"||r==="middle"?cl[r]:null,bn=(z,tt)=>`${z}|${tt}`,Ze=(z,tt,at)=>z.some(ct=>ct.day===tt&&ct.time===at),Ei=(z,tt)=>`${z}|${tt}`,Yi=z=>z>=6?{text:"",tone:"danger"}:z>=4?{text:"!",tone:"warn"}:{text:"",tone:"ok"},da=z=>z>=8?{text:"",tone:"danger"}:z>=4?{text:"!",tone:"warn"}:{text:"",tone:"ok"},ma=z=>z>=6?{text:"",tone:"danger"}:z>=4?{text:"!",tone:"warn"}:{text:"",tone:"ok"},Ki=z=>z==="danger"?{background:"#fee2e2",color:"#b91c1c",border:"1px solid #fecaca"}:z==="warn"?{background:"#fef3c7",color:"#92400e",border:"1px solid #fde68a"}:{background:"#dcfce7",color:"#166534",border:"1px solid #bbf7d0"},on={border:"1px solid #e5e7eb",borderRadius:14,background:"#fff",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},Qn=(z,tt=!1)=>({padding:"10px 12px",borderRadius:14,border:`1px solid ${z?"#2563eb":"#d1d5db"}`,background:z?"#e7f1ff":"#fff",fontWeight:900,cursor:tt?"not-allowed":"pointer",opacity:tt?.6:1,textAlign:"left"});O.useEffect(()=>{(async()=>{var z,tt;if(i)try{const at=await Be(Lt(Tt,"parents",i));if(!at.exists()){o([]);return}const ct=((z=at.data())==null?void 0:z.children)||[],ut=[];for(const mt of ct)try{const bt=await Be(Lt(Tt,"students",mt)),Pt=bt.exists()?(((tt=bt.data())==null?void 0:tt.name)||"").toString().trim():"";ut.push({id:mt,name:Pt||""})}catch{ut.push({id:mt,name:""})}if(ut.sort((mt,bt)=>(mt.name||"").localeCompare(bt.name||"")),o(ut),!u&&ut.length){const mt=ut[0];localStorage.setItem("studentId",mt.id),localStorage.setItem("studentName",mt.name),f(mt.id),y(mt.name)}}catch(at){console.error("children  :",at),o([])}})()},[i]);const pa=async z=>{var ct;if(!z)return;const tt=s.find(ut=>ut.id===z);let at=((tt==null?void 0:tt.name)||"").trim();if(!at)try{const ut=await Be(Lt(Tt,"students",z));ut.exists()&&(at=(((ct=ut.data())==null?void 0:ct.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",z),at&&localStorage.setItem("studentName",at),f(z),y(at),b(null),x([]),Z([]),ft(null),N(null),Et(null),Y(""),gt(null),Dt([]),Qt([]),Hn(null),oi([]),xr([]),Cr(null),Fn(!1),fe(!1),Qi(null)};O.useEffect(()=>{const z=Lt(Tt,"settings","enrollments"),tt=we(z,at=>{if(!at.exists())return;const ct=at.data()||{};wt({isOpen:ct.isOpen!==void 0&&ct.isOpen!==null?!!ct.isOpen:!0,reserveOnly:ct.reserveOnly!==void 0&&ct.reserveOnly!==null?!!ct.reserveOnly:!1})},at=>console.error("   :",at));return()=>tt()},[]),O.useEffect(()=>{if(r!=="elementary"&&r!=="middle"){I({}),P({});return}const z=Qs(be(Tt,"enrollments"),$s("group","==",r)),tt=we(z,at=>{const ct={},ut={};at.forEach(mt=>{const bt=mt.data(),Pt=`${bt.day}|${bt.time}`;if(bt.status==="reserve")ut[Pt]=(ut[Pt]||0)+1;else{if(bt.status==="waitlist")return;ct[Pt]=(ct[Pt]||0)+1}}),I(ct),P(ut)});return()=>tt()},[r]),O.useEffect(()=>{if(!m.trim()){Z([]),x([]),ft(null);return}const z=Lt(Tt,"enrollments_by_student",m.trim()),tt=we(z,at=>{var ct,ut;if(at.exists()){const mt=at.data(),bt=Array.isArray(mt.applied)?mt.applied:[];Z(bt),ft(((ut=(ct=mt.updatedAt)==null?void 0:ct.toDate)==null?void 0:ut.call(ct))||null),x(bt.map(({day:Pt,time:ae,status:Zt})=>({day:Pt,time:ae,status:Zt})))}else Z([]),x([]),ft(null)});return()=>tt()},[m]),O.useEffect(()=>{if(!u){Et(null),N(null);return}const z=Lt(Tt,"middle_clinic_days",u),tt=we(z,at=>{if(!at.exists()){Et(null),N(null);return}const ct=at.data()||{};Et(ct),N(ct.regular||null)});return()=>tt()},[u]),O.useEffect(()=>{const z=be(Tt,"middle_clinic_days"),tt=we(z,at=>{const ct={};at.forEach(ut=>{const mt=ut.data()||{};if(mt.regular&&mt.regular.day&&mt.regular.blockId){const bt=Ei(mt.regular.day,mt.regular.blockId);ct[bt]=(ct[bt]||0)+1}}),R(ct)});return()=>tt()},[]);const In=(z,tt,at=!1)=>{const ct=Ei(z,tt);let ut=M[ct]||0;return at&&(_t!=null&&_t.regular)&&_t.regular.day===z&&_t.regular.blockId===tt&&(ut-=1),ut>=V};O.useEffect(()=>{if(!u){gt(null),Y("");return}const z=Lt(Tt,"operation_by_student",u),tt=we(z,at=>{if(at.exists()){const ct=at.data()||{};gt(ct),Y(ct.time||"")}else gt(null),Y("")});return()=>tt()},[u]),O.useEffect(()=>{const z=be(Tt,"operation_enrollments"),tt=we(z,at=>{const ct={};at.forEach(ut=>{const bt=(ut.data()||{}).time;bt&&(ct[bt]=(ct[bt]||0)+1)}),et(ct)});return()=>tt()},[]),O.useEffect(()=>{if(!u){Qt([]),Dt([]),Hn(null);return}const z=Lt(Tt,"intensive_by_student",u),tt=we(z,at=>{var mt,bt;if(!at.exists()){Qt([]),Dt([]),Hn(null);return}const ct=at.data()||{},ut=Array.isArray(ct.applied)?ct.applied:[];Qt(ut),Dt(ut),Hn(((bt=(mt=ct.updatedAt)==null?void 0:mt.toDate)==null?void 0:bt.call(mt))||null)});return()=>tt()},[u]),O.useEffect(()=>{const z=be(Tt,"intensive_enrollments"),tt=we(z,at=>{const ct={};at.forEach(ut=>{const mt=ut.data()||{};if(!mt.day||!mt.time)return;const bt=bn(mt.day,mt.time);ct[bt]=(ct[bt]||0)+1}),yi(ct)});return()=>tt()},[]);const ga=(z,tt)=>{if(Ze(Rt,z,tt)){Dt(Rt.filter(ut=>!(ut.day===z&&ut.time===tt)));return}const ct=Rt.findIndex(ut=>ut.day===z);if(ct!==-1){const ut=[...Rt];ut[ct]={day:z,time:tt},Dt(ut);return}if(Rt.length>=3){alert("  3   .");return}Dt([...Rt,{day:z,time:tt}])},bi=async()=>{if(!u||!m.trim()){alert("   .     .");return}if(Rt.length!==2&&Rt.length!==3){alert(" 9  2  3  .");return}for(const{day:ut,time:mt}of Rt){const bt=bn(ut,mt),Pt=Dn[bt]||0;if((re.some(_e=>_e.day===ut&&_e.time===mt)?Pt-1:Pt)>=vt){alert(`${ut} ${mt}  .`);return}}const z=po(Tt),tt=Lt(Tt,"intensive_by_student",u);z.set(tt,{studentId:u,studentName:m.trim(),applied:Rt.map(ut=>({day:ut.day,time:ut.time})),updatedAt:zn()},{merge:!0});const at=Qs(be(Tt,"intensive_enrollments"),$s("studentId","==",u));(await ra(at)).forEach(ut=>z.delete(ut.ref)),Rt.forEach(({day:ut,time:mt})=>{const bt=`${u}|${ut}|${mt}`,Pt=Lt(Tt,"intensive_enrollments",bt);z.set(Pt,{studentId:u,studentName:m.trim(),day:ut,time:mt,createdAt:zn()})}),await z.commit(),alert("  .")};O.useEffect(()=>{if(!u){xr([]),oi([]),Cr(null);return}const z=Lt(Tt,"high_by_student",u),tt=we(z,at=>{var mt,bt;if(!at.exists()){xr([]),oi([]),Cr(null);return}const ct=at.data()||{},ut=Array.isArray(ct.days)?ct.days:[];xr(ut),oi(ut),Cr(((bt=(mt=ct.updatedAt)==null?void 0:mt.toDate)==null?void 0:bt.call(mt))||null)});return()=>tt()},[u]),O.useEffect(()=>{const z=be(Tt,"high_enrollments"),tt=we(z,at=>{const ct={};at.forEach(ut=>{const bt=(ut.data()||{}).day;bt&&(ct[bt]=(ct[bt]||0)+1)}),Rr(ct)});return()=>tt()},[]);const Dr=z=>{if(Xe.includes(z)){oi(Xe.filter(tt=>tt!==z));return}if(Xe.length>=4){alert("  4    .");return}oi([...Xe,z])},Ti=async()=>{if(!u||!m.trim()){alert("   .     .");return}for(const ut of Xe){const mt=wr[ut]||0;if((Ue.includes(ut)?mt-1:mt)>=Gn){alert(`${ut} .`);return}}const z=po(Tt),tt=Lt(Tt,"high_by_student",u);z.set(tt,{studentId:u,studentName:m.trim(),days:Xe,updatedAt:zn()},{merge:!0});const at=Qs(be(Tt,"high_enrollments"),$s("studentId","==",u));(await ra(at)).forEach(ut=>z.delete(ut.ref)),Xe.forEach(ut=>{const mt=`${u}|${ut}`,bt=Lt(Tt,"high_enrollments",mt);z.set(bt,{studentId:u,studentName:m.trim(),day:ut,createdAt:zn()})}),await z.commit(),alert("  .")};O.useEffect(()=>{if(!u){fe(!1),Fn(!1),Qi(null);return}const z=Lt(Tt,"advanced_by_student",u),tt=we(z,at=>{var mt,bt;if(!at.exists()){fe(!1),Fn(!1),Qi(null);return}const ct=at.data()||{},ut=!!ct.applied;fe(ut),Fn(ut),Qi(((bt=(mt=ct.updatedAt)==null?void 0:mt.toDate)==null?void 0:bt.call(mt))||null)});return()=>tt()},[u]),O.useEffect(()=>{const z=be(Tt,"advanced_enrollments"),tt=we(z,at=>{pn(at.size||0)});return()=>tt()},[]);const ya=async z=>{if(!u||!m.trim()){alert("   .     .");return}const tt=po(Tt),at=Lt(Tt,"advanced_by_student",u);tt.set(at,{studentId:u,studentName:m.trim(),applied:!!z,updatedAt:zn()},{merge:!0});const ct=`${u}`,ut=Lt(Tt,"advanced_enrollments",ct);z?tt.set(ut,{studentId:u,studentName:m.trim(),createdAt:zn()}):tt.delete(ut),await tt.commit(),alert(z?"  .":"  .")},me=(z,tt)=>{const at=[["",""],["",""],["",""]];if(Ze(T,z,tt)){x(T.filter(ct=>!(ct.day===z&&ct.time===tt)));return}if(T.length===0){x([{day:z,time:tt}]);return}if(T.length===1){const ct=T[0];if(ct.day===z){x([{day:z,time:tt}]);return}const ut=[ct.day,z].sort().join("");if(!at.some(bt=>bt.slice().sort().join("")===ut)){alert(" '/', '/', '/'    .");return}x([ct,{day:z,time:tt}]);return}if(T.length>=2){const ct=T.findIndex(ut=>ut.day===z);if(ct!==-1){const ut=[...T];ut[ct]={day:z,time:tt},x(ut);return}alert("   '/', '/', '/'     .");return}},Re=(z,tt)=>{if(Ze(T,z,tt)){x(T.filter(at=>!(at.day===z&&at.time===tt)));return}if(T.length>=2){alert("    2   .");return}x([...T,{day:z,time:tt}])},Se=(z,tt)=>x(T.filter(at=>!(at.day===z&&at.time===tt))),Tn=z=>{N(tt=>({day:z,blockId:(tt==null?void 0:tt.blockId)||"A"}))},va=z=>{if(!(w!=null&&w.day)){alert("   .");return}N(tt=>({...tt||{day:k[0]},blockId:z}))},hl=async()=>{if(!u||!m.trim()){alert("   .     .");return}if(!w||!w.day||!w.blockId){alert("  (A/B)  .");return}const{day:z,blockId:tt}=w;if(In(z,tt,!0)){alert(" /   .");return}const at=po(Tt),ct=Lt(Tt,"middle_clinic_days",u);at.set(ct,{studentId:u,studentName:m.trim(),regular:{day:z,blockId:tt},extra:null,updatedAt:zn()},{merge:!0}),await at.commit(),alert("  .")},Si=async()=>{if(r!=="elementary"&&r!=="middle")return;if(!pt.isOpen){alert("  .");return}if(!m.trim()){alert("   .     .");return}if(T.length===0){alert("  .");return}let z=[...T],tt=!1,at="";if(r==="elementary"){if(T.map(Zt=>Zt.day).length!==2){alert("  2  . (/, /, /)");return}const ae=[];if(T.forEach(({day:Zt,time:_e})=>{const ui=bn(Zt,_e),Sn=C[ui]||0,$n=B[ui]||0;let Vn;if(pt.reserveOnly){if($n>=10){tt=!0,at+=`${Zt} ${_e}     .
`;return}Vn="reserve"}else if(Sn<6)Vn="applied";else if($n<10)Vn="reserve";else{tt=!0,at+=`${Zt} ${_e}      .
`;return}ae.push({day:Zt,time:_e,status:Vn})}),tt){alert(at||"    .   .");return}z=ae}if(r==="middle"){const Pt=[];if(T.forEach(({day:ae,time:Zt})=>{const _e=bn(ae,Zt),ui=C[_e]||0,Sn=B[_e]||0;let $n;if(pt.reserveOnly){if(Sn>=10){tt=!0,at+=`${ae} ${Zt}     .
`;return}$n="reserve"}else if(ui<6)$n="applied";else if(Sn<10)$n="reserve";else{tt=!0,at+=`${ae} ${Zt}      .
`;return}Pt.push({day:ae,time:Zt,status:$n})}),tt){alert(at||"    .   .");return}z=Pt}const ct=po(Tt),ut=Lt(Tt,"enrollments_by_student",m.trim());ct.set(ut,{studentName:m.trim(),applied:z.map(({day:Pt,time:ae,status:Zt})=>({day:Pt,time:ae,group:r,status:Zt==="reserve"?"reserve":"applied",label:Zt==="reserve"?"()":""})),waitlist:[],updatedAt:zn()});const mt=Qs(be(Tt,"enrollments"),$s("studentName","==",m.trim()));(await ra(mt)).forEach(Pt=>ct.delete(Pt.ref)),z.forEach(({day:Pt,time:ae,status:Zt})=>{const _e=Zt==="reserve"?"reserve":"applied",ui=`${m.trim()}|${r}|${Pt}|${ae}|${_e}`,Sn=Lt(Tt,"enrollments",ui);ct.set(Sn,{studentName:m.trim(),group:r,day:Pt,time:ae,status:_e,createdAt:zn()})}),await ct.commit(),x(z),alert(".")},ts=(()=>{var ct,ut;const z=[];if(re!=null&&re.length){const mt=re.map(bt=>`${bt.day} ${bt.time}`).join(", ");z.push(` : ${mt} ()`)}const tt=q.filter(mt=>mt.group==="elementary"),at=q.filter(mt=>mt.group==="middle");if(tt.length){const mt=tt.map(bt=>`${bt.day} ${bt.time}${bt.status==="reserve"?" ()":" ()"}`).join(", ");z.push(` : ${mt}`)}if(at.length){const mt=at.map(bt=>`${bt.day} ${bt.time}${bt.status==="reserve"?" ()":" ()"}`).join(", ");z.push(` : ${mt}`)}if((ct=_t==null?void 0:_t.regular)!=null&&ct.day&&((ut=_t==null?void 0:_t.regular)!=null&&ut.blockId)){const mt=_t.regular.blockId==="A"?"A(5~7)":"B(7~9)";z.push(` : ${_t.regular.day} ${mt} ()`)}return Ue!=null&&Ue.length&&z.push(` : ${Ue.join(", ")} ()`),Fi&&z.push(" :  "),z.length||z.push("    ."),z})(),Xi=["intensive","elementary","middle","middleClinic","high","advanced"];return E.jsxs("div",{style:{padding:16,maxWidth:980,margin:"0 auto"},children:[E.jsxs("div",{style:{...on,padding:14,marginBottom:12},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10,flexWrap:"wrap"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:20,fontWeight:900},children:""}),E.jsx("div",{style:{marginTop:6,fontSize:13,color:"#374151",lineHeight:1.7},children:ts.map((z,tt)=>E.jsx("div",{style:{whiteSpace:"pre-wrap"},children:z},tt))})]}),s.length>0&&E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[E.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:" "}),E.jsx("select",{value:u,onChange:z=>pa(z.target.value),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",minWidth:180},children:s.map(z=>E.jsx("option",{value:z.id,children:z.name},z.id))})]})]}),E.jsx("div",{style:{marginTop:10,display:"flex",justifyContent:"flex-end"},children:E.jsx("span",{style:{fontSize:11,padding:"4px 10px",borderRadius:999,border:"1px solid #e5e7eb",backgroundColor:pt.isOpen?pt.reserveOnly?"#fef3c7":"#dcfce7":"#fee2e2",color:pt.isOpen?pt.reserveOnly?"#92400e":"#166534":"#b91c1c",fontWeight:800},children:pt.isOpen?pt.reserveOnly?" (/)":"(/)":" (/)"})})]}),E.jsx("div",{style:{display:"flex",gap:8,marginBottom:12,flexWrap:"wrap"},children:Xi.map(z=>{const tt=r===z;return E.jsx("button",{onClick:()=>{e(z),b(null)},style:{padding:"10px 14px",borderRadius:12,border:`1px solid ${tt?"#2563eb":"#e5e7eb"}`,background:tt?"#2563eb":"#fff",color:tt?"#fff":"#111827",fontWeight:900,cursor:"pointer"},children:$i[z]},z)})}),r==="intensive"?E.jsxs("div",{style:{...on,padding:14},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",gap:10,flexWrap:"wrap"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(261)"}),E.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[" 9  ",E.jsx("b",{children:"2  3"}),"  /      / :   ",E.jsxs("b",{children:[vt,""]})]})]}),E.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:qn?`: ${qn.toLocaleString()}`:""})]}),E.jsx("div",{style:{marginTop:14,overflowX:"auto"},children:E.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[E.jsx("thead",{children:E.jsxs("tr",{style:{background:"#f8fafc"},children:[E.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),E.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),E.jsx("tbody",{children:dt.map(z=>E.jsxs("tr",{children:[E.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:z}),E.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:ht.map(tt=>{const at=bn(z,tt),ct=Dn[at]||0,ut=da(ct),mt=Ze(Rt,z,tt),bt=ct>=vt&&!re.some(Pt=>Pt.day===z&&Pt.time===tt);return E.jsxs("button",{onClick:()=>{if(bt){alert("  .");return}ga(z,tt)},disabled:bt,style:{...Qn(mt,bt),minWidth:190},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[E.jsx("div",{style:{fontWeight:900},children:tt}),E.jsx("span",{style:{fontSize:11,padding:"4px 8px",borderRadius:999,fontWeight:900,...Ki(ut.tone)},children:ut.text})]}),mt&&E.jsx("div",{style:{marginTop:6,fontSize:11,fontWeight:900,color:"#2563eb"},children:" "})]},`${z}-${tt}`)})})})]},z))})]})}),E.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[E.jsxs("div",{style:{fontWeight:900},children:[" :"," ",Rt.length?E.jsxs("span",{children:[Rt.map(z=>`${z.day} ${z.time}`).join(", ")," ",E.jsxs("span",{style:{color:"#6b7280",fontWeight:900},children:["(",Rt.length," )"]})]}):E.jsx("span",{style:{color:"#6b7280"},children:""})]}),E.jsx("button",{onClick:bi,style:{padding:"10px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer"},children:" "})]})]}):null,r==="high"?E.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:E.jsxs("div",{style:{...on,padding:14},children:[E.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),E.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:["///    ( 4) /  : ",Gn,""]}),E.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:Hi.map(z=>{const tt=wr[z]||0,at=ma(tt),ct=tt>=Gn&&!Ue.includes(z),ut=Xe.includes(z);return E.jsxs("button",{onClick:()=>{if(ct){alert(`${z} .`);return}Dr(z)},disabled:ct,style:{...Qn(ut,ct),minWidth:170},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[E.jsxs("div",{style:{fontWeight:900},children:[z,""]}),E.jsx("span",{style:{fontSize:11,padding:"4px 8px",borderRadius:999,fontWeight:900,...Ki(at.tone)},children:at.text})]}),E.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280",fontWeight:900},children:[" ",tt,"/",Gn]})]},z)})}),E.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[E.jsxs("div",{style:{fontWeight:900},children:[":"," ",Xe.length?E.jsxs("span",{children:[Xe.join(", ")," ",E.jsxs("span",{style:{color:"#6b7280"},children:["(",Xe.length,")"]})]}):E.jsx("span",{style:{color:"#6b7280"},children:""})]}),E.jsx("button",{onClick:Ti,style:{padding:"10px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer"},children:" "}),vi&&E.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[": ",vi.toLocaleString()]})]})]})}):null,r==="middleClinic"?E.jsxs("div",{style:{...on,padding:14},children:[E.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:10},children:" () "}),E.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:[" + A/B   . (:   ",V,")"]}),E.jsxs("div",{style:{marginBottom:10},children:[E.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:800},children:" "}),E.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:k.map(z=>{const tt=(w==null?void 0:w.day)===z;return E.jsx("button",{onClick:()=>Tn(z),style:{padding:"8px 12px",borderRadius:999,border:tt?"1px solid #2563eb":"1px solid #e5e7eb",background:tt?"#e7f1ff":"#ffffff",cursor:"pointer",fontWeight:900},children:z},z)})})]}),E.jsxs("div",{style:{marginBottom:10},children:[E.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:800},children:" "}),E.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:D.map(z=>{const tt=(w==null?void 0:w.blockId)===z.id,at=w!=null&&w.day?Ei(w.day,z.id):null,ct=at&&M[at]||0,ut=(w==null?void 0:w.day)&&In(w.day,z.id,!0);return E.jsxs("button",{onClick:()=>va(z.id),disabled:ut,style:{padding:"8px 12px",borderRadius:999,border:tt?"1px solid #2563eb":"1px solid #e5e7eb",background:tt?"#e7f1ff":"#ffffff",cursor:ut?"not-allowed":"pointer",opacity:ut?.6:1,fontWeight:900,whiteSpace:"nowrap"},title:at?` ${ct} /  ${V}`:void 0,children:[z.label,at&&E.jsxs("span",{style:{marginLeft:6,fontSize:11,color:"#6b7280",fontWeight:800},children:["(",ct,"/",V,")"]})]},z.id)})})]}),E.jsx("button",{onClick:hl,style:{padding:"10px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"white",fontWeight:900,cursor:"pointer"},children:" "}),E.jsxs("div",{style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[E.jsxs("div",{style:{fontWeight:900,marginBottom:6},children:["  ",m?`: ${m}`:""]}),_t!=null&&_t.regular?E.jsxs("div",{style:{color:"#111827",fontWeight:900},children:[_t.regular.day," ",_t.regular.blockId==="A"?"A(5~7)":"B(7~9)"]}):E.jsx("div",{style:{color:"#6b7280"},children:"  ."})]})]}):null,r==="advanced"?E.jsxs("div",{style:{...on,padding:14},children:[E.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),E.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:" /   ."}),E.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[E.jsx("button",{onClick:()=>{Fn(!0),ya(!0)},style:{padding:"10px 14px",borderRadius:12,border:"1px solid #2563eb",background:Gi?"#2563eb":"#fff",color:Gi?"#fff":"#111827",fontWeight:900,cursor:"pointer"},children:""}),E.jsx("button",{onClick:()=>{Fn(!1),ya(!1)},style:{padding:"10px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827",fontWeight:900,cursor:"pointer"},children:""}),E.jsx("span",{style:{fontSize:12,fontWeight:900,color:Fi?"#166534":"#6b7280",background:Fi?"#dcfce7":"#f3f4f6",border:"1px solid #e5e7eb",padding:"6px 10px",borderRadius:999},children:Fi?" : ":" : "})]}),E.jsxs("div",{style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[E.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"  "}),E.jsxs("div",{style:{fontSize:22,fontWeight:900},children:[te,""]})]})]}):null,r==="elementary"||r==="middle"?E.jsxs("div",{style:{...on,padding:14},children:[E.jsx("div",{style:{overflowX:"auto"},children:E.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[E.jsx("thead",{children:E.jsxs("tr",{style:{background:"#f8fafc"},children:[E.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),E.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),E.jsx("tbody",{children:_i&&Object.entries(_i).map(([z,tt])=>E.jsxs("tr",{children:[E.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:z}),E.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:tt.map(at=>{const ct=bn(z,at),ut=C[ct]||0,mt=Yi(ut),bt=p&&p.day===z&&p.time===at,Pt=Ze(T,z,at),ae=ut>=6,Zt=(B[ct]||0)>=10,_e=pt.isOpen?(pt.reserveOnly||ae)&&Zt:!0;return E.jsxs("button",{onClick:()=>{if(!pt.isOpen){alert("  .");return}b({day:z,time:at}),r==="elementary"?me(z,at):r==="middle"&&Re(z,at)},disabled:_e,style:{padding:"10px 12px",borderRadius:14,border:`1px solid ${Pt||bt?"#2563eb":"#d1d5db"}`,background:Pt?"#e7f1ff":bt?"#f3f4ff":"#fff",color:_e?"#9ca3af":"#111827",fontWeight:900,cursor:_e?"not-allowed":"pointer",whiteSpace:"nowrap",opacity:_e?.6:1,textAlign:"left",minWidth:170},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[E.jsx("div",{children:at}),E.jsx("span",{style:{fontSize:11,padding:"4px 8px",borderRadius:999,fontWeight:900,...Ki(mt.tone)},children:mt.text})]}),pt.reserveOnly&&E.jsx("div",{style:{marginTop:6,fontSize:11,fontWeight:900,color:"#92400e"},children:"( )"}),Pt&&E.jsx("div",{style:{marginTop:6,fontSize:11,fontWeight:900,color:"#2563eb"},children:" "})]},`${z}-${at}`)})})})]},z))})]})}),E.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[E.jsx("div",{style:{minWidth:220,color:"#374151",fontWeight:800},children:p?E.jsxs("span",{children:[" : ",E.jsx("b",{children:p.day})," ",E.jsx("b",{children:p.time})]}):E.jsx("span",{style:{color:"#6b7280"},children:"   "})}),E.jsx("button",{onClick:Si,style:{padding:"10px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer"},children:""})]}),E.jsxs("div",{style:{marginTop:16},children:[E.jsx("div",{style:{fontWeight:900,marginBottom:8},children:" ( 2)"}),T.length===0?E.jsx("div",{style:{color:"#6b7280"},children:""}):E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:T.map(({day:z,time:tt,status:at})=>E.jsxs("span",{style:{padding:"8px 12px",borderRadius:999,border:`1px solid ${at==="reserve"?"#6b7280":"#2563eb"}`,background:at==="reserve"?"#f3f4f6":"#e7f1ff",display:"inline-flex",alignItems:"center",gap:10,fontWeight:900},children:[z," ",tt," ",at==="reserve"?"()":"",E.jsx("button",{onClick:()=>Se(z,tt),title:"",style:{border:"none",background:"transparent",cursor:"pointer",fontWeight:900,color:at==="reserve"?"#6b7280":"#2563eb"},children:""})]},`ap-${z}-${tt}`))})]}),E.jsxs("div",{style:{marginTop:18,padding:12,border:"1px solid #e5e7eb",borderRadius:12,background:"#f9fafb"},children:[E.jsxs("div",{style:{fontWeight:900,marginBottom:8},children:["  ",m?`: ${m}`:""]}),m?E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{marginBottom:4},children:[E.jsx("b",{children:":"})," ",q.length?q.map(z=>{const tt=z.group==="elementary"?"":"",at=z.status==="reserve"||(z==null?void 0:z.label)==="()"?" ()":"";return`${tt} ${z.day} ${z.time}${at}`}).join(", "):E.jsx("span",{style:{color:"#6b7280"},children:""})]}),Q&&E.jsxs("div",{style:{marginTop:6,fontSize:12,color:"#6b7280"},children:[": ",Q.toLocaleString()]})]}):E.jsx("div",{style:{color:"#6b7280"},children:"   "})]})]}):null]})}function PR(){const[r,e]=O.useState("elementary"),i={elementary:"",middle:""},o=O.useMemo(()=>({elementary:{:["230"],:["3","4"],:["2","3","4"],:["3","4"],:["3","4"]},middle:{:["330","5","630"],:["5","630"],:["5","630"],:["5","630"],:["5","630"]}}),[])[r],[u,f]=O.useState({}),[m,y]=O.useState({});O.useEffect(()=>{const Y=Qs(be(Tt,"enrollments"),$s("group","==",r)),it=we(Y,gt=>{const U={},et={};gt.forEach(dt=>{const ht=dt.data(),vt=`${ht.day}|${ht.time}`;ht.status==="waitlist"?et[vt]=(et[vt]||0)+1:U[vt]=(U[vt]||0)+1}),f(U),y(et)});return()=>it()},[r]);const[p,b]=O.useState(null),[T,x]=O.useState([]),[C,I]=O.useState([]),B=(Y,it)=>`${Y}|${it}`,P=(Y,it,gt)=>Y.some(U=>U.day===it&&U.time===gt),q=()=>{if(!p)return;const{day:Y,time:it}=p,gt=B(Y,it),U=u[gt]||0;if(P(T,Y,it)){x(T.filter(vt=>!(vt.day===Y&&vt.time===it)));return}let et="reserve",dt="   .   . ";if(U>=6&&U<8?(et="reserve",dt=" 6 .      ."):U>=8&&(et="waitlist",dt="   .  ."),et==="waitlist"){alert(dt),Z();return}if(T.length>=2){alert("  2 .");return}const ht=T.findIndex(vt=>vt.day===Y);if(ht!==-1){const vt=[...T];vt[ht]={day:Y,time:it,status:et},x(vt)}else x([...T,{day:Y,time:it,status:et}]);P(C,Y,it)&&I(C.filter(vt=>!(vt.day===Y&&vt.time===it))),alert(dt)},Z=()=>{if(!p)return;const{day:Y,time:it}=p;if(P(C,Y,it)){I(C.filter(gt=>!(gt.day===Y&&gt.time===it)));return}P(T,Y,it)&&x(T.filter(gt=>!(gt.day===Y&&gt.time===it))),I([...C,{day:Y,time:it}])},Q=(Y,it)=>x(T.filter(gt=>!(gt.day===Y&&gt.time===it))),ft=(Y,it)=>I(C.filter(gt=>!(gt.day===Y&&gt.time===it))),[pt,wt]=O.useState(""),[k,D]=O.useState(""),[V,w]=O.useState(""),[N,M]=O.useState(""),R=Y=>Y.replace(/[^0-9]/g,""),_t=Y=>Y.replace(/[^0-9]/g,"").slice(0,6),Et=async()=>{M("");const Y=pt.trim(),it=R(k),gt=_t(V);if(!Y||gt.length!==6||it.length<7){M("/6/    .");return}const U=Lt(Tt,"newstudent",Y),et=await Be(U);if(!et.exists()){M("   . []   ."),x([]),I([]);return}const dt=et.data()||{},ht=(dt.birth6||"").toString()===gt,vt=R(dt.parentPhone||"")===it;if(!ht||!vt){M("   /  ."),x([]),I([]);return}const Rt=Array.isArray(dt.applied)?dt.applied:[],Dt=Array.isArray(dt.waitlist)?dt.waitlist:[];x(Rt.map(({day:re,time:Qt})=>({day:re,time:Qt}))),I(Dt.map(({day:re,time:Qt})=>({day:re,time:Qt}))),M(" .")},K=async()=>{const Y=pt.trim(),it=R(k),gt=_t(V);if(!Y){alert("   .");return}if(gt.length!==6){alert(" 6  .");return}if(it.length<7){alert("    .");return}if(T.length===0&&C.length===0&&!confirm("/  .   ?"))return;const U=Lt(Tt,"newstudent",Y);await qm(U,{studentName:Y,parentPhone:it,birth6:gt,applied:T.map(({day:et,time:dt,status:ht})=>({day:et,time:dt,group:r,status:ht,label:ht==="reserve"?"()":""})),waitlist:C.map(({day:et,time:dt})=>({day:et,time:dt,group:r,status:"waitlist",label:""})),updatedAt:zn()},{merge:!0}),alert("."),M(" .")};return E.jsxs("div",{style:{padding:16},children:[E.jsx("h2",{style:{marginBottom:12},children:"  ( /)"}),E.jsxs("div",{style:{padding:12,border:"1px solid #e5e7eb",borderRadius:8,marginBottom:12},children:[E.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"1fr 1fr 1fr"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:" "}),E.jsx("input",{value:pt,onChange:Y=>wt(Y.target.value),placeholder:": ",style:{width:"100%",padding:8,border:"1px solid #d1d5db",borderRadius:8}})]}),E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:" "}),E.jsx("input",{value:k,onChange:Y=>D(Y.target.value),placeholder:": 01012345678(-)",style:{width:"100%",padding:8,border:"1px solid #d1d5db",borderRadius:8}})]}),E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:" 6"}),E.jsx("input",{value:V,onChange:Y=>w(Y.target.value.replace(/[^0-9]/g,"").slice(0,6)),placeholder:": 170806",inputMode:"numeric",maxLength:6,style:{width:"100%",padding:8,border:"1px solid #d1d5db",borderRadius:8}})]})]}),E.jsxs("div",{style:{marginTop:10,display:"flex",gap:8},children:[E.jsx("button",{onClick:Et,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #6c757d",background:"#6c757d",color:"#fff",fontWeight:700,cursor:"pointer"},children:""}),E.jsx("button",{onClick:K,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #0d6efd",background:"#0d6efd",color:"#fff",fontWeight:700,cursor:"pointer"},children:""})]}),N&&E.jsx("div",{style:{marginTop:8,color:"#374151"},children:N})]}),E.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:["elementary","middle"].map(Y=>{const it=Y===r;return E.jsx("button",{onClick:()=>{e(Y),b(null)},style:{padding:"8px 14px",borderRadius:8,border:`1px solid ${it?"#0d6efd":"#ddd"}`,background:it?"#0d6efd":"#fff",color:it?"#fff":"#333",fontWeight:600,cursor:"pointer"},children:i[Y]},Y)})}),E.jsx("div",{style:{overflowX:"auto"},children:E.jsxs("table",{style:{width:"100%",minWidth:560,borderCollapse:"collapse",border:"1px solid #e5e7eb"},children:[E.jsx("thead",{children:E.jsxs("tr",{style:{background:"#f8fafc"},children:[E.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",width:90},children:""}),E.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb"},children:" ( / )"})]})}),E.jsx("tbody",{children:Object.entries(o).map(([Y,it])=>E.jsxs("tr",{children:[E.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:600},children:Y}),E.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:it.map(gt=>{const U=B(Y,gt),et=u[U]||0,dt=m[U]||0,ht=p&&p.day===Y&&p.time===gt,vt=P(T,Y,gt),Rt=P(C,Y,gt);return E.jsxs("button",{onClick:()=>b(ht?null:{day:Y,time:gt}),style:{padding:"8px 10px",borderRadius:8,border:`1px solid ${ht?"#0d6efd":"#d1d5db"}`,background:ht?"#e7f1ff":"#fff",fontWeight:600,whiteSpace:"nowrap",cursor:"pointer"},title:`${Y} ${gt}`,children:[gt,E.jsxs("span",{style:{color:"#6b7280",marginLeft:6},children:["( ",et," /  ",dt,")"]}),vt&&E.jsx("span",{style:{marginLeft:6,fontSize:12,color:"#0d6efd"},children:" "}),Rt&&E.jsx("span",{style:{marginLeft:6,fontSize:12,color:"#6c757d"},children:" "})]},`${Y}-${gt}`)})})})]},Y))})]})}),E.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[E.jsx("div",{style:{minWidth:220,color:"#374151"},children:p?E.jsxs("span",{children:[": ",E.jsx("b",{children:p.day})," ",E.jsx("b",{children:p.time})]}):E.jsx("span",{style:{color:"#6b7280"},children:"   "})}),E.jsx("button",{disabled:!p,onClick:q,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #0d6efd",background:p?"#0d6efd":"#e5e7eb",color:p?"#fff":"#9ca3af",fontWeight:700,cursor:p?"pointer":"not-allowed"},children:" ( 2)"}),E.jsx("button",{disabled:!p,onClick:Z,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #6c757d",background:p?"#6c757d":"#e5e7eb",color:p?"##fff":"#9ca3af",fontWeight:700,cursor:p?"pointer":"not-allowed"},children:" ()"})]}),E.jsxs("div",{style:{marginTop:16,display:"grid",gap:12,gridTemplateColumns:"1fr 1fr"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:700,marginBottom:6},children:" ( 2)"}),T.length===0?E.jsx("div",{style:{color:"#6b7280"},children:""}):E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:T.map(({day:Y,time:it,status:gt})=>E.jsxs("span",{style:{padding:"6px 10px",borderRadius:999,border:`1px solid ${gt==="reserve"?"#6c757d":"#0d6efd"}`,background:gt==="reserve"?"#f1f1f1":"#e7f1ff",display:"inline-flex",gap:8},title:gt==="reserve"?"()":"",children:[Y," ",it,gt==="reserve"?" ()":"",E.jsx("button",{onClick:()=>Q(Y,it),style:{border:"none",background:"transparent",cursor:"pointer",color:gt==="reserve"?"#6c757d":"#0d6efd",fontWeight:700},children:""})]},`ap-${Y}-${it}`))})]}),E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:700,marginBottom:6},children:" ()"}),C.length===0?E.jsx("div",{style:{color:"#6b7280"},children:""}):E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:C.map(({day:Y,time:it})=>E.jsxs("span",{style:{padding:"6px 10px",borderRadius:999,border:"1px solid #6c757d",background:"#f1f1f1",display:"inline-flex",gap:8},children:[Y," ",it,E.jsx("button",{onClick:()=>ft(Y,it),style:{border:"none",background:"transparent",cursor:"pointer",color:"#6c757d",fontWeight:700},children:""})]},`wt-${Y}-${it}`))})]})]})]})}function zR(){const[r,e]=O.useState(""),[i,s]=O.useState(""),[o,u]=O.useState(""),[f,m]=O.useState(!0),y=jo(),p=localStorage.getItem("parentPhone")||"";O.useEffect(()=>{(async()=>{if(!p){y("/login");return}m(!1)})()},[p,y]);const b=async()=>{if(u(""),!p){u(" .");return}if(r.length<8){u("  8   .");return}if(r!==i){u("   .");return}try{const T=Lt(Tt,"parents",p),x=await Be(T);if(!x.exists()){u("  .   .");return}await DE(T,{password:r,mustChangePassword:!1,updatedAt:zn()}),localStorage.setItem("mustChangePassword","0");const I=(x.data()||{}).children||[];I.length<=1?(I[0]&&localStorage.setItem("studentId",I[0]),y("/attendance")):y("/select-child")}catch(T){console.error(T),u("    .")}};return f?null:E.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[E.jsx("h1",{style:{fontSize:22,fontWeight:900,marginBottom:10},children:" "}),E.jsxs("div",{style:{fontSize:13,color:"#6b7280",lineHeight:1.6},children:["  ",E.jsx("b",{children:"     "}),".",E.jsx("br",{}),"( 8  )"]}),E.jsx("label",{style:{display:"block",fontWeight:700,marginTop:14},children:" "}),E.jsx("input",{value:r,onChange:T=>e(T.target.value),placeholder:"8 ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),E.jsx("label",{style:{display:"block",fontWeight:700,marginTop:10},children:"  "}),E.jsx("input",{value:i,onChange:T=>s(T.target.value),placeholder:"   ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),E.jsx("button",{onClick:b,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #16a34a",background:"#16a34a",color:"#fff",cursor:"pointer"},children:" "}),o&&E.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:700},children:o})]})}function BR(){const[r,e]=O.useState([]),[i,s]=O.useState(""),o=jo(),u=localStorage.getItem("parentPhone")||"",f=localStorage.getItem("mustChangePassword")==="1";O.useEffect(()=>{(async()=>{if(!u){o("/login");return}if(f){o("/change-password");return}try{const p=Lt(Tt,"parents",u),b=await Be(p);if(!b.exists()){s("  .   .");return}const x=(b.data()||{}).children||[],C=[];for(const I of x){const B=await Be(Lt(Tt,"students",I)),P=B.exists()?B.data():{};C.push({id:I,name:P.name||""})}e(C)}catch(p){console.error(p),s("   .")}})()},[u,f,o]);const m=p=>{localStorage.setItem("studentId",p),o("/attendance")},y=()=>{localStorage.removeItem("parentPhone"),localStorage.removeItem("studentId"),localStorage.removeItem("mustChangePassword"),o("/login")};return E.jsxs("div",{style:{maxWidth:520,margin:"40px auto",padding:16},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsx("h1",{style:{fontSize:22,fontWeight:900},children:" "}),E.jsx("button",{onClick:y,style:{border:"1px solid #d1d5db",background:"#fff",borderRadius:10,padding:"8px 10px",cursor:"pointer"},children:""})]}),i&&E.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:700},children:i}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0,1fr))",gap:12,marginTop:14},children:r.map(p=>E.jsxs("button",{onClick:()=>m(p.id),style:{textAlign:"left",padding:14,borderRadius:14,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"},children:[E.jsx("div",{style:{fontSize:16,fontWeight:900},children:p.name}),E.jsx("div",{style:{marginTop:6,fontSize:12,color:"#6b7280"},children:"   "})]},p.id))})]})}class qR extends ab.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,i){console.error("ErrorBoundary caught:",e,i)}render(){return this.state.hasError?E.jsx("div",{style:{padding:16},children:" . (F5),       ."}):this.props.children}}const x_=r=>{if(!r)return null;if(typeof r.toDate=="function")return r.toDate();const e=new Date(r);return isNaN(e)?null:e};function HR(){return E.jsx(wT,{children:E.jsx(qR,{children:E.jsx(GR,{})})})}function GR(){const r=Ar(),[e,i]=O.useState(!!localStorage.getItem("parentPhone")),[s,o]=O.useState(localStorage.getItem("mustChangePassword")==="1"),[u,f]=O.useState(!!localStorage.getItem("studentId")),[m,y]=O.useState(!1);O.useEffect(()=>{const T=()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1"),f(!!localStorage.getItem("studentId"))};return window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[]),O.useEffect(()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1"),f(!!localStorage.getItem("studentId"))},[r]),O.useEffect(()=>{const T=localStorage.getItem("studentId");if(!T)return;(async()=>{const C=new Date,I=new Date;I.setDate(C.getDate()-3);const B=await ra(be(Tt,"comments")),P=await ra(be(Tt,"books")),q=B.docs.some(Q=>{const ft=Q.data();return ft.studentId===T&&(x_(ft.createdAt||ft.completedDate)??new Date(0))>=I}),Z=P.docs.some(Q=>{const ft=Q.data();return ft.studentId===T&&(x_(ft.createdAt||ft.completedDate)??new Date(0))>=I});y(q||Z)})()},[u]);const p=()=>{localStorage.clear(),i(!1),o(!1),f(!1),window.location.hash="#/login"},b=T=>e?s?E.jsx(mi,{to:"change-password",replace:!0}):u?T:E.jsx(mi,{to:"select-child",replace:!0}):E.jsx(mi,{to:"login",replace:!0});return E.jsxs("div",{className:"app-shell page",children:[e&&!s&&E.jsx("nav",{className:"nav",children:E.jsxs("div",{className:"nav-links",style:{justifyContent:"center"},children:[["/attendance","/payment","/notices","/myclass","/enroll"].map(T=>E.jsx(B_,{to:T,style:({isActive:x})=>({margin:"0 0",padding:"6px 12px",borderRadius:6,textDecoration:"none",fontWeight:x?"bold":"normal",color:x?"#fff":"#333",backgroundColor:x?"#007bff":"#f5f5f7",position:"relative",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap"}),children:{"/attendance":"","/payment":"","/notices":"","/myclass":E.jsxs(E.Fragment,{children:["",m&&E.jsx("span",{className:"pulse wiggle",style:{position:"absolute",top:-8,right:-12,backgroundColor:"red",color:"white",borderRadius:"12px",padding:"2px 6px",fontSize:"10px",fontWeight:"bold",fontFamily:"'Segoe UI','Apple SD Gothic Neo',sans-serif"},children:" "})]}),"/enroll":""}[T]},T)),E.jsx("button",{onClick:()=>{window.location.hash="#/select-child"},style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:" "}),E.jsx("button",{onClick:()=>{window.location.hash="#/change-password"},style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:" "}),E.jsx("button",{onClick:p,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:""})]})}),E.jsxs(nT,{children:[E.jsx(ai,{index:!0,element:e?s?E.jsx(mi,{to:"change-password",replace:!0}):u?E.jsx(mi,{to:"notices",replace:!0}):E.jsx(mi,{to:"select-child",replace:!0}):E.jsx(mi,{to:"login",replace:!0})}),E.jsx(ai,{path:"login",element:E.jsx(DR,{})}),E.jsx(ai,{path:"change-password",element:e?E.jsx(zR,{}):E.jsx(mi,{to:"login",replace:!0})}),E.jsx(ai,{path:"select-child",element:e?s?E.jsx(mi,{to:"change-password",replace:!0}):E.jsx(BR,{}):E.jsx(mi,{to:"login",replace:!0})}),E.jsx(ai,{path:"new-enroll",element:E.jsx(PR,{})}),E.jsx(ai,{path:"attendance",element:b(E.jsx(IR,{}))}),E.jsx(ai,{path:"payment",element:b(E.jsx(VR,{}))}),E.jsx(ai,{path:"notices",element:b(E.jsx(MR,{}))}),E.jsx(ai,{path:"myclass",element:b(E.jsx(kR,{}))}),E.jsx(ai,{path:"enroll",element:b(E.jsx(LR,{}))}),E.jsx(ai,{path:"*",element:E.jsx(mi,{to:"/",replace:!0})})]})]})}const FR="modulepreload",QR=function(r){return"/ysmath/"+r},w_={},$R=function(e,i,s){let o=Promise.resolve();if(i&&i.length>0){let f=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=f(i.map(p=>{if(p=QR(p),p in w_)return;w_[p]=!0;const b=p.endsWith(".css"),T=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${T}`))return;const x=document.createElement("link");if(x.rel=b?"stylesheet":FR,b||(x.as="script"),x.crossOrigin="",x.href=p,y&&x.setAttribute("nonce",y),document.head.appendChild(x),b)return new Promise((C,I)=>{x.addEventListener("load",C),x.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})};function YR(r={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:s,onRegistered:o,onRegisteredSW:u,onRegisterError:f}=r;let m,y;const p=async(T=!0)=>{await y};async function b(){if("serviceWorker"in navigator){if(m=await $R(async()=>{const{Workbox:T}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:T}},[]).then(({Workbox:T})=>new T("/ysmath/sw.js",{scope:"/ysmath/",type:"classic"})).catch(T=>{f==null||f(T)}),!m)return;m.addEventListener("activated",T=>{(T.isUpdate||T.isExternal)&&window.location.reload()}),m.addEventListener("installed",T=>{T.isUpdate||s==null||s()}),m.register({immediate:e}).then(T=>{u?u("/ysmath/sw.js",T):o==null||o(T)}).catch(T=>{f==null||f(T)})}}return y=b(),p}YR({immediate:!0});fb.createRoot(document.getElementById("root")).render(E.jsx(O.StrictMode,{children:E.jsx(HR,{})}));
