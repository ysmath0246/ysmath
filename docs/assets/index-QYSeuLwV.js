(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function aE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ld={exports:{}},go={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function lE(){if(ev)return go;ev=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:a,key:f,ref:o!==void 0?o:null,props:c}}return go.Fragment=e,go.jsx=i,go.jsxs=i,go}var nv;function oE(){return nv||(nv=1,ld.exports=lE()),ld.exports}var v=oE(),od={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function uE(){if(iv)return $t;iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function A(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,W={};function B(L,lt,yt){this.props=L,this.context=lt,this.refs=W,this.updater=yt||O}B.prototype.isReactComponent={},B.prototype.setState=function(L,lt){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,lt,"setState")},B.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function F(){}F.prototype=B.prototype;function H(L,lt,yt){this.props=L,this.context=lt,this.refs=W,this.updater=yt||O}var P=H.prototype=new F;P.constructor=H,j(P,B.prototype),P.isPureReactComponent=!0;var Z=Array.isArray,st={H:null,A:null,T:null,S:null,V:null},mt=Object.prototype.hasOwnProperty;function M(L,lt,yt,ft,Rt,Ct){return yt=Ct.ref,{$$typeof:r,type:L,key:lt,ref:yt!==void 0?yt:null,props:Ct}}function R(L,lt){return M(L.type,lt,void 0,void 0,void 0,L.props)}function w(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function N(L){var lt={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(yt){return lt[yt]})}var k=/\/+/g;function z(L,lt){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):lt.toString(36)}function D(){}function Dt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(D,D):(L.status="pending",L.then(function(lt){L.status==="pending"&&(L.status="fulfilled",L.value=lt)},function(lt){L.status==="pending"&&(L.status="rejected",L.reason=lt)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Ot(L,lt,yt,ft,Rt){var Ct=typeof L;(Ct==="undefined"||Ct==="boolean")&&(L=null);var J=!1;if(L===null)J=!0;else switch(Ct){case"bigint":case"string":case"number":J=!0;break;case"object":switch(L.$$typeof){case r:case e:J=!0;break;case E:return J=L._init,Ot(J(L._payload),lt,yt,ft,Rt)}}if(J)return Rt=Rt(L),J=ft===""?"."+z(L,0):ft,Z(Rt)?(yt="",J!=null&&(yt=J.replace(k,"$&/")+"/"),Ot(Rt,lt,yt,"",function(kt){return kt})):Rt!=null&&(w(Rt)&&(Rt=R(Rt,yt+(Rt.key==null||L&&L.key===Rt.key?"":(""+Rt.key).replace(k,"$&/")+"/")+J)),lt.push(Rt)),1;J=0;var _t=ft===""?".":ft+":";if(Z(L))for(var Et=0;Et<L.length;Et++)ft=L[Et],Ct=_t+z(ft,Et),J+=Ot(ft,lt,yt,Ct,Rt);else if(Et=A(L),typeof Et=="function")for(L=Et.call(L),Et=0;!(ft=L.next()).done;)ft=ft.value,Ct=_t+z(ft,Et++),J+=Ot(ft,lt,yt,Ct,Rt);else if(Ct==="object"){if(typeof L.then=="function")return Ot(Dt(L),lt,yt,ft,Rt);throw lt=String(L),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return J}function tt(L,lt,yt){if(L==null)return L;var ft=[],Rt=0;return Ot(L,ft,"","",function(Ct){return lt.call(yt,Ct,Rt++)}),ft}function pt(L){if(L._status===-1){var lt=L._result;lt=lt(),lt.then(function(yt){(L._status===0||L._status===-1)&&(L._status=1,L._result=yt)},function(yt){(L._status===0||L._status===-1)&&(L._status=2,L._result=yt)}),L._status===-1&&(L._status=0,L._result=lt)}if(L._status===1)return L._result.default;throw L._result}var At=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Ft(){}return $t.Children={map:tt,forEach:function(L,lt,yt){tt(L,function(){lt.apply(this,arguments)},yt)},count:function(L){var lt=0;return tt(L,function(){lt++}),lt},toArray:function(L){return tt(L,function(lt){return lt})||[]},only:function(L){if(!w(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},$t.Component=B,$t.Fragment=i,$t.Profiler=o,$t.PureComponent=H,$t.StrictMode=a,$t.Suspense=y,$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=st,$t.__COMPILER_RUNTIME={__proto__:null,c:function(L){return st.H.useMemoCache(L)}},$t.cache=function(L){return function(){return L.apply(null,arguments)}},$t.cloneElement=function(L,lt,yt){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ft=j({},L.props),Rt=L.key,Ct=void 0;if(lt!=null)for(J in lt.ref!==void 0&&(Ct=void 0),lt.key!==void 0&&(Rt=""+lt.key),lt)!mt.call(lt,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&lt.ref===void 0||(ft[J]=lt[J]);var J=arguments.length-2;if(J===1)ft.children=yt;else if(1<J){for(var _t=Array(J),Et=0;Et<J;Et++)_t[Et]=arguments[Et+2];ft.children=_t}return M(L.type,Rt,void 0,void 0,Ct,ft)},$t.createContext=function(L){return L={$$typeof:f,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},$t.createElement=function(L,lt,yt){var ft,Rt={},Ct=null;if(lt!=null)for(ft in lt.key!==void 0&&(Ct=""+lt.key),lt)mt.call(lt,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Rt[ft]=lt[ft]);var J=arguments.length-2;if(J===1)Rt.children=yt;else if(1<J){for(var _t=Array(J),Et=0;Et<J;Et++)_t[Et]=arguments[Et+2];Rt.children=_t}if(L&&L.defaultProps)for(ft in J=L.defaultProps,J)Rt[ft]===void 0&&(Rt[ft]=J[ft]);return M(L,Ct,void 0,void 0,null,Rt)},$t.createRef=function(){return{current:null}},$t.forwardRef=function(L){return{$$typeof:m,render:L}},$t.isValidElement=w,$t.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:pt}},$t.memo=function(L,lt){return{$$typeof:p,type:L,compare:lt===void 0?null:lt}},$t.startTransition=function(L){var lt=st.T,yt={};st.T=yt;try{var ft=L(),Rt=st.S;Rt!==null&&Rt(yt,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(Ft,At)}catch(Ct){At(Ct)}finally{st.T=lt}},$t.unstable_useCacheRefresh=function(){return st.H.useCacheRefresh()},$t.use=function(L){return st.H.use(L)},$t.useActionState=function(L,lt,yt){return st.H.useActionState(L,lt,yt)},$t.useCallback=function(L,lt){return st.H.useCallback(L,lt)},$t.useContext=function(L){return st.H.useContext(L)},$t.useDebugValue=function(){},$t.useDeferredValue=function(L,lt){return st.H.useDeferredValue(L,lt)},$t.useEffect=function(L,lt,yt){var ft=st.H;if(typeof yt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ft.useEffect(L,lt)},$t.useId=function(){return st.H.useId()},$t.useImperativeHandle=function(L,lt,yt){return st.H.useImperativeHandle(L,lt,yt)},$t.useInsertionEffect=function(L,lt){return st.H.useInsertionEffect(L,lt)},$t.useLayoutEffect=function(L,lt){return st.H.useLayoutEffect(L,lt)},$t.useMemo=function(L,lt){return st.H.useMemo(L,lt)},$t.useOptimistic=function(L,lt){return st.H.useOptimistic(L,lt)},$t.useReducer=function(L,lt,yt){return st.H.useReducer(L,lt,yt)},$t.useRef=function(L){return st.H.useRef(L)},$t.useState=function(L){return st.H.useState(L)},$t.useSyncExternalStore=function(L,lt,yt){return st.H.useSyncExternalStore(L,lt,yt)},$t.useTransition=function(){return st.H.useTransition()},$t.version="19.1.0",$t}var rv;function Yd(){return rv||(rv=1,od.exports=uE()),od.exports}var C=Yd();const cE=aE(C);var ud={exports:{}},yo={},cd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function hE(){return sv||(sv=1,function(r){function e(tt,pt){var At=tt.length;tt.push(pt);t:for(;0<At;){var Ft=At-1>>>1,L=tt[Ft];if(0<o(L,pt))tt[Ft]=pt,tt[At]=L,At=Ft;else break t}}function i(tt){return tt.length===0?null:tt[0]}function a(tt){if(tt.length===0)return null;var pt=tt[0],At=tt.pop();if(At!==pt){tt[0]=At;t:for(var Ft=0,L=tt.length,lt=L>>>1;Ft<lt;){var yt=2*(Ft+1)-1,ft=tt[yt],Rt=yt+1,Ct=tt[Rt];if(0>o(ft,At))Rt<L&&0>o(Ct,ft)?(tt[Ft]=Ct,tt[Rt]=At,Ft=Rt):(tt[Ft]=ft,tt[yt]=At,Ft=yt);else if(Rt<L&&0>o(Ct,At))tt[Ft]=Ct,tt[Rt]=At,Ft=Rt;else break t}}return pt}function o(tt,pt){var At=tt.sortIndex-pt.sortIndex;return At!==0?At:tt.id-pt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var y=[],p=[],E=1,S=null,A=3,O=!1,j=!1,W=!1,B=!1,F=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function Z(tt){for(var pt=i(p);pt!==null;){if(pt.callback===null)a(p);else if(pt.startTime<=tt)a(p),pt.sortIndex=pt.expirationTime,e(y,pt);else break;pt=i(p)}}function st(tt){if(W=!1,Z(tt),!j)if(i(y)!==null)j=!0,mt||(mt=!0,z());else{var pt=i(p);pt!==null&&Ot(st,pt.startTime-tt)}}var mt=!1,M=-1,R=5,w=-1;function N(){return B?!0:!(r.unstable_now()-w<R)}function k(){if(B=!1,mt){var tt=r.unstable_now();w=tt;var pt=!0;try{t:{j=!1,W&&(W=!1,H(M),M=-1),O=!0;var At=A;try{e:{for(Z(tt),S=i(y);S!==null&&!(S.expirationTime>tt&&N());){var Ft=S.callback;if(typeof Ft=="function"){S.callback=null,A=S.priorityLevel;var L=Ft(S.expirationTime<=tt);if(tt=r.unstable_now(),typeof L=="function"){S.callback=L,Z(tt),pt=!0;break e}S===i(y)&&a(y),Z(tt)}else a(y);S=i(y)}if(S!==null)pt=!0;else{var lt=i(p);lt!==null&&Ot(st,lt.startTime-tt),pt=!1}}break t}finally{S=null,A=At,O=!1}pt=void 0}}finally{pt?z():mt=!1}}}var z;if(typeof P=="function")z=function(){P(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Dt=D.port2;D.port1.onmessage=k,z=function(){Dt.postMessage(null)}}else z=function(){F(k,0)};function Ot(tt,pt){M=F(function(){tt(r.unstable_now())},pt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(tt){tt.callback=null},r.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<tt?Math.floor(1e3/tt):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(tt){switch(A){case 1:case 2:case 3:var pt=3;break;default:pt=A}var At=A;A=pt;try{return tt()}finally{A=At}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(tt,pt){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var At=A;A=tt;try{return pt()}finally{A=At}},r.unstable_scheduleCallback=function(tt,pt,At){var Ft=r.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?Ft+At:Ft):At=Ft,tt){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=At+L,tt={id:E++,callback:pt,priorityLevel:tt,startTime:At,expirationTime:L,sortIndex:-1},At>Ft?(tt.sortIndex=At,e(p,tt),i(y)===null&&tt===i(p)&&(W?(H(M),M=-1):W=!0,Ot(st,At-Ft))):(tt.sortIndex=L,e(y,tt),j||O||(j=!0,mt||(mt=!0,z()))),tt},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(tt){var pt=A;return function(){var At=A;A=pt;try{return tt.apply(this,arguments)}finally{A=At}}}}(hd)),hd}var av;function fE(){return av||(av=1,cd.exports=hE()),cd.exports}var fd={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function dE(){if(lv)return En;lv=1;var r=Yd();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,p,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:y,containerInfo:p,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,En.createPortal=function(y,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(y,p,null,E)},En.flushSync=function(y){var p=f.T,E=a.p;try{if(f.T=null,a.p=2,y)return y()}finally{f.T=p,a.p=E,a.d.f()}},En.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(y,p))},En.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},En.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var E=p.as,S=m(E,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?a.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:O}):E==="script"&&a.d.X(y,{crossOrigin:S,integrity:A,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},En.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);a.d.M(y,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(y)},En.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,S=m(E,p.crossOrigin);a.d.L(y,E,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},En.preloadModule=function(y,p){if(typeof y=="string")if(p){var E=m(p.as,p.crossOrigin);a.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(y)},En.requestFormReset=function(y){a.d.r(y)},En.unstable_batchedUpdates=function(y,p){return y(p)},En.useFormState=function(y,p,E){return f.H.useFormState(y,p,E)},En.useFormStatus=function(){return f.H.useHostTransitionStatus()},En.version="19.1.0",En}var ov;function mE(){if(ov)return fd.exports;ov=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fd.exports=dE(),fd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function pE(){if(uv)return yo;uv=1;var r=fE(),e=Yd(),i=mE();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(a(188))}function y(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,l=n;;){var h=s.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){s=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===s)return m(h),t;if(d===l)return m(h),n;d=d.sibling}throw Error(a(188))}if(s.return!==l.return)s=h,l=d;else{for(var b=!1,T=h.child;T;){if(T===s){b=!0,s=h,l=d;break}if(T===l){b=!0,l=h,s=d;break}T=T.sibling}if(!b){for(T=d.child;T;){if(T===s){b=!0,s=d,l=h;break}if(T===l){b=!0,l=d,s=h;break}T=T.sibling}if(!b)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function p(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=p(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),P=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),st=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function Dt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case B:return"Profiler";case W:return"StrictMode";case st:return"Suspense";case mt:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case P:return(t.displayName||"Context")+".Provider";case H:return(t._context.displayName||"Context")+".Consumer";case Z:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return n=t.displayName||null,n!==null?n:Dt(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return Dt(t(n))}catch{}}return null}var Ot=Array.isArray,tt=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At={pending:!1,data:null,method:null,action:null},Ft=[],L=-1;function lt(t){return{current:t}}function yt(t){0>L||(t.current=Ft[L],Ft[L]=null,L--)}function ft(t,n){L++,Ft[L]=t.current,t.current=n}var Rt=lt(null),Ct=lt(null),J=lt(null),_t=lt(null);function Et(t,n){switch(ft(J,n),ft(Ct,t),ft(Rt,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Dy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Dy(n),t=Iy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}yt(Rt),ft(Rt,t)}function kt(){yt(Rt),yt(Ct),yt(J)}function Wt(t){t.memoizedState!==null&&ft(_t,t);var n=Rt.current,s=Iy(n,t.type);n!==s&&(ft(Ct,t),ft(Rt,s))}function qt(t){Ct.current===t&&(yt(Rt),yt(Ct)),_t.current===t&&(yt(_t),co._currentValue=At)}var rt=Object.prototype.hasOwnProperty,Mt=r.unstable_scheduleCallback,jt=r.unstable_cancelCallback,It=r.unstable_shouldYield,Lt=r.unstable_requestPaint,Qt=r.unstable_now,_e=r.unstable_getCurrentPriorityLevel,be=r.unstable_ImmediatePriority,We=r.unstable_UserBlockingPriority,wn=r.unstable_NormalPriority,_i=r.unstable_LowPriority,tr=r.unstable_IdlePriority,Zn=r.log,er=r.unstable_setDisableYieldValue,Ee=null,ce=null;function Rn(t){if(typeof Zn=="function"&&er(t),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(Ee,t)}catch{}}var un=Math.clz32?Math.clz32:ir,nr=Math.log,yl=Math.LN2;function ir(t){return t>>>=0,t===0?32:31-(nr(t)/yl|0)|0}var Jn=256,Cn=4194304;function Ye(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function rr(t,n,s){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=Ye(l):(b&=T,b!==0?h=Ye(b):s||(s=T&~t,s!==0&&(h=Ye(s))))):(T=l&~d,T!==0?h=Ye(T):b!==0?h=Ye(b):s||(s=l&~t,s!==0&&(h=Ye(s)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,s=n&-n,d>=s||d===32&&(s&4194048)!==0)?n:h}function ti(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Vr(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(){var t=Jn;return Jn<<=1,(Jn&4194048)===0&&(Jn=256),t}function xs(){var t=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),t}function ei(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function cn(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function jr(t,n,s,l,h,d){var b=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,V=t.expirationTimes,$=t.hiddenUpdates;for(s=b&~s;0<s;){var it=31-un(s),ut=1<<it;T[it]=0,V[it]=-1;var K=$[it];if(K!==null)for($[it]=null,it=0;it<K.length;it++){var X=K[it];X!==null&&(X.lane&=-536870913)}s&=~ut}l!==0&&ni(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(b&~n))}function ni(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-un(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function bi(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-un(s),h=1<<l;h&n|t[l]&n&&(t[l]|=n),s&=~h}}function Pn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ei(){var t=pt.p;return t!==0?t:(t=window.event,t===void 0?32:Yy(t.type))}function ca(t,n){var s=pt.p;try{return pt.p=t,n()}finally{pt.p=s}}var Te=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Te,ke="__reactProps$"+Te,Dn="__reactContainer$"+Te,kr="__reactEvents$"+Te,vl="__reactListeners$"+Te,Ni="__reactHandles$"+Te,ha="__reactResources$"+Te,Vi="__reactMarker$"+Te;function Si(t){delete t[Ue],delete t[ke],delete t[kr],delete t[vl],delete t[Ni]}function ii(t){var n=t[Ue];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Dn]||s[Ue]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Oy(t);t!==null;){if(s=t[Ue])return s;t=Oy(t)}return n}t=s,s=t.parentNode}return null}function ri(t){if(t=t[Ue]||t[Dn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function si(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function hn(t){var n=t[ha];return n||(n=t[ha]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ne(t){t[Vi]=!0}var As=new Set,Lr={};function Bn(t,n){Ti(t,n),Ti(t+"Capture",n)}function Ti(t,n){for(Lr[t]=n,t=0;t<n.length;t++)As.add(n[t])}var ws=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rs={},Oi={};function Cs(t){return rt.call(Oi,t)?!0:rt.call(Rs,t)?!1:ws.test(t)?Oi[t]=!0:(Rs[t]=!0,!1)}function I(t,n,s){if(Cs(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function Y(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function nt(t,n,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+l)}}var ot,dt;function gt(t){if(ot===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);ot=n&&n[1]||"",dt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+t+dt}var bt=!1;function le(t,n){if(!t||bt)return"";bt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(X){var K=X}Reflect.construct(t,[],ut)}else{try{ut.call()}catch(X){K=X}t.call(ut.prototype)}}else{try{throw Error()}catch(X){K=X}(ut=t())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),b=d[0],T=d[1];if(b&&T){var V=b.split(`
`),$=T.split(`
`);for(h=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(l===V.length||h===$.length)for(l=V.length-1,h=$.length-1;1<=l&&0<=h&&V[l]!==$[h];)h--;for(;1<=l&&0<=h;l--,h--)if(V[l]!==$[h]){if(l!==1||h!==1)do if(l--,h--,0>h||V[l]!==$[h]){var it=`
`+V[l].replace(" at new "," at ");return t.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",t.displayName)),it}while(1<=l&&0<=h);break}}}finally{bt=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?gt(s):""}function xe(t){switch(t.tag){case 26:case 27:case 5:return gt(t.type);case 16:return gt("Lazy");case 13:return gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return le(t.type,!1);case 11:return le(t.type.render,!1);case 1:return le(t.type,!0);case 31:return gt("Activity");default:return""}}function Re(t){try{var n="";do n+=xe(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Ae(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ji(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function zr(t){var n=ji(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,d=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,d.call(this,b)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function qn(t){t._valueTracker||(t._valueTracker=zr(t))}function _l(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=ji(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function Ds(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hh=/[\n"\\]/g;function He(t){return t.replace(hh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Hn(t,n,s,l,h,d,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),n!=null?b==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ae(n)):t.value!==""+Ae(n)&&(t.value=""+Ae(n)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),n!=null?Ur(t,b,Ae(n)):s!=null?Ur(t,b,Ae(s)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ae(T):t.removeAttribute("name")}function Is(t,n,s,l,h,d,b,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;s=s!=null?""+Ae(s):"",n=n!=null?""+Ae(n):s,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Ur(t,n,s){n==="number"&&Ds(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function ar(t,n,s,l){if(t=t.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=n.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Ae(s),n=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function pe(t,n,s){if(n!=null&&(n=""+Ae(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+Ae(s):""}function Ms(t,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(Ot(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=Ae(n),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function ai(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Ns=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(t,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,s):typeof s!="number"||s===0||Ns.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function bl(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&s[h]!==l&&Ko(t,h,l)}else for(var d in n)n.hasOwnProperty(d)&&Ko(t,d,n[d])}function El(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fa(t){return dh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var lr=null;function li(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var or=null,ur=null;function Sl(t){var n=ri(t);if(n&&(t=n.stateNode)){var s=t[ke]||null;t:switch(t=n.stateNode,n.type){case"input":if(Hn(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+He(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var h=l[ke]||null;if(!h)throw Error(a(90));Hn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===t.form&&_l(l)}break t;case"textarea":pe(t,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&ar(t,!!s.multiple,n,!1)}}}var ki=!1;function Xo(t,n,s){if(ki)return t(n,s);ki=!0;try{var l=t(n);return l}finally{if(ki=!1,(or!==null||ur!==null)&&(Gu(),or&&(n=or,t=ur,ur=or=null,Sl(n),t)))for(n=0;n<t.length;n++)Sl(t[n])}}function Vs(t,n){var s=t.stateNode;if(s===null)return null;var l=s[ke]||null;if(l===null)return null;s=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oi=!1;if(xi)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{oi=!1}var Li=null,Pr=null,cr=null;function Tl(){if(cr)return cr;var t,n=Pr,s=n.length,l,h="value"in Li?Li.value:Li.textContent,d=h.length;for(t=0;t<s&&n[t]===h[t];t++);var b=s-t;for(l=1;l<=b&&n[s-l]===h[d-l];l++);return cr=h.slice(t,1<l?1-l:void 0)}function zi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ui(){return!0}function xl(){return!1}function nn(t){function n(s,l,h,d,b){this._reactName=s,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ui:xl,this.isPropagationStopped=xl,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),n}var he={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=nn(he),js=E({},he,{view:0,detail:0}),Zo=nn(js),ma,pa,Pi,ks=E({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pi&&(Pi&&t.type==="mousemove"?(ma=t.screenX-Pi.screenX,pa=t.screenY-Pi.screenY):pa=ma=0,Pi=t),ma)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),ui=nn(ks),Jo=E({},ks,{dataTransfer:0}),mh=nn(Jo),Ls=E({},js,{relatedTarget:0}),ga=nn(Ls),Al=E({},he,{animationName:0,elapsedTime:0,pseudoElement:0}),ya=nn(Al),tu=E({},he,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),va=nn(tu),ph=E({},he,{data:0}),wl=nn(ph),zs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rl(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=nu[t])?!!n[t]:!1}function Us(){return Rl}var iu=E({},js,{key:function(t){if(t.key){var n=zs[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=zi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(t){return t.type==="keypress"?zi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_a=nn(iu),ru=E({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cl=nn(ru),hr=E({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),su=nn(hr),au=E({},he,{propertyName:0,elapsedTime:0,pseudoElement:0}),lu=nn(au),ou=E({},ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ba=nn(ou),In=E({},he,{newState:0,oldState:0}),uu=nn(In),cu=[9,13,27,32],Bi=xi&&"CompositionEvent"in window,u=null;xi&&"documentMode"in document&&(u=document.documentMode);var g=xi&&"TextEvent"in window&&!u,_=xi&&(!Bi||u&&8<u&&11>=u),x=" ",G=!1;function et(t,n){switch(t){case"keyup":return cu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ne=!1;function Ke(t,n){switch(t){case"compositionend":return vt(n);case"keypress":return n.which!==32?null:(G=!0,x);case"textInput":return t=n.data,t===x&&G?null:t;default:return null}}function ie(t,n){if(ne)return t==="compositionend"||!Bi&&et(t,n)?(t=Tl(),cr=Pr=Li=null,ne=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _&&n.locale!=="ko"?null:n.data;default:return null}}var rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xe(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!rn[t.type]:n==="textarea"}function fr(t,n,s,l){or?ur?ur.push(l):ur=[l]:or=l,n=Ku(n,"onChange"),0<n.length&&(s=new da("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var fn=null,qi=null;function Dl(t){xy(t,0)}function hu(t){var n=si(t);if(_l(n))return t}function Fm(t,n){if(t==="change")return n}var Qm=!1;if(xi){var gh;if(xi){var yh="oninput"in document;if(!yh){var $m=document.createElement("div");$m.setAttribute("oninput","return;"),yh=typeof $m.oninput=="function"}gh=yh}else gh=!1;Qm=gh&&(!document.documentMode||9<document.documentMode)}function Wm(){fn&&(fn.detachEvent("onpropertychange",Ym),qi=fn=null)}function Ym(t){if(t.propertyName==="value"&&hu(qi)){var n=[];fr(n,qi,t,li(t)),Xo(Dl,n)}}function k1(t,n,s){t==="focusin"?(Wm(),fn=n,qi=s,fn.attachEvent("onpropertychange",Ym)):t==="focusout"&&Wm()}function L1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(qi)}function z1(t,n){if(t==="click")return hu(n)}function U1(t,n){if(t==="input"||t==="change")return hu(n)}function P1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Gn=typeof Object.is=="function"?Object.is:P1;function Il(t,n){if(Gn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var h=s[l];if(!rt.call(n,h)||!Gn(t[h],n[h]))return!1}return!0}function Km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xm(t,n){var s=Km(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Km(s)}}function Zm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Zm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Jm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ds(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Ds(t.document)}return n}function vh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var B1=xi&&"documentMode"in document&&11>=document.documentMode,Ea=null,_h=null,Ml=null,bh=!1;function tp(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;bh||Ea==null||Ea!==Ds(l)||(l=Ea,"selectionStart"in l&&vh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ml&&Il(Ml,l)||(Ml=l,l=Ku(_h,"onSelect"),0<l.length&&(n=new da("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=Ea)))}function Ps(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var Sa={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},Eh={},ep={};xi&&(ep=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Bs(t){if(Eh[t])return Eh[t];if(!Sa[t])return t;var n=Sa[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in ep)return Eh[t]=n[s];return t}var np=Bs("animationend"),ip=Bs("animationiteration"),rp=Bs("animationstart"),q1=Bs("transitionrun"),H1=Bs("transitionstart"),G1=Bs("transitioncancel"),sp=Bs("transitionend"),ap=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function Ai(t,n){ap.set(t,n),Bn(n,[t])}var lp=new WeakMap;function ci(t,n){if(typeof t=="object"&&t!==null){var s=lp.get(t);return s!==void 0?s:(n={value:t,source:n,stack:Re(n)},lp.set(t,n),n)}return{value:t,source:n,stack:Re(n)}}var hi=[],Ta=0,Th=0;function fu(){for(var t=Ta,n=Th=Ta=0;n<t;){var s=hi[n];hi[n++]=null;var l=hi[n];hi[n++]=null;var h=hi[n];hi[n++]=null;var d=hi[n];if(hi[n++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}d!==0&&op(s,h,d)}}function du(t,n,s,l){hi[Ta++]=t,hi[Ta++]=n,hi[Ta++]=s,hi[Ta++]=l,Th|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xh(t,n,s,l){return du(t,n,s,l),mu(t)}function xa(t,n){return du(t,null,null,n),mu(t)}function op(t,n,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var h=!1,d=t.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-un(s),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=s|536870912),d):null}function mu(t){if(50<no)throw no=0,Mf=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Aa={};function F1(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,n,s,l){return new F1(t,n,s,l)}function Ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dr(t,n){var s=t.alternate;return s===null?(s=Fn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function up(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function pu(t,n,s,l,h,d){var b=0;if(l=t,typeof t=="function")Ah(t)&&(b=1);else if(typeof t=="string")b=$b(t,s,Rt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case w:return t=Fn(31,s,n,h),t.elementType=w,t.lanes=d,t;case j:return qs(s.children,h,d,n);case W:b=8,h|=24;break;case B:return t=Fn(12,s,n,h|2),t.elementType=B,t.lanes=d,t;case st:return t=Fn(13,s,n,h),t.elementType=st,t.lanes=d,t;case mt:return t=Fn(19,s,n,h),t.elementType=mt,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:case P:b=10;break t;case H:b=9;break t;case Z:b=11;break t;case M:b=14;break t;case R:b=16,l=null;break t}b=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=Fn(b,s,n,h),n.elementType=t,n.type=l,n.lanes=d,n}function qs(t,n,s,l){return t=Fn(7,t,l,n),t.lanes=s,t}function wh(t,n,s){return t=Fn(6,t,null,n),t.lanes=s,t}function Rh(t,n,s){return n=Fn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var wa=[],Ra=0,gu=null,yu=0,fi=[],di=0,Hs=null,mr=1,pr="";function Gs(t,n){wa[Ra++]=yu,wa[Ra++]=gu,gu=t,yu=n}function cp(t,n,s){fi[di++]=mr,fi[di++]=pr,fi[di++]=Hs,Hs=t;var l=mr;t=pr;var h=32-un(l)-1;l&=~(1<<h),s+=1;var d=32-un(n)+h;if(30<d){var b=h-h%5;d=(l&(1<<b)-1).toString(32),l>>=b,h-=b,mr=1<<32-un(n)+h|s<<h|l,pr=d+t}else mr=1<<d|s<<h|l,pr=t}function Ch(t){t.return!==null&&(Gs(t,1),cp(t,1,0))}function Dh(t){for(;t===gu;)gu=wa[--Ra],wa[Ra]=null,yu=wa[--Ra],wa[Ra]=null;for(;t===Hs;)Hs=fi[--di],fi[di]=null,pr=fi[--di],fi[di]=null,mr=fi[--di],fi[di]=null}var Mn=null,Le=null,ue=!1,Fs=null,Hi=!1,Ih=Error(a(519));function Qs(t){var n=Error(a(418,""));throw Ol(ci(n,t)),Ih}function hp(t){var n=t.stateNode,s=t.type,l=t.memoizedProps;switch(n[Ue]=t,n[ke]=l,s){case"dialog":te("cancel",n),te("close",n);break;case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(s=0;s<ro.length;s++)te(ro[s],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"details":te("toggle",n);break;case"input":te("invalid",n),Is(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),qn(n);break;case"select":te("invalid",n);break;case"textarea":te("invalid",n),Ms(n,l.value,l.defaultValue,l.children),qn(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||Cy(n.textContent,s)?(l.popover!=null&&(te("beforetoggle",n),te("toggle",n)),l.onScroll!=null&&te("scroll",n),l.onScrollEnd!=null&&te("scrollend",n),l.onClick!=null&&(n.onclick=Xu),n=!0):n=!1,n||Qs(t)}function fp(t){for(Mn=t.return;Mn;)switch(Mn.tag){case 5:case 13:Hi=!1;return;case 27:case 3:Hi=!0;return;default:Mn=Mn.return}}function Nl(t){if(t!==Mn)return!1;if(!ue)return fp(t),ue=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||$f(t.type,t.memoizedProps)),s=!s),s&&Le&&Qs(t),fp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){Le=Ri(t.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}Le=null}}else n===27?(n=Le,ns(t.type)?(t=Xf,Xf=null,Le=t):Le=n):Le=Mn?Ri(t.stateNode.nextSibling):null;return!0}function Vl(){Le=Mn=null,ue=!1}function dp(){var t=Fs;return t!==null&&(kn===null?kn=t:kn.push.apply(kn,t),Fs=null),t}function Ol(t){Fs===null?Fs=[t]:Fs.push(t)}var Mh=lt(null),$s=null,gr=null;function Br(t,n,s){ft(Mh,n._currentValue),n._currentValue=s}function yr(t){t._currentValue=Mh.current,yt(Mh)}function Nh(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function Vh(t,n,s,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var b=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var V=0;V<n.length;V++)if(T.context===n[V]){d.lanes|=s,T=d.alternate,T!==null&&(T.lanes|=s),Nh(d.return,s,t),l||(b=null);break t}d=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(a(341));b.lanes|=s,d=b.alternate,d!==null&&(d.lanes|=s),Nh(b,s,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function jl(t,n,s,l){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var T=h.type;Gn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===_t.current){if(b=h.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(co):t=[co])}h=h.return}t!==null&&Vh(n,t,s,l),n.flags|=262144}function vu(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ws(t){$s=t,gr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bn(t){return mp($s,t)}function _u(t,n){return $s===null&&Ws(t),mp(t,n)}function mp(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},gr===null){if(t===null)throw Error(a(308));gr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else gr=gr.next=n;return s}var Q1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},$1=r.unstable_scheduleCallback,W1=r.unstable_NormalPriority,Ze={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oh(){return{controller:new Q1,data:new Map,refCount:0}}function kl(t){t.refCount--,t.refCount===0&&$1(W1,function(){t.controller.abort()})}var Ll=null,jh=0,Ca=0,Da=null;function Y1(t,n){if(Ll===null){var s=Ll=[];jh=0,Ca=zf(),Da={status:"pending",value:void 0,then:function(l){s.push(l)}}}return jh++,n.then(pp,pp),n}function pp(){if(--jh===0&&Ll!==null){Da!==null&&(Da.status="fulfilled");var t=Ll;Ll=null,Ca=0,Da=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function K1(t,n){var s=[],l={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<s.length;h++)(0,s[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),l}var gp=tt.S;tt.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Y1(t,n),gp!==null&&gp(t,n)};var Ys=lt(null);function kh(){var t=Ys.current;return t!==null?t:we.pooledCache}function bu(t,n){n===null?ft(Ys,Ys.current):ft(Ys,n.pool)}function yp(){var t=kh();return t===null?null:{parent:Ze._currentValue,pool:t}}var zl=Error(a(460)),vp=Error(a(474)),Eu=Error(a(542)),Lh={then:function(){}};function _p(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Su(){}function bp(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Su,Su),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t;default:if(typeof n.status=="string")n.then(Su,Su);else{if(t=we,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t}throw Ul=n,zl}}var Ul=null;function Ep(){if(Ul===null)throw Error(a(459));var t=Ul;return Ul=null,t}function Sp(t){if(t===zl||t===Eu)throw Error(a(483))}var qr=!1;function zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(de&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=mu(t),op(t,null,s),n}return du(t,l,n,s),mu(t)}function Pl(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,bi(t,s)}}function Ph(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var h=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?h=d=b:d=d.next=b,s=s.next}while(s!==null);d===null?h=d=n:d=d.next=n}else h=d=n;s={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var Bh=!1;function Bl(){if(Bh){var t=Da;if(t!==null)throw t}}function ql(t,n,s,l){Bh=!1;var h=t.updateQueue;qr=!1;var d=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var V=T,$=V.next;V.next=null,b===null?d=$:b.next=$,b=V;var it=t.alternate;it!==null&&(it=it.updateQueue,T=it.lastBaseUpdate,T!==b&&(T===null?it.firstBaseUpdate=$:T.next=$,it.lastBaseUpdate=V))}if(d!==null){var ut=h.baseState;b=0,it=$=V=null,T=d;do{var K=T.lane&-536870913,X=K!==T.lane;if(X?(re&K)===K:(l&K)===K){K!==0&&K===Ca&&(Bh=!0),it!==null&&(it=it.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Pt=t,zt=T;K=n;var ve=s;switch(zt.tag){case 1:if(Pt=zt.payload,typeof Pt=="function"){ut=Pt.call(ve,ut,K);break t}ut=Pt;break t;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=zt.payload,K=typeof Pt=="function"?Pt.call(ve,ut,K):Pt,K==null)break t;ut=E({},ut,K);break t;case 2:qr=!0}}K=T.callback,K!==null&&(t.flags|=64,X&&(t.flags|=8192),X=h.callbacks,X===null?h.callbacks=[K]:X.push(K))}else X={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},it===null?($=it=X,V=ut):it=it.next=X,b|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;X=T,T=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);it===null&&(V=ut),h.baseState=V,h.firstBaseUpdate=$,h.lastBaseUpdate=it,d===null&&(h.shared.lanes=0),Zr|=b,t.lanes=b,t.memoizedState=ut}}function Tp(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function xp(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Tp(s[t],n)}var Ia=lt(null),Tu=lt(0);function Ap(t,n){t=xr,ft(Tu,t),ft(Ia,n),xr=t|n.baseLanes}function qh(){ft(Tu,xr),ft(Ia,Ia.current)}function Hh(){xr=Tu.current,yt(Ia),yt(Tu)}var Fr=0,Kt=null,ge=null,Ge=null,xu=!1,Ma=!1,Ks=!1,Au=0,Hl=0,Na=null,X1=0;function Pe(){throw Error(a(321))}function Gh(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Gn(t[s],n[s]))return!1;return!0}function Fh(t,n,s,l,h,d){return Fr=d,Kt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,tt.H=t===null||t.memoizedState===null?og:ug,Ks=!1,d=s(l,h),Ks=!1,Ma&&(d=Rp(n,s,l,h)),wp(t),d}function wp(t){tt.H=Mu;var n=ge!==null&&ge.next!==null;if(Fr=0,Ge=ge=Kt=null,xu=!1,Hl=0,Na=null,n)throw Error(a(300));t===null||sn||(t=t.dependencies,t!==null&&vu(t)&&(sn=!0))}function Rp(t,n,s,l){Kt=t;var h=0;do{if(Ma&&(Na=null),Hl=0,Ma=!1,25<=h)throw Error(a(301));if(h+=1,Ge=ge=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}tt.H=rb,d=n(s,l)}while(Ma);return d}function Z1(){var t=tt.H,n=t.useState()[0];return n=typeof n.then=="function"?Gl(n):n,t=t.useState()[0],(ge!==null?ge.memoizedState:null)!==t&&(Kt.flags|=1024),n}function Qh(){var t=Au!==0;return Au=0,t}function $h(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Wh(t){if(xu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}xu=!1}Fr=0,Ge=ge=Kt=null,Ma=!1,Hl=Au=0,Na=null}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Kt.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Fe(){if(ge===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=ge.next;var n=Ge===null?Kt.memoizedState:Ge.next;if(n!==null)Ge=n,ge=t;else{if(t===null)throw Kt.alternate===null?Error(a(467)):Error(a(310));ge=t,t={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},Ge===null?Kt.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(t){var n=Hl;return Hl+=1,Na===null&&(Na=[]),t=bp(Na,t,n),n=Kt,(Ge===null?n.memoizedState:Ge.next)===null&&(n=n.alternate,tt.H=n===null||n.memoizedState===null?og:ug),t}function wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Gl(t);if(t.$$typeof===P)return bn(t)}throw Error(a(438,String(t)))}function Kh(t){var n=null,s=Kt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=Kt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Yh(),Kt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),l=0;l<t;l++)s[l]=N;return n.index++,s}function vr(t,n){return typeof n=="function"?n(t):n}function Ru(t){var n=Fe();return Xh(n,ge,t)}function Xh(t,n,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var b=h.next;h.next=d.next,d.next=b}n.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var T=b=null,V=null,$=n,it=!1;do{var ut=$.lane&-536870913;if(ut!==$.lane?(re&ut)===ut:(Fr&ut)===ut){var K=$.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ut===Ca&&(it=!0);else if((Fr&K)===K){$=$.next,K===Ca&&(it=!0);continue}else ut={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(T=V=ut,b=d):V=V.next=ut,Kt.lanes|=K,Zr|=K;ut=$.action,Ks&&s(d,ut),d=$.hasEagerState?$.eagerState:s(d,ut)}else K={lane:ut,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(T=V=K,b=d):V=V.next=K,Kt.lanes|=ut,Zr|=ut;$=$.next}while($!==null&&$!==n);if(V===null?b=d:V.next=T,!Gn(d,t.memoizedState)&&(sn=!0,it&&(s=Da,s!==null)))throw s;t.memoizedState=d,t.baseState=b,t.baseQueue=V,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Zh(t){var n=Fe(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,h=s.pending,d=n.memoizedState;if(h!==null){s.pending=null;var b=h=h.next;do d=t(d,b.action),b=b.next;while(b!==h);Gn(d,n.memoizedState)||(sn=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,l]}function Cp(t,n,s){var l=Kt,h=Fe(),d=ue;if(d){if(s===void 0)throw Error(a(407));s=s()}else s=n();var b=!Gn((ge||h).memoizedState,s);b&&(h.memoizedState=s,sn=!0),h=h.queue;var T=Mp.bind(null,l,h,t);if(Fl(2048,8,T,[t]),h.getSnapshot!==n||b||Ge!==null&&Ge.memoizedState.tag&1){if(l.flags|=2048,Va(9,Cu(),Ip.bind(null,l,h,s,n),null),we===null)throw Error(a(349));d||(Fr&124)!==0||Dp(l,n,s)}return s}function Dp(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Kt.updateQueue,n===null?(n=Yh(),Kt.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function Ip(t,n,s,l){n.value=s,n.getSnapshot=l,Np(n)&&Vp(t)}function Mp(t,n,s){return s(function(){Np(n)&&Vp(t)})}function Np(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!Gn(t,s)}catch{return!0}}function Vp(t){var n=xa(t,2);n!==null&&Kn(n,t,2)}function Jh(t){var n=On();if(typeof t=="function"){var s=t;if(t=s(),Ks){Rn(!0);try{s()}finally{Rn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:t},n}function Op(t,n,s,l){return t.baseState=s,Xh(t,ge,typeof l=="function"?l:vr)}function J1(t,n,s,l,h){if(Iu(t))throw Error(a(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};tt.T!==null?s(!0):d.isTransition=!1,l(d),s=n.pending,s===null?(d.next=n.pending=d,jp(n,d)):(d.next=s.next,n.pending=s.next=d)}}function jp(t,n){var s=n.action,l=n.payload,h=t.state;if(n.isTransition){var d=tt.T,b={};tt.T=b;try{var T=s(h,l),V=tt.S;V!==null&&V(b,T),kp(t,n,T)}catch($){tf(t,n,$)}finally{tt.T=d}}else try{d=s(h,l),kp(t,n,d)}catch($){tf(t,n,$)}}function kp(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Lp(t,n,l)},function(l){return tf(t,n,l)}):Lp(t,n,s)}function Lp(t,n,s){n.status="fulfilled",n.value=s,zp(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,jp(t,s)))}function tf(t,n,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,zp(n),n=n.next;while(n!==l)}t.action=null}function zp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Up(t,n){return n}function Pp(t,n){if(ue){var s=we.formState;if(s!==null){t:{var l=Kt;if(ue){if(Le){e:{for(var h=Le,d=Hi;h.nodeType!==8;){if(!d){h=null;break e}if(h=Ri(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Le=Ri(h.nextSibling),l=h.data==="F!";break t}}Qs(l)}l=!1}l&&(n=s[0])}}return s=On(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:n},s.queue=l,s=sg.bind(null,Kt,l),l.dispatch=s,l=Jh(!1),d=af.bind(null,Kt,!1,l.queue),l=On(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,s=J1.bind(null,Kt,h,d,s),h.dispatch=s,l.memoizedState=t,[n,s,!1]}function Bp(t){var n=Fe();return qp(n,ge,t)}function qp(t,n,s){if(n=Xh(t,n,Up)[0],t=Ru(vr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Gl(n)}catch(b){throw b===zl?Eu:b}else l=n;n=Fe();var h=n.queue,d=h.dispatch;return s!==n.memoizedState&&(Kt.flags|=2048,Va(9,Cu(),tb.bind(null,h,s),null)),[l,d,t]}function tb(t,n){t.action=n}function Hp(t){var n=Fe(),s=ge;if(s!==null)return qp(n,s,t);Fe(),n=n.memoizedState,s=Fe();var l=s.queue.dispatch;return s.memoizedState=t,[n,l,!1]}function Va(t,n,s,l){return t={tag:t,create:s,deps:l,inst:n,next:null},n=Kt.updateQueue,n===null&&(n=Yh(),Kt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t),t}function Cu(){return{destroy:void 0,resource:void 0}}function Gp(){return Fe().memoizedState}function Du(t,n,s,l){var h=On();l=l===void 0?null:l,Kt.flags|=t,h.memoizedState=Va(1|n,Cu(),s,l)}function Fl(t,n,s,l){var h=Fe();l=l===void 0?null:l;var d=h.memoizedState.inst;ge!==null&&l!==null&&Gh(l,ge.memoizedState.deps)?h.memoizedState=Va(n,d,s,l):(Kt.flags|=t,h.memoizedState=Va(1|n,d,s,l))}function Fp(t,n){Du(8390656,8,t,n)}function Qp(t,n){Fl(2048,8,t,n)}function $p(t,n){return Fl(4,2,t,n)}function Wp(t,n){return Fl(4,4,t,n)}function Yp(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Kp(t,n,s){s=s!=null?s.concat([t]):null,Fl(4,4,Yp.bind(null,n,t),s)}function ef(){}function Xp(t,n){var s=Fe();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&Gh(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function Zp(t,n){var s=Fe();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&Gh(n,l[1]))return l[0];if(l=t(),Ks){Rn(!0);try{t()}finally{Rn(!1)}}return s.memoizedState=[l,n],l}function nf(t,n,s){return s===void 0||(Fr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=ey(),Kt.lanes|=t,Zr|=t,s)}function Jp(t,n,s,l){return Gn(s,n)?s:Ia.current!==null?(t=nf(t,s,l),Gn(t,n)||(sn=!0),t):(Fr&42)===0?(sn=!0,t.memoizedState=s):(t=ey(),Kt.lanes|=t,Zr|=t,n)}function tg(t,n,s,l,h){var d=pt.p;pt.p=d!==0&&8>d?d:8;var b=tt.T,T={};tt.T=T,af(t,!1,n,s);try{var V=h(),$=tt.S;if($!==null&&$(T,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var it=K1(V,l);Ql(t,n,it,Yn(t))}else Ql(t,n,l,Yn(t))}catch(ut){Ql(t,n,{then:function(){},status:"rejected",reason:ut},Yn())}finally{pt.p=d,tt.T=b}}function eb(){}function rf(t,n,s,l){if(t.tag!==5)throw Error(a(476));var h=eg(t).queue;tg(t,h,n,At,s===null?eb:function(){return ng(t),s(l)})}function eg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:At,baseState:At,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:At},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function ng(t){var n=eg(t).next.queue;Ql(t,n,{},Yn())}function sf(){return bn(co)}function ig(){return Fe().memoizedState}function rg(){return Fe().memoizedState}function nb(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=Yn();t=Hr(s);var l=Gr(n,t,s);l!==null&&(Kn(l,n,s),Pl(l,n,s)),n={cache:Oh()},t.payload=n;return}n=n.return}}function ib(t,n,s){var l=Yn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Iu(t)?ag(n,s):(s=xh(t,n,s,l),s!==null&&(Kn(s,t,l),lg(s,n,l)))}function sg(t,n,s){var l=Yn();Ql(t,n,s,l)}function Ql(t,n,s,l){var h={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Iu(t))ag(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var b=n.lastRenderedState,T=d(b,s);if(h.hasEagerState=!0,h.eagerState=T,Gn(T,b))return du(t,n,h,0),we===null&&fu(),!1}catch{}finally{}if(s=xh(t,n,h,l),s!==null)return Kn(s,t,l),lg(s,n,l),!0}return!1}function af(t,n,s,l){if(l={lane:2,revertLane:zf(),action:l,hasEagerState:!1,eagerState:null,next:null},Iu(t)){if(n)throw Error(a(479))}else n=xh(t,s,l,2),n!==null&&Kn(n,t,2)}function Iu(t){var n=t.alternate;return t===Kt||n!==null&&n===Kt}function ag(t,n){Ma=xu=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function lg(t,n,s){if((s&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,bi(t,s)}}var Mu={readContext:bn,use:wu,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useInsertionEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useSyncExternalStore:Pe,useId:Pe,useHostTransitionStatus:Pe,useFormState:Pe,useActionState:Pe,useOptimistic:Pe,useMemoCache:Pe,useCacheRefresh:Pe},og={readContext:bn,use:wu,useCallback:function(t,n){return On().memoizedState=[t,n===void 0?null:n],t},useContext:bn,useEffect:Fp,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,Du(4194308,4,Yp.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Du(4194308,4,t,n)},useInsertionEffect:function(t,n){Du(4,2,t,n)},useMemo:function(t,n){var s=On();n=n===void 0?null:n;var l=t();if(Ks){Rn(!0);try{t()}finally{Rn(!1)}}return s.memoizedState=[l,n],l},useReducer:function(t,n,s){var l=On();if(s!==void 0){var h=s(n);if(Ks){Rn(!0);try{s(n)}finally{Rn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=ib.bind(null,Kt,t),[l.memoizedState,t]},useRef:function(t){var n=On();return t={current:t},n.memoizedState=t},useState:function(t){t=Jh(t);var n=t.queue,s=sg.bind(null,Kt,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:ef,useDeferredValue:function(t,n){var s=On();return nf(s,t,n)},useTransition:function(){var t=Jh(!1);return t=tg.bind(null,Kt,t.queue,!0,!1),On().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var l=Kt,h=On();if(ue){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),we===null)throw Error(a(349));(re&124)!==0||Dp(l,n,s)}h.memoizedState=s;var d={value:s,getSnapshot:n};return h.queue=d,Fp(Mp.bind(null,l,d,t),[t]),l.flags|=2048,Va(9,Cu(),Ip.bind(null,l,d,s,n),null),s},useId:function(){var t=On(),n=we.identifierPrefix;if(ue){var s=pr,l=mr;s=(l&~(1<<32-un(l)-1)).toString(32)+s,n=""+n+"R"+s,s=Au++,0<s&&(n+="H"+s.toString(32)),n+=""}else s=X1++,n=""+n+"r"+s.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:sf,useFormState:Pp,useActionState:Pp,useOptimistic:function(t){var n=On();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=af.bind(null,Kt,!0,s),s.dispatch=n,[t,n]},useMemoCache:Kh,useCacheRefresh:function(){return On().memoizedState=nb.bind(null,Kt)}},ug={readContext:bn,use:wu,useCallback:Xp,useContext:bn,useEffect:Qp,useImperativeHandle:Kp,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:Zp,useReducer:Ru,useRef:Gp,useState:function(){return Ru(vr)},useDebugValue:ef,useDeferredValue:function(t,n){var s=Fe();return Jp(s,ge.memoizedState,t,n)},useTransition:function(){var t=Ru(vr)[0],n=Fe().memoizedState;return[typeof t=="boolean"?t:Gl(t),n]},useSyncExternalStore:Cp,useId:ig,useHostTransitionStatus:sf,useFormState:Bp,useActionState:Bp,useOptimistic:function(t,n){var s=Fe();return Op(s,ge,t,n)},useMemoCache:Kh,useCacheRefresh:rg},rb={readContext:bn,use:wu,useCallback:Xp,useContext:bn,useEffect:Qp,useImperativeHandle:Kp,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:Zp,useReducer:Zh,useRef:Gp,useState:function(){return Zh(vr)},useDebugValue:ef,useDeferredValue:function(t,n){var s=Fe();return ge===null?nf(s,t,n):Jp(s,ge.memoizedState,t,n)},useTransition:function(){var t=Zh(vr)[0],n=Fe().memoizedState;return[typeof t=="boolean"?t:Gl(t),n]},useSyncExternalStore:Cp,useId:ig,useHostTransitionStatus:sf,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,n){var s=Fe();return ge!==null?Op(s,ge,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Kh,useCacheRefresh:rg},Oa=null,$l=0;function Nu(t){var n=$l;return $l+=1,Oa===null&&(Oa=[]),bp(Oa,t,n)}function Wl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Vu(t,n){throw n.$$typeof===S?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function cg(t){var n=t._init;return n(t._payload)}function hg(t){function n(q,U){if(t){var Q=q.deletions;Q===null?(q.deletions=[U],q.flags|=16):Q.push(U)}}function s(q,U){if(!t)return null;for(;U!==null;)n(q,U),U=U.sibling;return null}function l(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function h(q,U){return q=dr(q,U),q.index=0,q.sibling=null,q}function d(q,U,Q){return q.index=Q,t?(Q=q.alternate,Q!==null?(Q=Q.index,Q<U?(q.flags|=67108866,U):Q):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function b(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function T(q,U,Q,at){return U===null||U.tag!==6?(U=wh(Q,q.mode,at),U.return=q,U):(U=h(U,Q),U.return=q,U)}function V(q,U,Q,at){var wt=Q.type;return wt===j?it(q,U,Q.props.children,at,Q.key):U!==null&&(U.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===R&&cg(wt)===U.type)?(U=h(U,Q.props),Wl(U,Q),U.return=q,U):(U=pu(Q.type,Q.key,Q.props,null,q.mode,at),Wl(U,Q),U.return=q,U)}function $(q,U,Q,at){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=Rh(Q,q.mode,at),U.return=q,U):(U=h(U,Q.children||[]),U.return=q,U)}function it(q,U,Q,at,wt){return U===null||U.tag!==7?(U=qs(Q,q.mode,at,wt),U.return=q,U):(U=h(U,Q),U.return=q,U)}function ut(q,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=wh(""+U,q.mode,Q),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return Q=pu(U.type,U.key,U.props,null,q.mode,Q),Wl(Q,U),Q.return=q,Q;case O:return U=Rh(U,q.mode,Q),U.return=q,U;case R:var at=U._init;return U=at(U._payload),ut(q,U,Q)}if(Ot(U)||z(U))return U=qs(U,q.mode,Q,null),U.return=q,U;if(typeof U.then=="function")return ut(q,Nu(U),Q);if(U.$$typeof===P)return ut(q,_u(q,U),Q);Vu(q,U)}return null}function K(q,U,Q,at){var wt=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return wt!==null?null:T(q,U,""+Q,at);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return Q.key===wt?V(q,U,Q,at):null;case O:return Q.key===wt?$(q,U,Q,at):null;case R:return wt=Q._init,Q=wt(Q._payload),K(q,U,Q,at)}if(Ot(Q)||z(Q))return wt!==null?null:it(q,U,Q,at,null);if(typeof Q.then=="function")return K(q,U,Nu(Q),at);if(Q.$$typeof===P)return K(q,U,_u(q,Q),at);Vu(q,Q)}return null}function X(q,U,Q,at,wt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return q=q.get(Q)||null,T(U,q,""+at,wt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case A:return q=q.get(at.key===null?Q:at.key)||null,V(U,q,at,wt);case O:return q=q.get(at.key===null?Q:at.key)||null,$(U,q,at,wt);case R:var Zt=at._init;return at=Zt(at._payload),X(q,U,Q,at,wt)}if(Ot(at)||z(at))return q=q.get(Q)||null,it(U,q,at,wt,null);if(typeof at.then=="function")return X(q,U,Q,Nu(at),wt);if(at.$$typeof===P)return X(q,U,Q,_u(U,at),wt);Vu(U,at)}return null}function Pt(q,U,Q,at){for(var wt=null,Zt=null,Nt=U,Ut=U=0,ln=null;Nt!==null&&Ut<Q.length;Ut++){Nt.index>Ut?(ln=Nt,Nt=null):ln=Nt.sibling;var oe=K(q,Nt,Q[Ut],at);if(oe===null){Nt===null&&(Nt=ln);break}t&&Nt&&oe.alternate===null&&n(q,Nt),U=d(oe,U,Ut),Zt===null?wt=oe:Zt.sibling=oe,Zt=oe,Nt=ln}if(Ut===Q.length)return s(q,Nt),ue&&Gs(q,Ut),wt;if(Nt===null){for(;Ut<Q.length;Ut++)Nt=ut(q,Q[Ut],at),Nt!==null&&(U=d(Nt,U,Ut),Zt===null?wt=Nt:Zt.sibling=Nt,Zt=Nt);return ue&&Gs(q,Ut),wt}for(Nt=l(Nt);Ut<Q.length;Ut++)ln=X(Nt,q,Ut,Q[Ut],at),ln!==null&&(t&&ln.alternate!==null&&Nt.delete(ln.key===null?Ut:ln.key),U=d(ln,U,Ut),Zt===null?wt=ln:Zt.sibling=ln,Zt=ln);return t&&Nt.forEach(function(ls){return n(q,ls)}),ue&&Gs(q,Ut),wt}function zt(q,U,Q,at){if(Q==null)throw Error(a(151));for(var wt=null,Zt=null,Nt=U,Ut=U=0,ln=null,oe=Q.next();Nt!==null&&!oe.done;Ut++,oe=Q.next()){Nt.index>Ut?(ln=Nt,Nt=null):ln=Nt.sibling;var ls=K(q,Nt,oe.value,at);if(ls===null){Nt===null&&(Nt=ln);break}t&&Nt&&ls.alternate===null&&n(q,Nt),U=d(ls,U,Ut),Zt===null?wt=ls:Zt.sibling=ls,Zt=ls,Nt=ln}if(oe.done)return s(q,Nt),ue&&Gs(q,Ut),wt;if(Nt===null){for(;!oe.done;Ut++,oe=Q.next())oe=ut(q,oe.value,at),oe!==null&&(U=d(oe,U,Ut),Zt===null?wt=oe:Zt.sibling=oe,Zt=oe);return ue&&Gs(q,Ut),wt}for(Nt=l(Nt);!oe.done;Ut++,oe=Q.next())oe=X(Nt,q,Ut,oe.value,at),oe!==null&&(t&&oe.alternate!==null&&Nt.delete(oe.key===null?Ut:oe.key),U=d(oe,U,Ut),Zt===null?wt=oe:Zt.sibling=oe,Zt=oe);return t&&Nt.forEach(function(sE){return n(q,sE)}),ue&&Gs(q,Ut),wt}function ve(q,U,Q,at){if(typeof Q=="object"&&Q!==null&&Q.type===j&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:t:{for(var wt=Q.key;U!==null;){if(U.key===wt){if(wt=Q.type,wt===j){if(U.tag===7){s(q,U.sibling),at=h(U,Q.props.children),at.return=q,q=at;break t}}else if(U.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===R&&cg(wt)===U.type){s(q,U.sibling),at=h(U,Q.props),Wl(at,Q),at.return=q,q=at;break t}s(q,U);break}else n(q,U);U=U.sibling}Q.type===j?(at=qs(Q.props.children,q.mode,at,Q.key),at.return=q,q=at):(at=pu(Q.type,Q.key,Q.props,null,q.mode,at),Wl(at,Q),at.return=q,q=at)}return b(q);case O:t:{for(wt=Q.key;U!==null;){if(U.key===wt)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){s(q,U.sibling),at=h(U,Q.children||[]),at.return=q,q=at;break t}else{s(q,U);break}else n(q,U);U=U.sibling}at=Rh(Q,q.mode,at),at.return=q,q=at}return b(q);case R:return wt=Q._init,Q=wt(Q._payload),ve(q,U,Q,at)}if(Ot(Q))return Pt(q,U,Q,at);if(z(Q)){if(wt=z(Q),typeof wt!="function")throw Error(a(150));return Q=wt.call(Q),zt(q,U,Q,at)}if(typeof Q.then=="function")return ve(q,U,Nu(Q),at);if(Q.$$typeof===P)return ve(q,U,_u(q,Q),at);Vu(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(s(q,U.sibling),at=h(U,Q),at.return=q,q=at):(s(q,U),at=wh(Q,q.mode,at),at.return=q,q=at),b(q)):s(q,U)}return function(q,U,Q,at){try{$l=0;var wt=ve(q,U,Q,at);return Oa=null,wt}catch(Nt){if(Nt===zl||Nt===Eu)throw Nt;var Zt=Fn(29,Nt,null,q.mode);return Zt.lanes=at,Zt.return=q,Zt}finally{}}}var ja=hg(!0),fg=hg(!1),mi=lt(null),Gi=null;function Qr(t){var n=t.alternate;ft(Je,Je.current&1),ft(mi,t),Gi===null&&(n===null||Ia.current!==null||n.memoizedState!==null)&&(Gi=t)}function dg(t){if(t.tag===22){if(ft(Je,Je.current),ft(mi,t),Gi===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Gi=t)}}else $r()}function $r(){ft(Je,Je.current),ft(mi,mi.current)}function _r(t){yt(mi),Gi===t&&(Gi=null),yt(Je)}var Je=lt(0);function Ou(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Kf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function lf(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:E({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var of={enqueueSetState:function(t,n,s){t=t._reactInternals;var l=Yn(),h=Hr(l);h.payload=n,s!=null&&(h.callback=s),n=Gr(t,h,l),n!==null&&(Kn(n,t,l),Pl(n,t,l))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=Yn(),h=Hr(l);h.tag=1,h.payload=n,s!=null&&(h.callback=s),n=Gr(t,h,l),n!==null&&(Kn(n,t,l),Pl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=Yn(),l=Hr(s);l.tag=2,n!=null&&(l.callback=n),n=Gr(t,l,s),n!==null&&(Kn(n,t,s),Pl(n,t,s))}};function mg(t,n,s,l,h,d,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,b):n.prototype&&n.prototype.isPureReactComponent?!Il(s,l)||!Il(h,d):!0}function pg(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&of.enqueueReplaceState(n,n.state,null)}function Xs(t,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(t=t.defaultProps){s===n&&(s=E({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}var ju=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function gg(t){ju(t)}function yg(t){console.error(t)}function vg(t){ju(t)}function ku(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function _g(t,n,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uf(t,n,s){return s=Hr(s),s.tag=3,s.payload={element:null},s.callback=function(){ku(t,n)},s}function bg(t){return t=Hr(t),t.tag=3,t}function Eg(t,n,s,l){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){_g(n,s,l)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){_g(n,s,l),typeof h!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function sb(t,n,s,l,h){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&jl(n,s,h,!0),s=mi.current,s!==null){switch(s.tag){case 13:return Gi===null?Vf():s.alternate===null&&ze===0&&(ze=3),s.flags&=-257,s.flags|=65536,s.lanes=h,l===Lh?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),jf(t,l,h)),!1;case 22:return s.flags|=65536,l===Lh?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),jf(t,l,h)),!1}throw Error(a(435,s.tag))}return jf(t,l,h),Vf(),!1}if(ue)return n=mi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Ih&&(t=Error(a(422),{cause:l}),Ol(ci(t,s)))):(l!==Ih&&(n=Error(a(423),{cause:l}),Ol(ci(n,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ci(l,s),h=uf(t.stateNode,l,h),Ph(t,h),ze!==4&&(ze=2)),!1;var d=Error(a(520),{cause:l});if(d=ci(d,s),eo===null?eo=[d]:eo.push(d),ze!==4&&(ze=2),n===null)return!0;l=ci(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=uf(s.stateNode,l,t),Ph(s,t),!1;case 1:if(n=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Jr===null||!Jr.has(d))))return s.flags|=65536,h&=-h,s.lanes|=h,h=bg(h),Eg(h,t,s,l),Ph(s,h),!1}s=s.return}while(s!==null);return!1}var Sg=Error(a(461)),sn=!1;function dn(t,n,s,l){n.child=t===null?fg(n,null,s,l):ja(n,t.child,s,l)}function Tg(t,n,s,l,h){s=s.render;var d=n.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Ws(n),l=Fh(t,n,s,b,d,h),T=Qh(),t!==null&&!sn?($h(t,n,h),br(t,n,h)):(ue&&T&&Ch(n),n.flags|=1,dn(t,n,l,h),n.child)}function xg(t,n,s,l,h){if(t===null){var d=s.type;return typeof d=="function"&&!Ah(d)&&d.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=d,Ag(t,n,d,l,h)):(t=pu(s.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!yf(t,h)){var b=d.memoizedProps;if(s=s.compare,s=s!==null?s:Il,s(b,l)&&t.ref===n.ref)return br(t,n,h)}return n.flags|=1,t=dr(d,l),t.ref=n.ref,t.return=n,n.child=t}function Ag(t,n,s,l,h){if(t!==null){var d=t.memoizedProps;if(Il(d,l)&&t.ref===n.ref)if(sn=!1,n.pendingProps=l=d,yf(t,h))(t.flags&131072)!==0&&(sn=!0);else return n.lanes=t.lanes,br(t,n,h)}return cf(t,n,s,l,h)}function wg(t,n,s){var l=n.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=d!==null?d.baseLanes|s:s,t!==null){for(h=n.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;n.childLanes=d&~l}else n.childLanes=0,n.child=null;return Rg(t,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&bu(n,d!==null?d.cachePool:null),d!==null?Ap(n,d):qh(),dg(n);else return n.lanes=n.childLanes=536870912,Rg(t,n,d!==null?d.baseLanes|s:s,s)}else d!==null?(bu(n,d.cachePool),Ap(n,d),$r(),n.memoizedState=null):(t!==null&&bu(n,null),qh(),$r());return dn(t,n,h,s),n.child}function Rg(t,n,s,l){var h=kh();return h=h===null?null:{parent:Ze._currentValue,pool:h},n.memoizedState={baseLanes:s,cachePool:h},t!==null&&bu(n,null),qh(),dg(n),t!==null&&jl(t,n,l,!0),null}function Lu(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function cf(t,n,s,l,h){return Ws(n),s=Fh(t,n,s,l,void 0,h),l=Qh(),t!==null&&!sn?($h(t,n,h),br(t,n,h)):(ue&&l&&Ch(n),n.flags|=1,dn(t,n,s,h),n.child)}function Cg(t,n,s,l,h,d){return Ws(n),n.updateQueue=null,s=Rp(n,l,s,h),wp(t),l=Qh(),t!==null&&!sn?($h(t,n,d),br(t,n,d)):(ue&&l&&Ch(n),n.flags|=1,dn(t,n,s,d),n.child)}function Dg(t,n,s,l,h){if(Ws(n),n.stateNode===null){var d=Aa,b=s.contextType;typeof b=="object"&&b!==null&&(d=bn(b)),d=new s(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=of,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},zh(n),b=s.contextType,d.context=typeof b=="object"&&b!==null?bn(b):Aa,d.state=n.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(lf(n,s,b,l),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&of.enqueueReplaceState(d,d.state,null),ql(n,l,d,h),Bl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){d=n.stateNode;var T=n.memoizedProps,V=Xs(s,T);d.props=V;var $=d.context,it=s.contextType;b=Aa,typeof it=="object"&&it!==null&&(b=bn(it));var ut=s.getDerivedStateFromProps;it=typeof ut=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,it||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||$!==b)&&pg(n,d,l,b),qr=!1;var K=n.memoizedState;d.state=K,ql(n,l,d,h),Bl(),$=n.memoizedState,T||K!==$||qr?(typeof ut=="function"&&(lf(n,s,ut,l),$=n.memoizedState),(V=qr||mg(n,s,V,l,K,$,b))?(it||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=$),d.props=l,d.state=$,d.context=b,l=V):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,Uh(t,n),b=n.memoizedProps,it=Xs(s,b),d.props=it,ut=n.pendingProps,K=d.context,$=s.contextType,V=Aa,typeof $=="object"&&$!==null&&(V=bn($)),T=s.getDerivedStateFromProps,($=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==ut||K!==V)&&pg(n,d,l,V),qr=!1,K=n.memoizedState,d.state=K,ql(n,l,d,h),Bl();var X=n.memoizedState;b!==ut||K!==X||qr||t!==null&&t.dependencies!==null&&vu(t.dependencies)?(typeof T=="function"&&(lf(n,s,T,l),X=n.memoizedState),(it=qr||mg(n,s,it,l,K,X,V)||t!==null&&t.dependencies!==null&&vu(t.dependencies))?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,X,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,X,V)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=X),d.props=l,d.state=X,d.context=V,l=it):(typeof d.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),l=!1)}return d=l,Lu(t,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&l?(n.child=ja(n,t.child,null,h),n.child=ja(n,null,s,h)):dn(t,n,s,h),n.memoizedState=d.state,t=n.child):t=br(t,n,h),t}function Ig(t,n,s,l){return Vl(),n.flags|=256,dn(t,n,s,l),n.child}var hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(t){return{baseLanes:t,cachePool:yp()}}function df(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=pi),t}function Mg(t,n,s){var l=n.pendingProps,h=!1,d=(n.flags&128)!==0,b;if((b=d)||(b=t!==null&&t.memoizedState===null?!1:(Je.current&2)!==0),b&&(h=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,t===null){if(ue){if(h?Qr(n):$r(),ue){var T=Le,V;if(V=T){t:{for(V=T,T=Hi;V.nodeType!==8;){if(!T){T=null;break t}if(V=Ri(V.nextSibling),V===null){T=null;break t}}T=V}T!==null?(n.memoizedState={dehydrated:T,treeContext:Hs!==null?{id:mr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},V=Fn(18,null,null,0),V.stateNode=T,V.return=n,n.child=V,Mn=n,Le=null,V=!0):V=!1}V||Qs(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Kf(T)?n.lanes=32:n.lanes=536870912,null;_r(n)}return T=l.children,l=l.fallback,h?($r(),h=n.mode,T=zu({mode:"hidden",children:T},h),l=qs(l,h,s,null),T.return=n,l.return=n,T.sibling=l,n.child=T,h=n.child,h.memoizedState=ff(s),h.childLanes=df(t,b,s),n.memoizedState=hf,l):(Qr(n),mf(n,T))}if(V=t.memoizedState,V!==null&&(T=V.dehydrated,T!==null)){if(d)n.flags&256?(Qr(n),n.flags&=-257,n=pf(t,n,s)):n.memoizedState!==null?($r(),n.child=t.child,n.flags|=128,n=null):($r(),h=l.fallback,T=n.mode,l=zu({mode:"visible",children:l.children},T),h=qs(h,T,s,null),h.flags|=2,l.return=n,h.return=n,l.sibling=h,n.child=l,ja(n,t.child,null,s),l=n.child,l.memoizedState=ff(s),l.childLanes=df(t,b,s),n.memoizedState=hf,n=h);else if(Qr(n),Kf(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var $=b.dgst;b=$,l=Error(a(419)),l.stack="",l.digest=b,Ol({value:l,source:null,stack:null}),n=pf(t,n,s)}else if(sn||jl(t,n,s,!1),b=(s&t.childLanes)!==0,sn||b){if(b=we,b!==null&&(l=s&-s,l=(l&42)!==0?1:Pn(l),l=(l&(b.suspendedLanes|s))!==0?0:l,l!==0&&l!==V.retryLane))throw V.retryLane=l,xa(t,l),Kn(b,t,l),Sg;T.data==="$?"||Vf(),n=pf(t,n,s)}else T.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=V.treeContext,Le=Ri(T.nextSibling),Mn=n,ue=!0,Fs=null,Hi=!1,t!==null&&(fi[di++]=mr,fi[di++]=pr,fi[di++]=Hs,mr=t.id,pr=t.overflow,Hs=n),n=mf(n,l.children),n.flags|=4096);return n}return h?($r(),h=l.fallback,T=n.mode,V=t.child,$=V.sibling,l=dr(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,$!==null?h=dr($,h):(h=qs(h,T,s,null),h.flags|=2),h.return=n,l.return=n,l.sibling=h,n.child=l,l=h,h=n.child,T=t.child.memoizedState,T===null?T=ff(s):(V=T.cachePool,V!==null?($=Ze._currentValue,V=V.parent!==$?{parent:$,pool:$}:V):V=yp(),T={baseLanes:T.baseLanes|s,cachePool:V}),h.memoizedState=T,h.childLanes=df(t,b,s),n.memoizedState=hf,l):(Qr(n),s=t.child,t=s.sibling,s=dr(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,t!==null&&(b=n.deletions,b===null?(n.deletions=[t],n.flags|=16):b.push(t)),n.child=s,n.memoizedState=null,s)}function mf(t,n){return n=zu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function zu(t,n){return t=Fn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function pf(t,n,s){return ja(n,t.child,null,s),t=mf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Ng(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Nh(t.return,n,s)}function gf(t,n,s,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:h}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=h)}function Vg(t,n,s){var l=n.pendingProps,h=l.revealOrder,d=l.tail;if(dn(t,n,l.children,s),l=Je.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ng(t,s,n);else if(t.tag===19)Ng(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ft(Je,l),h){case"forwards":for(s=n.child,h=null;s!==null;)t=s.alternate,t!==null&&Ou(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),gf(n,!1,h,s,d);break;case"backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Ou(t)===null){n.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}gf(n,!0,s,null,d);break;case"together":gf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function br(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Zr|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(jl(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=dr(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=dr(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function yf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&vu(t)))}function ab(t,n,s){switch(n.tag){case 3:Et(n,n.stateNode.containerInfo),Br(n,Ze,t.memoizedState.cache),Vl();break;case 27:case 5:Wt(n);break;case 4:Et(n,n.stateNode.containerInfo);break;case 10:Br(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Qr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Mg(t,n,s):(Qr(n),t=br(t,n,s),t!==null?t.sibling:null);Qr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(jl(t,n,s,!1),l=(s&n.childLanes)!==0),h){if(l)return Vg(t,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ft(Je,Je.current),l)break;return null;case 22:case 23:return n.lanes=0,wg(t,n,s);case 24:Br(n,Ze,t.memoizedState.cache)}return br(t,n,s)}function Og(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)sn=!0;else{if(!yf(t,s)&&(n.flags&128)===0)return sn=!1,ab(t,n,s);sn=(t.flags&131072)!==0}else sn=!1,ue&&(n.flags&1048576)!==0&&cp(n,yu,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,h=l._init;if(l=h(l._payload),n.type=l,typeof l=="function")Ah(l)?(t=Xs(l,t),n.tag=1,n=Dg(null,n,l,t,s)):(n.tag=0,n=cf(null,n,l,t,s));else{if(l!=null){if(h=l.$$typeof,h===Z){n.tag=11,n=Tg(null,n,l,t,s);break t}else if(h===M){n.tag=14,n=xg(null,n,l,t,s);break t}}throw n=Dt(l)||l,Error(a(306,n,""))}}return n;case 0:return cf(t,n,n.type,n.pendingProps,s);case 1:return l=n.type,h=Xs(l,n.pendingProps),Dg(t,n,l,h,s);case 3:t:{if(Et(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var d=n.memoizedState;h=d.element,Uh(t,n),ql(n,l,null,s);var b=n.memoizedState;if(l=b.cache,Br(n,Ze,l),l!==d.cache&&Vh(n,[Ze],s,!0),Bl(),l=b.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Ig(t,n,l,s);break t}else if(l!==h){h=ci(Error(a(424)),n),Ol(h),n=Ig(t,n,l,s);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Le=Ri(t.firstChild),Mn=n,ue=!0,Fs=null,Hi=!0,s=fg(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Vl(),l===h){n=br(t,n,s);break t}dn(t,n,l,s)}n=n.child}return n;case 26:return Lu(t,n),t===null?(s=zy(n.type,null,n.pendingProps,null))?n.memoizedState=s:ue||(s=n.type,t=n.pendingProps,l=Zu(J.current).createElement(s),l[Ue]=n,l[ke]=t,pn(l,s,t),Ne(l),n.stateNode=l):n.memoizedState=zy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Wt(n),t===null&&ue&&(l=n.stateNode=jy(n.type,n.pendingProps,J.current),Mn=n,Hi=!0,h=Le,ns(n.type)?(Xf=h,Le=Ri(l.firstChild)):Le=h),dn(t,n,n.pendingProps.children,s),Lu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ue&&((h=l=Le)&&(l=Ob(l,n.type,n.pendingProps,Hi),l!==null?(n.stateNode=l,Mn=n,Le=Ri(l.firstChild),Hi=!1,h=!0):h=!1),h||Qs(n)),Wt(n),h=n.type,d=n.pendingProps,b=t!==null?t.memoizedProps:null,l=d.children,$f(h,d)?l=null:b!==null&&$f(h,b)&&(n.flags|=32),n.memoizedState!==null&&(h=Fh(t,n,Z1,null,null,s),co._currentValue=h),Lu(t,n),dn(t,n,l,s),n.child;case 6:return t===null&&ue&&((t=s=Le)&&(s=jb(s,n.pendingProps,Hi),s!==null?(n.stateNode=s,Mn=n,Le=null,t=!0):t=!1),t||Qs(n)),null;case 13:return Mg(t,n,s);case 4:return Et(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ja(n,null,l,s):dn(t,n,l,s),n.child;case 11:return Tg(t,n,n.type,n.pendingProps,s);case 7:return dn(t,n,n.pendingProps,s),n.child;case 8:return dn(t,n,n.pendingProps.children,s),n.child;case 12:return dn(t,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,Br(n,n.type,l.value),dn(t,n,l.children,s),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Ws(n),h=bn(h),l=l(h),n.flags|=1,dn(t,n,l,s),n.child;case 14:return xg(t,n,n.type,n.pendingProps,s);case 15:return Ag(t,n,n.type,n.pendingProps,s);case 19:return Vg(t,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},t===null?(s=zu(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=dr(t.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return wg(t,n,s);case 24:return Ws(n),l=bn(Ze),t===null?(h=kh(),h===null&&(h=we,d=Oh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=s),h=d),n.memoizedState={parent:l,cache:h},zh(n),Br(n,Ze,h)):((t.lanes&s)!==0&&(Uh(t,n),ql(n,null,null,s),Bl()),h=t.memoizedState,d=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Br(n,Ze,l)):(l=d.cache,Br(n,Ze,l),l!==h.cache&&Vh(n,[Ze],s,!0))),dn(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Er(t){t.flags|=4}function jg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hy(n)){if(n=mi.current,n!==null&&((re&4194048)===re?Gi!==null:(re&62914560)!==re&&(re&536870912)===0||n!==Gi))throw Ul=Lh,vp;t.flags|=8192}}function Uu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?xs():536870912,t.lanes|=n,Ua|=n)}function Yl(t,n){if(!ue)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ve(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function lb(t,n,s){var l=n.pendingProps;switch(Dh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(n),null;case 1:return Ve(n),null;case 3:return s=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),yr(Ze),kt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Nl(n)?Er(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dp())),Ve(n),null;case 26:return s=n.memoizedState,t===null?(Er(n),s!==null?(Ve(n),jg(n,s)):(Ve(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Er(n),Ve(n),jg(n,s)):(Ve(n),n.flags&=-16777217):(t.memoizedProps!==l&&Er(n),Ve(n),n.flags&=-16777217),null;case 27:qt(n),s=J.current;var h=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Er(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}t=Rt.current,Nl(n)?hp(n):(t=jy(h,l,s),n.stateNode=t,Er(n))}return Ve(n),null;case 5:if(qt(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Er(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}if(t=Rt.current,Nl(n))hp(n);else{switch(h=Zu(J.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(s,{is:l.is}):h.createElement(s)}}t[Ue]=n,t[ke]=l;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=t;t:switch(pn(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Er(n)}}return Ve(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Er(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=J.current,Nl(n)){if(t=n.stateNode,s=n.memoizedProps,l=null,h=Mn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ue]=n,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Cy(t.nodeValue,s)),t||Qs(n)}else t=Zu(t).createTextNode(l),t[Ue]=n,n.stateNode=t}return Ve(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Nl(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Ue]=n}else Vl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),h=!1}else h=dp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(_r(n),n):(_r(n),null)}if(_r(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),Uu(n,n.updateQueue),Ve(n),null;case 4:return kt(),t===null&&qf(n.stateNode.containerInfo),Ve(n),null;case 10:return yr(n.type),Ve(n),null;case 19:if(yt(Je),h=n.memoizedState,h===null)return Ve(n),null;if(l=(n.flags&128)!==0,d=h.rendering,d===null)if(l)Yl(h,!1);else{if(ze!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Ou(t),d!==null){for(n.flags|=128,Yl(h,!1),t=d.updateQueue,n.updateQueue=t,Uu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)up(s,t),s=s.sibling;return ft(Je,Je.current&1|2),n.child}t=t.sibling}h.tail!==null&&Qt()>qu&&(n.flags|=128,l=!0,Yl(h,!1),n.lanes=4194304)}else{if(!l)if(t=Ou(d),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,Uu(n,t),Yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!ue)return Ve(n),null}else 2*Qt()-h.renderingStartTime>qu&&s!==536870912&&(n.flags|=128,l=!0,Yl(h,!1),n.lanes=4194304);h.isBackwards?(d.sibling=n.child,n.child=d):(t=h.last,t!==null?t.sibling=d:n.child=d,h.last=d)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Qt(),n.sibling=null,t=Je.current,ft(Je,l?t&1|2:t&1),n):(Ve(n),null);case 22:case 23:return _r(n),Hh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(Ve(n),n.subtreeFlags&6&&(n.flags|=8192)):Ve(n),s=n.updateQueue,s!==null&&Uu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),t!==null&&yt(Ys),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),yr(Ze),Ve(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function ob(t,n){switch(Dh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return yr(Ze),kt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return qt(n),null;case 13:if(_r(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Vl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return yt(Je),null;case 4:return kt(),null;case 10:return yr(n.type),null;case 22:case 23:return _r(n),Hh(),t!==null&&yt(Ys),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return yr(Ze),null;case 25:return null;default:return null}}function kg(t,n){switch(Dh(n),n.tag){case 3:yr(Ze),kt();break;case 26:case 27:case 5:qt(n);break;case 4:kt();break;case 13:_r(n);break;case 19:yt(Je);break;case 10:yr(n.type);break;case 22:case 23:_r(n),Hh(),t!==null&&yt(Ys);break;case 24:yr(Ze)}}function Kl(t,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&t)===t){l=void 0;var d=s.create,b=s.inst;l=d(),b.destroy=l}s=s.next}while(s!==h)}}catch(T){Se(n,n.return,T)}}function Wr(t,n,s){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=n;var V=s,$=T;try{$()}catch(it){Se(h,V,it)}}}l=l.next}while(l!==d)}}catch(it){Se(n,n.return,it)}}function Lg(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{xp(n,s)}catch(l){Se(t,t.return,l)}}}function zg(t,n,s){s.props=Xs(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Se(t,n,l)}}function Xl(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(h){Se(t,n,h)}}function Fi(t,n){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(h){Se(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Se(t,n,h)}else s.current=null}function Ug(t){var n=t.type,s=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(h){Se(t,t.return,h)}}function vf(t,n,s){try{var l=t.stateNode;Db(l,t.type,s,n),l[ke]=n}catch(h){Se(t,t.return,h)}}function Pg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ns(t.type)||t.tag===4}function _f(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Pg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ns(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Xu));else if(l!==4&&(l===27&&ns(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(bf(t,n,s),t=t.sibling;t!==null;)bf(t,n,s),t=t.sibling}function Pu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(l===27&&ns(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Pu(t,n,s),t=t.sibling;t!==null;)Pu(t,n,s),t=t.sibling}function Bg(t){var n=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);pn(n,l,s),n[Ue]=t,n[ke]=s}catch(d){Se(t,t.return,d)}}var Sr=!1,Be=!1,Ef=!1,qg=typeof WeakSet=="function"?WeakSet:Set,an=null;function ub(t,n){if(t=t.containerInfo,Ff=rc,t=Jm(t),vh(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break t}var b=0,T=-1,V=-1,$=0,it=0,ut=t,K=null;e:for(;;){for(var X;ut!==s||h!==0&&ut.nodeType!==3||(T=b+h),ut!==d||l!==0&&ut.nodeType!==3||(V=b+l),ut.nodeType===3&&(b+=ut.nodeValue.length),(X=ut.firstChild)!==null;)K=ut,ut=X;for(;;){if(ut===t)break e;if(K===s&&++$===h&&(T=b),K===d&&++it===l&&(V=b),(X=ut.nextSibling)!==null)break;ut=K,K=ut.parentNode}ut=X}s=T===-1||V===-1?null:{start:T,end:V}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qf={focusedElem:t,selectionRange:s},rc=!1,an=n;an!==null;)if(n=an,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,an=t;else for(;an!==null;){switch(n=an,d=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=n,h=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var Pt=Xs(s.type,h,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Pt,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(zt){Se(s,s.return,zt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Yf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,an=t;break}an=n.return}}function Hg(t,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Yr(t,s),l&4&&Kl(5,s);break;case 1:if(Yr(t,s),l&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(b){Se(s,s.return,b)}else{var h=Xs(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Se(s,s.return,b)}}l&64&&Lg(s),l&512&&Xl(s,s.return);break;case 3:if(Yr(t,s),l&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{xp(t,n)}catch(b){Se(s,s.return,b)}}break;case 27:n===null&&l&4&&Bg(s);case 26:case 5:Yr(t,s),n===null&&l&4&&Ug(s),l&512&&Xl(s,s.return);break;case 12:Yr(t,s);break;case 13:Yr(t,s),l&4&&Qg(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=vb.bind(null,s),kb(t,s))));break;case 22:if(l=s.memoizedState!==null||Sr,!l){n=n!==null&&n.memoizedState!==null||Be,h=Sr;var d=Be;Sr=l,(Be=n)&&!d?Kr(t,s,(s.subtreeFlags&8772)!==0):Yr(t,s),Sr=h,Be=d}break;case 30:break;default:Yr(t,s)}}function Gg(t){var n=t.alternate;n!==null&&(t.alternate=null,Gg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Si(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var De=null,jn=!1;function Tr(t,n,s){for(s=s.child;s!==null;)Fg(t,n,s),s=s.sibling}function Fg(t,n,s){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(Ee,s)}catch{}switch(s.tag){case 26:Be||Fi(s,n),Tr(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Be||Fi(s,n);var l=De,h=jn;ns(s.type)&&(De=s.stateNode,jn=!1),Tr(t,n,s),ao(s.stateNode),De=l,jn=h;break;case 5:Be||Fi(s,n);case 6:if(l=De,h=jn,De=null,Tr(t,n,s),De=l,jn=h,De!==null)if(jn)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(s.stateNode)}catch(d){Se(s,n,d)}else try{De.removeChild(s.stateNode)}catch(d){Se(s,n,d)}break;case 18:De!==null&&(jn?(t=De,Vy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),po(t)):Vy(De,s.stateNode));break;case 4:l=De,h=jn,De=s.stateNode.containerInfo,jn=!0,Tr(t,n,s),De=l,jn=h;break;case 0:case 11:case 14:case 15:Be||Wr(2,s,n),Be||Wr(4,s,n),Tr(t,n,s);break;case 1:Be||(Fi(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&zg(s,n,l)),Tr(t,n,s);break;case 21:Tr(t,n,s);break;case 22:Be=(l=Be)||s.memoizedState!==null,Tr(t,n,s),Be=l;break;default:Tr(t,n,s)}}function Qg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{po(t)}catch(s){Se(n,n.return,s)}}function cb(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new qg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new qg),n;default:throw Error(a(435,t.tag))}}function Sf(t,n){var s=cb(t);n.forEach(function(l){var h=_b.bind(null,t,l);s.has(l)||(s.add(l),l.then(h,h))})}function Qn(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var h=s[l],d=t,b=n,T=b;t:for(;T!==null;){switch(T.tag){case 27:if(ns(T.type)){De=T.stateNode,jn=!1;break t}break;case 5:De=T.stateNode,jn=!1;break t;case 3:case 4:De=T.stateNode.containerInfo,jn=!0;break t}T=T.return}if(De===null)throw Error(a(160));Fg(d,b,h),De=null,jn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)$g(n,t),n=n.sibling}var wi=null;function $g(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Qn(n,t),$n(t),l&4&&(Wr(3,t,t.return),Kl(3,t),Wr(5,t,t.return));break;case 1:Qn(n,t),$n(t),l&512&&(Be||s===null||Fi(s,s.return)),l&64&&Sr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var h=wi;if(Qn(n,t),$n(t),l&512&&(Be||s===null||Fi(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){t:{l=t.type,s=t.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Vi]||d[Ue]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),pn(d,l,s),d[Ue]=t,Ne(d),l=d;break t;case"link":var b=By("link","href",h).get(l+(s.href||""));if(b){for(var T=0;T<b.length;T++)if(d=b[T],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(T,1);break e}}d=h.createElement(l),pn(d,l,s),h.head.appendChild(d);break;case"meta":if(b=By("meta","content",h).get(l+(s.content||""))){for(T=0;T<b.length;T++)if(d=b[T],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(T,1);break e}}d=h.createElement(l),pn(d,l,s),h.head.appendChild(d);break;default:throw Error(a(468,l))}d[Ue]=t,Ne(d),l=d}t.stateNode=l}else qy(h,t.type,t.stateNode);else t.stateNode=Py(h,l,t.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?qy(h,t.type,t.stateNode):Py(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&vf(t,t.memoizedProps,s.memoizedProps)}break;case 27:Qn(n,t),$n(t),l&512&&(Be||s===null||Fi(s,s.return)),s!==null&&l&4&&vf(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Qn(n,t),$n(t),l&512&&(Be||s===null||Fi(s,s.return)),t.flags&32){h=t.stateNode;try{ai(h,"")}catch(X){Se(t,t.return,X)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,vf(t,h,s!==null?s.memoizedProps:h)),l&1024&&(Ef=!0);break;case 6:if(Qn(n,t),$n(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(X){Se(t,t.return,X)}}break;case 3:if(ec=null,h=wi,wi=Ju(n.containerInfo),Qn(n,t),wi=h,$n(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{po(n.containerInfo)}catch(X){Se(t,t.return,X)}Ef&&(Ef=!1,Wg(t));break;case 4:l=wi,wi=Ju(t.stateNode.containerInfo),Qn(n,t),$n(t),wi=l;break;case 12:Qn(n,t),$n(t);break;case 13:Qn(n,t),$n(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Cf=Qt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 22:h=t.memoizedState!==null;var V=s!==null&&s.memoizedState!==null,$=Sr,it=Be;if(Sr=$||h,Be=it||V,Qn(n,t),Be=it,Sr=$,$n(t),l&8192)t:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(s===null||V||Sr||Be||Zs(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){V=s=n;try{if(d=V.stateNode,h)b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=V.stateNode;var ut=V.memoizedProps.style,K=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(X){Se(V,V.return,X)}}}else if(n.tag===6){if(s===null){V=n;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(X){Se(V,V.return,X)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Sf(t,s))));break;case 19:Qn(n,t),$n(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 30:break;case 21:break;default:Qn(n,t),$n(t)}}function $n(t){var n=t.flags;if(n&2){try{for(var s,l=t.return;l!==null;){if(Pg(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,d=_f(t);Pu(t,d,h);break;case 5:var b=s.stateNode;s.flags&32&&(ai(b,""),s.flags&=-33);var T=_f(t);Pu(t,T,b);break;case 3:case 4:var V=s.stateNode.containerInfo,$=_f(t);bf(t,$,V);break;default:throw Error(a(161))}}catch(it){Se(t,t.return,it)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Wg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Wg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Yr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Hg(t,n.alternate,n),n=n.sibling}function Zs(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Wr(4,n,n.return),Zs(n);break;case 1:Fi(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&zg(n,n.return,s),Zs(n);break;case 27:ao(n.stateNode);case 26:case 5:Fi(n,n.return),Zs(n);break;case 22:n.memoizedState===null&&Zs(n);break;case 30:Zs(n);break;default:Zs(n)}t=t.sibling}}function Kr(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,d=n,b=d.flags;switch(d.tag){case 0:case 11:case 15:Kr(h,d,s),Kl(4,d);break;case 1:if(Kr(h,d,s),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){Se(l,l.return,$)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)Tp(V[h],T)}catch($){Se(l,l.return,$)}}s&&b&64&&Lg(d),Xl(d,d.return);break;case 27:Bg(d);case 26:case 5:Kr(h,d,s),s&&l===null&&b&4&&Ug(d),Xl(d,d.return);break;case 12:Kr(h,d,s);break;case 13:Kr(h,d,s),s&&b&4&&Qg(h,d);break;case 22:d.memoizedState===null&&Kr(h,d,s),Xl(d,d.return);break;case 30:break;default:Kr(h,d,s)}n=n.sibling}}function Tf(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&kl(s))}function xf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&kl(t))}function Qi(t,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yg(t,n,s,l),n=n.sibling}function Yg(t,n,s,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Qi(t,n,s,l),h&2048&&Kl(9,n);break;case 1:Qi(t,n,s,l);break;case 3:Qi(t,n,s,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&kl(t)));break;case 12:if(h&2048){Qi(t,n,s,l),t=n.stateNode;try{var d=n.memoizedProps,b=d.id,T=d.onPostCommit;typeof T=="function"&&T(b,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){Se(n,n.return,V)}}else Qi(t,n,s,l);break;case 13:Qi(t,n,s,l);break;case 23:break;case 22:d=n.stateNode,b=n.alternate,n.memoizedState!==null?d._visibility&2?Qi(t,n,s,l):Zl(t,n):d._visibility&2?Qi(t,n,s,l):(d._visibility|=2,ka(t,n,s,l,(n.subtreeFlags&10256)!==0)),h&2048&&Tf(b,n);break;case 24:Qi(t,n,s,l),h&2048&&xf(n.alternate,n);break;default:Qi(t,n,s,l)}}function ka(t,n,s,l,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=t,b=n,T=s,V=l,$=b.flags;switch(b.tag){case 0:case 11:case 15:ka(d,b,T,V,h),Kl(8,b);break;case 23:break;case 22:var it=b.stateNode;b.memoizedState!==null?it._visibility&2?ka(d,b,T,V,h):Zl(d,b):(it._visibility|=2,ka(d,b,T,V,h)),h&&$&2048&&Tf(b.alternate,b);break;case 24:ka(d,b,T,V,h),h&&$&2048&&xf(b.alternate,b);break;default:ka(d,b,T,V,h)}n=n.sibling}}function Zl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,l=n,h=l.flags;switch(l.tag){case 22:Zl(s,l),h&2048&&Tf(l.alternate,l);break;case 24:Zl(s,l),h&2048&&xf(l.alternate,l);break;default:Zl(s,l)}n=n.sibling}}var Jl=8192;function La(t){if(t.subtreeFlags&Jl)for(t=t.child;t!==null;)Kg(t),t=t.sibling}function Kg(t){switch(t.tag){case 26:La(t),t.flags&Jl&&t.memoizedState!==null&&Yb(wi,t.memoizedState,t.memoizedProps);break;case 5:La(t);break;case 3:case 4:var n=wi;wi=Ju(t.stateNode.containerInfo),La(t),wi=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Jl,Jl=16777216,La(t),Jl=n):La(t));break;default:La(t)}}function Xg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function to(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];an=l,Jg(l,t)}Xg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zg(t),t=t.sibling}function Zg(t){switch(t.tag){case 0:case 11:case 15:to(t),t.flags&2048&&Wr(9,t,t.return);break;case 3:to(t);break;case 12:to(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Bu(t)):to(t);break;default:to(t)}}function Bu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];an=l,Jg(l,t)}Xg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Wr(8,n,n.return),Bu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Bu(n));break;default:Bu(n)}t=t.sibling}}function Jg(t,n){for(;an!==null;){var s=an;switch(s.tag){case 0:case 11:case 15:Wr(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:kl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,an=l;else t:for(s=t;an!==null;){l=an;var h=l.sibling,d=l.return;if(Gg(l),l===s){an=null;break t}if(h!==null){h.return=d,an=h;break t}an=d}}}var hb={getCacheForType:function(t){var n=bn(Ze),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},fb=typeof WeakMap=="function"?WeakMap:Map,de=0,we=null,Jt=null,re=0,me=0,Wn=null,Xr=!1,za=!1,Af=!1,xr=0,ze=0,Zr=0,Js=0,wf=0,pi=0,Ua=0,eo=null,kn=null,Rf=!1,Cf=0,qu=1/0,Hu=null,Jr=null,mn=0,ts=null,Pa=null,Ba=0,Df=0,If=null,ty=null,no=0,Mf=null;function Yn(){if((de&2)!==0&&re!==0)return re&-re;if(tt.T!==null){var t=Ca;return t!==0?t:zf()}return Ei()}function ey(){pi===0&&(pi=(re&536870912)===0||ue?Or():536870912);var t=mi.current;return t!==null&&(t.flags|=32),pi}function Kn(t,n,s){(t===we&&(me===2||me===9)||t.cancelPendingCommit!==null)&&(qa(t,0),es(t,re,pi,!1)),cn(t,s),((de&2)===0||t!==we)&&(t===we&&((de&2)===0&&(Js|=s),ze===4&&es(t,re,pi,!1)),$i(t))}function ny(t,n,s){if((de&6)!==0)throw Error(a(327));var l=!s&&(n&124)===0&&(n&t.expiredLanes)===0||ti(t,n),h=l?pb(t,n):Of(t,n,!0),d=l;do{if(h===0){za&&!l&&es(t,n,0,!1);break}else{if(s=t.current.alternate,d&&!db(s)){h=Of(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;t:{var T=t;h=eo;var V=T.current.memoizedState.isDehydrated;if(V&&(qa(T,b).flags|=256),b=Of(T,b,!1),b!==2){if(Af&&!V){T.errorRecoveryDisabledLanes|=d,Js|=d,h=4;break t}d=kn,kn=h,d!==null&&(kn===null?kn=d:kn.push.apply(kn,d))}h=b}if(d=!1,h!==2)continue}}if(h===1){qa(t,0),es(t,n,0,!0);break}t:{switch(l=t,d=h,d){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:es(l,n,pi,!Xr);break t;case 2:kn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=Cf+300-Qt(),10<h)){if(es(l,n,pi,!Xr),rr(l,0,!0)!==0)break t;l.timeoutHandle=My(iy.bind(null,l,s,kn,Hu,Rf,n,pi,Js,Ua,Xr,d,2,-0,0),h);break t}iy(l,s,kn,Hu,Rf,n,pi,Js,Ua,Xr,d,0,-0,0)}}break}while(!0);$i(t)}function iy(t,n,s,l,h,d,b,T,V,$,it,ut,K,X){if(t.timeoutHandle=-1,ut=n.subtreeFlags,(ut&8192||(ut&16785408)===16785408)&&(uo={stylesheets:null,count:0,unsuspend:Wb},Kg(n),ut=Kb(),ut!==null)){t.cancelPendingCommit=ut(cy.bind(null,t,n,d,s,l,h,b,T,V,it,1,K,X)),es(t,d,b,!$);return}cy(t,n,d,s,l,h,b,T,V)}function db(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var h=s[l],d=h.getSnapshot;h=h.value;try{if(!Gn(d(),h))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function es(t,n,s,l){n&=~wf,n&=~Js,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var d=31-un(h),b=1<<d;l[d]=-1,h&=~b}s!==0&&ni(t,s,n)}function Gu(){return(de&6)===0?(io(0),!1):!0}function Nf(){if(Jt!==null){if(me===0)var t=Jt.return;else t=Jt,gr=$s=null,Wh(t),Oa=null,$l=0,t=Jt;for(;t!==null;)kg(t.alternate,t),t=t.return;Jt=null}}function qa(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Mb(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Nf(),we=t,Jt=s=dr(t.current,null),re=n,me=0,Wn=null,Xr=!1,za=ti(t,n),Af=!1,Ua=pi=wf=Js=Zr=ze=0,kn=eo=null,Rf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-un(l),d=1<<h;n|=t[h],l&=~d}return xr=n,fu(),s}function ry(t,n){Kt=null,tt.H=Mu,n===zl||n===Eu?(n=Ep(),me=3):n===vp?(n=Ep(),me=4):me=n===Sg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Wn=n,Jt===null&&(ze=1,ku(t,ci(n,t.current)))}function sy(){var t=tt.H;return tt.H=Mu,t===null?Mu:t}function ay(){var t=tt.A;return tt.A=hb,t}function Vf(){ze=4,Xr||(re&4194048)!==re&&mi.current!==null||(za=!0),(Zr&134217727)===0&&(Js&134217727)===0||we===null||es(we,re,pi,!1)}function Of(t,n,s){var l=de;de|=2;var h=sy(),d=ay();(we!==t||re!==n)&&(Hu=null,qa(t,n)),n=!1;var b=ze;t:do try{if(me!==0&&Jt!==null){var T=Jt,V=Wn;switch(me){case 8:Nf(),b=6;break t;case 3:case 2:case 9:case 6:mi.current===null&&(n=!0);var $=me;if(me=0,Wn=null,Ha(t,T,V,$),s&&za){b=0;break t}break;default:$=me,me=0,Wn=null,Ha(t,T,V,$)}}mb(),b=ze;break}catch(it){ry(t,it)}while(!0);return n&&t.shellSuspendCounter++,gr=$s=null,de=l,tt.H=h,tt.A=d,Jt===null&&(we=null,re=0,fu()),b}function mb(){for(;Jt!==null;)ly(Jt)}function pb(t,n){var s=de;de|=2;var l=sy(),h=ay();we!==t||re!==n?(Hu=null,qu=Qt()+500,qa(t,n)):za=ti(t,n);t:do try{if(me!==0&&Jt!==null){n=Jt;var d=Wn;e:switch(me){case 1:me=0,Wn=null,Ha(t,n,d,1);break;case 2:case 9:if(_p(d)){me=0,Wn=null,oy(n);break}n=function(){me!==2&&me!==9||we!==t||(me=7),$i(t)},d.then(n,n);break t;case 3:me=7;break t;case 4:me=5;break t;case 7:_p(d)?(me=0,Wn=null,oy(n)):(me=0,Wn=null,Ha(t,n,d,7));break;case 5:var b=null;switch(Jt.tag){case 26:b=Jt.memoizedState;case 5:case 27:var T=Jt;if(!b||Hy(b)){me=0,Wn=null;var V=T.sibling;if(V!==null)Jt=V;else{var $=T.return;$!==null?(Jt=$,Fu($)):Jt=null}break e}}me=0,Wn=null,Ha(t,n,d,5);break;case 6:me=0,Wn=null,Ha(t,n,d,6);break;case 8:Nf(),ze=6;break t;default:throw Error(a(462))}}gb();break}catch(it){ry(t,it)}while(!0);return gr=$s=null,tt.H=l,tt.A=h,de=s,Jt!==null?0:(we=null,re=0,fu(),ze)}function gb(){for(;Jt!==null&&!It();)ly(Jt)}function ly(t){var n=Og(t.alternate,t,xr);t.memoizedProps=t.pendingProps,n===null?Fu(t):Jt=n}function oy(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=Cg(s,n,n.pendingProps,n.type,void 0,re);break;case 11:n=Cg(s,n,n.pendingProps,n.type.render,n.ref,re);break;case 5:Wh(n);default:kg(s,n),n=Jt=up(n,xr),n=Og(s,n,xr)}t.memoizedProps=t.pendingProps,n===null?Fu(t):Jt=n}function Ha(t,n,s,l){gr=$s=null,Wh(n),Oa=null,$l=0;var h=n.return;try{if(sb(t,h,n,s,re)){ze=1,ku(t,ci(s,t.current)),Jt=null;return}}catch(d){if(h!==null)throw Jt=h,d;ze=1,ku(t,ci(s,t.current)),Jt=null;return}n.flags&32768?(ue||l===1?t=!0:za||(re&536870912)!==0?t=!1:(Xr=t=!0,(l===2||l===9||l===3||l===6)&&(l=mi.current,l!==null&&l.tag===13&&(l.flags|=16384))),uy(n,t)):Fu(n)}function Fu(t){var n=t;do{if((n.flags&32768)!==0){uy(n,Xr);return}t=n.return;var s=lb(n.alternate,n,xr);if(s!==null){Jt=s;return}if(n=n.sibling,n!==null){Jt=n;return}Jt=n=t}while(n!==null);ze===0&&(ze=5)}function uy(t,n){do{var s=ob(t.alternate,t);if(s!==null){s.flags&=32767,Jt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){Jt=t;return}Jt=t=s}while(t!==null);ze=6,Jt=null}function cy(t,n,s,l,h,d,b,T,V){t.cancelPendingCommit=null;do Qu();while(mn!==0);if((de&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(d=n.lanes|n.childLanes,d|=Th,jr(t,s,d,b,T,V),t===we&&(Jt=we=null,re=0),Pa=n,ts=t,Ba=s,Df=d,If=h,ty=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,bb(wn,function(){return py(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=tt.T,tt.T=null,h=pt.p,pt.p=2,b=de,de|=4;try{ub(t,n,s)}finally{de=b,pt.p=h,tt.T=l}}mn=1,hy(),fy(),dy()}}function hy(){if(mn===1){mn=0;var t=ts,n=Pa,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=tt.T,tt.T=null;var l=pt.p;pt.p=2;var h=de;de|=4;try{$g(n,t);var d=Qf,b=Jm(t.containerInfo),T=d.focusedElem,V=d.selectionRange;if(b!==T&&T&&T.ownerDocument&&Zm(T.ownerDocument.documentElement,T)){if(V!==null&&vh(T)){var $=V.start,it=V.end;if(it===void 0&&(it=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(it,T.value.length);else{var ut=T.ownerDocument||document,K=ut&&ut.defaultView||window;if(K.getSelection){var X=K.getSelection(),Pt=T.textContent.length,zt=Math.min(V.start,Pt),ve=V.end===void 0?zt:Math.min(V.end,Pt);!X.extend&&zt>ve&&(b=ve,ve=zt,zt=b);var q=Xm(T,zt),U=Xm(T,ve);if(q&&U&&(X.rangeCount!==1||X.anchorNode!==q.node||X.anchorOffset!==q.offset||X.focusNode!==U.node||X.focusOffset!==U.offset)){var Q=ut.createRange();Q.setStart(q.node,q.offset),X.removeAllRanges(),zt>ve?(X.addRange(Q),X.extend(U.node,U.offset)):(Q.setEnd(U.node,U.offset),X.addRange(Q))}}}}for(ut=[],X=T;X=X.parentNode;)X.nodeType===1&&ut.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ut.length;T++){var at=ut[T];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}rc=!!Ff,Qf=Ff=null}finally{de=h,pt.p=l,tt.T=s}}t.current=n,mn=2}}function fy(){if(mn===2){mn=0;var t=ts,n=Pa,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=tt.T,tt.T=null;var l=pt.p;pt.p=2;var h=de;de|=4;try{Hg(t,n.alternate,n)}finally{de=h,pt.p=l,tt.T=s}}mn=3}}function dy(){if(mn===4||mn===3){mn=0,Lt();var t=ts,n=Pa,s=Ba,l=ty;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?mn=5:(mn=0,Pa=ts=null,my(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Jr=null),sr(s),n=n.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(Ee,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=tt.T,h=pt.p,pt.p=2,tt.T=null;try{for(var d=t.onRecoverableError,b=0;b<l.length;b++){var T=l[b];d(T.value,{componentStack:T.stack})}}finally{tt.T=n,pt.p=h}}(Ba&3)!==0&&Qu(),$i(t),h=t.pendingLanes,(s&4194090)!==0&&(h&42)!==0?t===Mf?no++:(no=0,Mf=t):no=0,io(0)}}function my(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,kl(n)))}function Qu(t){return hy(),fy(),dy(),py()}function py(){if(mn!==5)return!1;var t=ts,n=Df;Df=0;var s=sr(Ba),l=tt.T,h=pt.p;try{pt.p=32>s?32:s,tt.T=null,s=If,If=null;var d=ts,b=Ba;if(mn=0,Pa=ts=null,Ba=0,(de&6)!==0)throw Error(a(331));var T=de;if(de|=4,Zg(d.current),Yg(d,d.current,b,s),de=T,io(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(Ee,d)}catch{}return!0}finally{pt.p=h,tt.T=l,my(t,n)}}function gy(t,n,s){n=ci(s,n),n=uf(t.stateNode,n,2),t=Gr(t,n,2),t!==null&&(cn(t,2),$i(t))}function Se(t,n,s){if(t.tag===3)gy(t,t,s);else for(;n!==null;){if(n.tag===3){gy(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Jr===null||!Jr.has(l))){t=ci(s,t),s=bg(2),l=Gr(n,s,2),l!==null&&(Eg(s,l,n,t),cn(l,2),$i(l));break}}n=n.return}}function jf(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new fb;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(s)||(Af=!0,h.add(s),t=yb.bind(null,t,n,s),n.then(t,t))}function yb(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,we===t&&(re&s)===s&&(ze===4||ze===3&&(re&62914560)===re&&300>Qt()-Cf?(de&2)===0&&qa(t,0):wf|=s,Ua===re&&(Ua=0)),$i(t)}function yy(t,n){n===0&&(n=xs()),t=xa(t,n),t!==null&&(cn(t,n),$i(t))}function vb(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),yy(t,s)}function _b(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),yy(t,s)}function bb(t,n){return Mt(t,n)}var $u=null,Ga=null,kf=!1,Wu=!1,Lf=!1,ta=0;function $i(t){t!==Ga&&t.next===null&&(Ga===null?$u=Ga=t:Ga=Ga.next=t),Wu=!0,kf||(kf=!0,Sb())}function io(t,n){if(!Lf&&Wu){Lf=!0;do for(var s=!1,l=$u;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var b=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-un(42|t)+1)-1,d&=h&~(b&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Ey(l,d))}else d=re,d=rr(l,l===we?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ti(l,d)||(s=!0,Ey(l,d));l=l.next}while(s);Lf=!1}}function Eb(){vy()}function vy(){Wu=kf=!1;var t=0;ta!==0&&(Ib()&&(t=ta),ta=0);for(var n=Qt(),s=null,l=$u;l!==null;){var h=l.next,d=_y(l,n);d===0?(l.next=null,s===null?$u=h:s.next=h,h===null&&(Ga=s)):(s=l,(t!==0||(d&3)!==0)&&(Wu=!0)),l=h}io(t)}function _y(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var b=31-un(d),T=1<<b,V=h[b];V===-1?((T&s)===0||(T&l)!==0)&&(h[b]=Vr(T,n)):V<=n&&(t.expiredLanes|=T),d&=~T}if(n=we,s=re,s=rr(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===n&&(me===2||me===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jt(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ti(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(l!==null&&jt(l),sr(s)){case 2:case 8:s=We;break;case 32:s=wn;break;case 268435456:s=tr;break;default:s=wn}return l=by.bind(null,t),s=Mt(s,l),t.callbackPriority=n,t.callbackNode=s,n}return l!==null&&l!==null&&jt(l),t.callbackPriority=2,t.callbackNode=null,2}function by(t,n){if(mn!==0&&mn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Qu()&&t.callbackNode!==s)return null;var l=re;return l=rr(t,t===we?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ny(t,l,n),_y(t,Qt()),t.callbackNode!=null&&t.callbackNode===s?by.bind(null,t):null)}function Ey(t,n){if(Qu())return null;ny(t,n,!0)}function Sb(){Nb(function(){(de&6)!==0?Mt(be,Eb):vy()})}function zf(){return ta===0&&(ta=Or()),ta}function Sy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fa(""+t)}function Ty(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function Tb(t,n,s,l,h){if(n==="submit"&&s&&s.stateNode===h){var d=Sy((h[ke]||null).action),b=l.submitter;b&&(n=(n=b[ke]||null)?Sy(n.formAction):b.getAttribute("formAction"),n!==null&&(d=n,b=null));var T=new da("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ta!==0){var V=b?Ty(h,b):new FormData(h);rf(s,{pending:!0,data:V,method:h.method,action:d},null,V)}}else typeof d=="function"&&(T.preventDefault(),V=b?Ty(h,b):new FormData(h),rf(s,{pending:!0,data:V,method:h.method,action:d},d,V))},currentTarget:h}]})}}for(var Uf=0;Uf<Sh.length;Uf++){var Pf=Sh[Uf],xb=Pf.toLowerCase(),Ab=Pf[0].toUpperCase()+Pf.slice(1);Ai(xb,"on"+Ab)}Ai(np,"onAnimationEnd"),Ai(ip,"onAnimationIteration"),Ai(rp,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(q1,"onTransitionRun"),Ai(H1,"onTransitionStart"),Ai(G1,"onTransitionCancel"),Ai(sp,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ro));function xy(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],h=l.event;l=l.listeners;t:{var d=void 0;if(n)for(var b=l.length-1;0<=b;b--){var T=l[b],V=T.instance,$=T.currentTarget;if(T=T.listener,V!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=$;try{d(h)}catch(it){ju(it)}h.currentTarget=null,d=V}else for(b=0;b<l.length;b++){if(T=l[b],V=T.instance,$=T.currentTarget,T=T.listener,V!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=$;try{d(h)}catch(it){ju(it)}h.currentTarget=null,d=V}}}}function te(t,n){var s=n[kr];s===void 0&&(s=n[kr]=new Set);var l=t+"__bubble";s.has(l)||(Ay(n,t,2,!1),s.add(l))}function Bf(t,n,s){var l=0;n&&(l|=4),Ay(s,t,l,n)}var Yu="_reactListening"+Math.random().toString(36).slice(2);function qf(t){if(!t[Yu]){t[Yu]=!0,As.forEach(function(s){s!=="selectionchange"&&(wb.has(s)||Bf(s,!1,t),Bf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Yu]||(n[Yu]=!0,Bf("selectionchange",!1,n))}}function Ay(t,n,s,l){switch(Yy(n)){case 2:var h=Jb;break;case 8:h=tE;break;default:h=nd}s=h.bind(null,n,s,t),h=void 0,!oi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,s,{capture:!0,passive:h}):t.addEventListener(n,s,!0):h!==void 0?t.addEventListener(n,s,{passive:h}):t.addEventListener(n,s,!1)}function Hf(t,n,s,l,h){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h)break;if(b===4)for(b=l.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;T!==null;){if(b=ii(T),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){l=d=b;continue t}T=T.parentNode}}l=l.return}Xo(function(){var $=d,it=li(s),ut=[];t:{var K=ap.get(t);if(K!==void 0){var X=da,Pt=t;switch(t){case"keypress":if(zi(s)===0)break t;case"keydown":case"keyup":X=_a;break;case"focusin":Pt="focus",X=ga;break;case"focusout":Pt="blur",X=ga;break;case"beforeblur":case"afterblur":X=ga;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=su;break;case np:case ip:case rp:X=ya;break;case sp:X=lu;break;case"scroll":case"scrollend":X=Zo;break;case"wheel":X=ba;break;case"copy":case"cut":case"paste":X=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Cl;break;case"toggle":case"beforetoggle":X=uu}var zt=(n&4)!==0,ve=!zt&&(t==="scroll"||t==="scrollend"),q=zt?K!==null?K+"Capture":null:K;zt=[];for(var U=$,Q;U!==null;){var at=U;if(Q=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||Q===null||q===null||(at=Vs(U,q),at!=null&&zt.push(so(U,at,Q))),ve)break;U=U.return}0<zt.length&&(K=new X(K,Pt,null,s,it),ut.push({event:K,listeners:zt}))}}if((n&7)===0){t:{if(K=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",K&&s!==lr&&(Pt=s.relatedTarget||s.fromElement)&&(ii(Pt)||Pt[Dn]))break t;if((X||K)&&(K=it.window===it?it:(K=it.ownerDocument)?K.defaultView||K.parentWindow:window,X?(Pt=s.relatedTarget||s.toElement,X=$,Pt=Pt?ii(Pt):null,Pt!==null&&(ve=c(Pt),zt=Pt.tag,Pt!==ve||zt!==5&&zt!==27&&zt!==6)&&(Pt=null)):(X=null,Pt=$),X!==Pt)){if(zt=ui,at="onMouseLeave",q="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(zt=Cl,at="onPointerLeave",q="onPointerEnter",U="pointer"),ve=X==null?K:si(X),Q=Pt==null?K:si(Pt),K=new zt(at,U+"leave",X,s,it),K.target=ve,K.relatedTarget=Q,at=null,ii(it)===$&&(zt=new zt(q,U+"enter",Pt,s,it),zt.target=Q,zt.relatedTarget=ve,at=zt),ve=at,X&&Pt)e:{for(zt=X,q=Pt,U=0,Q=zt;Q;Q=Fa(Q))U++;for(Q=0,at=q;at;at=Fa(at))Q++;for(;0<U-Q;)zt=Fa(zt),U--;for(;0<Q-U;)q=Fa(q),Q--;for(;U--;){if(zt===q||q!==null&&zt===q.alternate)break e;zt=Fa(zt),q=Fa(q)}zt=null}else zt=null;X!==null&&wy(ut,K,X,zt,!1),Pt!==null&&ve!==null&&wy(ut,ve,Pt,zt,!0)}}t:{if(K=$?si($):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var wt=Fm;else if(Xe(K))if(Qm)wt=U1;else{wt=L1;var Zt=k1}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&El($.elementType)&&(wt=Fm):wt=z1;if(wt&&(wt=wt(t,$))){fr(ut,wt,s,it);break t}Zt&&Zt(t,K,$),t==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Ur(K,"number",K.value)}switch(Zt=$?si($):window,t){case"focusin":(Xe(Zt)||Zt.contentEditable==="true")&&(Ea=Zt,_h=$,Ml=null);break;case"focusout":Ml=_h=Ea=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,tp(ut,s,it);break;case"selectionchange":if(B1)break;case"keydown":case"keyup":tp(ut,s,it)}var Nt;if(Bi)t:{switch(t){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else ne?et(t,s)&&(Ut="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ut="onCompositionStart");Ut&&(_&&s.locale!=="ko"&&(ne||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&ne&&(Nt=Tl()):(Li=it,Pr="value"in Li?Li.value:Li.textContent,ne=!0)),Zt=Ku($,Ut),0<Zt.length&&(Ut=new wl(Ut,t,null,s,it),ut.push({event:Ut,listeners:Zt}),Nt?Ut.data=Nt:(Nt=vt(s),Nt!==null&&(Ut.data=Nt)))),(Nt=g?Ke(t,s):ie(t,s))&&(Ut=Ku($,"onBeforeInput"),0<Ut.length&&(Zt=new wl("onBeforeInput","beforeinput",null,s,it),ut.push({event:Zt,listeners:Ut}),Zt.data=Nt)),Tb(ut,t,$,s,it)}xy(ut,n)})}function so(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Ku(t,n){for(var s=n+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Vs(t,s),h!=null&&l.unshift(so(t,h,d)),h=Vs(t,n),h!=null&&l.push(so(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wy(t,n,s,l,h){for(var d=n._reactName,b=[];s!==null&&s!==l;){var T=s,V=T.alternate,$=T.stateNode;if(T=T.tag,V!==null&&V===l)break;T!==5&&T!==26&&T!==27||$===null||(V=$,h?($=Vs(s,d),$!=null&&b.unshift(so(s,$,V))):h||($=Vs(s,d),$!=null&&b.push(so(s,$,V)))),s=s.return}b.length!==0&&t.push({event:n,listeners:b})}var Rb=/\r\n?/g,Cb=/\u0000|\uFFFD/g;function Ry(t){return(typeof t=="string"?t:""+t).replace(Rb,`
`).replace(Cb,"")}function Cy(t,n){return n=Ry(n),Ry(t)===n}function Xu(){}function ye(t,n,s,l,h,d){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||ai(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&ai(t,""+l);break;case"className":Y(t,"class",l);break;case"tabIndex":Y(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Y(t,s,l);break;case"style":bl(t,l,d);break;case"data":if(n!=="object"){Y(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=fa(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(n!=="input"&&ye(t,n,"name",h.name,h,null),ye(t,n,"formEncType",h.formEncType,h,null),ye(t,n,"formMethod",h.formMethod,h,null),ye(t,n,"formTarget",h.formTarget,h,null)):(ye(t,n,"encType",h.encType,h,null),ye(t,n,"method",h.method,h,null),ye(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=fa(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Xu);break;case"onScroll":l!=null&&te("scroll",t);break;case"onScrollEnd":l!=null&&te("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=fa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":te("beforetoggle",t),te("toggle",t),I(t,"popover",l);break;case"xlinkActuate":nt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":nt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":nt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":nt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":nt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":nt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":nt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":nt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":nt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":I(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=fh.get(s)||s,I(t,s,l))}}function Gf(t,n,s,l,h,d){switch(s){case"style":bl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?ai(t,l):(typeof l=="number"||typeof l=="bigint")&&ai(t,""+l);break;case"onScroll":l!=null&&te("scroll",t);break;case"onScrollEnd":l!=null&&te("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lr.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),n=s.slice(2,h?s.length-7:void 0),d=t[ke]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,l,h);break t}s in t?t[s]=l:l===!0?t.setAttribute(s,""):I(t,s,l)}}}function pn(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",t),te("load",t);var l=!1,h=!1,d;for(d in s)if(s.hasOwnProperty(d)){var b=s[d];if(b!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ye(t,n,d,b,s,null)}}h&&ye(t,n,"srcSet",s.srcSet,s,null),l&&ye(t,n,"src",s.src,s,null);return;case"input":te("invalid",t);var T=d=b=h=null,V=null,$=null;for(l in s)if(s.hasOwnProperty(l)){var it=s[l];if(it!=null)switch(l){case"name":h=it;break;case"type":b=it;break;case"checked":V=it;break;case"defaultChecked":$=it;break;case"value":d=it;break;case"defaultValue":T=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(a(137,n));break;default:ye(t,n,l,it,s,null)}}Is(t,d,T,V,$,b,h,!1),qn(t);return;case"select":te("invalid",t),l=b=d=null;for(h in s)if(s.hasOwnProperty(h)&&(T=s[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:ye(t,n,h,T,s,null)}n=d,s=b,t.multiple=!!l,n!=null?ar(t,!!l,n,!1):s!=null&&ar(t,!!l,s,!0);return;case"textarea":te("invalid",t),d=h=l=null;for(b in s)if(s.hasOwnProperty(b)&&(T=s[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:ye(t,n,b,T,s,null)}Ms(t,l,h,d),qn(t);return;case"option":for(V in s)if(s.hasOwnProperty(V)&&(l=s[V],l!=null))switch(V){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ye(t,n,V,l,s,null)}return;case"dialog":te("beforetoggle",t),te("toggle",t),te("cancel",t),te("close",t);break;case"iframe":case"object":te("load",t);break;case"video":case"audio":for(l=0;l<ro.length;l++)te(ro[l],t);break;case"image":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"embed":case"source":case"link":te("error",t),te("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in s)if(s.hasOwnProperty($)&&(l=s[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ye(t,n,$,l,s,null)}return;default:if(El(n)){for(it in s)s.hasOwnProperty(it)&&(l=s[it],l!==void 0&&Gf(t,n,it,l,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(l=s[T],l!=null&&ye(t,n,T,l,s,null))}function Db(t,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,b=null,T=null,V=null,$=null,it=null;for(X in s){var ut=s[X];if(s.hasOwnProperty(X)&&ut!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=ut;default:l.hasOwnProperty(X)||ye(t,n,X,null,l,ut)}}for(var K in l){var X=l[K];if(ut=s[K],l.hasOwnProperty(K)&&(X!=null||ut!=null))switch(K){case"type":d=X;break;case"name":h=X;break;case"checked":$=X;break;case"defaultChecked":it=X;break;case"value":b=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:X!==ut&&ye(t,n,K,X,l,ut)}}Hn(t,b,T,V,$,it,d,h);return;case"select":X=b=T=K=null;for(d in s)if(V=s[d],s.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":X=V;default:l.hasOwnProperty(d)||ye(t,n,d,null,l,V)}for(h in l)if(d=l[h],V=s[h],l.hasOwnProperty(h)&&(d!=null||V!=null))switch(h){case"value":K=d;break;case"defaultValue":T=d;break;case"multiple":b=d;default:d!==V&&ye(t,n,h,d,l,V)}n=T,s=b,l=X,K!=null?ar(t,!!s,K,!1):!!l!=!!s&&(n!=null?ar(t,!!s,n,!0):ar(t,!!s,s?[]:"",!1));return;case"textarea":X=K=null;for(T in s)if(h=s[T],s.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ye(t,n,T,null,l,h)}for(b in l)if(h=l[b],d=s[b],l.hasOwnProperty(b)&&(h!=null||d!=null))switch(b){case"value":K=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==d&&ye(t,n,b,h,l,d)}pe(t,K,X);return;case"option":for(var Pt in s)if(K=s[Pt],s.hasOwnProperty(Pt)&&K!=null&&!l.hasOwnProperty(Pt))switch(Pt){case"selected":t.selected=!1;break;default:ye(t,n,Pt,null,l,K)}for(V in l)if(K=l[V],X=s[V],l.hasOwnProperty(V)&&K!==X&&(K!=null||X!=null))switch(V){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ye(t,n,V,K,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in s)K=s[zt],s.hasOwnProperty(zt)&&K!=null&&!l.hasOwnProperty(zt)&&ye(t,n,zt,null,l,K);for($ in l)if(K=l[$],X=s[$],l.hasOwnProperty($)&&K!==X&&(K!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,n));break;default:ye(t,n,$,K,l,X)}return;default:if(El(n)){for(var ve in s)K=s[ve],s.hasOwnProperty(ve)&&K!==void 0&&!l.hasOwnProperty(ve)&&Gf(t,n,ve,void 0,l,K);for(it in l)K=l[it],X=s[it],!l.hasOwnProperty(it)||K===X||K===void 0&&X===void 0||Gf(t,n,it,K,l,X);return}}for(var q in s)K=s[q],s.hasOwnProperty(q)&&K!=null&&!l.hasOwnProperty(q)&&ye(t,n,q,null,l,K);for(ut in l)K=l[ut],X=s[ut],!l.hasOwnProperty(ut)||K===X||K==null&&X==null||ye(t,n,ut,K,l,X)}var Ff=null,Qf=null;function Zu(t){return t.nodeType===9?t:t.ownerDocument}function Dy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function $f(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wf=null;function Ib(){var t=window.event;return t&&t.type==="popstate"?t===Wf?!1:(Wf=t,!0):(Wf=null,!1)}var My=typeof setTimeout=="function"?setTimeout:void 0,Mb=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,Nb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(t){return Ny.resolve(null).then(t).catch(Vb)}:My;function Vb(t){setTimeout(function(){throw t})}function ns(t){return t==="head"}function Vy(t,n){var s=n,l=0,h=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(0<l&&8>l){s=l;var b=t.ownerDocument;if(s&1&&ao(b.documentElement),s&2&&ao(b.body),s&4)for(s=b.head,ao(s),b=s.firstChild;b;){var T=b.nextSibling,V=b.nodeName;b[Vi]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&b.rel.toLowerCase()==="stylesheet"||s.removeChild(b),b=T}}if(h===0){t.removeChild(d),po(n);return}h--}else s==="$"||s==="$?"||s==="$!"?h++:l=s.charCodeAt(0)-48;else l=0;s=d}while(s);po(n)}function Yf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Yf(s),Si(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Ob(t,n,s,l){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Vi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ri(t.nextSibling),t===null)break}return null}function jb(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ri(t.nextSibling),t===null))return null;return t}function Kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function kb(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ri(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Xf=null;function Oy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function jy(t,n,s){switch(n=Zu(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function ao(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Si(t)}var gi=new Map,ky=new Set;function Ju(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ar=pt.d;pt.d={f:Lb,r:zb,D:Ub,C:Pb,L:Bb,m:qb,X:Gb,S:Hb,M:Fb};function Lb(){var t=Ar.f(),n=Gu();return t||n}function zb(t){var n=ri(t);n!==null&&n.tag===5&&n.type==="form"?ng(n):Ar.r(t)}var Qa=typeof document>"u"?null:document;function Ly(t,n,s){var l=Qa;if(l&&typeof n=="string"&&n){var h=He(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),ky.has(h)||(ky.add(h),t={rel:t,crossOrigin:s,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),pn(n,"link",t),Ne(n),l.head.appendChild(n)))}}function Ub(t){Ar.D(t),Ly("dns-prefetch",t,null)}function Pb(t,n){Ar.C(t,n),Ly("preconnect",t,n)}function Bb(t,n,s){Ar.L(t,n,s);var l=Qa;if(l&&t&&n){var h='link[rel="preload"][as="'+He(n)+'"]';n==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+He(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+He(s.imageSizes)+'"]')):h+='[href="'+He(t)+'"]';var d=h;switch(n){case"style":d=$a(t);break;case"script":d=Wa(t)}gi.has(d)||(t=E({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),gi.set(d,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(lo(d))||n==="script"&&l.querySelector(oo(d))||(n=l.createElement("link"),pn(n,"link",t),Ne(n),l.head.appendChild(n)))}}function qb(t,n){Ar.m(t,n);var s=Qa;if(s&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+He(l)+'"][href="'+He(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Wa(t)}if(!gi.has(d)&&(t=E({rel:"modulepreload",href:t},n),gi.set(d,t),s.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(oo(d)))return}l=s.createElement("link"),pn(l,"link",t),Ne(l),s.head.appendChild(l)}}}function Hb(t,n,s){Ar.S(t,n,s);var l=Qa;if(l&&t){var h=hn(l).hoistableStyles,d=$a(t);n=n||"default";var b=h.get(d);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(lo(d)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},s),(s=gi.get(d))&&Zf(t,s);var V=b=l.createElement("link");Ne(V),pn(V,"link",t),V._p=new Promise(function($,it){V.onload=$,V.onerror=it}),V.addEventListener("load",function(){T.loading|=1}),V.addEventListener("error",function(){T.loading|=2}),T.loading|=4,tc(b,n,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(d,b)}}}function Gb(t,n){Ar.X(t,n);var s=Qa;if(s&&t){var l=hn(s).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=s.querySelector(oo(h)),d||(t=E({src:t,async:!0},n),(n=gi.get(h))&&Jf(t,n),d=s.createElement("script"),Ne(d),pn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Fb(t,n){Ar.M(t,n);var s=Qa;if(s&&t){var l=hn(s).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=s.querySelector(oo(h)),d||(t=E({src:t,async:!0,type:"module"},n),(n=gi.get(h))&&Jf(t,n),d=s.createElement("script"),Ne(d),pn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function zy(t,n,s,l){var h=(h=J.current)?Ju(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=$a(s.href),s=hn(h).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=$a(s.href);var d=hn(h).hoistableStyles,b=d.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,b),(d=h.querySelector(lo(t)))&&!d._p&&(b.instance=d,b.state.loading=5),gi.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},gi.set(t,s),d||Qb(h,t,s,b.state))),n&&l===null)throw Error(a(528,""));return b}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Wa(s),s=hn(h).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function $a(t){return'href="'+He(t)+'"'}function lo(t){return'link[rel="stylesheet"]['+t+"]"}function Uy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Qb(t,n,s,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),pn(n,"link",s),Ne(n),t.head.appendChild(n))}function Wa(t){return'[src="'+He(t)+'"]'}function oo(t){return"script[async]"+t}function Py(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+He(s.href)+'"]');if(l)return n.instance=l,Ne(l),l;var h=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ne(l),pn(l,"style",h),tc(l,s.precedence,t),n.instance=l;case"stylesheet":h=$a(s.href);var d=t.querySelector(lo(h));if(d)return n.state.loading|=4,n.instance=d,Ne(d),d;l=Uy(s),(h=gi.get(h))&&Zf(l,h),d=(t.ownerDocument||t).createElement("link"),Ne(d);var b=d;return b._p=new Promise(function(T,V){b.onload=T,b.onerror=V}),pn(d,"link",l),n.state.loading|=4,tc(d,s.precedence,t),n.instance=d;case"script":return d=Wa(s.src),(h=t.querySelector(oo(d)))?(n.instance=h,Ne(h),h):(l=s,(h=gi.get(d))&&(l=E({},s),Jf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ne(h),pn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,tc(l,s.precedence,t));return n.instance}function tc(t,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Zf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Jf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var ec=null;function By(t,n,s){if(ec===null){var l=new Map,h=ec=new Map;h.set(s,l)}else h=ec,l=h.get(s),l||(l=new Map,h.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var d=s[h];if(!(d[Vi]||d[Ue]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(n)||"";b=t+b;var T=l.get(b);T?T.push(d):l.set(b,[d])}}return l}function qy(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function $b(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Hy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var uo=null;function Wb(){}function Yb(t,n,s){if(uo===null)throw Error(a(475));var l=uo;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=$a(s.href),d=t.querySelector(lo(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=nc.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=d,Ne(d);return}d=t.ownerDocument||t,s=Uy(s),(h=gi.get(h))&&Zf(s,h),d=d.createElement("link"),Ne(d);var b=d;b._p=new Promise(function(T,V){b.onload=T,b.onerror=V}),pn(d,"link",s),n.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=nc.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function Kb(){if(uo===null)throw Error(a(475));var t=uo;return t.stylesheets&&t.count===0&&td(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&td(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function nc(){if(this.count--,this.count===0){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ic=null;function td(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ic=new Map,n.forEach(Xb,t),ic=null,nc.call(t))}function Xb(t,n){if(!(n.state.loading&4)){var s=ic.get(t);if(s)var l=s.get(null);else{s=new Map,ic.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var b=h[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),l=b)}l&&s.set(null,l)}h=n.instance,b=h.getAttribute("data-precedence"),d=s.get(b)||l,d===l&&s.set(null,h),s.set(b,h),this.count++,l=nc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var co={$$typeof:P,Provider:null,Consumer:null,_currentValue:At,_currentValue2:At,_threadCount:0};function Zb(t,n,s,l,h,d,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.hiddenUpdates=ei(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Gy(t,n,s,l,h,d,b,T,V,$,it,ut){return t=new Zb(t,n,s,b,T,V,$,ut),n=1,d===!0&&(n|=24),d=Fn(3,null,null,n),t.current=d,d.stateNode=t,n=Oh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:n},zh(d),t}function Fy(t){return t?(t=Aa,t):Aa}function Qy(t,n,s,l,h,d){h=Fy(h),l.context===null?l.context=h:l.pendingContext=h,l=Hr(n),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=Gr(t,l,n),s!==null&&(Kn(s,t,n),Pl(s,t,n))}function $y(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function ed(t,n){$y(t,n),(t=t.alternate)&&$y(t,n)}function Wy(t){if(t.tag===13){var n=xa(t,67108864);n!==null&&Kn(n,t,67108864),ed(t,67108864)}}var rc=!0;function Jb(t,n,s,l){var h=tt.T;tt.T=null;var d=pt.p;try{pt.p=2,nd(t,n,s,l)}finally{pt.p=d,tt.T=h}}function tE(t,n,s,l){var h=tt.T;tt.T=null;var d=pt.p;try{pt.p=8,nd(t,n,s,l)}finally{pt.p=d,tt.T=h}}function nd(t,n,s,l){if(rc){var h=id(l);if(h===null)Hf(t,n,l,sc,s),Ky(t,l);else if(nE(h,t,n,s,l))l.stopPropagation();else if(Ky(t,l),n&4&&-1<eE.indexOf(t)){for(;h!==null;){var d=ri(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=Ye(d.pendingLanes);if(b!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var V=1<<31-un(b);T.entanglements[1]|=V,b&=~V}$i(d),(de&6)===0&&(qu=Qt()+500,io(0))}}break;case 13:T=xa(d,2),T!==null&&Kn(T,d,2),Gu(),ed(d,2)}if(d=id(l),d===null&&Hf(t,n,l,sc,s),d===h)break;h=d}h!==null&&l.stopPropagation()}else Hf(t,n,l,null,s)}}function id(t){return t=li(t),rd(t)}var sc=null;function rd(t){if(sc=null,t=ii(t),t!==null){var n=c(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=f(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return sc=t,null}function Yy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case be:return 2;case We:return 8;case wn:case _i:return 32;case tr:return 268435456;default:return 32}default:return 32}}var sd=!1,is=null,rs=null,ss=null,ho=new Map,fo=new Map,as=[],eE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ky(t,n){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":ho.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(n.pointerId)}}function mo(t,n,s,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},n!==null&&(n=ri(n),n!==null&&Wy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function nE(t,n,s,l,h){switch(n){case"focusin":return is=mo(is,t,n,s,l,h),!0;case"dragenter":return rs=mo(rs,t,n,s,l,h),!0;case"mouseover":return ss=mo(ss,t,n,s,l,h),!0;case"pointerover":var d=h.pointerId;return ho.set(d,mo(ho.get(d)||null,t,n,s,l,h)),!0;case"gotpointercapture":return d=h.pointerId,fo.set(d,mo(fo.get(d)||null,t,n,s,l,h)),!0}return!1}function Xy(t){var n=ii(t.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=f(s),n!==null){t.blockedOn=n,ca(t.priority,function(){if(s.tag===13){var l=Yn();l=Pn(l);var h=xa(s,l);h!==null&&Kn(h,s,l),ed(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=id(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);lr=l,s.target.dispatchEvent(l),lr=null}else return n=ri(s),n!==null&&Wy(n),t.blockedOn=s,!1;n.shift()}return!0}function Zy(t,n,s){ac(t)&&s.delete(n)}function iE(){sd=!1,is!==null&&ac(is)&&(is=null),rs!==null&&ac(rs)&&(rs=null),ss!==null&&ac(ss)&&(ss=null),ho.forEach(Zy),fo.forEach(Zy)}function lc(t,n){t.blockedOn===n&&(t.blockedOn=null,sd||(sd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,iE)))}var oc=null;function Jy(t){oc!==t&&(oc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){oc===t&&(oc=null);for(var n=0;n<t.length;n+=3){var s=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(rd(l||s)===null)continue;break}var d=ri(s);d!==null&&(t.splice(n,3),n-=3,rf(d,{pending:!0,data:h,method:s.method,action:l},l,h))}}))}function po(t){function n(V){return lc(V,t)}is!==null&&lc(is,t),rs!==null&&lc(rs,t),ss!==null&&lc(ss,t),ho.forEach(n),fo.forEach(n);for(var s=0;s<as.length;s++){var l=as[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<as.length&&(s=as[0],s.blockedOn===null);)Xy(s),s.blockedOn===null&&as.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var h=s[l],d=s[l+1],b=h[ke]||null;if(typeof d=="function")b||Jy(s);else if(b){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,b=d[ke]||null)T=b.formAction;else if(rd(h)!==null)continue}else T=b.action;typeof T=="function"?s[l+1]=T:(s.splice(l,3),l-=3),Jy(s)}}}function ad(t){this._internalRoot=t}uc.prototype.render=ad.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=Yn();Qy(s,l,t,n,null,null)},uc.prototype.unmount=ad.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Qy(t.current,2,null,t,null,null),Gu(),n[Dn]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ei();t={blockedOn:null,target:t,priority:n};for(var s=0;s<as.length&&n!==0&&n<as[s].priority;s++);as.splice(s,0,t),s===0&&Xy(t)}};var tv=e.version;if(tv!=="19.1.0")throw Error(a(527,tv,"19.1.0"));pt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(n),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var rE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Ee=cc.inject(rE),ce=cc}catch{}}return yo.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,l="",h=gg,d=yg,b=vg,T=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=Gy(t,1,!1,null,null,s,l,h,d,b,T,null),t[Dn]=n.current,qf(t),new ad(n)},yo.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var l=!1,h="",d=gg,b=yg,T=vg,V=null,$=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(V=s.unstable_transitionCallbacks),s.formState!==void 0&&($=s.formState)),n=Gy(t,1,!0,n,s??null,l,h,d,b,T,V,$),n.context=Fy(null),s=n.current,l=Yn(),l=Pn(l),h=Hr(l),h.callback=null,Gr(s,h,l),s=l,n.current.lanes=s,cn(n,s),$i(n),t[Dn]=n.current,qf(t),new uc(n)},yo.version="19.1.0",yo}var cv;function gE(){if(cv)return ud.exports;cv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ud.exports=pE(),ud.exports}var yE=gE(),vo={},hv;function vE(){if(hv)return vo;hv=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.parse=f,vo.serialize=p;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function f(A,O){const j=new c,W=A.length;if(W<2)return j;const B=(O==null?void 0:O.decode)||E;let F=0;do{const H=A.indexOf("=",F);if(H===-1)break;const P=A.indexOf(";",F),Z=P===-1?W:P;if(H>Z){F=A.lastIndexOf(";",H-1)+1;continue}const st=m(A,F,H),mt=y(A,H,st),M=A.slice(st,mt);if(j[M]===void 0){let R=m(A,H+1,Z),w=y(A,Z,R);const N=B(A.slice(R,w));j[M]=N}F=Z+1}while(F<W);return j}function m(A,O,j){do{const W=A.charCodeAt(O);if(W!==32&&W!==9)return O}while(++O<j);return j}function y(A,O,j){for(;O>j;){const W=A.charCodeAt(--O);if(W!==32&&W!==9)return O+1}return j}function p(A,O,j){const W=(j==null?void 0:j.encode)||encodeURIComponent;if(!r.test(A))throw new TypeError(`argument name is invalid: ${A}`);const B=W(O);if(!e.test(B))throw new TypeError(`argument val is invalid: ${O}`);let F=A+"="+B;if(!j)return F;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);F+="; Max-Age="+j.maxAge}if(j.domain){if(!i.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);F+="; Domain="+j.domain}if(j.path){if(!a.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);F+="; Path="+j.path}if(j.expires){if(!S(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);F+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(F+="; HttpOnly"),j.secure&&(F+="; Secure"),j.partitioned&&(F+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return F}function E(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function S(A){return o.call(A)==="[object Date]"}return vo}vE();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fv="popstate";function _E(r={}){function e(o,c){let{pathname:f="/",search:m="",hash:y=""}=aa(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),xd("",{pathname:f,search:m,hash:y},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(o,c){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let y=o.location.href,p=y.indexOf("#");m=p===-1?y:y.slice(0,p)}return m+"#"+(typeof c=="string"?c:Co(c))}function a(o,c){yi(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return EE(e,i,a,r)}function Me(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function yi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bE(){return Math.random().toString(36).substring(2,10)}function dv(r,e){return{usr:r.state,key:r.key,idx:e}}function xd(r,e,i=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?aa(e):e,state:i,key:e&&e.key||a||bE()}}function Co({pathname:r="/",search:e="",hash:i=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function aa(r){let e={};if(r){let i=r.indexOf("#");i>=0&&(e.hash=r.substring(i),r=r.substring(0,i));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function EE(r,e,i,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,f=o.history,m="POP",y=null,p=E();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function E(){return(f.state||{idx:null}).idx}function S(){m="POP";let B=E(),F=B==null?null:B-p;p=B,y&&y({action:m,location:W.location,delta:F})}function A(B,F){m="PUSH";let H=xd(W.location,B,F);i&&i(H,B),p=E()+1;let P=dv(H,p),Z=W.createHref(H);try{f.pushState(P,"",Z)}catch(st){if(st instanceof DOMException&&st.name==="DataCloneError")throw st;o.location.assign(Z)}c&&y&&y({action:m,location:W.location,delta:1})}function O(B,F){m="REPLACE";let H=xd(W.location,B,F);i&&i(H,B),p=E();let P=dv(H,p),Z=W.createHref(H);f.replaceState(P,"",Z),c&&y&&y({action:m,location:W.location,delta:0})}function j(B){let F=o.location.origin!=="null"?o.location.origin:o.location.href,H=typeof B=="string"?B:Co(B);return H=H.replace(/ $/,"%20"),Me(F,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,F)}let W={get action(){return m},get location(){return r(o,f)},listen(B){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(fv,S),y=B,()=>{o.removeEventListener(fv,S),y=null}},createHref(B){return e(o,B)},createURL:j,encodeLocation(B){let F=j(B);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:A,replace:O,go(B){return f.go(B)}};return W}function I0(r,e,i="/"){return SE(r,e,i,!1)}function SE(r,e,i,a){let o=typeof e=="string"?aa(e):e,c=Cr(o.pathname||"/",i);if(c==null)return null;let f=M0(r);TE(f);let m=null;for(let y=0;m==null&&y<f.length;++y){let p=OE(c);m=NE(f[y],p,a)}return m}function M0(r,e=[],i=[],a=""){let o=(c,f,m)=>{let y={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};y.relativePath.startsWith("/")&&(Me(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length));let p=wr([a,y.relativePath]),E=i.concat(y);c.children&&c.children.length>0&&(Me(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),M0(c.children,e,E,p)),!(c.path==null&&!c.index)&&e.push({path:p,score:IE(p,c.index),routesMeta:E})};return r.forEach((c,f)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,f);else for(let y of N0(c.path))o(c,f,y)}),e}function N0(r){let e=r.split("/");if(e.length===0)return[];let[i,...a]=e,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let f=N0(a.join("/")),m=[];return m.push(...f.map(y=>y===""?c:[c,y].join("/"))),o&&m.push(...f),m.map(y=>r.startsWith("/")&&y===""?"/":y)}function TE(r){r.sort((e,i)=>e.score!==i.score?i.score-e.score:ME(e.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var xE=/^:[\w-]+$/,AE=3,wE=2,RE=1,CE=10,DE=-2,mv=r=>r==="*";function IE(r,e){let i=r.split("/"),a=i.length;return i.some(mv)&&(a+=DE),e&&(a+=wE),i.filter(o=>!mv(o)).reduce((o,c)=>o+(xE.test(c)?AE:c===""?RE:CE),a)}function ME(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function NE(r,e,i=!1){let{routesMeta:a}=r,o={},c="/",f=[];for(let m=0;m<a.length;++m){let y=a[m],p=m===a.length-1,E=c==="/"?e:e.slice(c.length)||"/",S=Rc({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},E),A=y.route;if(!S&&p&&i&&!a[a.length-1].route.index&&(S=Rc({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!S)return null;Object.assign(o,S.params),f.push({params:o,pathname:wr([c,S.pathname]),pathnameBase:zE(wr([c,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(c=wr([c,S.pathnameBase]))}return f}function Rc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,a]=VE(r.path,r.caseSensitive,r.end),o=e.match(i);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((p,{paramName:E,isOptional:S},A)=>{if(E==="*"){let j=m[A]||"";f=c.slice(0,c.length-j.length).replace(/(.)\/+$/,"$1")}const O=m[A];return S&&!O?p[E]=void 0:p[E]=(O||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:f,pattern:r}}function VE(r,e=!1,i=!0){yi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,y)=>(a.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function OE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Cr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,a=r.charAt(i);return a&&a!=="/"?null:r.slice(i)||"/"}function jE(r,e="/"){let{pathname:i,search:a="",hash:o=""}=typeof r=="string"?aa(r):r;return{pathname:i?i.startsWith("/")?i:kE(i,e):e,search:UE(a),hash:PE(o)}}function kE(r,e){let i=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function dd(r,e,i,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LE(r){return r.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function Kd(r){let e=LE(r);return e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase)}function Xd(r,e,i,a=!1){let o;typeof r=="string"?o=aa(r):(o={...r},Me(!o.pathname||!o.pathname.includes("?"),dd("?","pathname","search",o)),Me(!o.pathname||!o.pathname.includes("#"),dd("#","pathname","hash",o)),Me(!o.search||!o.search.includes("#"),dd("#","search","hash",o)));let c=r===""||o.pathname==="",f=c?"/":o.pathname,m;if(f==null)m=i;else{let S=e.length-1;if(!a&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),S-=1;o.pathname=A.join("/")}m=S>=0?e[S]:"/"}let y=jE(o,m),p=f&&f!=="/"&&f.endsWith("/"),E=(c||f===".")&&i.endsWith("/");return!y.pathname.endsWith("/")&&(p||E)&&(y.pathname+="/"),y}var wr=r=>r.join("/").replace(/\/\/+/g,"/"),zE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),UE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,PE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function BE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var V0=["POST","PUT","PATCH","DELETE"];new Set(V0);var qE=["GET",...V0];new Set(qE);var cl=C.createContext(null);cl.displayName="DataRouter";var Gc=C.createContext(null);Gc.displayName="DataRouterState";var O0=C.createContext({isTransitioning:!1});O0.displayName="ViewTransition";var HE=C.createContext(new Map);HE.displayName="Fetchers";var GE=C.createContext(null);GE.displayName="Await";var Mi=C.createContext(null);Mi.displayName="Navigation";var zo=C.createContext(null);zo.displayName="Location";var Ji=C.createContext({outlet:null,matches:[],isDataRoute:!1});Ji.displayName="Route";var Zd=C.createContext(null);Zd.displayName="RouteError";function FE(r,{relative:e}={}){Me(hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=C.useContext(Mi),{hash:o,pathname:c,search:f}=Uo(r,{relative:e}),m=c;return i!=="/"&&(m=c==="/"?i:wr([i,c])),a.createHref({pathname:m,search:f,hash:o})}function hl(){return C.useContext(zo)!=null}function Nr(){return Me(hl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(zo).location}var j0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k0(r){C.useContext(Mi).static||C.useLayoutEffect(r)}function Fc(){let{isDataRoute:r}=C.useContext(Ji);return r?rS():QE()}function QE(){Me(hl(),"useNavigate() may be used only in the context of a <Router> component.");let r=C.useContext(cl),{basename:e,navigator:i}=C.useContext(Mi),{matches:a}=C.useContext(Ji),{pathname:o}=Nr(),c=JSON.stringify(Kd(a)),f=C.useRef(!1);return k0(()=>{f.current=!0}),C.useCallback((y,p={})=>{if(yi(f.current,j0),!f.current)return;if(typeof y=="number"){i.go(y);return}let E=Xd(y,JSON.parse(c),o,p.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:wr([e,E.pathname])),(p.replace?i.replace:i.push)(E,p.state,p)},[e,i,c,o,r])}C.createContext(null);function Uo(r,{relative:e}={}){let{matches:i}=C.useContext(Ji),{pathname:a}=Nr(),o=JSON.stringify(Kd(i));return C.useMemo(()=>Xd(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function $E(r,e){return L0(r,e)}function L0(r,e,i,a){var H;Me(hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:c}=C.useContext(Mi),{matches:f}=C.useContext(Ji),m=f[f.length-1],y=m?m.params:{},p=m?m.pathname:"/",E=m?m.pathnameBase:"/",S=m&&m.route;{let P=S&&S.path||"";z0(p,!S||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let A=Nr(),O;if(e){let P=typeof e=="string"?aa(e):e;Me(E==="/"||((H=P.pathname)==null?void 0:H.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${P.pathname}" was given in the \`location\` prop.`),O=P}else O=A;let j=O.pathname||"/",W=j;if(E!=="/"){let P=E.replace(/^\//,"").split("/");W="/"+j.replace(/^\//,"").split("/").slice(P.length).join("/")}let B=!c&&i&&i.matches&&i.matches.length>0?i.matches:I0(r,{pathname:W});yi(S||B!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),yi(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=ZE(B&&B.map(P=>Object.assign({},P,{params:Object.assign({},y,P.params),pathname:wr([E,o.encodeLocation?o.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?E:wr([E,o.encodeLocation?o.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),f,i,a);return e&&F?C.createElement(zo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},F):F}function WE(){let r=iS(),e=BE(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),i?C.createElement("pre",{style:o},i):null,f)}var YE=C.createElement(WE,null),KE=class extends C.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?C.createElement(Ji.Provider,{value:this.props.routeContext},C.createElement(Zd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XE({routeContext:r,match:e,children:i}){let a=C.useContext(cl);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Ji.Provider,{value:r},i)}function ZE(r,e=[],i=null,a=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let o=r,c=i==null?void 0:i.errors;if(c!=null){let y=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);Me(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let f=!1,m=-1;if(i)for(let y=0;y<o.length;y++){let p=o[y];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=y),p.route.id){let{loaderData:E,errors:S}=i,A=p.route.loader&&!E.hasOwnProperty(p.route.id)&&(!S||S[p.route.id]===void 0);if(p.route.lazy||A){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((y,p,E)=>{let S,A=!1,O=null,j=null;i&&(S=c&&p.route.id?c[p.route.id]:void 0,O=p.route.errorElement||YE,f&&(m<0&&E===0?(z0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,j=null):m===E&&(A=!0,j=p.route.hydrateFallbackElement||null)));let W=e.concat(o.slice(0,E+1)),B=()=>{let F;return S?F=O:A?F=j:p.route.Component?F=C.createElement(p.route.Component,null):p.route.element?F=p.route.element:F=y,C.createElement(XE,{match:p,routeContext:{outlet:y,matches:W,isDataRoute:i!=null},children:F})};return i&&(p.route.ErrorBoundary||p.route.errorElement||E===0)?C.createElement(KE,{location:i.location,revalidation:i.revalidation,component:O,error:S,children:B(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):B()},null)}function Jd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JE(r){let e=C.useContext(cl);return Me(e,Jd(r)),e}function tS(r){let e=C.useContext(Gc);return Me(e,Jd(r)),e}function eS(r){let e=C.useContext(Ji);return Me(e,Jd(r)),e}function tm(r){let e=eS(r),i=e.matches[e.matches.length-1];return Me(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function nS(){return tm("useRouteId")}function iS(){var a;let r=C.useContext(Zd),e=tS("useRouteError"),i=tm("useRouteError");return r!==void 0?r:(a=e.errors)==null?void 0:a[i]}function rS(){let{router:r}=JE("useNavigate"),e=tm("useNavigate"),i=C.useRef(!1);return k0(()=>{i.current=!0}),C.useCallback(async(o,c={})=>{yi(i.current,j0),i.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var pv={};function z0(r,e,i){!e&&!pv[r]&&(pv[r]=!0,yi(!1,i))}C.memo(sS);function sS({routes:r,future:e,state:i}){return L0(r,void 0,i,e)}function ea({to:r,replace:e,state:i,relative:a}){Me(hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Mi);yi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=C.useContext(Ji),{pathname:f}=Nr(),m=Fc(),y=Xd(r,Kd(c),f,a==="path"),p=JSON.stringify(y);return C.useEffect(()=>{m(JSON.parse(p),{replace:e,state:i,relative:a})},[m,p,a,e,i]),null}function Ci(r){Me(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aS({basename:r="/",children:e=null,location:i,navigationType:a="POP",navigator:o,static:c=!1}){Me(!hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:f,navigator:o,static:c,future:{}}),[f,o,c]);typeof i=="string"&&(i=aa(i));let{pathname:y="/",search:p="",hash:E="",state:S=null,key:A="default"}=i,O=C.useMemo(()=>{let j=Cr(y,f);return j==null?null:{location:{pathname:j,search:p,hash:E,state:S,key:A},navigationType:a}},[f,y,p,E,S,A,a]);return yi(O!=null,`<Router basename="${f}"> is not able to match the URL "${y}${p}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:C.createElement(Mi.Provider,{value:m},C.createElement(zo.Provider,{children:e,value:O}))}function lS({children:r,location:e}){return $E(Ad(r),e)}function Ad(r,e=[]){let i=[];return C.Children.forEach(r,(a,o)=>{if(!C.isValidElement(a))return;let c=[...e,o];if(a.type===C.Fragment){i.push.apply(i,Ad(a.props.children,c));return}Me(a.type===Ci,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Me(!a.props.index||!a.props.children,"An index route cannot have child routes.");let f={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(f.children=Ad(a.props.children,c)),i.push(f)}),i}var _c="get",bc="application/x-www-form-urlencoded";function Qc(r){return r!=null&&typeof r.tagName=="string"}function oS(r){return Qc(r)&&r.tagName.toLowerCase()==="button"}function uS(r){return Qc(r)&&r.tagName.toLowerCase()==="form"}function cS(r){return Qc(r)&&r.tagName.toLowerCase()==="input"}function hS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fS(r,e){return r.button===0&&(!e||e==="_self")&&!hS(r)}var hc=null;function dS(){if(hc===null)try{new FormData(document.createElement("form"),0),hc=!1}catch{hc=!0}return hc}var mS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function md(r){return r!=null&&!mS.has(r)?(yi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bc}"`),null):r}function pS(r,e){let i,a,o,c,f;if(uS(r)){let m=r.getAttribute("action");a=m?Cr(m,e):null,i=r.getAttribute("method")||_c,o=md(r.getAttribute("enctype"))||bc,c=new FormData(r)}else if(oS(r)||cS(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=r.getAttribute("formaction")||m.getAttribute("action");if(a=y?Cr(y,e):null,i=r.getAttribute("formmethod")||m.getAttribute("method")||_c,o=md(r.getAttribute("formenctype"))||md(m.getAttribute("enctype"))||bc,c=new FormData(m,r),!dS()){let{name:p,type:E,value:S}=r;if(E==="image"){let A=p?`${p}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else p&&c.append(p,S)}}else{if(Qc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=_c,a=null,o=bc,f=r}return c&&o==="text/plain"&&(f=c,c=void 0),{action:a,method:i.toLowerCase(),encType:o,formData:c,body:f}}function em(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function gS(r,e){if(r.id in e)return e[r.id];try{let i=await import(r.module);return e[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function vS(r,e,i){let a=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await gS(c,i);return f.links?f.links():[]}return[]}));return SS(a.flat(1).filter(yS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function gv(r,e,i,a,o,c){let f=(y,p)=>i[p]?y.route.id!==i[p].route.id:!0,m=(y,p)=>{var E;return i[p].pathname!==y.pathname||((E=i[p].route.path)==null?void 0:E.endsWith("*"))&&i[p].params["*"]!==y.params["*"]};return c==="assets"?e.filter((y,p)=>f(y,p)||m(y,p)):c==="data"?e.filter((y,p)=>{var S;let E=a.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(f(y,p)||m(y,p))return!0;if(y.route.shouldRevalidate){let A=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=i[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function _S(r,e,{includeHydrateFallback:i}={}){return bS(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function bS(r){return[...new Set(r)]}function ES(r){let e={},i=Object.keys(r).sort();for(let a of i)e[a]=r[a];return e}function SS(r,e){let i=new Set;return new Set(e),r.reduce((a,o)=>{let c=JSON.stringify(ES(o));return i.has(c)||(i.add(c),a.push({key:c,link:o})),a},[])}var TS=new Set([100,101,204,205]);function xS(r,e){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname="_root.data":e&&Cr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function U0(){let r=C.useContext(cl);return em(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function AS(){let r=C.useContext(Gc);return em(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var nm=C.createContext(void 0);nm.displayName="FrameworkContext";function P0(){let r=C.useContext(nm);return em(r,"You must render this element inside a <HydratedRouter> element"),r}function wS(r,e){let i=C.useContext(nm),[a,o]=C.useState(!1),[c,f]=C.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:p,onMouseLeave:E,onTouchStart:S}=e,A=C.useRef(null);C.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let W=F=>{F.forEach(H=>{f(H.isIntersecting)})},B=new IntersectionObserver(W,{threshold:.5});return A.current&&B.observe(A.current),()=>{B.disconnect()}}},[r]),C.useEffect(()=>{if(a){let W=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(W)}}},[a]);let O=()=>{o(!0)},j=()=>{o(!1),f(!1)};return i?r!=="intent"?[c,A,{}]:[c,A,{onFocus:_o(m,O),onBlur:_o(y,j),onMouseEnter:_o(p,O),onMouseLeave:_o(E,j),onTouchStart:_o(S,O)}]:[!1,A,{}]}function _o(r,e){return i=>{r&&r(i),i.defaultPrevented||e(i)}}function RS({page:r,...e}){let{router:i}=U0(),a=C.useMemo(()=>I0(i.routes,r,i.basename),[i.routes,r,i.basename]);return a?C.createElement(DS,{page:r,matches:a,...e}):null}function CS(r){let{manifest:e,routeModules:i}=P0(),[a,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return vS(r,e,i).then(f=>{c||o(f)}),()=>{c=!0}},[r,e,i]),a}function DS({page:r,matches:e,...i}){let a=Nr(),{manifest:o,routeModules:c}=P0(),{basename:f}=U0(),{loaderData:m,matches:y}=AS(),p=C.useMemo(()=>gv(r,e,y,o,a,"data"),[r,e,y,o,a]),E=C.useMemo(()=>gv(r,e,y,o,a,"assets"),[r,e,y,o,a]),S=C.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let j=new Set,W=!1;if(e.forEach(F=>{var P;let H=o.routes[F.route.id];!H||!H.hasLoader||(!p.some(Z=>Z.route.id===F.route.id)&&F.route.id in m&&((P=c[F.route.id])!=null&&P.shouldRevalidate)||H.hasClientLoader?W=!0:j.add(F.route.id))}),j.size===0)return[];let B=xS(r,f);return W&&j.size>0&&B.searchParams.set("_routes",e.filter(F=>j.has(F.route.id)).map(F=>F.route.id).join(",")),[B.pathname+B.search]},[f,m,a,o,p,e,r,c]),A=C.useMemo(()=>_S(E,o),[E,o]),O=CS(E);return C.createElement(C.Fragment,null,S.map(j=>C.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...i})),A.map(j=>C.createElement("link",{key:j,rel:"modulepreload",href:j,...i})),O.map(({key:j,link:W})=>C.createElement("link",{key:j,...W})))}function IS(...r){return e=>{r.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var B0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{B0&&(window.__reactRouterVersion="7.5.1")}catch{}function MS({basename:r,children:e,window:i}){let a=C.useRef();a.current==null&&(a.current=_E({window:i,v5Compat:!0}));let o=a.current,[c,f]=C.useState({action:o.action,location:o.location}),m=C.useCallback(y=>{C.startTransition(()=>f(y))},[f]);return C.useLayoutEffect(()=>o.listen(m),[o,m]),C.createElement(aS,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H0=C.forwardRef(function({onClick:e,discover:i="render",prefetch:a="none",relative:o,reloadDocument:c,replace:f,state:m,target:y,to:p,preventScrollReset:E,viewTransition:S,...A},O){let{basename:j}=C.useContext(Mi),W=typeof p=="string"&&q0.test(p),B,F=!1;if(typeof p=="string"&&W&&(B=p,B0))try{let w=new URL(window.location.href),N=p.startsWith("//")?new URL(w.protocol+p):new URL(p),k=Cr(N.pathname,j);N.origin===w.origin&&k!=null?p=k+N.search+N.hash:F=!0}catch{yi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=FE(p,{relative:o}),[P,Z,st]=wS(a,A),mt=OS(p,{replace:f,state:m,target:y,preventScrollReset:E,relative:o,viewTransition:S});function M(w){e&&e(w),w.defaultPrevented||mt(w)}let R=C.createElement("a",{...A,...st,href:B||H,onClick:F||c?e:M,ref:IS(O,Z),target:y,"data-discover":!W&&i==="render"?"true":void 0});return P&&!W?C.createElement(C.Fragment,null,R,C.createElement(RS,{page:H})):R});H0.displayName="Link";var G0=C.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:a="",end:o=!1,style:c,to:f,viewTransition:m,children:y,...p},E){let S=Uo(f,{relative:p.relative}),A=Nr(),O=C.useContext(Gc),{navigator:j,basename:W}=C.useContext(Mi),B=O!=null&&US(S)&&m===!0,F=j.encodeLocation?j.encodeLocation(S).pathname:S.pathname,H=A.pathname,P=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;i||(H=H.toLowerCase(),P=P?P.toLowerCase():null,F=F.toLowerCase()),P&&W&&(P=Cr(P,W)||P);const Z=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let st=H===F||!o&&H.startsWith(F)&&H.charAt(Z)==="/",mt=P!=null&&(P===F||!o&&P.startsWith(F)&&P.charAt(F.length)==="/"),M={isActive:st,isPending:mt,isTransitioning:B},R=st?e:void 0,w;typeof a=="function"?w=a(M):w=[a,st?"active":null,mt?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let N=typeof c=="function"?c(M):c;return C.createElement(H0,{...p,"aria-current":R,className:w,ref:E,style:N,to:f,viewTransition:m},typeof y=="function"?y(M):y)});G0.displayName="NavLink";var NS=C.forwardRef(({discover:r="render",fetcherKey:e,navigate:i,reloadDocument:a,replace:o,state:c,method:f=_c,action:m,onSubmit:y,relative:p,preventScrollReset:E,viewTransition:S,...A},O)=>{let j=LS(),W=zS(m,{relative:p}),B=f.toLowerCase()==="get"?"get":"post",F=typeof m=="string"&&q0.test(m),H=P=>{if(y&&y(P),P.defaultPrevented)return;P.preventDefault();let Z=P.nativeEvent.submitter,st=(Z==null?void 0:Z.getAttribute("formmethod"))||f;j(Z||P.currentTarget,{fetcherKey:e,method:st,navigate:i,replace:o,state:c,relative:p,preventScrollReset:E,viewTransition:S})};return C.createElement("form",{ref:O,method:B,action:W,onSubmit:a?y:H,...A,"data-discover":!F&&r==="render"?"true":void 0})});NS.displayName="Form";function VS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F0(r){let e=C.useContext(cl);return Me(e,VS(r)),e}function OS(r,{target:e,replace:i,state:a,preventScrollReset:o,relative:c,viewTransition:f}={}){let m=Fc(),y=Nr(),p=Uo(r,{relative:c});return C.useCallback(E=>{if(fS(E,e)){E.preventDefault();let S=i!==void 0?i:Co(y)===Co(p);m(r,{replace:S,state:a,preventScrollReset:o,relative:c,viewTransition:f})}},[y,m,p,i,a,e,r,o,c,f])}var jS=0,kS=()=>`__${String(++jS)}__`;function LS(){let{router:r}=F0("useSubmit"),{basename:e}=C.useContext(Mi),i=nS();return C.useCallback(async(a,o={})=>{let{action:c,method:f,encType:m,formData:y,body:p}=pS(a,e);if(o.navigate===!1){let E=o.fetcherKey||kS();await r.fetch(E,i,o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,i])}function zS(r,{relative:e}={}){let{basename:i}=C.useContext(Mi),a=C.useContext(Ji);Me(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...Uo(r||".",{relative:e})},f=Nr();if(r==null){c.search=f.search;let m=new URLSearchParams(c.search),y=m.getAll("index");if(y.some(E=>E==="")){m.delete("index"),y.filter(S=>S).forEach(S=>m.append("index",S));let E=m.toString();c.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:wr([i,c.pathname])),Co(c)}function US(r,e={}){let i=C.useContext(O0);Me(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=F0("useViewTransitionState"),o=Uo(r,{relative:e.relative});if(!i.isTransitioning)return!1;let c=Cr(i.currentLocation.pathname,a)||i.currentLocation.pathname,f=Cr(i.nextLocation.pathname,a)||i.nextLocation.pathname;return Rc(o.pathname,f)!=null||Rc(o.pathname,c)!=null}new TextEncoder;[...TS];const PS=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},BS=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[i++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[i++],f=r[i++],m=r[i++],y=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(y>>10)),e[a++]=String.fromCharCode(56320+(y&1023))}else{const c=r[i++],f=r[i++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},$0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const c=r[o],f=o+1<r.length,m=f?r[o+1]:0,y=o+2<r.length,p=y?r[o+2]:0,E=c>>2,S=(c&3)<<4|m>>4;let A=(m&15)<<2|p>>6,O=p&63;y||(O=64,f||(A=64)),a.push(i[E],i[S],i[A],i[O])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Q0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):BS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const c=i[r.charAt(o++)],m=o<r.length?i[r.charAt(o)]:0;++o;const p=o<r.length?i[r.charAt(o)]:64;++o;const S=o<r.length?i[r.charAt(o)]:64;if(++o,c==null||m==null||p==null||S==null)throw new qS;const A=c<<2|m>>4;if(a.push(A),p!==64){const O=m<<4&240|p>>2;if(a.push(O),S!==64){const j=p<<6&192|S;a.push(j)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(r){const e=Q0(r);return $0.encodeByteArray(e,!0)},Cc=function(r){return HS(r).replace(/\./g,"")},GS=function(r){try{return $0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=()=>FS().__FIREBASE_DEFAULTS__,$S=()=>{if(typeof process>"u"||typeof yv>"u")return;const r=yv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},WS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&GS(r[1]);return e&&JSON.parse(e)},im=()=>{try{return PS()||QS()||$S()||WS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},YS=r=>{var e,i;return(i=(e=im())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[r]},KS=r=>{const e=YS(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},W0=()=>{var r;return(r=im())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Cc(JSON.stringify(i)),Cc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tT(){var r;const e=(r=im())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eT(){return!tT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nT(){try{return typeof indexedDB=="object"}catch{return!1}}function iT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="FirebaseError";class fl extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=rT,Object.setPrototypeOf(this,fl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y0.prototype.create)}}class Y0{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?sT(c,a):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new fl(o,m,a)}}function sT(r,e){return r.replace(aT,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const aT=/\{\$([^}]+)}/g;function Dc(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const c=r[o],f=e[o];if(vv(c)&&vv(f)){if(!Dc(c,f))return!1}else if(c!==f)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function vv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(r){return r&&r._delegate?r._delegate:r}class Do{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new XS;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uT(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&f.resolve(o)}return o}onInit(e,i){var a;const o=this.normalizeInstanceIdentifier(i),c=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;c.add(e),this.onInitCallbacks.set(o,c);const f=this.instances.get(o);return f&&e(f,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:oT(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oT(r){return r===na?void 0:r}function uT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new lT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ae||(ae={}));const hT={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},fT=ae.INFO,dT={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},mT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=dT[e];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class K0{constructor(e){this.name=e,this._logLevel=fT,this._logHandler=mT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const pT=(r,e)=>e.some(i=>r instanceof i);let _v,bv;function gT(){return _v||(_v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yT(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,wd=new WeakMap,Z0=new WeakMap,pd=new WeakMap,rm=new WeakMap;function vT(r){const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{i(hs(r.result)),o()},f=()=>{a(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&X0.set(i,r)}).catch(()=>{}),rm.set(e,r),e}function _T(r){if(wd.has(r))return;const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{i(),o()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});wd.set(r,e)}let Rd={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return wd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Z0.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return hs(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function bT(r){Rd=r(Rd)}function ET(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(gd(this),e,...i);return Z0.set(a,e.sort?e.sort():[e]),hs(a)}:yT().includes(r)?function(...e){return r.apply(gd(this),e),hs(X0.get(this))}:function(...e){return hs(r.apply(gd(this),e))}}function ST(r){return typeof r=="function"?ET(r):(r instanceof IDBTransaction&&_T(r),pT(r,gT())?new Proxy(r,Rd):r)}function hs(r){if(r instanceof IDBRequest)return vT(r);if(pd.has(r))return pd.get(r);const e=ST(r);return e!==r&&(pd.set(r,e),rm.set(e,r)),e}const gd=r=>rm.get(r);function TT(r,e,{blocked:i,upgrade:a,blocking:o,terminated:c}={}){const f=indexedDB.open(r,e),m=hs(f);return a&&f.addEventListener("upgradeneeded",y=>{a(hs(f.result),y.oldVersion,y.newVersion,hs(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const xT=["get","getKey","getAll","getAllKeys","count"],AT=["put","add","delete","clear"],yd=new Map;function Ev(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=AT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||xT.includes(i)))return;const c=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let p=y.store;return a&&(p=p.index(m.shift())),(await Promise.all([p[i](...m),o&&y.done]))[0]};return yd.set(e,c),c}bT(r=>({...r,get:(e,i,a)=>Ev(e,i)||r.get(e,i,a),has:(e,i)=>!!Ev(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(RT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function RT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cd="@firebase/app",Sv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new K0("@firebase/app"),CT="@firebase/app-compat",DT="@firebase/analytics-compat",IT="@firebase/analytics",MT="@firebase/app-check-compat",NT="@firebase/app-check",VT="@firebase/auth",OT="@firebase/auth-compat",jT="@firebase/database",kT="@firebase/data-connect",LT="@firebase/database-compat",zT="@firebase/functions",UT="@firebase/functions-compat",PT="@firebase/installations",BT="@firebase/installations-compat",qT="@firebase/messaging",HT="@firebase/messaging-compat",GT="@firebase/performance",FT="@firebase/performance-compat",QT="@firebase/remote-config",$T="@firebase/remote-config-compat",WT="@firebase/storage",YT="@firebase/storage-compat",KT="@firebase/firestore",XT="@firebase/vertexai",ZT="@firebase/firestore-compat",JT="firebase",tx="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="[DEFAULT]",ex={[Cd]:"fire-core",[CT]:"fire-core-compat",[IT]:"fire-analytics",[DT]:"fire-analytics-compat",[NT]:"fire-app-check",[MT]:"fire-app-check-compat",[VT]:"fire-auth",[OT]:"fire-auth-compat",[jT]:"fire-rtdb",[kT]:"fire-data-connect",[LT]:"fire-rtdb-compat",[zT]:"fire-fn",[UT]:"fire-fn-compat",[PT]:"fire-iid",[BT]:"fire-iid-compat",[qT]:"fire-fcm",[HT]:"fire-fcm-compat",[GT]:"fire-perf",[FT]:"fire-perf-compat",[QT]:"fire-rc",[$T]:"fire-rc-compat",[WT]:"fire-gcs",[YT]:"fire-gcs-compat",[KT]:"fire-fst",[ZT]:"fire-fst-compat",[XT]:"fire-vertex","fire-js":"fire-js",[JT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,nx=new Map,Id=new Map;function Tv(r,e){try{r.container.addComponent(e)}catch(i){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function Mc(r){const e=r.name;if(Id.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;Id.set(e,r);for(const i of Ic.values())Tv(i,r);for(const i of nx.values())Tv(i,r);return!0}function ix(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function rx(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new Y0("app","Firebase",sx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,i,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=tx;function J0(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Dd,automaticDataCollectionEnabled:!1},e),o=a.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(i||(i=W0()),!i)throw fs.create("no-options");const c=Ic.get(o);if(c){if(Dc(i,c.options)&&Dc(a,c.config))return c;throw fs.create("duplicate-app",{appName:o})}const f=new cT(o);for(const y of Id.values())f.addComponent(y);const m=new ax(i,a,f);return Ic.set(o,m),m}function ox(r=Dd){const e=Ic.get(r);if(!e&&r===Dd&&W0())return J0();if(!e)throw fs.create("no-app",{appName:r});return e}function tl(r,e,i){var a;let o=(a=ex[r])!==null&&a!==void 0?a:r;i&&(o+=`-${i}`);const c=o.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(m.join(" "));return}Mc(new Do(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebase-heartbeat-database",cx=1,Io="firebase-heartbeat-store";let vd=null;function t_(){return vd||(vd=TT(ux,cx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Io)}catch(i){console.warn(i)}}}}).catch(r=>{throw fs.create("idb-open",{originalErrorMessage:r.message})})),vd}async function hx(r){try{const i=(await t_()).transaction(Io),a=await i.objectStore(Io).get(e_(r));return await i.done,a}catch(e){if(e instanceof fl)Dr.warn(e.message);else{const i=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(i.message)}}}async function xv(r,e){try{const a=(await t_()).transaction(Io,"readwrite");await a.objectStore(Io).put(e,e_(r)),await a.done}catch(i){if(i instanceof fl)Dr.warn(i.message);else{const a=fs.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Dr.warn(a.message)}}}function e_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=1024,dx=30;class mx{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new gx(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Av();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>dx){const f=yx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Dr.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Av(),{heartbeatsToSend:a,unsentEntries:o}=px(this._heartbeatsCache.heartbeats),c=Cc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(i){return Dr.warn(i),""}}}function Av(){return new Date().toISOString().substring(0,10)}function px(r,e=fx){const i=[];let a=r.slice();for(const o of r){const c=i.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),wv(i)>e){c.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),wv(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class gx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nT()?iT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await hx(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function wv(r){return Cc(JSON.stringify({version:2,heartbeats:r})).length}function yx(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(r){Mc(new Do("platform-logger",e=>new wT(e),"PRIVATE")),Mc(new Do("heartbeat",e=>new mx(e),"PRIVATE")),tl(Cd,Sv,r),tl(Cd,Sv,"esm2017"),tl("fire-js","")}vx("");var _x="firebase",bx="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tl(_x,bx,"app");var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,n_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function w(){}w.prototype=R.prototype,M.D=R.prototype,M.prototype=new w,M.prototype.constructor=M,M.C=function(N,k,z){for(var D=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)D[Dt-2]=arguments[Dt];return R.prototype[k].apply(N,D)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,R,w){w||(w=0);var N=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)N[k]=R.charCodeAt(w++)|R.charCodeAt(w++)<<8|R.charCodeAt(w++)<<16|R.charCodeAt(w++)<<24;else for(k=0;16>k;++k)N[k]=R[w++]|R[w++]<<8|R[w++]<<16|R[w++]<<24;R=M.g[0],w=M.g[1],k=M.g[2];var z=M.g[3],D=R+(z^w&(k^z))+N[0]+3614090360&4294967295;R=w+(D<<7&4294967295|D>>>25),D=z+(k^R&(w^k))+N[1]+3905402710&4294967295,z=R+(D<<12&4294967295|D>>>20),D=k+(w^z&(R^w))+N[2]+606105819&4294967295,k=z+(D<<17&4294967295|D>>>15),D=w+(R^k&(z^R))+N[3]+3250441966&4294967295,w=k+(D<<22&4294967295|D>>>10),D=R+(z^w&(k^z))+N[4]+4118548399&4294967295,R=w+(D<<7&4294967295|D>>>25),D=z+(k^R&(w^k))+N[5]+1200080426&4294967295,z=R+(D<<12&4294967295|D>>>20),D=k+(w^z&(R^w))+N[6]+2821735955&4294967295,k=z+(D<<17&4294967295|D>>>15),D=w+(R^k&(z^R))+N[7]+4249261313&4294967295,w=k+(D<<22&4294967295|D>>>10),D=R+(z^w&(k^z))+N[8]+1770035416&4294967295,R=w+(D<<7&4294967295|D>>>25),D=z+(k^R&(w^k))+N[9]+2336552879&4294967295,z=R+(D<<12&4294967295|D>>>20),D=k+(w^z&(R^w))+N[10]+4294925233&4294967295,k=z+(D<<17&4294967295|D>>>15),D=w+(R^k&(z^R))+N[11]+2304563134&4294967295,w=k+(D<<22&4294967295|D>>>10),D=R+(z^w&(k^z))+N[12]+1804603682&4294967295,R=w+(D<<7&4294967295|D>>>25),D=z+(k^R&(w^k))+N[13]+4254626195&4294967295,z=R+(D<<12&4294967295|D>>>20),D=k+(w^z&(R^w))+N[14]+2792965006&4294967295,k=z+(D<<17&4294967295|D>>>15),D=w+(R^k&(z^R))+N[15]+1236535329&4294967295,w=k+(D<<22&4294967295|D>>>10),D=R+(k^z&(w^k))+N[1]+4129170786&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^k&(R^w))+N[6]+3225465664&4294967295,z=R+(D<<9&4294967295|D>>>23),D=k+(R^w&(z^R))+N[11]+643717713&4294967295,k=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(k^z))+N[0]+3921069994&4294967295,w=k+(D<<20&4294967295|D>>>12),D=R+(k^z&(w^k))+N[5]+3593408605&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^k&(R^w))+N[10]+38016083&4294967295,z=R+(D<<9&4294967295|D>>>23),D=k+(R^w&(z^R))+N[15]+3634488961&4294967295,k=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(k^z))+N[4]+3889429448&4294967295,w=k+(D<<20&4294967295|D>>>12),D=R+(k^z&(w^k))+N[9]+568446438&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^k&(R^w))+N[14]+3275163606&4294967295,z=R+(D<<9&4294967295|D>>>23),D=k+(R^w&(z^R))+N[3]+4107603335&4294967295,k=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(k^z))+N[8]+1163531501&4294967295,w=k+(D<<20&4294967295|D>>>12),D=R+(k^z&(w^k))+N[13]+2850285829&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^k&(R^w))+N[2]+4243563512&4294967295,z=R+(D<<9&4294967295|D>>>23),D=k+(R^w&(z^R))+N[7]+1735328473&4294967295,k=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(k^z))+N[12]+2368359562&4294967295,w=k+(D<<20&4294967295|D>>>12),D=R+(w^k^z)+N[5]+4294588738&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^k)+N[8]+2272392833&4294967295,z=R+(D<<11&4294967295|D>>>21),D=k+(z^R^w)+N[11]+1839030562&4294967295,k=z+(D<<16&4294967295|D>>>16),D=w+(k^z^R)+N[14]+4259657740&4294967295,w=k+(D<<23&4294967295|D>>>9),D=R+(w^k^z)+N[1]+2763975236&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^k)+N[4]+1272893353&4294967295,z=R+(D<<11&4294967295|D>>>21),D=k+(z^R^w)+N[7]+4139469664&4294967295,k=z+(D<<16&4294967295|D>>>16),D=w+(k^z^R)+N[10]+3200236656&4294967295,w=k+(D<<23&4294967295|D>>>9),D=R+(w^k^z)+N[13]+681279174&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^k)+N[0]+3936430074&4294967295,z=R+(D<<11&4294967295|D>>>21),D=k+(z^R^w)+N[3]+3572445317&4294967295,k=z+(D<<16&4294967295|D>>>16),D=w+(k^z^R)+N[6]+76029189&4294967295,w=k+(D<<23&4294967295|D>>>9),D=R+(w^k^z)+N[9]+3654602809&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^k)+N[12]+3873151461&4294967295,z=R+(D<<11&4294967295|D>>>21),D=k+(z^R^w)+N[15]+530742520&4294967295,k=z+(D<<16&4294967295|D>>>16),D=w+(k^z^R)+N[2]+3299628645&4294967295,w=k+(D<<23&4294967295|D>>>9),D=R+(k^(w|~z))+N[0]+4096336452&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~k))+N[7]+1126891415&4294967295,z=R+(D<<10&4294967295|D>>>22),D=k+(R^(z|~w))+N[14]+2878612391&4294967295,k=z+(D<<15&4294967295|D>>>17),D=w+(z^(k|~R))+N[5]+4237533241&4294967295,w=k+(D<<21&4294967295|D>>>11),D=R+(k^(w|~z))+N[12]+1700485571&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~k))+N[3]+2399980690&4294967295,z=R+(D<<10&4294967295|D>>>22),D=k+(R^(z|~w))+N[10]+4293915773&4294967295,k=z+(D<<15&4294967295|D>>>17),D=w+(z^(k|~R))+N[1]+2240044497&4294967295,w=k+(D<<21&4294967295|D>>>11),D=R+(k^(w|~z))+N[8]+1873313359&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~k))+N[15]+4264355552&4294967295,z=R+(D<<10&4294967295|D>>>22),D=k+(R^(z|~w))+N[6]+2734768916&4294967295,k=z+(D<<15&4294967295|D>>>17),D=w+(z^(k|~R))+N[13]+1309151649&4294967295,w=k+(D<<21&4294967295|D>>>11),D=R+(k^(w|~z))+N[4]+4149444226&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~k))+N[11]+3174756917&4294967295,z=R+(D<<10&4294967295|D>>>22),D=k+(R^(z|~w))+N[2]+718787259&4294967295,k=z+(D<<15&4294967295|D>>>17),D=w+(z^(k|~R))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+z&4294967295}a.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var w=R-this.blockSize,N=this.B,k=this.h,z=0;z<R;){if(k==0)for(;z<=w;)o(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<R;)if(N[k++]=M.charCodeAt(z++),k==this.blockSize){o(this,N),k=0;break}}else for(;z<R;)if(N[k++]=M[z++],k==this.blockSize){o(this,N),k=0;break}}this.h=k,this.o+=R},a.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var w=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=w&255,w/=256;for(this.u(M),M=Array(16),R=w=0;4>R;++R)for(var N=0;32>N;N+=8)M[w++]=this.g[R]>>>N&255;return M};function c(M,R){var w=m;return Object.prototype.hasOwnProperty.call(w,M)?w[M]:w[M]=R(M)}function f(M,R){this.h=R;for(var w=[],N=!0,k=M.length-1;0<=k;k--){var z=M[k]|0;N&&z==R||(w[k]=z,N=!1)}this.g=w}var m={};function y(M){return-128<=M&&128>M?c(M,function(R){return new f([R|0],0>R?-1:0)}):new f([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return S;if(0>M)return B(p(-M));for(var R=[],w=1,N=0;M>=w;N++)R[N]=M/w|0,w*=4294967296;return new f(R,0)}function E(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return B(E(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=p(Math.pow(R,8)),N=S,k=0;k<M.length;k+=8){var z=Math.min(8,M.length-k),D=parseInt(M.substring(k,k+z),R);8>z?(z=p(Math.pow(R,z)),N=N.j(z).add(p(D))):(N=N.j(w),N=N.add(p(D)))}return N}var S=y(0),A=y(1),O=y(16777216);r=f.prototype,r.m=function(){if(W(this))return-B(this).m();for(var M=0,R=1,w=0;w<this.g.length;w++){var N=this.i(w);M+=(0<=N?N:4294967296+N)*R,R*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(j(this))return"0";if(W(this))return"-"+B(this).toString(M);for(var R=p(Math.pow(M,6)),w=this,N="";;){var k=Z(w,R).g;w=F(w,k.j(R));var z=((0<w.g.length?w.g[0]:w.h)>>>0).toString(M);if(w=k,j(w))return z+N;for(;6>z.length;)z="0"+z;N=z+N}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function j(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function W(M){return M.h==-1}r.l=function(M){return M=F(this,M),W(M)?-1:j(M)?0:1};function B(M){for(var R=M.g.length,w=[],N=0;N<R;N++)w[N]=~M.g[N];return new f(w,~M.h).add(A)}r.abs=function(){return W(this)?B(this):this},r.add=function(M){for(var R=Math.max(this.g.length,M.g.length),w=[],N=0,k=0;k<=R;k++){var z=N+(this.i(k)&65535)+(M.i(k)&65535),D=(z>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);N=D>>>16,z&=65535,D&=65535,w[k]=D<<16|z}return new f(w,w[w.length-1]&-2147483648?-1:0)};function F(M,R){return M.add(B(R))}r.j=function(M){if(j(this)||j(M))return S;if(W(this))return W(M)?B(this).j(B(M)):B(B(this).j(M));if(W(M))return B(this.j(B(M)));if(0>this.l(O)&&0>M.l(O))return p(this.m()*M.m());for(var R=this.g.length+M.g.length,w=[],N=0;N<2*R;N++)w[N]=0;for(N=0;N<this.g.length;N++)for(var k=0;k<M.g.length;k++){var z=this.i(N)>>>16,D=this.i(N)&65535,Dt=M.i(k)>>>16,Ot=M.i(k)&65535;w[2*N+2*k]+=D*Ot,H(w,2*N+2*k),w[2*N+2*k+1]+=z*Ot,H(w,2*N+2*k+1),w[2*N+2*k+1]+=D*Dt,H(w,2*N+2*k+1),w[2*N+2*k+2]+=z*Dt,H(w,2*N+2*k+2)}for(N=0;N<R;N++)w[N]=w[2*N+1]<<16|w[2*N];for(N=R;N<2*R;N++)w[N]=0;return new f(w,0)};function H(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function P(M,R){this.g=M,this.h=R}function Z(M,R){if(j(R))throw Error("division by zero");if(j(M))return new P(S,S);if(W(M))return R=Z(B(M),R),new P(B(R.g),B(R.h));if(W(R))return R=Z(M,B(R)),new P(B(R.g),R.h);if(30<M.g.length){if(W(M)||W(R))throw Error("slowDivide_ only works with positive integers.");for(var w=A,N=R;0>=N.l(M);)w=st(w),N=st(N);var k=mt(w,1),z=mt(N,1);for(N=mt(N,2),w=mt(w,2);!j(N);){var D=z.add(N);0>=D.l(M)&&(k=k.add(w),z=D),N=mt(N,1),w=mt(w,1)}return R=F(M,k.j(R)),new P(k,R)}for(k=S;0<=M.l(R);){for(w=Math.max(1,Math.floor(M.m()/R.m())),N=Math.ceil(Math.log(w)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),z=p(w),D=z.j(R);W(D)||0<D.l(M);)w-=N,z=p(w),D=z.j(R);j(z)&&(z=A),k=k.add(z),M=F(M,D)}return new P(k,M)}r.A=function(M){return Z(this,M).h},r.and=function(M){for(var R=Math.max(this.g.length,M.g.length),w=[],N=0;N<R;N++)w[N]=this.i(N)&M.i(N);return new f(w,this.h&M.h)},r.or=function(M){for(var R=Math.max(this.g.length,M.g.length),w=[],N=0;N<R;N++)w[N]=this.i(N)|M.i(N);return new f(w,this.h|M.h)},r.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),w=[],N=0;N<R;N++)w[N]=this.i(N)^M.i(N);return new f(w,this.h^M.h)};function st(M){for(var R=M.g.length+1,w=[],N=0;N<R;N++)w[N]=M.i(N)<<1|M.i(N-1)>>>31;return new f(w,M.h)}function mt(M,R){var w=R>>5;R%=32;for(var N=M.g.length-w,k=[],z=0;z<N;z++)k[z]=0<R?M.i(z+w)>>>R|M.i(z+w+1)<<32-R:M.i(z+w);return new f(k,M.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,n_=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=E,ds=f}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var i_,bo,r_,Ec,Md,s_,a_,l_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=i(this);function o(u,g){if(g)t:{var _=a;u=u.split(".");for(var x=0;x<u.length-1;x++){var G=u[x];if(!(G in _))break t;_=_[G]}u=u[u.length-1],x=_[u],g=g(x),g!=x&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function c(u,g){u instanceof String&&(u+="");var _=0,x=!1,G={next:function(){if(!x&&_<u.length){var et=_++;return{value:g(et,u[et]),done:!1}}return x=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(u){return u||function(){return c(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function E(u,g,_){return u.call.apply(u.bind,arguments)}function S(u,g,_){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,x),u.apply(g,G)}}return function(){return u.apply(g,arguments)}}function A(u,g,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,A.apply(null,arguments)}function O(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function j(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(x,G,et){for(var vt=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)vt[ne-2]=arguments[ne];return g.prototype[G].apply(x,vt)}}function W(u){const g=u.length;if(0<g){const _=Array(g);for(let x=0;x<g;x++)_[x]=u[x];return _}return[]}function B(u,g){for(let _=1;_<arguments.length;_++){const x=arguments[_];if(y(x)){const G=u.length||0,et=x.length||0;u.length=G+et;for(let vt=0;vt<et;vt++)u[G+vt]=x[vt]}else u.push(x)}}class F{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function H(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function Z(u){return Z[" "](u),u}Z[" "]=function(){};var st=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function mt(u,g,_){for(const x in u)g.call(_,u[x],x,u)}function M(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function R(u){const g={};for(const _ in u)g[_]=u[_];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,g){let _,x;for(let G=1;G<arguments.length;G++){x=arguments[G];for(_ in x)u[_]=x[_];for(let et=0;et<w.length;et++)_=w[et],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function k(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function z(u){m.setTimeout(()=>{throw u},0)}function D(){var u=Ft;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Dt{constructor(){this.h=this.g=null}add(g,_){const x=Ot.get();x.set(g,_),this.h?this.h.next=x:this.g=x,this.h=x}}var Ot=new F(()=>new tt,u=>u.reset());class tt{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,At=!1,Ft=new Dt,L=()=>{const u=m.Promise.resolve(void 0);pt=()=>{u.then(lt)}};var lt=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(_){z(_)}var g=Ot;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}At=!1};function yt(){this.s=this.s,this.C=this.C}yt.prototype.s=!1,yt.prototype.ma=function(){this.s||(this.s=!0,this.N())},yt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var Rt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return u}();function Ct(u,g){if(ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(st){t:{try{Z(g.nodeName);var G=!0;break t}catch{}G=!1}G||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:J[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ct.aa.h.call(this)}}j(Ct,ft);var J={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),Et=0;function kt(u,g,_,x,G){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!x,this.ha=G,this.key=++Et,this.da=this.fa=!1}function Wt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qt(u){this.src=u,this.g={},this.h=0}qt.prototype.add=function(u,g,_,x,G){var et=u.toString();u=this.g[et],u||(u=this.g[et]=[],this.h++);var vt=Mt(u,g,x,G);return-1<vt?(g=u[vt],_||(g.fa=!1)):(g=new kt(g,this.src,et,!!x,G),g.fa=_,u.push(g)),g};function rt(u,g){var _=g.type;if(_ in u.g){var x=u.g[_],G=Array.prototype.indexOf.call(x,g,void 0),et;(et=0<=G)&&Array.prototype.splice.call(x,G,1),et&&(Wt(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Mt(u,g,_,x){for(var G=0;G<u.length;++G){var et=u[G];if(!et.da&&et.listener==g&&et.capture==!!_&&et.ha==x)return G}return-1}var jt="closure_lm_"+(1e6*Math.random()|0),It={};function Lt(u,g,_,x,G){if(Array.isArray(g)){for(var et=0;et<g.length;et++)Lt(u,g[et],_,x,G);return null}return _=er(_),u&&u[_t]?u.K(g,_,p(x)?!!x.capture:!1,G):Qt(u,g,_,!1,x,G)}function Qt(u,g,_,x,G,et){if(!g)throw Error("Invalid event type");var vt=p(G)?!!G.capture:!!G,ne=tr(u);if(ne||(u[jt]=ne=new qt(u)),_=ne.add(g,_,x,vt,et),_.proxy)return _;if(x=_e(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)Rt||(G=vt),G===void 0&&(G=!1),u.addEventListener(g.toString(),x,G);else if(u.attachEvent)u.attachEvent(wn(g.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function _e(){function u(_){return g.call(u.src,u.listener,_)}const g=_i;return u}function be(u,g,_,x,G){if(Array.isArray(g))for(var et=0;et<g.length;et++)be(u,g[et],_,x,G);else x=p(x)?!!x.capture:!!x,_=er(_),u&&u[_t]?(u=u.i,g=String(g).toString(),g in u.g&&(et=u.g[g],_=Mt(et,_,x,G),-1<_&&(Wt(et[_]),Array.prototype.splice.call(et,_,1),et.length==0&&(delete u.g[g],u.h--)))):u&&(u=tr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Mt(g,_,x,G)),(_=-1<u?g[u]:null)&&We(_))}function We(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[_t])rt(g.i,u);else{var _=u.type,x=u.proxy;g.removeEventListener?g.removeEventListener(_,x,u.capture):g.detachEvent?g.detachEvent(wn(_),x):g.addListener&&g.removeListener&&g.removeListener(x),(_=tr(g))?(rt(_,u),_.h==0&&(_.src=null,g[jt]=null)):Wt(u)}}}function wn(u){return u in It?It[u]:It[u]="on"+u}function _i(u,g){if(u.da)u=!0;else{g=new Ct(g,this);var _=u.listener,x=u.ha||u.src;u.fa&&We(u),u=_.call(x,g)}return u}function tr(u){return u=u[jt],u instanceof qt?u:null}var Zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function er(u){return typeof u=="function"?u:(u[Zn]||(u[Zn]=function(g){return u.handleEvent(g)}),u[Zn])}function Ee(){yt.call(this),this.i=new qt(this),this.M=this,this.F=null}j(Ee,yt),Ee.prototype[_t]=!0,Ee.prototype.removeEventListener=function(u,g,_,x){be(this,u,g,_,x)};function ce(u,g){var _,x=u.F;if(x)for(_=[];x;x=x.F)_.push(x);if(u=u.M,x=g.type||g,typeof g=="string")g=new ft(g,u);else if(g instanceof ft)g.target=g.target||u;else{var G=g;g=new ft(x,u),N(g,G)}if(G=!0,_)for(var et=_.length-1;0<=et;et--){var vt=g.g=_[et];G=Rn(vt,x,!0,g)&&G}if(vt=g.g=u,G=Rn(vt,x,!0,g)&&G,G=Rn(vt,x,!1,g)&&G,_)for(et=0;et<_.length;et++)vt=g.g=_[et],G=Rn(vt,x,!1,g)&&G}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],x=0;x<_.length;x++)Wt(_[x]);delete u.g[g],u.h--}}this.F=null},Ee.prototype.K=function(u,g,_,x){return this.i.add(String(u),g,!1,_,x)},Ee.prototype.L=function(u,g,_,x){return this.i.add(String(u),g,!0,_,x)};function Rn(u,g,_,x){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var G=!0,et=0;et<g.length;++et){var vt=g[et];if(vt&&!vt.da&&vt.capture==_){var ne=vt.listener,Ke=vt.ha||vt.src;vt.fa&&rt(u.i,vt),G=ne.call(Ke,x)!==!1&&G}}return G&&!x.defaultPrevented}function un(u,g,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(u,g||0)}function nr(u){u.g=un(()=>{u.g=null,u.i&&(u.i=!1,nr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class yl extends yt{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:nr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ir(u){yt.call(this),this.h=u,this.g={}}j(ir,yt);var Jn=[];function Cn(u){mt(u.g,function(g,_){this.g.hasOwnProperty(_)&&We(g)},u),u.g={}}ir.prototype.N=function(){ir.aa.N.call(this),Cn(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=m.JSON.stringify,rr=m.JSON.parse,ti=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Vr(){}Vr.prototype.h=null;function Or(u){return u.h||(u.h=u.i())}function xs(){}var ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cn(){ft.call(this,"d")}j(cn,ft);function jr(){ft.call(this,"c")}j(jr,ft);var ni={},bi=null;function Pn(){return bi=bi||new Ee}ni.La="serverreachability";function sr(u){ft.call(this,ni.La,u)}j(sr,ft);function Ei(u){const g=Pn();ce(g,new sr(g))}ni.STAT_EVENT="statevent";function ca(u,g){ft.call(this,ni.STAT_EVENT,u),this.stat=g}j(ca,ft);function Te(u){const g=Pn();ce(g,new ca(g,u))}ni.Ma="timingevent";function Ue(u,g){ft.call(this,ni.Ma,u),this.size=g}j(Ue,ft);function ke(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function kr(u,g,_,x,G,et){u.info(function(){if(u.g)if(et)for(var vt="",ne=et.split("&"),Ke=0;Ke<ne.length;Ke++){var ie=ne[Ke].split("=");if(1<ie.length){var rn=ie[0];ie=ie[1];var Xe=rn.split("_");vt=2<=Xe.length&&Xe[1]=="type"?vt+(rn+"="+ie+"&"):vt+(rn+"=redacted&")}}else vt=null;else vt=et;return"XMLHTTP REQ ("+x+") [attempt "+G+"]: "+g+`
`+_+`
`+vt})}function vl(u,g,_,x,G,et,vt){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+G+"]: "+g+`
`+_+`
`+et+" "+vt})}function Ni(u,g,_,x){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Vi(u,_)+(x?" "+x:"")})}function ha(u,g){u.info(function(){return"TIMEOUT: "+g})}Dn.prototype.info=function(){};function Vi(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var x=_[u];if(!(2>x.length)){var G=x[1];if(Array.isArray(G)&&!(1>G.length)){var et=G[0];if(et!="noop"&&et!="stop"&&et!="close")for(var vt=1;vt<G.length;vt++)G[vt]=""}}}}return Ye(_)}catch{return g}}var Si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ri;function si(){}j(si,Vr),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ri=new si;function hn(u,g,_,x){this.j=u,this.i=g,this.l=_,this.R=x||1,this.U=new ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}var As={},Lr={};function Bn(u,g,_){u.L=1,u.v=Ms(Hn(g)),u.m=_,u.P=!0,Ti(u,null)}function Ti(u,g){u.F=Date.now(),Oi(u),u.A=Hn(u.v);var _=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),Sl(_.i,"t",x),u.C=0,_=u.j.J,u.h=new Ne,u.g=lu(u.j,_?g:null,!u.m),0<u.O&&(u.M=new yl(A(u.Y,u,u.g),u.O)),g=u.U,_=u.g,x=u.ca;var G="readystatechange";Array.isArray(G)||(G&&(Jn[0]=G.toString()),G=Jn);for(var et=0;et<G.length;et++){var vt=Lt(_,G[et],x||g.handleEvent,!1,g.h||g);if(!vt)break;g.g[vt.key]=vt}g=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Ei(),kr(u.i,u.u,u.A,u.l,u.R,u.m)}hn.prototype.ca=function(u){u=u.target;const g=this.M;g&&ui(u)==3?g.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)t:{const Xe=ui(this.g);var g=this.g.Ba();const fr=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||Jo(this.g)))){this.J||Xe!=4||g==7||(g==8||0>=fr?Ei(3):Ei(2)),I(this);var _=this.g.Z();this.X=_;e:if(ws(this)){var x=Jo(this.g);u="";var G=x.length,et=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nt(this),Y(this);var vt="";break e}this.h.i=new m.TextDecoder}for(g=0;g<G;g++)this.h.h=!0,u+=this.h.i.decode(x[g],{stream:!(et&&g==G-1)});x.length=0,this.h.g+=u,this.C=0,vt=this.h.g}else vt=this.g.oa();if(this.o=_==200,vl(this.i,this.u,this.A,this.l,this.R,Xe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var ne,Ke=this.g;if((ne=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ne)){var ie=ne;break e}}ie=null}if(_=ie)Ni(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ot(this,_);else{this.o=!1,this.s=3,Te(12),nt(this),Y(this);break t}}if(this.P){_=!0;let fn;for(;!this.J&&this.C<vt.length;)if(fn=Rs(this,vt),fn==Lr){Xe==4&&(this.s=4,Te(14),_=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==As){this.s=4,Te(15),Ni(this.i,this.l,vt,"[Invalid Chunk]"),_=!1;break}else Ni(this.i,this.l,fn,null),ot(this,fn);if(ws(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||vt.length!=0||this.h.h||(this.s=1,Te(16),_=!1),this.o=this.o&&_,!_)Ni(this.i,this.l,vt,"[Invalid Chunked Response]"),nt(this),Y(this);else if(0<vt.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+vt.length),Us(rn),rn.M=!0,Te(11))}}else Ni(this.i,this.l,vt,null),ot(this,vt);Xe==4&&nt(this),this.o&&!this.J&&(Xe==4?ru(this.j,this):(this.o=!1,Oi(this)))}else mh(this.g),_==400&&0<vt.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),nt(this),Y(this)}}}catch{}finally{}};function ws(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Rs(u,g){var _=u.C,x=g.indexOf(`
`,_);return x==-1?Lr:(_=Number(g.substring(_,x)),isNaN(_)?As:(x+=1,x+_>g.length?Lr:(g=g.slice(x,x+_),u.C=x+_,g)))}hn.prototype.cancel=function(){this.J=!0,nt(this)};function Oi(u){u.S=Date.now()+u.I,Cs(u,u.I)}function Cs(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ke(A(u.ba,u),g)}function I(u){u.B&&(m.clearTimeout(u.B),u.B=null)}hn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ha(this.i,this.A),this.L!=2&&(Ei(),Te(17)),nt(this),this.s=2,Y(this)):Cs(this,this.S-u)};function Y(u){u.j.G==0||u.J||ru(u.j,u)}function nt(u){I(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Cn(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function ot(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||xe(_.h,u))){if(!u.K&&xe(_.h,u)&&_.G==3){try{var x=_.Da.g.parse(g)}catch{x=null}if(Array.isArray(x)&&x.length==3){var G=x;if(G[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)_a(_),ya(_);else break t;Rl(_),Te(18)}}else _.za=G[1],0<_.za-_.T&&37500>G[2]&&_.F&&_.v==0&&!_.C&&(_.C=ke(A(_.Za,_),6e3));if(1>=le(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else hr(_,11)}else if((u.K||_.g==u)&&_a(_),!H(g))for(G=_.Da.g.parse(g),g=0;g<G.length;g++){let ie=G[g];if(_.T=ie[0],ie=ie[1],_.G==2)if(ie[0]=="c"){_.K=ie[1],_.ia=ie[2];const rn=ie[3];rn!=null&&(_.la=rn,_.j.info("VER="+_.la));const Xe=ie[4];Xe!=null&&(_.Aa=Xe,_.j.info("SVER="+_.Aa));const fr=ie[5];fr!=null&&typeof fr=="number"&&0<fr&&(x=1.5*fr,_.L=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const fn=u.g;if(fn){const qi=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var et=x.h;et.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||(et.j=et.l,et.g=new Set,et.h&&(Re(et,et.h),et.h=null))}if(x.D){const Dl=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(x.ya=Dl,pe(x.I,x.D,Dl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),x=_;var vt=u;if(x.qa=au(x,x.J?x.ia:null,x.W),vt.K){Ae(x.h,vt);var ne=vt,Ke=x.L;Ke&&(ne.I=Ke),ne.B&&(I(ne),Oi(ne)),x.g=vt}else nu(x);0<_.i.length&&va(_)}else ie[0]!="stop"&&ie[0]!="close"||hr(_,7);else _.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?hr(_,7):Al(_):ie[0]!="noop"&&_.l&&_.l.ta(ie),_.v=0)}}Ei(4)}catch{}}var dt=class{constructor(u,g){this.g=u,this.map=g}};function gt(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function le(u){return u.h?1:u.g?u.g.size:0}function xe(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Re(u,g){u.g?u.g.add(g):u.h=g}function Ae(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}gt.prototype.cancel=function(){if(this.i=ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ji(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return W(u.i)}function zr(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var g=[],_=u.length,x=0;x<_;x++)g.push(u[x]);return g}g=[],_=0;for(x in u)g[_++]=u[x];return g}function qn(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const x in u)g[_++]=x;return g}}}function _l(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=qn(u),x=zr(u),G=x.length,et=0;et<G;et++)g.call(void 0,x[et],_&&_[et],u)}var Ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hh(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var x=u[_].indexOf("="),G=null;if(0<=x){var et=u[_].substring(0,x);G=u[_].substring(x+1)}else et=u[_];g(et,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function He(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof He){this.h=u.h,Is(this,u.j),this.o=u.o,this.g=u.g,Ur(this,u.s),this.l=u.l;var g=u.i,_=new lr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),ar(this,_),this.m=u.m}else u&&(g=String(u).match(Ds))?(this.h=!1,Is(this,g[1]||"",!0),this.o=ai(g[2]||""),this.g=ai(g[3]||"",!0),Ur(this,g[4]),this.l=ai(g[5]||"",!0),ar(this,g[6]||"",!0),this.m=ai(g[7]||"")):(this.h=!1,this.i=new lr(null,this.h))}He.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Ns(g,bl,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ns(g,bl,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ns(_,_.charAt(0)=="/"?fh:El,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ns(_,fa)),u.join("")};function Hn(u){return new He(u)}function Is(u,g,_){u.j=_?ai(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ur(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function ar(u,g,_){g instanceof lr?(u.i=g,Xo(u.i,u.h)):(_||(g=Ns(g,dh)),u.i=new lr(g,u.h))}function pe(u,g,_){u.i.set(g,_)}function Ms(u){return pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ai(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ns(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Ko),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ko(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bl=/[#\/\?@]/g,El=/[#\?:]/g,fh=/[#\?]/g,dh=/[#\?@]/g,fa=/#/g;function lr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function li(u){u.g||(u.g=new Map,u.h=0,u.i&&hh(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=lr.prototype,r.add=function(u,g){li(this),this.i=null,u=ki(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function or(u,g){li(u),g=ki(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function ur(u,g){return li(u),g=ki(u,g),u.g.has(g)}r.forEach=function(u,g){li(this),this.g.forEach(function(_,x){_.forEach(function(G){u.call(g,G,x,this)},this)},this)},r.na=function(){li(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let x=0;x<g.length;x++){const G=u[x];for(let et=0;et<G.length;et++)_.push(g[x])}return _},r.V=function(u){li(this);let g=[];if(typeof u=="string")ur(this,u)&&(g=g.concat(this.g.get(ki(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},r.set=function(u,g){return li(this),this.i=null,u=ki(this,u),ur(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Sl(u,g,_){or(u,g),0<_.length&&(u.i=null,u.g.set(ki(u,g),W(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var x=g[_];const et=encodeURIComponent(String(x)),vt=this.V(x);for(x=0;x<vt.length;x++){var G=et;vt[x]!==""&&(G+="="+encodeURIComponent(String(vt[x]))),u.push(G)}}return this.i=u.join("&")};function ki(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Xo(u,g){g&&!u.j&&(li(u),u.i=null,u.g.forEach(function(_,x){var G=x.toLowerCase();x!=G&&(or(this,x),Sl(this,G,_))},u)),u.j=g}function Vs(u,g){const _=new Dn;if(m.Image){const x=new Image;x.onload=O(oi,_,"TestLoadImage: loaded",!0,g,x),x.onerror=O(oi,_,"TestLoadImage: error",!1,g,x),x.onabort=O(oi,_,"TestLoadImage: abort",!1,g,x),x.ontimeout=O(oi,_,"TestLoadImage: timeout",!1,g,x),m.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else g(!1)}function xi(u,g){const _=new Dn,x=new AbortController,G=setTimeout(()=>{x.abort(),oi(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:x.signal}).then(et=>{clearTimeout(G),et.ok?oi(_,"TestPingServer: ok",!0,g):oi(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(G),oi(_,"TestPingServer: error",!1,g)})}function oi(u,g,_,x,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),x(_)}catch{}}function Os(){this.g=new ti}function Li(u,g,_){const x=_||"";try{_l(u,function(G,et){let vt=G;p(G)&&(vt=Ye(G)),g.push(x+et+"="+encodeURIComponent(vt))})}catch(G){throw g.push(x+"type="+encodeURIComponent("_badmap")),G}}function Pr(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Pr,Vr),Pr.prototype.g=function(){return new cr(this.l,this.j)},Pr.prototype.i=function(u){return function(){return u}}({});function cr(u,g){Ee.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(cr,Ee),r=cr.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Ui(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?zi(this):Ui(this),this.readyState==3&&Tl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,zi(this))},r.Qa=function(u){this.g&&(this.response=u,zi(this))},r.ga=function(){this.g&&zi(this)};function zi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ui(u)}r.setRequestHeader=function(u,g){this.u.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Ui(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xl(u){let g="";return mt(u,function(_,x){g+=x,g+=":",g+=_,g+=`\r
`}),g}function nn(u,g,_){t:{for(x in _){var x=!1;break t}x=!0}x||(_=xl(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):pe(u,g,_))}function he(u){Ee.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(he,Ee);var da=/^https?$/i,js=["POST","PUT"];r=he.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,g,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ri.g(),this.v=this.o?Or(this.o):Or(ri),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(et){Zo(this,et);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var G in x)_.set(G,x[G]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const et of x.keys())_.set(et,x.get(et));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(et=>et.toLowerCase()=="content-type"),G=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(js,g,void 0))||x||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[et,vt]of _)this.g.setRequestHeader(et,vt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ks(this),this.u=!0,this.g.send(u),this.u=!1}catch(et){Zo(this,et)}};function Zo(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,ma(u),Pi(u)}function ma(u){u.A||(u.A=!0,ce(u,"complete"),ce(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ce(this,"complete"),ce(this,"abort"),Pi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),he.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},r.bb=function(){pa(this)};function pa(u){if(u.h&&typeof f<"u"&&(!u.v[1]||ui(u)!=4||u.Z()!=2)){if(u.u&&ui(u)==4)un(u.Ea,0,u);else if(ce(u,"readystatechange"),ui(u)==4){u.h=!1;try{const vt=u.Z();t:switch(vt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var _;if(!(_=g)){var x;if(x=vt===0){var G=String(u.D).match(Ds)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),x=!da.test(G?G.toLowerCase():"")}_=x}if(_)ce(u,"complete"),ce(u,"success");else{u.m=6;try{var et=2<ui(u)?u.g.statusText:""}catch{et=""}u.l=et+" ["+u.Z()+"]",ma(u)}}finally{Pi(u)}}}}function Pi(u,g){if(u.g){ks(u);const _=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ce(u,"ready");try{_.onreadystatechange=x}catch{}}}function ks(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function ui(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),rr(g)}};function Jo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mh(u){const g={};u=(u.g&&2<=ui(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(H(u[x]))continue;var _=k(u[x]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const et=g[G]||[];g[G]=et,et.push(_)}M(g,function(x){return x.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function ga(u){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,u),this.cb=Ls("retryDelaySeedMs",1e4,u),this.Wa=Ls("forwardChannelMaxRetries",2,u),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new gt(u&&u.concurrentRequestLimit),this.Da=new Os,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ga.prototype,r.la=8,r.G=1,r.connect=function(u,g,_,x){Te(0),this.W=u,this.H=g||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.I=au(this,null,this.W),va(this)};function Al(u){if(tu(u),u.G==3){var g=u.U++,_=Hn(u.I);if(pe(_,"SID",u.K),pe(_,"RID",g),pe(_,"TYPE","terminate"),zs(u,_),g=new hn(u,u.j,g),g.L=2,g.v=Ms(Hn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=lu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Oi(g)}su(u)}function ya(u){u.g&&(Us(u),u.g.cancel(),u.g=null)}function tu(u){ya(u),u.u&&(m.clearTimeout(u.u),u.u=null),_a(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function va(u){if(!bt(u.h)&&!u.s){u.s=!0;var g=u.Ga;pt||L(),At||(pt(),At=!0),Ft.add(g,u),u.B=0}}function ph(u,g){return le(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ke(A(u.Ga,u,g),Cl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const G=new hn(this,this.j,u);let et=this.o;if(this.S&&(et?(et=R(et),N(et,this.S)):et=this.S),this.m!==null||this.O||(G.H=et,et=null),this.P)t:{for(var g=0,_=0;_<this.i.length;_++){e:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(g+=x,4096<g){g=_;break t}if(g===4096||_===this.i.length-1){g=_+1;break t}}g=1e3}else g=1e3;g=eu(this,G,g),_=Hn(this.I),pe(_,"RID",u),pe(_,"CVER",22),this.D&&pe(_,"X-HTTP-Session-Id",this.D),zs(this,_),et&&(this.O?g="headers="+encodeURIComponent(String(xl(et)))+"&"+g:this.m&&nn(_,this.m,et)),Re(this.h,G),this.Ua&&pe(_,"TYPE","init"),this.P?(pe(_,"$req",g),pe(_,"SID","null"),G.T=!0,Bn(G,_,null)):Bn(G,_,g),this.G=2}}else this.G==3&&(u?wl(this,u):this.i.length==0||bt(this.h)||wl(this))};function wl(u,g){var _;g?_=g.l:_=u.U++;const x=Hn(u.I);pe(x,"SID",u.K),pe(x,"RID",_),pe(x,"AID",u.T),zs(u,x),u.m&&u.o&&nn(x,u.m,u.o),_=new hn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=eu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Re(u.h,_),Bn(_,x,g)}function zs(u,g){u.H&&mt(u.H,function(_,x){pe(g,x,_)}),u.l&&_l({},function(_,x){pe(g,x,_)})}function eu(u,g,_){_=Math.min(u.i.length,_);var x=u.l?A(u.l.Na,u.l,u):null;t:{var G=u.i;let et=-1;for(;;){const vt=["count="+_];et==-1?0<_?(et=G[0].g,vt.push("ofs="+et)):et=0:vt.push("ofs="+et);let ne=!0;for(let Ke=0;Ke<_;Ke++){let ie=G[Ke].g;const rn=G[Ke].map;if(ie-=et,0>ie)et=Math.max(0,G[Ke].g-100),ne=!1;else try{Li(rn,vt,"req"+ie+"_")}catch{x&&x(rn)}}if(ne){x=vt.join("&");break t}}}return u=u.i.splice(0,_),g.D=u,x}function nu(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;pt||L(),At||(pt(),At=!0),Ft.add(g,u),u.v=0}}function Rl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ke(A(u.Fa,u),Cl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ke(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),ya(this),iu(this))};function Us(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function iu(u){u.g=new hn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Hn(u.qa);pe(g,"RID","rpc"),pe(g,"SID",u.K),pe(g,"AID",u.T),pe(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&pe(g,"TO",u.ja),pe(g,"TYPE","xmlhttp"),zs(u,g),u.m&&u.o&&nn(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Ms(Hn(g)),_.m=null,_.P=!0,Ti(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ya(this),Rl(this),Te(19))};function _a(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function ru(u,g){var _=null;if(u.g==g){_a(u),Us(u),u.g=null;var x=2}else if(xe(u.h,g))_=g.D,Ae(u.h,g),x=1;else return;if(u.G!=0){if(g.o)if(x==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var G=u.B;x=Pn(),ce(x,new Ue(x,_)),va(u)}else nu(u);else if(G=g.s,G==3||G==0&&0<g.X||!(x==1&&ph(u,g)||x==2&&Rl(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),G){case 1:hr(u,5);break;case 4:hr(u,10);break;case 3:hr(u,6);break;default:hr(u,2)}}}function Cl(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function hr(u,g){if(u.j.info("Error code "+g),g==2){var _=A(u.fb,u),x=u.Xa;const G=!x;x=new He(x||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Is(x,"https"),Ms(x),G?Vs(x.toString(),_):xi(x.toString(),_)}else Te(2);u.G=0,u.l&&u.l.sa(g),su(u),tu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function su(u){if(u.G=0,u.ka=[],u.l){const g=ji(u.h);(g.length!=0||u.i.length!=0)&&(B(u.ka,g),B(u.ka,u.i),u.h.i.length=0,W(u.i),u.i.length=0),u.l.ra()}}function au(u,g,_){var x=_ instanceof He?Hn(_):new He(_);if(x.g!="")g&&(x.g=g+"."+x.g),Ur(x,x.s);else{var G=m.location;x=G.protocol,g=g?g+"."+G.hostname:G.hostname,G=+G.port;var et=new He(null);x&&Is(et,x),g&&(et.g=g),G&&Ur(et,G),_&&(et.l=_),x=et}return _=u.D,g=u.ya,_&&g&&pe(x,_,g),pe(x,"VER",u.la),zs(u,x),x}function lu(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new he(new Pr({eb:_})):new he(u.pa),g.Ha(u.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ou(){}r=ou.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ba(){}ba.prototype.g=function(u,g){return new In(u,g)};function In(u,g){Ee.call(this),this.g=new ga(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!H(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!H(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Bi(this)}j(In,Ee),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Al(this.g)},In.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ye(u),u=_);g.i.push(new dt(g.Ya++,u)),g.G==3&&va(g)},In.prototype.N=function(){this.g.l=null,delete this.j,Al(this.g),delete this.g,In.aa.N.call(this)};function uu(u){cn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){t:{for(const _ in g){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}j(uu,cn);function cu(){jr.call(this),this.status=1}j(cu,jr);function Bi(u){this.g=u}j(Bi,ou),Bi.prototype.ua=function(){ce(this.g,"a")},Bi.prototype.ta=function(u){ce(this.g,new uu(u))},Bi.prototype.sa=function(u){ce(this.g,new cu)},Bi.prototype.ra=function(){ce(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,l_=function(){return new ba},a_=function(){return Pn()},s_=ni,Md={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,Ec=Si,ii.COMPLETE="complete",r_=ii,xs.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,bo=xs,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,i_=he}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const Cv="@firebase/firestore",Dv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new K0("@firebase/firestore");function Ka(){return ra.logLevel}function Tt(r,...e){if(ra.logLevel<=ae.DEBUG){const i=e.map(sm);ra.debug(`Firestore (${dl}): ${r}`,...i)}}function Ir(r,...e){if(ra.logLevel<=ae.ERROR){const i=e.map(sm);ra.error(`Firestore (${dl}): ${r}`,...i)}}function il(r,...e){if(ra.logLevel<=ae.WARN){const i=e.map(sm);ra.warn(`Firestore (${dl}): ${r}`,...i)}}function sm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(r="Unexpected state"){const e=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: `+r;throw Ir(e),new Error(e)}function fe(r,e){r||Bt()}function Gt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends fl{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ex{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(Tn.UNAUTHENTICATED))}shutdown(){}}class Sx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Tx{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){fe(this.o===void 0);let a=this.i;const o=y=>this.i!==a?(a=this.i,i(y)):Promise.resolve();let c=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Rr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Rr)}},0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(fe(typeof a.accessToken=="string"),new o_(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Tn(e)}}class xx{constructor(e,i,a){this.l=e,this.h=i,this.P=a,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ax{constructor(e,i,a){this.l=e,this.h=i,this.P=a}getToken(){return Promise.resolve(new xx(this.l,this.h,this.P))}start(e,i){e.enqueueRetryable(()=>i(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wx{constructor(e,i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,rx(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,i){fe(this.o===void 0);const a=c=>{c.error!=null&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,Tt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>a(c))};const o=c=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Iv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(fe(typeof i.token=="string"),this.R=i.token,new Iv(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=Rx(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<i&&(a+=e.charAt(o[c]%62))}return a}}function Xt(r,e){return r<e?-1:r>e?1:0}function Nd(r,e){let i=0;for(;i<r.length&&i<e.length;){const a=r.codePointAt(i),o=e.codePointAt(i);if(a!==o){if(a<128&&o<128)return Xt(a,o);{const c=u_(),f=Cx(c.encode(Mv(r,i)),c.encode(Mv(e,i)));return f!==0?f:Xt(a,o)}}i+=a>65535?2:1}return Xt(r.length,e.length)}function Mv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Cx(r,e){for(let i=0;i<r.length&&i<e.length;++i)if(r[i]!==e[i])return Xt(r[i],e[i]);return Xt(r.length,e.length)}function rl(r,e,i){return r.length===e.length&&r.every((a,o)=>i(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=-62135596800,Vv=1e6;class tn{static now(){return tn.fromMillis(Date.now())}static fromDate(e){return tn.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Vv);return new tn(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new xt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new xt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Nv)throw new xt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vv}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new tn(0,0))}static max(){return new Ht(new tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class Wi{constructor(e,i,a){i===void 0?i=0:i>e.length&&Bt(),a===void 0?a=e.length-i:a>e.length-i&&Bt(),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Wi.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Wi?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const c=Wi.compareSegments(e.get(o),i.get(o));if(c!==0)return c}return Xt(e.length,i.length)}static compareSegments(e,i){const a=Wi.isNumericId(e),o=Wi.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?Wi.extractNumericId(e).compare(Wi.extractNumericId(i)):Nd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class Ce extends Wi{construct(e,i,a){return new Ce(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new xt(ct.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(o=>o.length>0))}return new Ce(i)}static emptyPath(){return new Ce([])}}const Dx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Wi{construct(e,i,a){return new yn(e,i,a)}static isValidIdentifier(e){return Dx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new yn([Ov])}static fromServerFormat(e){const i=[];let a="",o=0;const c=()=>{if(a.length===0)throw new xt(ct.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new xt(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new xt(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(a+=m,o++):(c(),o++)}if(c(),f)throw new xt(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(i)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.path=e}static fromPath(e){return new Vt(Ce.fromString(e))}static fromName(e){return new Vt(Ce.fromString(e).popFirst(5))}static empty(){return new Vt(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Ce.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vt(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=-1;function Ix(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Ht.fromTimestamp(a===1e9?new tn(i+1,0):new tn(i,a));return new gs(o,Vt.empty(),e)}function Mx(r){return new gs(r.readTime,r.key,Mo)}class gs{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new gs(Ht.min(),Vt.empty(),Mo)}static max(){return new gs(Ht.max(),Vt.empty(),Mo)}}function Nx(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=Vt.comparator(r.documentKey,e.documentKey),i!==0?i:Xt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ox{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(r){if(r.code!==ct.FAILED_PRECONDITION||r.message!==Vx)throw r;Tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ht((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof ht?i:ht.resolve(i)}catch(i){return ht.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):ht.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):ht.reject(i)}static resolve(e){return new ht((i,a)=>{i(e)})}static reject(e){return new ht((i,a)=>{a(e)})}static waitFor(e){return new ht((i,a)=>{let o=0,c=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++c,f&&c===o&&i()},y=>a(y))}),f=!0,c===o&&i()})}static or(e){let i=ht.resolve(!1);for(const a of e)i=i.next(o=>o?ht.resolve(o):a());return i}static forEach(e,i){const a=[];return e.forEach((o,c)=>{a.push(i.call(this,o,c))}),this.waitFor(a)}static mapArray(e,i){return new ht((a,o)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const p=y;i(e[p]).next(E=>{f[p]=E,++m,m===c&&a(f)},E=>o(E))}})}static doWhile(e,i){return new ht((a,o)=>{const c=()=>{e()===!0?i().next(()=>{c()},o):a()};c()})}}function jx(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function pl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.oe(a),this._e=a=>i.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}$c.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=-1;function Wc(r){return r==null}function Nc(r){return r===0&&1/r==-1/0}function kx(r){return typeof r=="number"&&Number.isInteger(r)&&!Nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="";function Lx(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=jv(e)),e=zx(r.get(i),e);return jv(e)}function zx(r,e){let i=e;const a=r.length;for(let o=0;o<a;o++){const c=r.charAt(o);switch(c){case"\0":i+="";break;case h_:i+="";break;default:i+=c}}return i}function jv(r){return r+h_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function Ss(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function f_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,i){this.comparator=e,this.root=i||gn.EMPTY}insert(e,i){return new je(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?a(e.key,i):1,i&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,i,a,o,c){this.key=e,this.value=i,this.color=a??gn.RED,this.left=o??gn.EMPTY,this.right=c??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,c){return new gn(e??this.key,i??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,i,a),null):c===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return gn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(e,i,a,o,c){return this}insert(e,i,a){return new gn(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(e){return new Lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new en(this.comparator);return i.data=e,i}}class Lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Xn([])}unionWith(e){let i=new en(yn.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new Xn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new d_("Invalid base64 string: "+c):c}}(e);return new _n(i)}static fromUint8Array(e){const i=function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c}(e);return new _n(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const Ux=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(r){if(fe(!!r),typeof r=="string"){let e=0;const i=Ux.exec(r);if(fe(!!i),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:qe(r.seconds),nanos:qe(r.nanos)}}function qe(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function vs(r){return typeof r=="string"?_n.fromBase64String(r):_n.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="server_timestamp",p_="__type__",g_="__previous_value__",y_="__local_write_time__";function lm(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[p_])===null||i===void 0?void 0:i.stringValue)===m_}function Yc(r){const e=r.mapValue.fields[g_];return lm(e)?Yc(e):e}function No(r){const e=ys(r.mapValue.fields[y_].timestampValue);return new tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,i,a,o,c,f,m,y,p){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=p}}const Vc="(default)";class Vo{constructor(e,i){this.projectId=e,this.database=i||Vc}static empty(){return new Vo("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__type__",Bx="__max__",mc={mapValue:{}},__="__vector__",Oc="value";function _s(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lm(r)?4:Hx(r)?9007199254740991:qx(r)?10:11:Bt()}function Xi(r,e){if(r===e)return!0;const i=_s(r);if(i!==_s(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return No(r).isEqual(No(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=ys(o.timestampValue),m=ys(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,c){return vs(o.bytesValue).isEqual(vs(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,c){return qe(o.geoPointValue.latitude)===qe(c.geoPointValue.latitude)&&qe(o.geoPointValue.longitude)===qe(c.geoPointValue.longitude)}(r,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return qe(o.integerValue)===qe(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=qe(o.doubleValue),m=qe(c.doubleValue);return f===m?Nc(f)===Nc(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return rl(r.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(kv(f)!==kv(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Xi(f[y],m[y])))return!1;return!0}(r,e);default:return Bt()}}function Oo(r,e){return(r.values||[]).find(i=>Xi(i,e))!==void 0}function sl(r,e){if(r===e)return 0;const i=_s(r),a=_s(e);if(i!==a)return Xt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Xt(r.booleanValue,e.booleanValue);case 2:return function(c,f){const m=qe(c.integerValue||c.doubleValue),y=qe(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(r,e);case 3:return zv(r.timestampValue,e.timestampValue);case 4:return zv(No(r),No(e));case 5:return Nd(r.stringValue,e.stringValue);case 6:return function(c,f){const m=vs(c),y=vs(f);return m.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const m=c.split("/"),y=f.split("/");for(let p=0;p<m.length&&p<y.length;p++){const E=Xt(m[p],y[p]);if(E!==0)return E}return Xt(m.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const m=Xt(qe(c.latitude),qe(f.latitude));return m!==0?m:Xt(qe(c.longitude),qe(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Uv(r.arrayValue,e.arrayValue);case 10:return function(c,f){var m,y,p,E;const S=c.fields||{},A=f.fields||{},O=(m=S[Oc])===null||m===void 0?void 0:m.arrayValue,j=(y=A[Oc])===null||y===void 0?void 0:y.arrayValue,W=Xt(((p=O==null?void 0:O.values)===null||p===void 0?void 0:p.length)||0,((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0);return W!==0?W:Uv(O,j)}(r.mapValue,e.mapValue);case 11:return function(c,f){if(c===mc.mapValue&&f===mc.mapValue)return 0;if(c===mc.mapValue)return 1;if(f===mc.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),p=f.fields||{},E=Object.keys(p);y.sort(),E.sort();for(let S=0;S<y.length&&S<E.length;++S){const A=Nd(y[S],E[S]);if(A!==0)return A;const O=sl(m[y[S]],p[E[S]]);if(O!==0)return O}return Xt(y.length,E.length)}(r.mapValue,e.mapValue);default:throw Bt()}}function zv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Xt(r,e);const i=ys(r),a=ys(e),o=Xt(i.seconds,a.seconds);return o!==0?o:Xt(i.nanos,a.nanos)}function Uv(r,e){const i=r.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const c=sl(i[o],a[o]);if(c)return c}return Xt(i.length,a.length)}function al(r){return Vd(r)}function Vd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const a=ys(i);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return vs(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return Vt.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let a="[",o=!0;for(const c of i.values||[])o?o=!1:a+=",",a+=Vd(c);return a+"]"}(r.arrayValue):"mapValue"in r?function(i){const a=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const f of a)c?c=!1:o+=",",o+=`${f}:${Vd(i.fields[f])}`;return o+"}"}(r.mapValue):Bt()}function Sc(r){switch(_s(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yc(r);return e?16+Sc(e):16;case 5:return 2*r.stringValue.length;case 6:return vs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,c)=>o+Sc(c),0)}(r.arrayValue);case 10:case 11:return function(a){let o=0;return Ss(a.fields,(c,f)=>{o+=c.length+Sc(f)}),o}(r.mapValue);default:throw Bt()}}function Pv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Od(r){return!!r&&"integerValue"in r}function om(r){return!!r&&"arrayValue"in r}function Bv(r){return!!r&&"nullValue"in r}function qv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tc(r){return!!r&&"mapValue"in r}function qx(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[v_])===null||i===void 0?void 0:i.stringValue)===__}function xo(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ss(r.mapValue.fields,(i,a)=>e.mapValue.fields[i]=xo(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=xo(r.arrayValue.values[i]);return e}return Object.assign({},r)}function Hx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Bx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Tc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=xo(i)}setAll(e){let i=yn.emptyPath(),a={},o=[];e.forEach((f,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,a,o),a={},o=[],i=m.popLast()}f?a[m.lastSegment()]=xo(f):o.push(m.lastSegment())});const c=this.getFieldsMap(i);this.applyChanges(c,a,o)}delete(e){const i=this.field(e.popLast());Tc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){Ss(i,(o,c)=>e[o]=c);for(const o of a)delete e[o]}clone(){return new Un(xo(this.value))}}function b_(r){const e=[];return Ss(r.fields,(i,a)=>{const o=new yn([i]);if(Tc(a)){const c=b_(a.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,i,a,o,c,f,m){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new xn(e,0,Ht.min(),Ht.min(),Ht.min(),Un.empty(),0)}static newFoundDocument(e,i,a,o){return new xn(e,1,i,Ht.min(),a,o,0)}static newNoDocument(e,i){return new xn(e,2,i,Ht.min(),Ht.min(),Un.empty(),0)}static newUnknownDocument(e,i){return new xn(e,3,i,Ht.min(),Ht.min(),Un.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,i){this.position=e,this.inclusive=i}}function Hv(r,e,i){let a=0;for(let o=0;o<r.position.length;o++){const c=e[o],f=r.position[o];if(c.field.isKeyField()?a=Vt.comparator(Vt.fromName(f.referenceValue),i.key):a=sl(f,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Gv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Xi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,i="asc"){this.field=e,this.dir=i}}function Gx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{}class $e extends E_{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new Qx(e,i,a):i==="array-contains"?new Yx(e,a):i==="in"?new Kx(e,a):i==="not-in"?new Xx(e,a):i==="array-contains-any"?new Zx(e,a):new $e(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new $x(e,a):new Wx(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(sl(i,this.value)):i!==null&&_s(this.value)===_s(i)&&this.matchesComparison(sl(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends E_{constructor(e,i){super(),this.filters=e,this.op=i,this.ce=null}static create(e,i){return new Ii(e,i)}matches(e){return S_(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function S_(r){return r.op==="and"}function T_(r){return Fx(r)&&S_(r)}function Fx(r){for(const e of r.filters)if(e instanceof Ii)return!1;return!0}function jd(r){if(r instanceof $e)return r.field.canonicalString()+r.op.toString()+al(r.value);if(T_(r))return r.filters.map(e=>jd(e)).join(",");{const e=r.filters.map(i=>jd(i)).join(",");return`${r.op}(${e})`}}function x_(r,e){return r instanceof $e?function(a,o){return o instanceof $e&&a.op===o.op&&a.field.isEqual(o.field)&&Xi(a.value,o.value)}(r,e):r instanceof Ii?function(a,o){return o instanceof Ii&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((c,f,m)=>c&&x_(f,o.filters[m]),!0):!1}(r,e):void Bt()}function A_(r){return r instanceof $e?function(i){return`${i.field.canonicalString()} ${i.op} ${al(i.value)}`}(r):r instanceof Ii?function(i){return i.op.toString()+" {"+i.getFilters().map(A_).join(" ,")+"}"}(r):"Filter"}class Qx extends $e{constructor(e,i,a){super(e,i,a),this.key=Vt.fromName(a.referenceValue)}matches(e){const i=Vt.comparator(e.key,this.key);return this.matchesComparison(i)}}class $x extends $e{constructor(e,i){super(e,"in",i),this.keys=w_("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Wx extends $e{constructor(e,i){super(e,"not-in",i),this.keys=w_("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function w_(r,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>Vt.fromName(a.referenceValue))}class Yx extends $e{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return om(i)&&Oo(i.arrayValue,this.value)}}class Kx extends $e{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Oo(this.value.arrayValue,i)}}class Xx extends $e{constructor(e,i){super(e,"not-in",i)}matches(e){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&!Oo(this.value.arrayValue,i)}}class Zx extends $e{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!om(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>Oo(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,i=null,a=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.le=null}}function Fv(r,e=null,i=[],a=[],o=null,c=null,f=null){return new Jx(r,e,i,a,o,c,f)}function um(r){const e=Gt(r);if(e.le===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>jd(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),Wc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>al(a)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>al(a)).join(",")),e.le=i}return e.le}function cm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Gx(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!x_(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Gv(r.startAt,e.startAt)&&Gv(r.endAt,e.endAt)}function kd(r){return Vt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,i=null,a=[],o=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function tA(r,e,i,a,o,c,f,m){return new Po(r,e,i,a,o,c,f,m)}function Kc(r){return new Po(r)}function Qv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function R_(r){return r.collectionGroup!==null}function Ao(r){const e=Gt(r);if(e.he===null){e.he=[];const i=new Set;for(const c of e.explicitOrderBy)e.he.push(c),i.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new en(yn.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(p=>{p.isInequality()&&(m=m.add(p.field))})}),m})(e).forEach(c=>{i.has(c.canonicalString())||c.isKeyField()||e.he.push(new kc(c,a))}),i.has(yn.keyField().canonicalString())||e.he.push(new kc(yn.keyField(),a))}return e.he}function Yi(r){const e=Gt(r);return e.Pe||(e.Pe=eA(e,Ao(r))),e.Pe}function eA(r,e){if(r.limitType==="F")return Fv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new kc(o.field,c)});const i=r.endAt?new jc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new jc(r.startAt.position,r.startAt.inclusive):null;return Fv(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function Ld(r,e){const i=r.filters.concat([e]);return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function zd(r,e,i){return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Xc(r,e){return cm(Yi(r),Yi(e))&&r.limitType===e.limitType}function C_(r){return`${um(Yi(r))}|lt:${r.limitType}`}function Xa(r){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(o=>A_(o)).join(", ")}]`),Wc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(o=>al(o)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(o=>al(o)).join(",")),`Target(${a})`}(Yi(r))}; limitType=${r.limitType})`}function Zc(r,e){return e.isFoundDocument()&&function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Vt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(r,e)&&function(a,o){for(const c of Ao(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(r,e)&&function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0}(r,e)&&function(a,o){return!(a.startAt&&!function(f,m,y){const p=Hv(f,m,y);return f.inclusive?p<=0:p<0}(a.startAt,Ao(a),o)||a.endAt&&!function(f,m,y){const p=Hv(f,m,y);return f.inclusive?p>=0:p>0}(a.endAt,Ao(a),o))}(r,e)}function nA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function D_(r){return(e,i)=>{let a=!1;for(const o of Ao(r)){const c=iA(o,e,i);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function iA(r,e,i){const a=r.field.isKeyField()?Vt.comparator(e.key,i.key):function(c,f,m){const y=f.data.field(c),p=m.data.field(c);return y!==null&&p!==null?sl(y,p):Bt()}(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(i,a)=>{for(const[o,c]of a)e(o,c)})}isEmpty(){return f_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new je(Vt.comparator);function Mr(){return rA}const I_=new je(Vt.comparator);function Eo(...r){let e=I_;for(const i of r)e=e.insert(i.key,i);return e}function M_(r){let e=I_;return r.forEach((i,a)=>e=e.insert(i,a.overlayedDocument)),e}function ia(){return wo()}function N_(){return wo()}function wo(){return new la(r=>r.toString(),(r,e)=>r.isEqual(e))}const sA=new je(Vt.comparator),aA=new en(Vt.comparator);function ee(...r){let e=aA;for(const i of r)e=e.add(i);return e}const lA=new en(Xt);function oA(){return lA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function V_(r){return{integerValue:""+r}}function uA(r,e){return kx(e)?V_(e):hm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this._=void 0}}function cA(r,e,i){return r instanceof jo?function(o,c){const f={fields:{[p_]:{stringValue:m_},[y_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&lm(c)&&(c=Yc(c)),c&&(f.fields[g_]=c),{mapValue:f}}(i,e):r instanceof ko?j_(r,e):r instanceof Lo?k_(r,e):function(o,c){const f=O_(o,c),m=$v(f)+$v(o.Ie);return Od(f)&&Od(o.Ie)?V_(m):hm(o.serializer,m)}(r,e)}function hA(r,e,i){return r instanceof ko?j_(r,e):r instanceof Lo?k_(r,e):i}function O_(r,e){return r instanceof Lc?function(a){return Od(a)||function(c){return!!c&&"doubleValue"in c}(a)}(e)?e:{integerValue:0}:null}class jo extends Jc{}class ko extends Jc{constructor(e){super(),this.elements=e}}function j_(r,e){const i=L_(e);for(const a of r.elements)i.some(o=>Xi(o,a))||i.push(a);return{arrayValue:{values:i}}}class Lo extends Jc{constructor(e){super(),this.elements=e}}function k_(r,e){let i=L_(e);for(const a of r.elements)i=i.filter(o=>!Xi(o,a));return{arrayValue:{values:i}}}class Lc extends Jc{constructor(e,i){super(),this.serializer=e,this.Ie=i}}function $v(r){return qe(r.integerValue||r.doubleValue)}function L_(r){return om(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,i){this.field=e,this.transform=i}}function dA(r,e){return r.field.isEqual(e.field)&&function(a,o){return a instanceof ko&&o instanceof ko||a instanceof Lo&&o instanceof Lo?rl(a.elements,o.elements,Xi):a instanceof Lc&&o instanceof Lc?Xi(a.Ie,o.Ie):a instanceof jo&&o instanceof jo}(r.transform,e.transform)}class mA{constructor(e,i){this.version=e,this.transformResults=i}}class Nn{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class th{}function z_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new eh(r.key,Nn.none()):new Bo(r.key,r.data,Nn.none());{const i=r.data,a=Un.empty();let o=new en(yn.comparator);for(let c of e.fields)if(!o.has(c)){let f=i.field(c);f===null&&c.length>1&&(c=c.popLast(),f=i.field(c)),f===null?a.delete(c):a.set(c,f),o=o.add(c)}return new Ts(r.key,a,new Xn(o.toArray()),Nn.none())}}function pA(r,e,i){r instanceof Bo?function(o,c,f){const m=o.value.clone(),y=Yv(o.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,i):r instanceof Ts?function(o,c,f){if(!xc(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Yv(o.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(U_(o)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(r,e,i):function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,i)}function Ro(r,e,i,a){return r instanceof Bo?function(c,f,m,y){if(!xc(c.precondition,f))return m;const p=c.value.clone(),E=Kv(c.fieldTransforms,y,f);return p.setAll(E),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(r,e,i,a):r instanceof Ts?function(c,f,m,y){if(!xc(c.precondition,f))return m;const p=Kv(c.fieldTransforms,y,f),E=f.data;return E.setAll(U_(c)),E.setAll(p),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(r,e,i,a):function(c,f,m){return xc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,i)}function gA(r,e){let i=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),c=O_(a.transform,o||null);c!=null&&(i===null&&(i=Un.empty()),i.set(a.field,c))}return i||null}function Wv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&rl(a,o,(c,f)=>dA(c,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Bo extends th{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends th{constructor(e,i,a,o,c=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function U_(r){const e=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}}),e}function Yv(r,e,i){const a=new Map;fe(r.length===i.length);for(let o=0;o<i.length;o++){const c=r[o],f=c.transform,m=e.data.field(c.field);a.set(c.field,hA(f,m,i[o]))}return a}function Kv(r,e,i){const a=new Map;for(const o of r){const c=o.transform,f=i.data.field(o.field);a.set(o.field,cA(c,f,e))}return a}class eh extends th{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yA extends th{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&pA(c,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=Ro(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=Ro(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=N_();return this.mutations.forEach(o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=i.has(o.key)?null:m;const y=z_(f,m);y!==null&&a.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Ht.min())}),a}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),ee())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(i,a)=>Wv(i,a))&&rl(this.baseMutations,e.baseMutations,(i,a)=>Wv(i,a))}}class fm{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){fe(e.mutations.length===a.length);let o=function(){return sA}();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,a[f].version);return new fm(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,se;function EA(r){switch(r){case ct.OK:return Bt();case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0;default:return Bt()}}function P_(r){if(r===void 0)return Ir("GRPC error has no .code"),ct.UNKNOWN;switch(r){case Qe.OK:return ct.OK;case Qe.CANCELLED:return ct.CANCELLED;case Qe.UNKNOWN:return ct.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return ct.INTERNAL;case Qe.UNAVAILABLE:return ct.UNAVAILABLE;case Qe.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case Qe.NOT_FOUND:return ct.NOT_FOUND;case Qe.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case Qe.ABORTED:return ct.ABORTED;case Qe.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case Qe.DATA_LOSS:return ct.DATA_LOSS;default:return Bt()}}(se=Qe||(Qe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new ds([4294967295,4294967295],0);function Xv(r){const e=u_().encode(r),i=new n_;return i.update(e),new Uint8Array(i.digest())}function Zv(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ds([i,a],0),new ds([o,c],0)]}class dm{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new So(`Invalid padding: ${i}`);if(a<0)throw new So(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new So(`Invalid padding when bitmap length is 0: ${i}`);this.Ee=8*e.length-i,this.de=ds.fromNumber(this.Ee)}Ae(e,i,a){let o=e.add(i.multiply(ds.fromNumber(a)));return o.compare(SA)===1&&(o=new ds([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const i=Xv(e),[a,o]=Zv(i);for(let c=0;c<this.hashCount;c++){const f=this.Ae(a,o,c);if(!this.Re(f))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new dm(c,o,i);return a.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const i=Xv(e),[a,o]=Zv(i);for(let c=0;c<this.hashCount;c++){const f=this.Ae(a,o,c);this.Ve(f)}}Ve(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class So extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,i,a,o,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new nh(Ht.min(),o,new je(Xt),Mr(),ee())}}class qo{constructor(e,i,a,o,c){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new qo(a,i,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,i,a,o){this.me=e,this.removedTargetIds=i,this.key=a,this.fe=o}}class B_{constructor(e,i){this.targetId=e,this.ge=i}}class q_{constructor(e,i,a=_n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class Jv{constructor(){this.pe=0,this.ye=t0(),this.we=_n.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ee(),i=ee(),a=ee();return this.ye.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:Bt()}}),new qo(this.we,this.Se,e,i,a)}Me(){this.be=!1,this.ye=t0()}xe(e,i){this.be=!0,this.ye=this.ye.insert(e,i)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,fe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class TA{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Mr(),this.$e=pc(),this.Ue=pc(),this.Ke=new je(Xt)}We(e){for(const i of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(i,e.fe):this.ze(i,e.key,e.fe);for(const i of e.removedTargetIds)this.ze(i,e.key,e.fe)}je(e){this.forEachTarget(e,i=>{const a=this.He(i);switch(e.state){case 0:this.Je(i)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(i);break;case 3:this.Je(i)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(i)&&(this.Ye(i),a.Ce(e.resumeToken));break;default:Bt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.qe.forEach((a,o)=>{this.Je(o)&&i(o)})}Ze(e){const i=e.targetId,a=e.ge.count,o=this.Xe(i);if(o){const c=o.target;if(kd(c))if(a===0){const f=new Vt(c.path);this.ze(i,f,xn.newNoDocument(f,Ht.min()))}else fe(a===1);else{const f=this.et(i);if(f!==a){const m=this.tt(e),y=m?this.nt(m,e,f):1;if(y!==0){this.Ye(i);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,p)}}}}}tt(e){const i=e.ge.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=i;let f,m;try{f=vs(a).toUint8Array()}catch(y){if(y instanceof d_)return il("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new dm(f,o,c)}catch(y){return il(y instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Ee===0?null:m}nt(e,i,a){return i.ge.count===a-this.st(e,i.targetId)?0:2}st(e,i){const a=this.ke.getRemoteKeysForTarget(i);let o=0;return a.forEach(c=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.ze(i,c,null),o++)}),o}ot(e){const i=new Map;this.qe.forEach((c,f)=>{const m=this.Xe(f);if(m){if(c.current&&kd(m.target)){const y=new Vt(m.target.path);this._t(y).has(f)||this.ut(f,y)||this.ze(f,y,xn.newNoDocument(y,e))}c.ve&&(i.set(f,c.Fe()),c.Me())}});let a=ee();this.Ue.forEach((c,f)=>{let m=!0;f.forEachWhile(y=>{const p=this.Xe(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(a=a.add(c))}),this.Qe.forEach((c,f)=>f.setReadTime(e));const o=new nh(e,i,this.Ke,this.Qe,a);return this.Qe=Mr(),this.$e=pc(),this.Ue=pc(),this.Ke=new je(Xt),o}Ge(e,i){if(!this.Je(e))return;const a=this.ut(e,i.key)?2:0;this.He(e).xe(i.key,a),this.Qe=this.Qe.insert(i.key,i),this.$e=this.$e.insert(i.key,this._t(i.key).add(e)),this.Ue=this.Ue.insert(i.key,this.ct(i.key).add(e))}ze(e,i,a){if(!this.Je(e))return;const o=this.He(e);this.ut(e,i)?o.xe(i,1):o.Oe(i),this.Ue=this.Ue.insert(i,this.ct(i).delete(e)),this.Ue=this.Ue.insert(i,this.ct(i).add(e)),a&&(this.Qe=this.Qe.insert(i,a))}removeTarget(e){this.qe.delete(e)}et(e){const i=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let i=this.qe.get(e);return i||(i=new Jv,this.qe.set(e,i)),i}ct(e){let i=this.Ue.get(e);return i||(i=new en(Xt),this.Ue=this.Ue.insert(e,i)),i}_t(e){let i=this.$e.get(e);return i||(i=new en(Xt),this.$e=this.$e.insert(e,i)),i}Je(e){const i=this.Xe(e)!==null;return i||Tt("WatchChangeAggregator","Detected inactive target",e),i}Xe(e){const i=this.qe.get(e);return i&&i.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Jv),this.ke.getRemoteKeysForTarget(e).forEach(i=>{this.ze(e,i,null)})}ut(e,i){return this.ke.getRemoteKeysForTarget(e).has(i)}}function pc(){return new je(Vt.comparator)}function t0(){return new je(Vt.comparator)}const xA={asc:"ASCENDING",desc:"DESCENDING"},AA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wA={and:"AND",or:"OR"};class RA{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Ud(r,e){return r.useProto3Json||Wc(e)?e:{value:e}}function zc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function CA(r,e){return zc(r,e.toTimestamp())}function Ki(r){return fe(!!r),Ht.fromTimestamp(function(i){const a=ys(i);return new tn(a.seconds,a.nanos)}(r))}function mm(r,e){return Pd(r,e).canonicalString()}function Pd(r,e){const i=function(o){return new Ce(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?i:i.child(e)}function G_(r){const e=Ce.fromString(r);return fe(Y_(e)),e}function Bd(r,e){return mm(r.databaseId,e.path)}function _d(r,e){const i=G_(e);if(i.get(1)!==r.databaseId.projectId)throw new xt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new xt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Vt(Q_(i))}function F_(r,e){return mm(r.databaseId,e)}function DA(r){const e=G_(r);return e.length===4?Ce.emptyPath():Q_(e)}function qd(r){return new Ce(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Q_(r){return fe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function e0(r,e,i){return{name:Bd(r,e),fields:i.value.mapValue.fields}}function IA(r,e){let i;if("targetChange"in e){e.targetChange;const a=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(p,E){return p.useProto3Json?(fe(E===void 0||typeof E=="string"),_n.fromBase64String(E||"")):(fe(E===void 0||E instanceof Buffer||E instanceof Uint8Array),_n.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(p){const E=p.code===void 0?ct.UNKNOWN:P_(p.code);return new xt(E,p.message||"")}(f);i=new q_(a,o,c,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=_d(r,a.document.name),c=Ki(a.document.updateTime),f=a.document.createTime?Ki(a.document.createTime):Ht.min(),m=new Un({mapValue:{fields:a.document.fields}}),y=xn.newFoundDocument(o,c,f,m),p=a.targetIds||[],E=a.removedTargetIds||[];i=new Ac(p,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=_d(r,a.document),c=a.readTime?Ki(a.readTime):Ht.min(),f=xn.newNoDocument(o,c),m=a.removedTargetIds||[];i=new Ac([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=_d(r,a.document),c=a.removedTargetIds||[];i=new Ac([],c,o,null)}else{if(!("filter"in e))return Bt();{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,f=new bA(o,c),m=a.targetId;i=new B_(m,f)}}return i}function MA(r,e){let i;if(e instanceof Bo)i={update:e0(r,e.key,e.value)};else if(e instanceof eh)i={delete:Bd(r,e.key)};else if(e instanceof Ts)i={update:e0(r,e.key,e.data),updateMask:PA(e.fieldMask)};else{if(!(e instanceof yA))return Bt();i={verify:Bd(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(c,f){const m=f.transform;if(m instanceof jo)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ko)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Lo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Lc)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Bt()}(0,a))),e.precondition.isNone||(i.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:CA(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Bt()}(r,e.precondition)),i}function NA(r,e){return r&&r.length>0?(fe(e!==void 0),r.map(i=>function(o,c){let f=o.updateTime?Ki(o.updateTime):Ki(c);return f.isEqual(Ht.min())&&(f=Ki(c)),new mA(f,o.transformResults||[])}(i,e))):[]}function VA(r,e){return{documents:[F_(r,e.path)]}}function OA(r,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=F_(r,o);const c=function(p){if(p.length!==0)return W_(Ii.create(p,"and"))}(e.filters);c&&(i.structuredQuery.where=c);const f=function(p){if(p.length!==0)return p.map(E=>function(A){return{field:Za(A.field),direction:LA(A.dir)}}(E))}(e.orderBy);f&&(i.structuredQuery.orderBy=f);const m=Ud(r,e.limit);return m!==null&&(i.structuredQuery.limit=m),e.startAt&&(i.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:i,parent:o}}function jA(r){let e=DA(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){fe(a===1);const E=i.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let c=[];i.where&&(c=function(S){const A=$_(S);return A instanceof Ii&&T_(A)?A.getFilters():[A]}(i.where));let f=[];i.orderBy&&(f=function(S){return S.map(A=>function(j){return new kc(Ja(j.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(A))}(i.orderBy));let m=null;i.limit&&(m=function(S){let A;return A=typeof S=="object"?S.value:S,Wc(A)?null:A}(i.limit));let y=null;i.startAt&&(y=function(S){const A=!!S.before,O=S.values||[];return new jc(O,A)}(i.startAt));let p=null;return i.endAt&&(p=function(S){const A=!S.before,O=S.values||[];return new jc(O,A)}(i.endAt)),tA(e,o,f,c,m,"F",y,p)}function kA(r,e){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function $_(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Ja(i.unaryFilter.field);return $e.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Ja(i.unaryFilter.field);return $e.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ja(i.unaryFilter.field);return $e.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ja(i.unaryFilter.field);return $e.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(r):r.fieldFilter!==void 0?function(i){return $e.create(Ja(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return Ii.create(i.compositeFilter.filters.map(a=>$_(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Bt()}}(i.compositeFilter.op))}(r):Bt()}function LA(r){return xA[r]}function zA(r){return AA[r]}function UA(r){return wA[r]}function Za(r){return{fieldPath:r.canonicalString()}}function Ja(r){return yn.fromServerFormat(r.fieldPath)}function W_(r){return r instanceof $e?function(i){if(i.op==="=="){if(qv(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NAN"}};if(Bv(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(qv(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NOT_NAN"}};if(Bv(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(i.field),op:zA(i.op),value:i.value}}}(r):r instanceof Ii?function(i){const a=i.getFilters().map(o=>W_(o));return a.length===1?a[0]:{compositeFilter:{op:UA(i.op),filters:a}}}(r):Bt()}function PA(r){const e=[];return r.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function Y_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,i,a,o,c=Ht.min(),f=Ht.min(),m=_n.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.Tt=e}}function qA(r){const e=jA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?zd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.Tn=new GA}addToCollectionParentIndex(e,i){return this.Tn.add(i),ht.resolve()}getCollectionParents(e,i){return ht.resolve(this.Tn.getEntries(i))}addFieldIndex(e,i){return ht.resolve()}deleteFieldIndex(e,i){return ht.resolve()}deleteAllFieldIndexes(e){return ht.resolve()}createTargetIndexes(e,i){return ht.resolve()}getDocumentsMatchingTarget(e,i){return ht.resolve(null)}getIndexType(e,i){return ht.resolve(0)}getFieldIndexes(e,i){return ht.resolve([])}getNextCollectionGroupToUpdate(e){return ht.resolve(null)}getMinOffset(e,i){return ht.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,i){return ht.resolve(gs.min())}updateCollectionGroup(e,i,a){return ht.resolve()}updateIndexEntries(e,i){return ht.resolve()}}class GA{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new en(Ce.comparator),c=!o.has(a);return this.index[i]=o.add(a),c}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new en(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K_=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(K_,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new ll(0)}static Kn(){return new ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="LruGarbageCollector",FA=1048576;function r0([r,e],[i,a]){const o=Xt(r,i);return o===0?Xt(e,a):o}class QA{constructor(e){this.Hn=e,this.buffer=new en(r0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const i=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();r0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class $A{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Tt(i0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){pl(i)?Tt(i0,"Ignoring IndexedDB error during garbage collection: ",i):await ml(i)}await this.er(3e5)})}}class WA{constructor(e,i){this.tr=e,this.params=i}calculateTargetCount(e,i){return this.tr.nr(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(i===0)return ht.resolve($c.ae);const a=new QA(i);return this.tr.forEachTarget(e,o=>a.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>a.Zn(o))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.tr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.tr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),ht.resolve(n0)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n0):this.ir(e,i))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,i){let a,o,c,f,m,y,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(a=S,m=Date.now(),this.removeTargets(e,a,i))).next(S=>(c=S,y=Date.now(),this.removeOrphanedDocuments(e,a))).next(S=>(p=Date.now(),Ka()<=ae.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${S} documents in `+(p-y)+`ms
Total Duration: ${p-E}ms`),ht.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S})))}}function YA(r,e){return new WA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.changes=new la(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?ht.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,i))).next(o=>(a!==null&&Ro(a.mutation,o,Xn.empty(),tn.now()),o))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.getLocalViewOfDocuments(e,a,ee()).next(()=>a))}getLocalViewOfDocuments(e,i,a=ee()){const o=ia();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,a).next(c=>{let f=Eo();return c.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,i){const a=ia();return this.populateOverlays(e,a,i).next(()=>this.computeViews(e,i,a,ee()))}populateOverlays(e,i,a){const o=[];return a.forEach(c=>{i.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((f,m)=>{i.set(f,m)})})}computeViews(e,i,a,o){let c=Mr();const f=wo(),m=function(){return wo()}();return i.forEach((y,p)=>{const E=a.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Ts)?c=c.insert(p.key,p):E!==void 0?(f.set(p.key,E.mutation.getFieldMask()),Ro(E.mutation,p,E.mutation.getFieldMask(),tn.now())):f.set(p.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((p,E)=>f.set(p,E)),i.forEach((p,E)=>{var S;return m.set(p,new XA(E,(S=f.get(p))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,i){const a=wo();let o=new je((f,m)=>f-m),c=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(f=>{for(const m of f)m.keys().forEach(y=>{const p=i.get(y);if(p===null)return;let E=a.get(y)||Xn.empty();E=m.applyToLocalView(p,E),a.set(y,E);const S=(o.get(m.batchId)||ee()).add(y);o=o.insert(m.batchId,S)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),p=y.key,E=y.value,S=N_();E.forEach(A=>{if(!c.has(A)){const O=z_(i.get(A),a.get(A));O!==null&&S.set(A,O),c=c.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,S))}return ht.waitFor(f)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,i,a,o){return function(f){return Vt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):R_(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next(c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-c.size):ht.resolve(ia());let m=Mo,y=c;return f.next(p=>ht.forEach(p,(E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),c.get(E)?ht.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{y=y.insert(E,A)}))).next(()=>this.populateOverlays(e,p,c)).next(()=>this.computeViews(e,y,p,ee())).next(E=>({batchId:m,changes:M_(E)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Vt(i)).next(a=>{let o=Eo();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const c=i.collectionGroup;let f=Eo();return this.indexManager.getCollectionParents(e,c).next(m=>ht.forEach(m,y=>{const p=function(S,A){return new Po(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(i,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next(E=>{E.forEach((S,A)=>{f=f.insert(S,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,i,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,c,o))).next(f=>{c.forEach((y,p)=>{const E=p.getKey();f.get(E)===null&&(f=f.insert(E,xn.newInvalidDocument(E)))});let m=Eo();return f.forEach((y,p)=>{const E=c.get(y);E!==void 0&&Ro(E.mutation,p,Xn.empty(),tn.now()),Zc(i,p)&&(m=m.insert(y,p))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,i){return ht.resolve(this.dr.get(i))}saveBundleMetadata(e,i){return this.dr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:Ki(o.createTime)}}(i)),ht.resolve()}getNamedQuery(e,i){return ht.resolve(this.Ar.get(i))}saveNamedQuery(e,i){return this.Ar.set(i.name,function(o){return{name:o.name,query:qA(o.bundledQuery),readTime:Ki(o.readTime)}}(i)),ht.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.overlays=new je(Vt.comparator),this.Rr=new Map}getOverlay(e,i){return ht.resolve(this.overlays.get(i))}getOverlays(e,i){const a=ia();return ht.forEach(i,o=>this.getOverlay(e,o).next(c=>{c!==null&&a.set(o,c)})).next(()=>a)}saveOverlays(e,i,a){return a.forEach((o,c)=>{this.Et(e,i,c)}),ht.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.Rr.get(a);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(a)),ht.resolve()}getOverlaysForCollection(e,i,a){const o=ia(),c=i.length+1,f=new Vt(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,p=y.getKey();if(!i.isPrefixOf(p.path))break;p.path.length===c&&y.largestBatchId>a&&o.set(y.getKey(),y)}return ht.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let c=new je((p,E)=>p-E);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===i&&p.largestBatchId>a){let E=c.get(p.largestBatchId);E===null&&(E=ia(),c=c.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=ia(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((p,E)=>m.set(p,E)),!(m.size()>=o)););return ht.resolve(m)}Et(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(a.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new _A(i,a));let c=this.Rr.get(i);c===void 0&&(c=ee(),this.Rr.set(i,c)),this.Rr.set(i,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return ht.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ht.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.Vr=new en(on.mr),this.gr=new en(on.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,i){const a=new on(e,i);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.wr(new on(e,i))}Sr(e,i){e.forEach(a=>this.removeReference(a,i))}br(e){const i=new Vt(new Ce([])),a=new on(i,e),o=new on(i,e+1),c=[];return this.gr.forEachInRange([a,o],f=>{this.wr(f),c.push(f.key)}),c}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const i=new Vt(new Ce([])),a=new on(i,e),o=new on(i,e+1);let c=ee();return this.gr.forEachInRange([a,o],f=>{c=c.add(f.key)}),c}containsKey(e){const i=new on(e,0),a=this.Vr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class on{constructor(e,i){this.key=e,this.Cr=i}static mr(e,i){return Vt.comparator(e.key,i.key)||Xt(e.Cr,i.Cr)}static pr(e,i){return Xt(e.Cr,i.Cr)||Vt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.Fr=1,this.Mr=new en(on.mr)}checkEmpty(e){return ht.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new vA(c,i,a,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new on(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ht.resolve(f)}lookupMutationBatch(e,i){return ht.resolve(this.Or(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.Nr(a),c=o<0?0:o;return ht.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ht.resolve(this.mutationQueue.length===0?am:this.Fr-1)}getAllMutationBatches(e){return ht.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new on(i,0),o=new on(i,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([a,o],f=>{const m=this.Or(f.Cr);c.push(m)}),ht.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new en(Xt);return i.forEach(o=>{const c=new on(o,0),f=new on(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,f],m=>{a=a.add(m.Cr)})}),ht.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let c=a;Vt.isDocumentKey(c)||(c=c.child(""));const f=new on(new Vt(c),0);let m=new en(Xt);return this.Mr.forEachWhile(y=>{const p=y.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(m=m.add(y.Cr)),!0)},f),ht.resolve(this.Br(m))}Br(e){const i=[];return e.forEach(a=>{const o=this.Or(a);o!==null&&i.push(o)}),i}removeMutationBatch(e,i){fe(this.Lr(i.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return ht.forEach(i.mutations,o=>{const c=new on(o.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,i){const a=new on(i,0),o=this.Mr.firstAfterOrEqual(a);return ht.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ht.resolve()}Lr(e,i){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const i=this.Nr(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.kr=e,this.docs=function(){return new je(Vt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),c=o?o.size:0,f=this.kr(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ht.resolve(a?a.document.mutableCopy():xn.newInvalidDocument(i))}getEntries(e,i){let a=Mr();return i.forEach(o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():xn.newInvalidDocument(o))}),ht.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let c=Mr();const f=i.path,m=new Vt(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:p,value:{document:E}}=y.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||Nx(Mx(E),a)<=0||(o.has(E.key)||Zc(i,E))&&(c=c.insert(E.key,E.mutableCopy()))}return ht.resolve(c)}getAllFromCollectionGroup(e,i,a,o){Bt()}qr(e,i){return ht.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new rw(this)}getSize(e){return ht.resolve(this.size)}}class rw extends KA{constructor(e){super(),this.Ir=e}applyChanges(e){const i=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?i.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(a)}),ht.waitFor(i)}getFromCache(e,i){return this.Ir.getEntry(e,i)}getAllFromCache(e,i){return this.Ir.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.persistence=e,this.Qr=new la(i=>um(i),cm),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.$r=0,this.Ur=new pm,this.targetCount=0,this.Kr=ll.Un()}forEachTarget(e,i){return this.Qr.forEach((a,o)=>i(o)),ht.resolve()}getLastRemoteSnapshotVersion(e){return ht.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ht.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ht.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.$r&&(this.$r=i),ht.resolve()}zn(e){this.Qr.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Kr=new ll(i),this.highestTargetId=i),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,i){return this.zn(i),this.targetCount+=1,ht.resolve()}updateTargetData(e,i){return this.zn(i),ht.resolve()}removeTargetData(e,i){return this.Qr.delete(i.target),this.Ur.br(i.targetId),this.targetCount-=1,ht.resolve()}removeTargets(e,i,a){let o=0;const c=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=i&&a.get(m.targetId)===null&&(this.Qr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ht.waitFor(c).next(()=>o)}getTargetCount(e){return ht.resolve(this.targetCount)}getTargetData(e,i){const a=this.Qr.get(i)||null;return ht.resolve(a)}addMatchingKeys(e,i,a){return this.Ur.yr(i,a),ht.resolve()}removeMatchingKeys(e,i,a){this.Ur.Sr(i,a);const o=this.persistence.referenceDelegate,c=[];return o&&i.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),ht.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this.Ur.br(i),ht.resolve()}getMatchingKeysForTargetId(e,i){const a=this.Ur.vr(i);return ht.resolve(a)}containsKey(e,i){return ht.resolve(this.Ur.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,i){this.Wr={},this.overlays={},this.Gr=new $c(0),this.zr=!1,this.zr=!0,this.jr=new ew,this.referenceDelegate=e(this),this.Hr=new sw(this),this.indexManager=new HA,this.remoteDocumentCache=function(o){return new iw(o)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new BA(i),this.Yr=new JA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new tw,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.Wr[e.toKey()];return a||(a=new nw(i,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,i,a){Tt("MemoryPersistence","Starting transaction:",e);const o=new aw(this.Gr.next());return this.referenceDelegate.Zr(),a(o).next(c=>this.referenceDelegate.Xr(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}ei(e,i){return ht.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,i)))}}class aw extends Ox{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.ti=new pm,this.ni=null}static ri(e){return new gm(e)}get ii(){if(this.ni)return this.ni;throw Bt()}addReference(e,i,a){return this.ti.addReference(a,i),this.ii.delete(a.toString()),ht.resolve()}removeReference(e,i,a){return this.ti.removeReference(a,i),this.ii.add(a.toString()),ht.resolve()}markPotentiallyOrphaned(e,i){return this.ii.add(i.toString()),ht.resolve()}removeTarget(e,i){this.ti.br(i.targetId).forEach(o=>this.ii.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(o=>{o.forEach(c=>this.ii.add(c.toString()))}).next(()=>a.removeTargetData(e,i))}Zr(){this.ni=new Set}Xr(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ht.forEach(this.ii,a=>{const o=Vt.fromPath(a);return this.si(e,o).next(c=>{c||i.removeEntry(o,Ht.min())})}).next(()=>(this.ni=null,i.apply(e)))}updateLimboDocument(e,i){return this.si(e,i).next(a=>{a?this.ii.delete(i.toString()):this.ii.add(i.toString())})}Jr(e){return 0}si(e,i){return ht.or([()=>ht.resolve(this.ti.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.ei(e,i)])}}class Uc{constructor(e,i){this.persistence=e,this.oi=new la(a=>Lx(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=YA(this,i)}static ri(e,i){return new Uc(e,i)}Zr(){}Xr(e){return ht.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}nr(e){const i=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>i.next(o=>a+o))}sr(e){let i=0;return this.rr(e,a=>{i++}).next(()=>i)}rr(e,i){return ht.forEach(this.oi,(a,o)=>this.ar(e,a,o).next(c=>c?ht.resolve():i(o)))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,i).next(m=>{m||(a++,c.removeEntry(f,Ht.min()))})).next(()=>c.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,i){return this.oi.set(i,e.currentSequenceNumber),ht.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.oi.set(a,e.currentSequenceNumber),ht.resolve()}removeReference(e,i,a){return this.oi.set(a,e.currentSequenceNumber),ht.resolve()}updateLimboDocument(e,i){return this.oi.set(i,e.currentSequenceNumber),ht.resolve()}Jr(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Sc(e.data.value)),i}ar(e,i,a){return ht.or([()=>this.persistence.ei(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.oi.get(i);return ht.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Hi=a,this.Ji=o}static Yi(e,i){let a=ee(),o=ee();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new ym(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return eT()?8:jx(JS())>0?6:4}()}initialize(e,i){this.ns=e,this.indexManager=i,this.Zi=!0}getDocumentsMatchingQuery(e,i,a,o){const c={result:null};return this.rs(e,i).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ss(e,i,o,a).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new lw;return this._s(e,i,f).next(m=>{if(c.result=m,this.Xi)return this.us(e,i,f,m.size)})}).next(()=>c.result)}us(e,i,a,o){return a.documentReadCount<this.es?(Ka()<=ae.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",Xa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ht.resolve()):(Ka()<=ae.DEBUG&&Tt("QueryEngine","Query:",Xa(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ts*o?(Ka()<=ae.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",Xa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(i))):ht.resolve())}rs(e,i){if(Qv(i))return ht.resolve(null);let a=Yi(i);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=zd(i,null,"F"),a=Yi(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next(c=>{const f=ee(...c);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,a).next(y=>{const p=this.cs(i,m);return this.ls(i,p,f,y.readTime)?this.rs(e,zd(i,null,"F")):this.hs(e,p,i,y)}))})))}ss(e,i,a,o){return Qv(i)||o.isEqual(Ht.min())?ht.resolve(null):this.ns.getDocuments(e,a).next(c=>{const f=this.cs(i,c);return this.ls(i,f,a,o)?ht.resolve(null):(Ka()<=ae.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xa(i)),this.hs(e,f,i,Ix(o,Mo)).next(m=>m))})}cs(e,i){let a=new en(D_(e));return i.forEach((o,c)=>{Zc(e,c)&&(a=a.add(c))}),a}ls(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}_s(e,i,a){return Ka()<=ae.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",Xa(i)),this.ns.getDocumentsMatchingQuery(e,i,gs.min(),a)}hs(e,i,a,o){return this.ns.getDocumentsMatchingQuery(e,a,o).next(c=>(i.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="LocalStore",uw=3e8;class cw{constructor(e,i,a,o){this.persistence=e,this.Ps=i,this.serializer=o,this.Ts=new je(Xt),this.Is=new la(c=>um(c),cm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZA(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ts))}}function hw(r,e,i,a){return new cw(r,e,i,a)}async function Z_(r,e){const i=Gt(r);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next(c=>(o=c,i.As(e),i.mutationQueue.getAllMutationBatches(a))).next(c=>{const f=[],m=[];let y=ee();for(const p of o){f.push(p.batchId);for(const E of p.mutations)y=y.add(E.key)}for(const p of c){m.push(p.batchId);for(const E of p.mutations)y=y.add(E.key)}return i.localDocuments.getDocuments(a,y).next(p=>({Rs:p,removedBatchIds:f,addedBatchIds:m}))})})}function fw(r,e){const i=Gt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),c=i.ds.newChangeBuffer({trackRemovals:!0});return function(m,y,p,E){const S=p.batch,A=S.keys();let O=ht.resolve();return A.forEach(j=>{O=O.next(()=>E.getEntry(y,j)).next(W=>{const B=p.docVersions.get(j);fe(B!==null),W.version.compareTo(B)<0&&(S.applyToRemoteDocument(W,p),W.isValidDocument()&&(W.setReadTime(p.commitVersion),E.addEntry(W)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(y,S))}(i,a,e,c).next(()=>c.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(m){let y=ee();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(y=y.add(m.batch.mutations[p].key));return y}(e))).next(()=>i.localDocuments.getDocuments(a,o))})}function J_(r){const e=Gt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Hr.getLastRemoteSnapshotVersion(i))}function dw(r,e){const i=Gt(r),a=e.snapshotVersion;let o=i.Ts;return i.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=i.ds.newChangeBuffer({trackRemovals:!0});o=i.Ts;const m=[];e.targetChanges.forEach((E,S)=>{const A=o.get(S);if(!A)return;m.push(i.Hr.removeMatchingKeys(c,E.removedDocuments,S).next(()=>i.Hr.addMatchingKeys(c,E.addedDocuments,S)));let O=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?O=O.withResumeToken(_n.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,a)),o=o.insert(S,O),function(W,B,F){return W.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=uw?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(A,O,E)&&m.push(i.Hr.updateTargetData(c,O))});let y=Mr(),p=ee();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(c,E))}),m.push(mw(c,f,e.documentUpdates).next(E=>{y=E.Vs,p=E.fs})),!a.isEqual(Ht.min())){const E=i.Hr.getLastRemoteSnapshotVersion(c).next(S=>i.Hr.setTargetsMetadata(c,c.currentSequenceNumber,a));m.push(E)}return ht.waitFor(m).next(()=>f.apply(c)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,y,p)).next(()=>y)}).then(c=>(i.Ts=o,c))}function mw(r,e,i){let a=ee(),o=ee();return i.forEach(c=>a=a.add(c)),e.getEntries(r,a).next(c=>{let f=Mr();return i.forEach((m,y)=>{const p=c.get(m);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Ht.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):Tt(vm,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",y.version)}),{Vs:f,fs:o}})}function pw(r,e){const i=Gt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=am),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function gw(r,e){const i=Gt(r);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return i.Hr.getTargetData(a,e).next(c=>c?(o=c,ht.resolve(o)):i.Hr.allocateTargetId(a).next(f=>(o=new os(e,f,"TargetPurposeListen",a.currentSequenceNumber),i.Hr.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=i.Ts.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ts=i.Ts.insert(a.targetId,a),i.Is.set(e,a.targetId)),a})}async function Hd(r,e,i){const a=Gt(r),o=a.Ts.get(e),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,f=>a.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!pl(f))throw f;Tt(vm,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ts=a.Ts.remove(e),a.Is.delete(o.target)}function s0(r,e,i){const a=Gt(r);let o=Ht.min(),c=ee();return a.persistence.runTransaction("Execute query","readwrite",f=>function(y,p,E){const S=Gt(y),A=S.Is.get(E);return A!==void 0?ht.resolve(S.Ts.get(A)):S.Hr.getTargetData(p,E)}(a,f,Yi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(f,m.targetId).next(y=>{c=y})}).next(()=>a.Ps.getDocumentsMatchingQuery(f,e,i?o:Ht.min(),i?c:ee())).next(m=>(yw(a,nA(e),m),{documents:m,gs:c})))}function yw(r,e,i){let a=r.Es.get(e)||Ht.min();i.forEach((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),r.Es.set(e,a)}class a0{constructor(){this.activeTargetIds=oA()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vw{constructor(){this.ho=new a0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,i,a){this.Po[e]=i}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new a0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="ConnectivityMonitor";class o0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Tt(l0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Tt(l0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function Gd(){return gc===null?gc=function(){return 268435456+Math.round(2147483648*Math.random())}():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="RestConnection",bw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ew{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=i+"://"+e.host,this.yo=`projects/${a}/databases/${o}`,this.wo=this.databaseId.database===Vc?`project_id=${a}`:`project_id=${a}&database_id=${o}`}So(e,i,a,o,c){const f=Gd(),m=this.bo(e,i.toUriEncodedString());Tt(bd,`Sending RPC '${e}' ${f}:`,m,a);const y={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(y,o,c),this.vo(e,m,y,a).then(p=>(Tt(bd,`Received RPC '${e}' ${f}: `,p),p),p=>{throw il(bd,`RPC '${e}' ${f} failed with error: `,p,"url: ",m,"request:",a),p})}Co(e,i,a,o,c,f){return this.So(e,i,a,o,c)}Do(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,c)=>e[c]=o),a&&a.headers.forEach((o,c)=>e[c]=o)}bo(e,i){const a=bw[e];return`${this.po}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class Tw extends Ew{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,i,a,o){const c=Gd();return new Promise((f,m)=>{const y=new i_;y.setWithCredentials(!0),y.listenOnce(r_.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Ec.NO_ERROR:const E=y.getResponseJson();Tt(Sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Ec.TIMEOUT:Tt(Sn,`RPC '${e}' ${c} timed out`),m(new xt(ct.DEADLINE_EXCEEDED,"Request time out"));break;case Ec.HTTP_ERROR:const S=y.getStatus();if(Tt(Sn,`RPC '${e}' ${c} failed with status:`,S,"response text:",y.getResponseText()),S>0){let A=y.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A==null?void 0:A.error;if(O&&O.status&&O.message){const j=function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf(F)>=0?F:ct.UNKNOWN}(O.status);m(new xt(j,O.message))}else m(new xt(ct.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new xt(ct.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{Tt(Sn,`RPC '${e}' ${c} completed.`)}});const p=JSON.stringify(o);Tt(Sn,`RPC '${e}' ${c} sending request:`,o),y.send(i,"POST",p,a,15)})}Wo(e,i,a){const o=Gd(),c=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=l_(),m=a_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Do(y.initMessageHeaders,i,a),y.encodeInitMessageHeaders=!0;const E=c.join("");Tt(Sn,`Creating RPC '${e}' stream ${o}: ${E}`,y);const S=f.createWebChannel(E,y);let A=!1,O=!1;const j=new Sw({Fo:B=>{O?Tt(Sn,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(A||(Tt(Sn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),Tt(Sn,`RPC '${e}' stream ${o} sending:`,B),S.send(B))},Mo:()=>S.close()}),W=(B,F,H)=>{B.listen(F,P=>{try{H(P)}catch(Z){setTimeout(()=>{throw Z},0)}})};return W(S,bo.EventType.OPEN,()=>{O||(Tt(Sn,`RPC '${e}' stream ${o} transport opened.`),j.Qo())}),W(S,bo.EventType.CLOSE,()=>{O||(O=!0,Tt(Sn,`RPC '${e}' stream ${o} transport closed`),j.Uo())}),W(S,bo.EventType.ERROR,B=>{O||(O=!0,il(Sn,`RPC '${e}' stream ${o} transport errored:`,B),j.Uo(new xt(ct.UNAVAILABLE,"The operation could not be completed")))}),W(S,bo.EventType.MESSAGE,B=>{var F;if(!O){const H=B.data[0];fe(!!H);const P=H,Z=(P==null?void 0:P.error)||((F=P[0])===null||F===void 0?void 0:F.error);if(Z){Tt(Sn,`RPC '${e}' stream ${o} received error:`,Z);const st=Z.status;let mt=function(w){const N=Qe[w];if(N!==void 0)return P_(N)}(st),M=Z.message;mt===void 0&&(mt=ct.INTERNAL,M="Unknown error status: "+st+" with message "+Z.message),O=!0,j.Uo(new xt(mt,M)),S.close()}else Tt(Sn,`RPC '${e}' stream ${o} received:`,H),j.Ko(H)}}),W(m,s_.STAT_EVENT,B=>{B.stat===Md.PROXY?Tt(Sn,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Md.NOPROXY&&Tt(Sn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.$o()},0),j}}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(r){return new RA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,i,a=1e3,o=1.5,c=6e4){this.Ti=e,this.timerId=i,this.Go=a,this.zo=o,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const i=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),o=Math.max(0,i-a);o>0&&Tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="PersistentStream";class e1{constructor(e,i,a,o,c,f,m,y){this.Ti=e,this.n_=a,this.r_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new t1(e,i)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,i){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():i&&i.code===ct.RESOURCE_EXHAUSTED?(Ir(i.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):i&&i.code===ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(i)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),i=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.i_===i&&this.V_(a,o)},a=>{e(()=>{const o=new xt(ct.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(o)})})}V_(e,i){const a=this.R_(this.i_);this.stream=this.f_(e,i),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{a(()=>this.m_(o))}),this.stream.onMessage(o=>{a(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Tt(u0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return i=>{this.Ti.enqueueAndForget(()=>this.i_===e?i():(Tt(u0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xw extends e1{constructor(e,i,a,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}f_(e,i){return this.connection.Wo("Listen",e,i)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const i=IA(this.serializer,e),a=function(c){if(!("targetChange"in c))return Ht.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ht.min():f.readTime?Ki(f.readTime):Ht.min()}(e);return this.listener.p_(i,a)}y_(e){const i={};i.database=qd(this.serializer),i.addTarget=function(c,f){let m;const y=f.target;if(m=kd(y)?{documents:VA(c,y)}:{query:OA(c,y).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=H_(c,f.resumeToken);const p=Ud(c,f.expectedCount);p!==null&&(m.expectedCount=p)}else if(f.snapshotVersion.compareTo(Ht.min())>0){m.readTime=zc(c,f.snapshotVersion.toTimestamp());const p=Ud(c,f.expectedCount);p!==null&&(m.expectedCount=p)}return m}(this.serializer,e);const a=kA(this.serializer,e);a&&(i.labels=a),this.I_(i)}w_(e){const i={};i.database=qd(this.serializer),i.removeTarget=e,this.I_(i)}}class Aw extends e1{constructor(e,i,a,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,i){return this.connection.Wo("Write",e,i)}g_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const i=NA(e.writeResults,e.commitTime),a=Ki(e.commitTime);return this.listener.v_(a,i)}C_(){const e={};e.database=qd(this.serializer),this.I_(e)}b_(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>MA(this.serializer,a))};this.I_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Rw extends ww{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new xt(ct.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.So(e,Pd(i,a),o,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xt(ct.UNKNOWN,c.toString())})}Co(e,i,a,o,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,Pd(i,a),o,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new xt(ct.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Cw{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ir(i),this.N_=!1):Tt("OnlineStateTracker",i)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="RemoteStore";class Dw{constructor(e,i,a,o,c){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(f=>{a.enqueueAndForget(async()=>{oa(this)&&(Tt(sa,"Restarting streams for network reachability change."),await async function(y){const p=Gt(y);p.W_.add(4),await Ho(p),p.j_.set("Unknown"),p.W_.delete(4),await rh(p)}(this))})}),this.j_=new Cw(a,o)}}async function rh(r){if(oa(r))for(const e of r.G_)await e(!0)}async function Ho(r){for(const e of r.G_)await e(!1)}function n1(r,e){const i=Gt(r);i.K_.has(e.targetId)||(i.K_.set(e.targetId,e),Sm(i)?Em(i):gl(i).c_()&&bm(i,e))}function _m(r,e){const i=Gt(r),a=gl(i);i.K_.delete(e),a.c_()&&i1(i,e),i.K_.size===0&&(a.c_()?a.P_():oa(i)&&i.j_.set("Unknown"))}function bm(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ht.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}gl(r).y_(e)}function i1(r,e){r.H_.Ne(e),gl(r).w_(e)}function Em(r){r.H_=new TA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),gl(r).start(),r.j_.B_()}function Sm(r){return oa(r)&&!gl(r).u_()&&r.K_.size>0}function oa(r){return Gt(r).W_.size===0}function r1(r){r.H_=void 0}async function Iw(r){r.j_.set("Online")}async function Mw(r){r.K_.forEach((e,i)=>{bm(r,e)})}async function Nw(r,e){r1(r),Sm(r)?(r.j_.q_(e),Em(r)):r.j_.set("Unknown")}async function Vw(r,e,i){if(r.j_.set("Online"),e instanceof q_&&e.state===2&&e.cause)try{await async function(o,c){const f=c.cause;for(const m of c.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(r,e)}catch(a){Tt(sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Pc(r,a)}else if(e instanceof Ac?r.H_.We(e):e instanceof B_?r.H_.Ze(e):r.H_.je(e),!i.isEqual(Ht.min()))try{const a=await J_(r.localStore);i.compareTo(a)>=0&&await function(c,f){const m=c.H_.ot(f);return m.targetChanges.forEach((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const E=c.K_.get(p);E&&c.K_.set(p,E.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,p)=>{const E=c.K_.get(y);if(!E)return;c.K_.set(y,E.withResumeToken(_n.EMPTY_BYTE_STRING,E.snapshotVersion)),i1(c,y);const S=new os(E.target,y,p,E.sequenceNumber);bm(c,S)}),c.remoteSyncer.applyRemoteEvent(m)}(r,i)}catch(a){Tt(sa,"Failed to raise snapshot:",a),await Pc(r,a)}}async function Pc(r,e,i){if(!pl(e))throw e;r.W_.add(1),await Ho(r),r.j_.set("Offline"),i||(i=()=>J_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Tt(sa,"Retrying IndexedDB access"),await i(),r.W_.delete(1),await rh(r)})}function s1(r,e){return e().catch(i=>Pc(r,i,e))}async function sh(r){const e=Gt(r),i=bs(e);let a=e.U_.length>0?e.U_[e.U_.length-1].batchId:am;for(;Ow(e);)try{const o=await pw(e.localStore,a);if(o===null){e.U_.length===0&&i.P_();break}a=o.batchId,jw(e,o)}catch(o){await Pc(e,o)}a1(e)&&l1(e)}function Ow(r){return oa(r)&&r.U_.length<10}function jw(r,e){r.U_.push(e);const i=bs(r);i.c_()&&i.S_&&i.b_(e.mutations)}function a1(r){return oa(r)&&!bs(r).u_()&&r.U_.length>0}function l1(r){bs(r).start()}async function kw(r){bs(r).C_()}async function Lw(r){const e=bs(r);for(const i of r.U_)e.b_(i.mutations)}async function zw(r,e,i){const a=r.U_.shift(),o=fm.from(a,e,i);await s1(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await sh(r)}async function Uw(r,e){e&&bs(r).S_&&await async function(a,o){if(function(f){return EA(f)&&f!==ct.ABORTED}(o.code)){const c=a.U_.shift();bs(a).h_(),await s1(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o)),await sh(a)}}(r,e),a1(r)&&l1(r)}async function c0(r,e){const i=Gt(r);i.asyncQueue.verifyOperationInProgress(),Tt(sa,"RemoteStore received new credentials");const a=oa(i);i.W_.add(3),await Ho(i),a&&i.j_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.W_.delete(3),await rh(i)}async function Pw(r,e){const i=Gt(r);e?(i.W_.delete(2),await rh(i)):e||(i.W_.add(2),await Ho(i),i.j_.set("Unknown"))}function gl(r){return r.J_||(r.J_=function(i,a,o){const c=Gt(i);return c.M_(),new xw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:Iw.bind(null,r),No:Mw.bind(null,r),Lo:Nw.bind(null,r),p_:Vw.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Sm(r)?Em(r):r.j_.set("Unknown")):(await r.J_.stop(),r1(r))})),r.J_}function bs(r){return r.Y_||(r.Y_=function(i,a,o){const c=Gt(i);return c.M_(),new Aw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:kw.bind(null,r),Lo:Uw.bind(null,r),D_:Lw.bind(null,r),v_:zw.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await sh(r)):(await r.Y_.stop(),r.U_.length>0&&(Tt(sa,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,i,a,o,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,c){const f=Date.now()+a,m=new Tm(e,i,f,o,c);return m.start(a),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xt(ct.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(r,e){if(Ir("AsyncQueue",`${e}: ${r}`),pl(r))return new xt(ct.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{static emptySet(e){return new el(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Vt.comparator(i.key,a.key):(i,a)=>Vt.comparator(i.key,a.key),this.keyedMap=Eo(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new el;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.Z_=new je(Vt.comparator)}track(e){const i=e.doc.key,a=this.Z_.get(i);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(i,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(i):e.type===1&&a.type===2?this.Z_=this.Z_.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):Bt():this.Z_=this.Z_.insert(i,e)}X_(){const e=[];return this.Z_.inorderTraversal((i,a)=>{e.push(a)}),e}}class ol{constructor(e,i,a,o,c,f,m,y,p){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,i,a,o,c){const f=[];return i.forEach(m=>{f.push({type:0,doc:m})}),new ol(e,i,el.emptySet(i),f,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class qw{constructor(){this.queries=f0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(i,a){const o=Gt(i),c=o.queries;o.queries=f0(),c.forEach((f,m)=>{for(const y of m.ta)y.onError(a)})})(this,new xt(ct.ABORTED,"Firestore shutting down"))}}function f0(){return new la(r=>C_(r),Xc)}async function Am(r,e){const i=Gt(r);let a=3;const o=e.query;let c=i.queries.get(o);c?!c.na()&&e.ra()&&(a=2):(c=new Bw,a=e.ra()?0:1);try{switch(a){case 0:c.ea=await i.onListen(o,!0);break;case 1:c.ea=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=xm(f,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(m)}i.queries.set(o,c),c.ta.push(e),e.sa(i.onlineState),c.ea&&e.oa(c.ea)&&Rm(i)}async function wm(r,e){const i=Gt(r),a=e.query;let o=3;const c=i.queries.get(a);if(c){const f=c.ta.indexOf(e);f>=0&&(c.ta.splice(f,1),c.ta.length===0?o=e.ra()?0:1:!c.na()&&e.ra()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function Hw(r,e){const i=Gt(r);let a=!1;for(const o of e){const c=o.query,f=i.queries.get(c);if(f){for(const m of f.ta)m.oa(o)&&(a=!0);f.ea=o}}a&&Rm(i)}function Gw(r,e,i){const a=Gt(r),o=a.queries.get(e);if(o)for(const c of o.ta)c.onError(i);a.queries.delete(e)}function Rm(r){r.ia.forEach(e=>{e.next()})}var Fd,d0;(d0=Fd||(Fd={}))._a="default",d0.Cache="cache";class Cm{constructor(e,i,a){this.query=e,this.aa=i,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new ol(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.ua?this.la(e)&&(this.aa.next(e),i=!0):this.ha(e,this.onlineState)&&(this.Pa(e),i=!0),this.ca=e,i}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let i=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),i=!0),i}ha(e,i){if(!e.fromCache||!this.ra())return!0;const a=i!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}la(e){if(e.docChanges.length>0)return!0;const i=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Pa(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Fd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class Fw{constructor(e,i){this.query=e,this.fa=i,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ee(),this.mutatedKeys=ee(),this.ya=D_(e),this.wa=new el(this.ya)}get Sa(){return this.fa}ba(e,i){const a=i?i.Da:new h0,o=i?i.wa:this.wa;let c=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,S)=>{const A=o.get(E),O=Zc(this.query,S)?S:null,j=!!A&&this.mutatedKeys.has(A.key),W=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let B=!1;A&&O?A.data.isEqual(O.data)?j!==W&&(a.track({type:3,doc:O}),B=!0):this.va(A,O)||(a.track({type:2,doc:O}),B=!0,(y&&this.ya(O,y)>0||p&&this.ya(O,p)<0)&&(m=!0)):!A&&O?(a.track({type:0,doc:O}),B=!0):A&&!O&&(a.track({type:1,doc:A}),B=!0,(y||p)&&(m=!0)),B&&(O?(f=f.add(O),c=W?c.add(E):c.delete(E)):(f=f.delete(E),c=c.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),c=c.delete(E.key),a.track({type:1,doc:E})}return{wa:f,Da:a,ls:m,mutatedKeys:c}}va(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const c=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((E,S)=>function(O,j){const W=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return W(O)-W(j)}(E.type,S.type)||this.ya(E.doc,S.doc)),this.Ca(a),o=o!=null&&o;const m=i&&!o?this.Fa():[],y=this.pa.size===0&&this.current&&!o?1:0,p=y!==this.ga;return this.ga=y,f.length!==0||p?{snapshot:new ol(this.query,e.wa,c,f,e.mutatedKeys,y===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new h0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(i=>this.fa=this.fa.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.fa=this.fa.delete(i)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ee(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const i=[];return e.forEach(a=>{this.pa.has(a)||i.push(new u1(a))}),this.pa.forEach(a=>{e.has(a)||i.push(new o1(a))}),i}Oa(e){this.fa=e.gs,this.pa=ee();const i=this.ba(e.documents);return this.applyChanges(i,!0)}Na(){return ol.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Dm="SyncEngine";class Qw{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class $w{constructor(e){this.key=e,this.Ba=!1}}class Ww{constructor(e,i,a,o,c,f){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new la(m=>C_(m),Xc),this.qa=new Map,this.Qa=new Set,this.$a=new je(Vt.comparator),this.Ua=new Map,this.Ka=new pm,this.Wa={},this.Ga=new Map,this.za=ll.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Yw(r,e,i=!0){const a=p1(r);let o;const c=a.ka.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Na()):o=await c1(a,e,i,!0),o}async function Kw(r,e){const i=p1(r);await c1(i,e,!0,!1)}async function c1(r,e,i,a){const o=await gw(r.localStore,Yi(e)),c=o.targetId,f=r.sharedClientState.addLocalQueryTarget(c,i);let m;return a&&(m=await Xw(r,e,c,f==="current",o.resumeToken)),r.isPrimaryClient&&i&&n1(r.remoteStore,o),m}async function Xw(r,e,i,a,o){r.Ha=(S,A,O)=>async function(W,B,F,H){let P=B.view.ba(F);P.ls&&(P=await s0(W.localStore,B.query,!1).then(({documents:M})=>B.view.ba(M,P)));const Z=H&&H.targetChanges.get(B.targetId),st=H&&H.targetMismatches.get(B.targetId)!=null,mt=B.view.applyChanges(P,W.isPrimaryClient,Z,st);return p0(W,B.targetId,mt.Ma),mt.snapshot}(r,S,A,O);const c=await s0(r.localStore,e,!0),f=new Fw(e,c.gs),m=f.ba(c.documents),y=qo.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",o),p=f.applyChanges(m,r.isPrimaryClient,y);p0(r,i,p.Ma);const E=new Qw(e,i,f);return r.ka.set(e,E),r.qa.has(i)?r.qa.get(i).push(e):r.qa.set(i,[e]),p.snapshot}async function Zw(r,e,i){const a=Gt(r),o=a.ka.get(e),c=a.qa.get(o.targetId);if(c.length>1)return a.qa.set(o.targetId,c.filter(f=>!Xc(f,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Hd(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),i&&_m(a.remoteStore,o.targetId),Qd(a,o.targetId)}).catch(ml)):(Qd(a,o.targetId),await Hd(a.localStore,o.targetId,!0))}async function Jw(r,e){const i=Gt(r),a=i.ka.get(e),o=i.qa.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),_m(i.remoteStore,a.targetId))}async function t2(r,e,i){const a=l2(r);try{const o=await function(f,m){const y=Gt(f),p=tn.now(),E=m.reduce((O,j)=>O.add(j.key),ee());let S,A;return y.persistence.runTransaction("Locally write mutations","readwrite",O=>{let j=Mr(),W=ee();return y.ds.getEntries(O,E).next(B=>{j=B,j.forEach((F,H)=>{H.isValidDocument()||(W=W.add(F))})}).next(()=>y.localDocuments.getOverlayedDocuments(O,j)).next(B=>{S=B;const F=[];for(const H of m){const P=gA(H,S.get(H.key).overlayedDocument);P!=null&&F.push(new Ts(H.key,P,b_(P.value.mapValue),Nn.exists(!0)))}return y.mutationQueue.addMutationBatch(O,p,F,m)}).next(B=>{A=B;const F=B.applyToLocalDocumentSet(S,W);return y.documentOverlayCache.saveOverlays(O,B.batchId,F)})}).then(()=>({batchId:A.batchId,changes:M_(S)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let p=f.Wa[f.currentUser.toKey()];p||(p=new je(Xt)),p=p.insert(m,y),f.Wa[f.currentUser.toKey()]=p}(a,o.batchId,i),await Go(a,o.changes),await sh(a.remoteStore)}catch(o){const c=xm(o,"Failed to persist write");i.reject(c)}}async function h1(r,e){const i=Gt(r);try{const a=await dw(i.localStore,e);e.targetChanges.forEach((o,c)=>{const f=i.Ua.get(c);f&&(fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?fe(f.Ba):o.removedDocuments.size>0&&(fe(f.Ba),f.Ba=!1))}),await Go(i,a,e)}catch(a){await ml(a)}}function m0(r,e,i){const a=Gt(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.ka.forEach((c,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Gt(f);y.onlineState=m;let p=!1;y.queries.forEach((E,S)=>{for(const A of S.ta)A.sa(m)&&(p=!0)}),p&&Rm(y)}(a.eventManager,e),o.length&&a.La.p_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function e2(r,e,i){const a=Gt(r);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Ua.get(e),c=o&&o.key;if(c){let f=new je(Vt.comparator);f=f.insert(c,xn.newNoDocument(c,Ht.min()));const m=ee().add(c),y=new nh(Ht.min(),new Map,new je(Xt),f,m);await h1(a,y),a.$a=a.$a.remove(c),a.Ua.delete(e),Im(a)}else await Hd(a.localStore,e,!1).then(()=>Qd(a,e,i)).catch(ml)}async function n2(r,e){const i=Gt(r),a=e.batch.batchId;try{const o=await fw(i.localStore,e);d1(i,a,null),f1(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Go(i,o)}catch(o){await ml(o)}}async function i2(r,e,i){const a=Gt(r);try{const o=await function(f,m){const y=Gt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let E;return y.mutationQueue.lookupMutationBatch(p,m).next(S=>(fe(S!==null),E=S.keys(),y.mutationQueue.removeMutationBatch(p,S))).next(()=>y.mutationQueue.performConsistencyCheck(p)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(p,E,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E)).next(()=>y.localDocuments.getDocuments(p,E))})}(a.localStore,e);d1(a,e,i),f1(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await Go(a,o)}catch(o){await ml(o)}}function f1(r,e){(r.Ga.get(e)||[]).forEach(i=>{i.resolve()}),r.Ga.delete(e)}function d1(r,e,i){const a=Gt(r);let o=a.Wa[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(i?c.reject(i):c.resolve(),o=o.remove(e)),a.Wa[a.currentUser.toKey()]=o}}function Qd(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.qa.get(e))r.ka.delete(a),i&&r.La.Ja(a,i);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(a=>{r.Ka.containsKey(a)||m1(r,a)})}function m1(r,e){r.Qa.delete(e.path.canonicalString());const i=r.$a.get(e);i!==null&&(_m(r.remoteStore,i),r.$a=r.$a.remove(e),r.Ua.delete(i),Im(r))}function p0(r,e,i){for(const a of i)a instanceof o1?(r.Ka.addReference(a.key,e),r2(r,a)):a instanceof u1?(Tt(Dm,"Document no longer in limbo: "+a.key),r.Ka.removeReference(a.key,e),r.Ka.containsKey(a.key)||m1(r,a.key)):Bt()}function r2(r,e){const i=e.key,a=i.path.canonicalString();r.$a.get(i)||r.Qa.has(a)||(Tt(Dm,"New document in limbo: "+i),r.Qa.add(a),Im(r))}function Im(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const i=new Vt(Ce.fromString(e)),a=r.za.next();r.Ua.set(a,new $w(i)),r.$a=r.$a.insert(i,a),n1(r.remoteStore,new os(Yi(Kc(i.path)),a,"TargetPurposeLimboResolution",$c.ae))}}async function Go(r,e,i){const a=Gt(r),o=[],c=[],f=[];a.ka.isEmpty()||(a.ka.forEach((m,y)=>{f.push(a.Ha(y,e,i).then(p=>{var E;if((p||i)&&a.isPrimaryClient){const S=p?!p.fromCache:(E=i==null?void 0:i.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;a.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(p){o.push(p);const S=ym.Yi(y.targetId,p);c.push(S)}}))}),await Promise.all(f),a.La.p_(o),await async function(y,p){const E=Gt(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ht.forEach(p,A=>ht.forEach(A.Hi,O=>E.persistence.referenceDelegate.addReference(S,A.targetId,O)).next(()=>ht.forEach(A.Ji,O=>E.persistence.referenceDelegate.removeReference(S,A.targetId,O)))))}catch(S){if(!pl(S))throw S;Tt(vm,"Failed to update sequence numbers: "+S)}for(const S of p){const A=S.targetId;if(!S.fromCache){const O=E.Ts.get(A),j=O.snapshotVersion,W=O.withLastLimboFreeSnapshotVersion(j);E.Ts=E.Ts.insert(A,W)}}}(a.localStore,c))}async function s2(r,e){const i=Gt(r);if(!i.currentUser.isEqual(e)){Tt(Dm,"User change. New user:",e.toKey());const a=await Z_(i.localStore,e);i.currentUser=e,function(c,f){c.Ga.forEach(m=>{m.forEach(y=>{y.reject(new xt(ct.CANCELLED,f))})}),c.Ga.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Go(i,a.Rs)}}function a2(r,e){const i=Gt(r),a=i.Ua.get(e);if(a&&a.Ba)return ee().add(a.key);{let o=ee();const c=i.qa.get(e);if(!c)return o;for(const f of c){const m=i.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function p1(r){const e=Gt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e2.bind(null,e),e.La.p_=Hw.bind(null,e.eventManager),e.La.Ja=Gw.bind(null,e.eventManager),e}function l2(r){const e=Gt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i2.bind(null,e),e}class Bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ih(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,i){return null}nu(e,i){return null}eu(e){return hw(this.persistence,new ow,e.initialUser,this.serializer)}Xa(e){return new X_(gm.ri,this.serializer)}Za(e){return new vw}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bc.provider={build:()=>new Bc};class o2 extends Bc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,i){fe(this.persistence.referenceDelegate instanceof Uc);const a=this.persistence.referenceDelegate.garbageCollector;return new $A(a,e.asyncQueue,i)}Xa(e){const i=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new X_(a=>Uc.ri(a,i),this.serializer)}}class $d{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>m0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=s2.bind(null,this.syncEngine),await Pw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qw}()}createDatastore(e){const i=ih(e.databaseInfo.databaseId),a=function(c){return new Tw(c)}(e.databaseInfo);return function(c,f,m,y){return new Rw(c,f,m,y)}(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return function(a,o,c,f,m){return new Dw(a,o,c,f,m)}(this.localStore,this.datastore,e.asyncQueue,i=>m0(this.syncEngine,i,0),function(){return o0.D()?new o0:new _w}())}createSyncEngine(e,i){return function(o,c,f,m,y,p,E){const S=new Ww(o,c,f,m,y,p);return E&&(S.ja=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(o){const c=Gt(o);Tt(sa,"RemoteStore shutting down."),c.W_.add(5),await Ho(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}$d.provider={build:()=>new $d};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class u2{constructor(e,i,a,o,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=Tn.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async f=>{Tt(Es,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(a,f=>(Tt(Es,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=xm(i,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Sd(r,e){r.asyncQueue.verifyOperationInProgress(),Tt(Es,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener(async o=>{a.isEqual(o)||(await Z_(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function g0(r,e){r.asyncQueue.verifyOperationInProgress();const i=await c2(r);Tt(Es,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener(a=>c0(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,o)=>c0(e.remoteStore,o)),r._onlineComponents=e}async function c2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Tt(Es,"Using user provided OfflineComponentProvider");try{await Sd(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(o){return o.name==="FirebaseError"?o.code===ct.FAILED_PRECONDITION||o.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;il("Error using user provided cache. Falling back to memory cache: "+i),await Sd(r,new Bc)}}else Tt(Es,"Using default OfflineComponentProvider"),await Sd(r,new o2(void 0));return r._offlineComponents}async function g1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Tt(Es,"Using user provided OnlineComponentProvider"),await g0(r,r._uninitializedComponentsProvider._online)):(Tt(Es,"Using default OnlineComponentProvider"),await g0(r,new $d))),r._onlineComponents}function h2(r){return g1(r).then(e=>e.syncEngine)}async function qc(r){const e=await g1(r),i=e.eventManager;return i.onListen=Yw.bind(null,e.syncEngine),i.onUnlisten=Zw.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Kw.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=Jw.bind(null,e.syncEngine),i}function f2(r,e,i={}){const a=new Rr;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,m,y,p){const E=new Mm({next:A=>{E.su(),f.enqueueAndForget(()=>wm(c,S));const O=A.docs.has(m);!O&&A.fromCache?p.reject(new xt(ct.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&y&&y.source==="server"?p.reject(new xt(ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),S=new Cm(Kc(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Am(c,S)}(await qc(r),r.asyncQueue,e,i,a)),a.promise}function d2(r,e,i={}){const a=new Rr;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,m,y,p){const E=new Mm({next:A=>{E.su(),f.enqueueAndForget(()=>wm(c,S)),A.fromCache&&y.source==="server"?p.reject(new xt(ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),S=new Cm(m,E,{includeMetadataChanges:!0,Ta:!0});return Am(c,S)}(await qc(r),r.asyncQueue,e,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r,e,i){if(!i)throw new xt(ct.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function m2(r,e,i,a){if(e===!0&&a===!0)throw new xt(ct.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function v0(r){if(!Vt.isDocumentKey(r))throw new xt(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _0(r){if(Vt.isDocumentKey(r))throw new xt(ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ah(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Bt()}function Vn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new xt(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=ah(r);throw new xt(ct.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="firestore.googleapis.com",b0=!0;class E0{constructor(e){var i,a;if(e.host===void 0){if(e.ssl!==void 0)throw new xt(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_1,this.ssl=b0}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:b0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=K_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FA)throw new xt(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y1((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new xt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new xt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new xt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lh{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xt(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xt(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Ex;switch(a.type){case"firstParty":return new Ax(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new xt(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=y0.get(i);a&&(Tt("ComponentProvider","Removing Datastore"),y0.delete(i),a.terminate())}(this),Promise.resolve()}}function p2(r,e,i,a={}){var o;const c=(r=Vn(r,lh))._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${i}`;c.host!==_1&&c.host!==m&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:m,ssl:!1,emulatorOptions:a});if(!Dc(y,f)&&(r._setSettings(y),a.mockUserToken)){let p,E;if(typeof a.mockUserToken=="string")p=a.mockUserToken,E=Tn.MOCK_USER;else{p=ZS(a.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new xt(ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Tn(S)}r._authCredentials=new Sx(new o_(p,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class An{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class ms extends ua{constructor(e,i,a){super(e,i,Kc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Vt(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function Ie(r,e,...i){if(r=vi(r),v1("collection","path",e),r instanceof lh){const a=Ce.fromString(e,...i);return _0(a),new ms(r,null,a)}{if(!(r instanceof An||r instanceof ms))throw new xt(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Ce.fromString(e,...i));return _0(a),new ms(r.firestore,null,a)}}function Yt(r,e,...i){if(r=vi(r),arguments.length===1&&(e=c_.newId()),v1("doc","path",e),r instanceof lh){const a=Ce.fromString(e,...i);return v0(a),new An(r,null,new Vt(a))}{if(!(r instanceof An||r instanceof ms))throw new xt(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Ce.fromString(e,...i));return v0(a),new An(r.firestore,r instanceof ms?r.converter:null,new Vt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="AsyncQueue";class T0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new t1(this,"async_queue_retry"),this.Su=()=>{const a=Ed();a&&Tt(S0,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=e;const i=Ed();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const i=Ed();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const i=new Rr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!pl(e))throw e;Tt(S0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const i=this.bu.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(a);throw Ir("INTERNAL UNHANDLED ERROR: ",o),a}).then(a=>(this.pu=!1,a))));return this.bu=i,i}enqueueAfterDelay(e,i,a){this.Du(),this.wu.indexOf(e)>-1&&(i=0);const o=Tm.createAndSchedule(this,e,i,a,c=>this.Fu(c));return this.fu.push(o),o}Du(){this.gu&&Bt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const i of this.fu)if(i.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.fu)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const i=this.fu.indexOf(e);this.fu.splice(i,1)}}function x0(r){return function(i,a){if(typeof i!="object"||i===null)return!1;const o=i;for(const c of a)if(c in o&&typeof o[c]=="function")return!0;return!1}(r,["next","error","complete"])}class Zi extends lh{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new T0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T0(e),this._firestoreClient=void 0,await e}}}function g2(r,e){const i=typeof r=="object"?r:ox(),a=typeof r=="string"?r:Vc,o=ix(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=KS("firestore");c&&p2(o,...c)}return o}function Fo(r){if(r._terminated)throw new xt(ct.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||y2(r),r._firestoreClient}function y2(r){var e,i,a;const o=r._freezeSettings(),c=function(m,y,p,E){return new Px(m,y,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,y1(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new u2(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(_n.fromBase64String(e))}catch(i){throw new xt(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new ul(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new xt(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new xt(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new xt(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^__.*__$/;class _2{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,i,this.fieldTransforms):new Bo(e,this.data,i,this.fieldTransforms)}}class b1{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new Ts(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function E1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class Om{constructor(e,i,a,o,c,f){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Om(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:a,Qu:!1});return o.$u(e),o}Uu(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:a,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(E1(this.Lu)&&v2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class b2{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||ih(e)}ju(e,i,a,o=!1){return new Om({Lu:e,methodName:i,zu:a,path:yn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $o(r){const e=r._freezeSettings(),i=ih(r._databaseId);return new b2(r._databaseId,!!e.ignoreUndefinedProperties,i)}function jm(r,e,i,a,o,c={}){const f=r.ju(c.merge||c.mergeFields?2:0,e,i,o);Lm("Data must be an object, but it was:",f,a);const m=x1(a,f);let y,p;if(c.merge)y=new Xn(f.fieldMask),p=f.fieldTransforms;else if(c.mergeFields){const E=[];for(const S of c.mergeFields){const A=Wd(e,S,i);if(!f.contains(A))throw new xt(ct.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);w1(E,A)||E.push(A)}y=new Xn(E),p=f.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,p=f.fieldTransforms;return new _2(new Un(m),y,p)}class uh extends oh{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uh}}class km extends oh{_toFieldTransform(e){return new fA(e.path,new jo)}isEqual(e){return e instanceof km}}function S1(r,e,i,a){const o=r.ju(1,e,i);Lm("Data must be an object, but it was:",o,a);const c=[],f=Un.empty();Ss(a,(y,p)=>{const E=zm(e,y,i);p=vi(p);const S=o.Uu(E);if(p instanceof uh)c.push(E);else{const A=Wo(p,S);A!=null&&(c.push(E),f.set(E,A))}});const m=new Xn(c);return new b1(f,m,o.fieldTransforms)}function T1(r,e,i,a,o,c){const f=r.ju(1,e,i),m=[Wd(e,a,i)],y=[o];if(c.length%2!=0)throw new xt(ct.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(Wd(e,c[A])),y.push(c[A+1]);const p=[],E=Un.empty();for(let A=m.length-1;A>=0;--A)if(!w1(p,m[A])){const O=m[A];let j=y[A];j=vi(j);const W=f.Uu(O);if(j instanceof uh)p.push(O);else{const B=Wo(j,W);B!=null&&(p.push(O),E.set(O,B))}}const S=new Xn(p);return new b1(E,S,f.fieldTransforms)}function E2(r,e,i,a=!1){return Wo(i,r.ju(a?4:3,e))}function Wo(r,e){if(A1(r=vi(r)))return Lm("Unsupported field value:",e,r),x1(r,e);if(r instanceof oh)return function(a,o){if(!E1(o.Lu))throw o.Wu(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,o){const c=[];let f=0;for(const m of a){let y=Wo(m,o.Ku(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}}(r,e)}return function(a,o){if((a=vi(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return uA(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=tn.fromDate(a);return{timestampValue:zc(o.serializer,c)}}if(a instanceof tn){const c=new tn(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:zc(o.serializer,c)}}if(a instanceof Nm)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ul)return{bytesValue:H_(o.serializer,a._byteString)};if(a instanceof An){const c=o.databaseId,f=a.firestore._databaseId;if(!f.isEqual(c))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:mm(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Vm)return function(f,m){return{mapValue:{fields:{[v_]:{stringValue:__},[Oc]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw m.Wu("VectorValues must only contain numeric values.");return hm(m.serializer,p)})}}}}}}(a,o);throw o.Wu(`Unsupported field value: ${ah(a)}`)}(r,e)}function x1(r,e){const i={};return f_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(r,(a,o)=>{const c=Wo(o,e.qu(a));c!=null&&(i[a]=c)}),{mapValue:{fields:i}}}function A1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tn||r instanceof Nm||r instanceof ul||r instanceof An||r instanceof oh||r instanceof Vm)}function Lm(r,e,i){if(!A1(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const a=ah(i);throw a==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+a)}}function Wd(r,e,i){if((e=vi(e))instanceof Qo)return e._internalPath;if(typeof e=="string")return zm(r,e);throw Hc("Field path arguments must be of type string or ",r,!1,void 0,i)}const S2=new RegExp("[~\\*/\\[\\]]");function zm(r,e,i){if(e.search(S2)>=0)throw Hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Qo(...e.split("."))._internalPath}catch{throw Hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Hc(r,e,i,a,o){const c=a&&!a.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${a}`),f&&(y+=` in document ${o}`),y+=")"),new xt(ct.INVALID_ARGUMENT,m+r+y)}function w1(r,e){return r.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,i,a,o,c){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(Um("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class T2 extends R1{data(){return super.data()}}function Um(r,e){return typeof e=="string"?zm(r,e):e instanceof Qo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new xt(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pm{}class x2 extends Pm{}function us(r,e,...i){let a=[];e instanceof Pm&&a.push(e),a=a.concat(i),function(c){const f=c.filter(y=>y instanceof Bm).length,m=c.filter(y=>y instanceof ch).length;if(f>1||f>0&&m>0)throw new xt(ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)r=o._apply(r);return r}class ch extends x2{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new ch(e,i,a)}_apply(e){const i=this._parse(e);return D1(e._query,i),new ua(e.firestore,e.converter,Ld(e._query,i))}_parse(e){const i=$o(e.firestore);return function(c,f,m,y,p,E,S){let A;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new xt(ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){w0(S,E);const j=[];for(const W of S)j.push(A0(y,c,W));A={arrayValue:{values:j}}}else A=A0(y,c,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||w0(S,E),A=E2(m,f,S,E==="in"||E==="not-in");return $e.create(p,E,A)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function cs(r,e,i){const a=e,o=Um("where",r);return ch._create(o,a,i)}class Bm extends Pm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Bm(e,i)}_parse(e){const i=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return i.length===1?i[0]:Ii.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(o,c){let f=o;const m=c.getFlattenedFilters();for(const y of m)D1(f,y),f=Ld(f,y)}(e._query,i),new ua(e.firestore,e.converter,Ld(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function A0(r,e,i){if(typeof(i=vi(i))=="string"){if(i==="")throw new xt(ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R_(e)&&i.indexOf("/")!==-1)throw new xt(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(Ce.fromString(i));if(!Vt.isDocumentKey(a))throw new xt(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Pv(r,new Vt(a))}if(i instanceof An)return Pv(r,i._key);throw new xt(ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ah(i)}.`)}function w0(r,e){if(!Array.isArray(r)||r.length===0)throw new xt(ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function D1(r,e){const i=function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new xt(ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xt(ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class A2{convertValue(e,i="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Bt()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return Ss(e,(o,c)=>{a[o]=this.convertValue(c,i)}),a}convertVectorValue(e){var i,a,o;const c=(o=(a=(i=e.fields)===null||i===void 0?void 0:i[Oc].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(f=>qe(f.doubleValue));return new Vm(c)}convertGeoPoint(e){return new Nm(qe(e.latitude),qe(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=Yc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(No(e));default:return null}}convertTimestamp(e){const i=ys(e);return new tn(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=Ce.fromString(e);fe(Y_(a));const o=new Vo(a.get(1),a.get(3)),c=new Vt(a.popFirst(5));return o.isEqual(i)||Ir(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(r,e,i){let a;return a=r?i&&(i.merge||i.mergeFields)?r.toFirestore(e,i):r.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I1 extends R1{constructor(e,i,a,o,c,f){super(e,i,a,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(Um("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class wc extends I1{data(e={}){return super.data(e)}}class M1{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new To(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new wc(this._firestore,this._userDataWriter,a.key,a,new To(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new xt(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new wc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new To(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new wc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new To(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:w2(m.type),doc:y,oldIndex:p,newIndex:E}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function w2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(r){r=Vn(r,An);const e=Vn(r.firestore,Zi);return f2(Fo(e),r._key).then(i=>V1(e,r,i))}class Hm extends A2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,i)}}function ps(r){r=Vn(r,ua);const e=Vn(r.firestore,Zi),i=Fo(e),a=new Hm(e);return C1(r._query),d2(i,r._query).then(o=>new M1(e,a,r,o))}function Gm(r,e,i){r=Vn(r,An);const a=Vn(r.firestore,Zi),o=qm(r.converter,e,i);return Yo(a,[jm($o(a),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,Nn.none())])}function N1(r,e,i,...a){r=Vn(r,An);const o=Vn(r.firestore,Zi),c=$o(o);let f;return f=typeof(e=vi(e))=="string"||e instanceof Qo?T1(c,"updateDoc",r._key,e,i,a):S1(c,"updateDoc",r._key,e),Yo(o,[f.toMutation(r._key,Nn.exists(!0))])}function R2(r){return Yo(Vn(r.firestore,Zi),[new eh(r._key,Nn.none())])}function C2(r,e){const i=Vn(r.firestore,Zi),a=Yt(r),o=qm(r.converter,e);return Yo(i,[jm($o(r.firestore),"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,Nn.exists(!1))]).then(()=>a)}function Oe(r,...e){var i,a,o;r=vi(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||x0(e[f])||(c=e[f],f++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(x0(e[f])){const S=e[f];e[f]=(i=S.next)===null||i===void 0?void 0:i.bind(S),e[f+1]=(a=S.error)===null||a===void 0?void 0:a.bind(S),e[f+2]=(o=S.complete)===null||o===void 0?void 0:o.bind(S)}let y,p,E;if(r instanceof An)p=Vn(r.firestore,Zi),E=Kc(r._key.path),y={next:S=>{e[f]&&e[f](V1(p,r,S))},error:e[f+1],complete:e[f+2]};else{const S=Vn(r,ua);p=Vn(S.firestore,Zi),E=S._query;const A=new Hm(p);y={next:O=>{e[f]&&e[f](new M1(p,A,S,O))},error:e[f+1],complete:e[f+2]},C1(r._query)}return function(A,O,j,W){const B=new Mm(W),F=new Cm(O,B,j);return A.asyncQueue.enqueueAndForget(async()=>Am(await qc(A),F)),()=>{B.su(),A.asyncQueue.enqueueAndForget(async()=>wm(await qc(A),F))}}(Fo(p),E,m,y)}function Yo(r,e){return function(a,o){const c=new Rr;return a.asyncQueue.enqueueAndForget(async()=>t2(await h2(a),o,c)),c.promise}(Fo(r),e)}function V1(r,e,i){const a=i.docs.get(e._key),o=new Hm(r);return new I1(r,o,e._key,a,new To(i.hasPendingWrites,i.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=$o(e)}set(e,i,a){this._verifyNotCommitted();const o=Td(e,this._firestore),c=qm(o.converter,i,a),f=jm(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,a);return this._mutations.push(f.toMutation(o._key,Nn.none())),this}update(e,i,a,...o){this._verifyNotCommitted();const c=Td(e,this._firestore);let f;return f=typeof(i=vi(i))=="string"||i instanceof Qo?T1(this._dataReader,"WriteBatch.update",c._key,i,a,o):S1(this._dataReader,"WriteBatch.update",c._key,i),this._mutations.push(f.toMutation(c._key,Nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=Td(e,this._firestore);return this._mutations=this._mutations.concat(new eh(i._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xt(ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Td(r,e){if((r=vi(r)).firestore!==e)throw new xt(ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Ln(){return new km("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(r){return Fo(r=Vn(r,Zi)),new D2(r,e=>Yo(r,e))}(function(e,i=!0){(function(o){dl=o})(lx),Mc(new Do("firestore",(a,{instanceIdentifier:o,options:c})=>{const f=a.getProvider("app").getImmediate(),m=new Zi(new Tx(a.getProvider("auth-internal")),new wx(f,a.getProvider("app-check-internal")),function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xt(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(p.options.projectId,E)}(f,o),f);return c=Object.assign({useFetchStreams:i},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),tl(Cv,Dv,e),tl(Cv,Dv,"esm2017")})();const I2={apiKey:"AIzaSyA",authDomain:"myattendanceproject-45c1b.firebaseapp.com",projectId:"myattendanceproject-45c1b",storageBucket:"myattendanceproject-45c1b.appspot.com",messagingSenderId:"347137303283",appId:"1:347137303283:web:9369753f976dffcf65cd86"},M2=J0(I2),St=g2(M2),N2=r=>(r||"").toString().replace(/[^0-9]/g,""),V2=r=>r.slice(-8);function O2(){const[r,e]=C.useState(""),[i,a]=C.useState(""),[o,c]=C.useState(""),f=Fc(),m=async()=>{c("");const y=N2(r),p=(i||"").trim();if(y.length!==11||!y.startsWith("010")){c("   11(010...)  .");return}if(p.length<6){c("  . (    8)");return}try{const E=Yt(St,"parents",y),S=await vn(E);let A=null;if(S.exists())A=S.data();else{const j=us(Ie(St,"students"),cs("parentPhone","==",y)),W=await ps(j),B=[];if(W.forEach(H=>B.push(H.id)),B.length===0){c("  . (/    .)");return}const F=V2(y);await Gm(E,{phone:y,password:F,mustChangePassword:!0,children:B,createdAt:Ln(),updatedAt:Ln()}),A={phone:y,password:F,mustChangePassword:!0,children:B}}if(!(A!=null&&A.password)||A.password!==p){c("  .");return}if(localStorage.setItem("parentPhone",y),localStorage.setItem("mustChangePassword",A.mustChangePassword?"1":"0"),A.mustChangePassword){f("/change-password");return}const O=A.children||[];O.length<=1?(O[0]&&localStorage.setItem("studentId",O[0]),f("/attendance")):f("/select-child")}catch(E){console.error(E),c("   .")}};return v.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:800,marginBottom:12},children:" "}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:8},children:"( )"}),v.jsx("input",{value:r,onChange:y=>e(y.target.value),placeholder:": 01012345678",inputMode:"numeric",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:12},children:""}),v.jsx("input",{value:i,onChange:y=>a(y.target.value),placeholder:" :   8",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("button",{onClick:m,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #0d6efd",background:"#0d6efd",color:"#fff",cursor:"pointer"},children:""}),o&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:600},children:o}),v.jsxs("div",{style:{marginTop:12,fontSize:12,color:"#6b7280",lineHeight:1.6},children:["   ",v.jsx("b",{children:"  8"}),".",v.jsx("br",{}),"       ."]})]})}function j2(){const r=localStorage.getItem("parentPhone")||"",[e,i]=C.useState(localStorage.getItem("studentId")||""),[a,o]=C.useState((localStorage.getItem("studentName")||"").trim()),[c,f]=C.useState([]),[m,y]=C.useState(null),[p,E]=C.useState({}),[S,A]=C.useState({}),[O,j]=C.useState(()=>new Date().getFullYear()),[W,B]=C.useState(()=>new Date().getMonth()),[F,H]=C.useState(!1),[P,Z]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const J=window.matchMedia("(max-width: 640px)"),_t=Et=>Z(Et.matches);return J.addEventListener?J.addEventListener("change",_t):J.addListener(_t),Z(J.matches),()=>{J.removeEventListener?J.removeEventListener("change",_t):J.removeListener(_t)}},[]),C.useEffect(()=>{const J=()=>{i(localStorage.getItem("studentId")||""),o((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",J),window.addEventListener("hashchange",J);const _t=setInterval(J,800);return()=>{window.removeEventListener("storage",J),window.removeEventListener("hashchange",J),clearInterval(_t)}},[]),C.useEffect(()=>{(async()=>{var J;if(!a&&e)try{const _t=await vn(Yt(St,"students",e));if(_t.exists()){const Et=(((J=_t.data())==null?void 0:J.name)||"").toString().trim();Et&&(o(Et),localStorage.setItem("studentName",Et))}}catch(_t){console.error("selected studentName  :",_t)}})()},[e,a]),C.useEffect(()=>{(async()=>{if(r)try{const J=await vn(Yt(St,"parents",r));if(!J.exists()){f([]);return}const Et=(J.data()||{}).children||[],kt=[];for(const Wt of Et)try{const qt=await vn(Yt(St,"students",Wt)),rt=qt.exists()?qt.data():{};kt.push({id:Wt,name:(rt.name||"").toString().trim()||""})}catch{kt.push({id:Wt,name:""})}kt.sort((Wt,qt)=>(Wt.name||"").localeCompare(qt.name||"")),f(kt)}catch(J){console.error("children  :",J),f([])}})()},[r]),C.useEffect(()=>{const J=Oe(Ie(St,"attendance"),_t=>{const Et={};_t.forEach(kt=>{Et[kt.id]=kt.data()||{}}),E(Et)});return()=>J()},[]),C.useEffect(()=>{const J=Oe(Ie(St,"holidays"),_t=>{const Et={};_t.forEach(kt=>{const Wt=kt.data()||{},qt=(Wt.date||"").toString(),rt=(Wt.name||"").toString();qt&&(Et[qt]=rt||"")}),A(Et)});return()=>J()},[]),C.useEffect(()=>{if(!c.length)return;const _t=(()=>{const kt=new Date;return new Date(kt.getTime()+9*60*60*1e3).toISOString().slice(0,10)})(),Et=(p==null?void 0:p[_t])||{};for(const kt of c){const Wt=(kt.name||"").trim();if(!Wt)continue;const qt=Et==null?void 0:Et[Wt],rt=((qt==null?void 0:qt.time)||"").toString().trim(),Mt=((qt==null?void 0:qt.departureTime)||"").toString().trim(),jt=((qt==null?void 0:qt.status)||"").toString().trim(),It=`lastSeen_${Wt}`;let Lt={};try{Lt=JSON.parse(localStorage.getItem(It)||"{}")}catch{Lt={}}const Qt=(Lt.time||"").toString().trim(),_e=(Lt.departureTime||"").toString().trim();rt&&rt!==Qt&&y({title:`${Wt} `,message:`${rt}   ${jt?`(${jt})`:""}`}),Mt&&Mt!==_e&&y({title:`${Wt} `,message:`${Mt}  `}),localStorage.setItem(It,JSON.stringify({time:rt,departureTime:Mt}))}},[p,c]);const st=async J=>{var kt;if(!J)return;const _t=c.find(Wt=>Wt.id===J);let Et=((_t==null?void 0:_t.name)||"").trim();if(!Et)try{const Wt=await vn(Yt(St,"students",J));Wt.exists()&&(Et=(((kt=Wt.data())==null?void 0:kt.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",J),Et&&localStorage.setItem("studentName",Et),i(J),o(Et)},mt=C.useMemo(()=>a?Object.entries(p).map(([J,_t])=>{const Et=_t==null?void 0:_t[a];return Et?{date:J,time:Et.time||"",departureTime:Et.departureTime||"",status:Et.status||""}:null}).filter(Boolean).sort((J,_t)=>_t.date.localeCompare(J.date)):[],[p,a]),M=C.useMemo(()=>{const J=`${O}-${String(W+1).padStart(2,"0")}`;return mt.filter(_t=>_t.date.startsWith(J)).filter(_t=>{const kt=new Date(_t.date+"T00:00:00").getDay();return kt===0?!1:kt===6?F:!0})},[mt,O,W,F]),R=F?["","","","","",""]:["","","","",""],w=F?6:5,N=C.useMemo(()=>{const J=new Date(O,W,1),_t=[],Et=J.getDay(),kt=new Date(J),Wt=(Et+6)%7;kt.setDate(J.getDate()-Wt);const qt=F?6:5;for(let rt=0;rt<6;rt++){const Mt=[],jt=new Date(kt);jt.setDate(kt.getDate()+rt*7);for(let It=0;It<7;It++){const Lt=new Date(jt);Lt.setDate(jt.getDate()+It);const Qt=Lt.getDay();Qt>=1&&Qt<=qt&&Mt.push(new Date(Lt))}Mt.some(It=>It.getMonth()===W||It.getMonth()!==W&&It.getDate()<=7)&&_t.push(Mt)}for(;_t.length&&_t[_t.length-1].every(rt=>rt.getMonth()!==W);)_t.pop();return _t},[O,W,F]),k=J=>{const _t=J.getFullYear(),Et=String(J.getMonth()+1).padStart(2,"0"),kt=String(J.getDate()).padStart(2,"0");return`${_t}-${Et}-${kt}`},z=`${O} ${String(W+1).padStart(2,"0")}`,D=()=>{const J=new Date(O,W-1,1);j(J.getFullYear()),B(J.getMonth())},Dt=()=>{const J=new Date(O,W+1,1);j(J.getFullYear()),B(J.getMonth())},Ot={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},tt={padding:P?10:16,maxWidth:980,margin:"0 auto"},pt={display:"flex",gap:10,alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:12,flexDirection:P?"column":"row"},At={display:"flex",gap:8,alignItems:"center",justifyContent:P?"stretch":"flex-end",flexDirection:P?"column":"row"},Ft={display:"flex",gap:8,alignItems:"center",justifyContent:P?"space-between":"flex-end",flexWrap:"wrap"},L={padding:"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:800,cursor:"pointer",width:P?"100%":"auto"},lt=(J="white")=>({padding:P?"10px 12px":"8px 12px",border:"1px solid #d1d5db",borderRadius:12,background:J,cursor:"pointer",fontWeight:900,width:P?"100%":"auto"}),yt={padding:"7px 10px",border:"1px solid #d1d5db",borderRadius:999,background:"white",cursor:"pointer",fontWeight:900,fontSize:12,whiteSpace:"nowrap"},ft=P?6:10,Rt=P?64:86,Ct=P?8:10;return v.jsxs("div",{style:tt,children:[m&&v.jsx("div",{style:{position:"fixed",left:0,right:0,top:12,display:"flex",justifyContent:"center",zIndex:999999,pointerEvents:"none"},children:v.jsxs("div",{style:{pointerEvents:"auto",minWidth:260,maxWidth:460,background:"#111827",color:"white",padding:"12px 14px",borderRadius:14,boxShadow:"0 10px 25px rgba(0,0,0,0.25)"},onClick:()=>y(null),children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:m.title}),v.jsx("div",{style:{marginTop:6,fontSize:13,opacity:.92},children:m.message}),v.jsx("div",{style:{marginTop:10,textAlign:"right"},children:v.jsx("button",{onClick:()=>y(null),style:{border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"white",borderRadius:10,padding:"6px 10px",cursor:"pointer",fontWeight:900},children:""})})]})}),v.jsxs("div",{style:pt,children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:P?20:22,fontWeight:900},children:"  "}),v.jsxs("div",{style:{color:"#6b7280",fontSize:13,marginTop:4,lineHeight:1.4},children:[a?` : ${a}`:"  .",c.length>1&&v.jsx("span",{style:{marginLeft:8,color:"#10b981",fontWeight:800},children:"(  )"})]})]}),c.length>0&&v.jsxs("div",{style:At,children:[v.jsxs("div",{style:Ft,children:[v.jsx("span",{style:{fontSize:12,color:"#6b7280",minWidth:44},children:" "}),v.jsx("select",{value:e,onChange:J=>st(J.target.value),style:L,children:c.map(J=>v.jsx("option",{value:J.id,children:J.name},J.id))})]}),v.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:lt("#f9fafb"),children:" "})]})]}),v.jsxs("div",{style:{...Ot,padding:P?12:14,marginBottom:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:10,gap:8,flexDirection:P?"column":"row"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[v.jsx("button",{onClick:D,style:lt("white"),children:""}),v.jsx("div",{style:{fontWeight:900,fontSize:16,textAlign:"center",flex:1},children:z}),v.jsx("button",{onClick:Dt,style:lt("white"),children:""})]}),v.jsx("div",{style:{display:"flex",gap:8,justifyContent:P?"stretch":"flex-end",flexWrap:"wrap"},children:v.jsx("button",{onClick:()=>H(J=>!J),style:{...yt,background:F?"#111827":"white",color:F?"white":"#111827",borderColor:F?"#111827":"#d1d5db",width:P?"100%":"auto"},title:"    ",children:F?"  ON":"  OFF"})})]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${w}, 1fr)`,gap:ft,paddingBottom:10,borderBottom:"1px solid #f1f5f9",fontWeight:900,color:"#6b7280",fontSize:13},children:R.map(J=>v.jsx("div",{style:{textAlign:"center"},children:J},J))}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:ft,marginTop:10},children:N.map((J,_t)=>v.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${w}, 1fr)`,gap:ft},children:J.map(Et=>{var Lt;const kt=k(Et),Wt=Et.getMonth()===W,qt=a?(Lt=p==null?void 0:p[kt])==null?void 0:Lt[a]:null,rt=!!S[kt],Mt=!!(qt!=null&&qt.time||qt!=null&&qt.departureTime),jt=Qt=>{const _e=(Qt||"").toString().trim();return _e?_e.length>=5?_e.slice(0,5):_e:""},It=(Qt,_e)=>v.jsx("span",{style:{display:"inline-block",fontSize:P?11:12,fontWeight:900,color:_e,background:`${_e}14`,padding:"2px 8px",borderRadius:999,lineHeight:1.2,whiteSpace:"nowrap"},children:Qt});return v.jsxs("div",{title:rt?`${kt}  ${S[kt]}`:kt,style:{minHeight:Rt,border:`1px solid ${rt?"#fecaca":"#e5e7eb"}`,borderRadius:14,padding:Ct,background:Wt?rt?"#fff1f2":Mt?"#ecfeff":"white":"#fafafa",opacity:Wt?1:.55,overflow:"hidden"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginBottom:6,gap:6},children:[v.jsx("div",{style:{fontWeight:900,fontSize:P?13:14,color:rt?"#ef4444":"#111827"},children:Et.getDate()}),rt&&v.jsx("span",{style:{fontSize:11,color:"#ef4444",fontWeight:900,background:"rgba(239,68,68,0.10)",padding:"2px 8px",borderRadius:999,maxWidth:"75%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S[kt]})]}),qt?(()=>{const Qt=jt(qt.time),_e=jt(qt.departureTime);return!Qt&&!_e?v.jsx("div",{style:{fontSize:P?11:12,color:"#9ca3af"},children:" "}):v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,alignItems:"flex-start",marginTop:2},children:[Qt?It(Qt,"#0284c7"):null,_e?It(_e,"#16a34a"):null]})})():v.jsx("div",{style:{fontSize:P?11:12,color:"#9ca3af"},children:" "})]},kt)})},_t))})]}),v.jsxs("div",{style:{...Ot,padding:P?12:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:10,gap:10,flexDirection:P?"column":"row"},children:[v.jsx("div",{style:{fontSize:P?16:18,fontWeight:900},children:"    (/)"}),v.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:D,style:yt,children:""}),v.jsx("span",{style:{fontWeight:900},children:z}),v.jsx("button",{onClick:Dt,style:yt,children:""})]})]}),M.length===0?v.jsx("div",{style:{color:"#6b7280"},children:"    ."}):P?v.jsx("div",{style:{display:"grid",gap:10},children:M.slice().sort((J,_t)=>_t.date.localeCompare(J.date)).map(J=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:12,background:"white"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[v.jsxs("div",{style:{fontWeight:900},children:[J.date,S[J.date]&&v.jsx("span",{style:{marginLeft:8,fontSize:12,color:"#ef4444",fontWeight:900},children:S[J.date]})]}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:J.status||"-"})]}),v.jsxs("div",{style:{marginTop:8,display:"grid",gap:6},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[v.jsx("span",{style:{color:"#0284c7",fontWeight:900},children:""}),v.jsx("span",{style:{fontWeight:900},children:J.time||"-"})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[v.jsx("span",{style:{color:"#16a34a",fontWeight:900},children:""}),v.jsx("span",{style:{fontWeight:900},children:J.departureTime||"-"})]})]})]},J.date))}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""})]})}),v.jsx("tbody",{children:M.slice().sort((J,_t)=>_t.date.localeCompare(J.date)).map(J=>v.jsxs("tr",{children:[v.jsxs("td",{style:vc,children:[v.jsx("span",{style:{fontWeight:900},children:J.date}),S[J.date]&&v.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#ef4444",fontWeight:900},children:["(",S[J.date],")"]})]}),v.jsx("td",{style:vc,children:J.time||"-"}),v.jsx("td",{style:vc,children:J.departureTime||"-"}),v.jsx("td",{style:vc,children:J.status||"-"})]},J.date))})]})})]})]})}const yc={textAlign:"left",padding:"10px 10px",borderBottom:"1px solid #e5e7eb",color:"#374151",fontSize:13,fontWeight:900},vc={padding:"10px 10px",borderBottom:"1px solid #f1f5f9"};function k2(){var H;const r=localStorage.getItem("studentId"),e=C.useRef(!1),[i,a]=C.useState(null),[o,c]=C.useState([]),[f,m]=C.useState(0),[y,p]=C.useState({}),[E,S]=C.useState(!1),A=["","",""];C.useEffect(()=>{if(!r)return;const P=Oe(Yt(St,"students",r),Z=>{Z.exists()&&a({id:Z.id,...Z.data()})});return()=>P()},[r]),C.useEffect(()=>{if(!r)return;const P=Oe(Ie(St,"payments"),Z=>{const st={};Z.docs.forEach(mt=>{const M=mt.data();M.studentId===r&&(st[M.routineNumber]=M.paymentMethod)}),p(st)});return()=>P()},[r]),C.useEffect(()=>{if(!r)return;const P=Oe(Ie(St,"routines"),async Z=>{const st=Z.docs.filter(z=>{const D=z.data();return D.students&&D.students[r]});if(st.length===0){c([]);return}let mt=[];st.forEach(z=>{const D=z.data(),Dt=D.students[r],Ot=Dt.routineNumber||D.routineNumber||1,tt=Dt.sessions||{};Object.values(tt).sort((At,Ft)=>(At.session||0)-(Ft.session||0)).forEach(At=>{mt.push({date:At.date,session:At.session,routineNumber:Ot})})});const M=Array.from(new Set(mt.map(z=>z.date))),R=i&&i.name||null,w=await Promise.all(M.map(async z=>{const D=await vn(Yt(St,"attendance",z));if(!D.exists())return[z,{}];const Dt=D.data(),Ot=Dt[r]||R&&Dt[R]||{};return[z,Ot]})),N=Object.fromEntries(w),k=mt.map(z=>{var D,Dt;return{...z,status:((D=N[z.date])==null?void 0:D.status)||"",time:((Dt=N[z.date])==null?void 0:Dt.time)||""}});if(c(k),!e.current){e.current=!0;const z=new Date().toISOString().slice(0,10),D={};k.forEach(Ot=>{const tt=Ot.routineNumber||1;D[tt]||(D[tt]=[]),D[tt].push(Ot)}),Object.values(D).sort((Ot,tt)=>Ot[0].routineNumber-tt[0].routineNumber).findIndex(Ot=>Ot.some(tt=>tt.date===z)),m(0)}});return()=>P()},[r,i]);const O=async(P,Z)=>{p(st=>({...st,[Z]:P})),await Gm(Yt(St,"payments",`${r}_routine_${Z}`),{studentId:r,routineNumber:Z,paymentMethod:P,paymentComplete:!1,updatedAt:new Date().toISOString()},{merge:!0})},j={};o.forEach(P=>{const Z=P.routineNumber||1;j[Z]||(j[Z]=[]),j[Z].push(P)});const W=Object.values(j).sort((P,Z)=>Z[0].routineNumber-P[0].routineNumber),B=W[f]||[],F=((H=B[0])==null?void 0:H.routineNumber)??f+1;return C.useEffect(()=>{if(!i||!F){S(!1);return}const P=`${i.name}_${F}`;(async()=>{try{const st=await vn(Yt(St,"payment_completed",P));if(!st.exists()){S(!1);return}const mt=st.data();S(!!mt.paymentComplete)}catch(st){console.error("payment_completed  :",st),S(!1)}})()},[i,F]),i?v.jsxs("div",{className:"container-wide",style:{textAlign:"center"},children:[v.jsxs("h1",{style:{fontSize:20,marginBottom:16},children:[" ",i.name,"   ",F,""]}),v.jsx("p",{style:{fontSize:18,marginBottom:16},children:E?"  .":"  .    ."}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:24},children:[v.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:"bold"},children:""}),A.map(P=>v.jsx("button",{onClick:()=>O(P,F),style:{padding:"4px 8px",background:P===""?"#4caf50":P===""?"#2196f3":"#f44336",color:"white",borderRadius:4,minWidth:80},children:P},P))]}),v.jsxs("p",{style:{fontSize:16,marginBottom:16},children:["   : ",y[F]||"",y[F]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"      "}),y[F]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"  5  ."}),y[F]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:" 3333-31-6107963  * "})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24},children:[v.jsx("button",{onClick:()=>m(P=>Math.max(P-1,0)),disabled:f===0,style:{padding:"8px 16px",background:f===0?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f===0?"default":"pointer"},children:""}),v.jsx("button",{onClick:()=>m(P=>Math.min(P+1,W.length-1)),disabled:f>=W.length-1,style:{padding:"8px 16px",background:f>=W.length-1?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f>=W.length-1?"default":"pointer"},children:""})]}),v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""})]})}),v.jsxs("tbody",{children:[B.map((P,Z)=>{const st=B.slice(0,Z).reduce((R,w)=>R+(w.status==="carryover"?1:0),0),mt=P.status==="carryover",M=mt?"X":(P.session||Z+1)-st;return v.jsxs("tr",{children:[v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:M}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:v.jsx("span",{style:mt?{textDecoration:"line-through",color:"#999"}:{},children:P.date})}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:P.status}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:P.time||"-"})]},Z)}),B.length===0&&v.jsx("tr",{children:v.jsx("td",{colSpan:4,style:{padding:16,textAlign:"center",color:"#888"},children:"  ."})})]})]})]}):v.jsx("p",{children:" "})}const L2=6,z2=10,U2=6,P2=10;function B2(r=""){return r?r.split(`
`).map(e=>e||"&nbsp;").join("<br />"):""}function q2(){const r=new Date,e=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0");return`${e}-${i}`}function H2(){const r=localStorage.getItem("parentPhone")||"",[e,i]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches),[a,o]=C.useState([]),[c,f]=C.useState(null),[m,y]=C.useState({}),[p,E]=C.useState(!0),[S,A]=C.useState([]),[O,j]=C.useState(!1),[W,B]=C.useState(!0),[F,H]=C.useState(!1),[P,Z]=C.useState(!0),[st,mt]=C.useState(!1);C.useEffect(()=>{const rt=window.matchMedia("(max-width: 640px)"),Mt=jt=>i(jt.matches);return rt.addEventListener?rt.addEventListener("change",Mt):rt.addListener(Mt),i(rt.matches),()=>{rt.removeEventListener?rt.removeEventListener("change",Mt):rt.removeListener(Mt)}},[]),C.useEffect(()=>{(async()=>{if(r)try{const rt=await vn(Yt(St,"parents",r));if(rt.exists()){const Mt=rt.data()||{},jt=Mt.noticeAlertEnabled===void 0?!0:!!Mt.noticeAlertEnabled;Z(jt)}else Z(!0)}catch{Z(!0)}})()},[r]),C.useEffect(()=>{(async()=>{E(!0);try{const jt=(await ps(Ie(St,"notices"))).docs.map(It=>{const Lt=It.data()||{},Qt=Lt.showInParentMain===void 0?!0:!!Lt.showInParentMain;return{id:It.id,title:(Lt.title||"").toString(),date:(Lt.date||"").toString(),showInParentMain:Qt,mainOrder:typeof Lt.mainOrder=="number"?Lt.mainOrder:typeof Lt.priority=="number"?Lt.priority:void 0,isPinned:Lt.isPinned===!0}}).filter(It=>It.showInParentMain===!0);jt.sort((It,Lt)=>(Lt.date||"").localeCompare(It.date||"")),o(jt)}catch(rt){console.error("notices  :",rt),o([])}finally{E(!1)}})(),(async()=>{B(!0);try{const Mt=(await ps(Ie(St,"holidays"))).docs.map(jt=>({id:jt.id,...jt.data()||{}})).filter(jt=>!!jt.date);Mt.sort((jt,It)=>(jt.date||"").toString().localeCompare((It.date||"").toString())),A(Mt)}catch(rt){console.error("holidays  :",rt),A([])}finally{B(!1)}})()},[]);const M=C.useMemo(()=>q2(),[]),R=C.useMemo(()=>new Date().toISOString().slice(0,10),[]),{upcomingThisMonth:w,pastHolidays:N}=C.useMemo(()=>{const rt=[],Mt=[];for(const It of S){const Lt=(It.date||"").toString();Lt&&(Lt.startsWith(M)&&rt.push(It),Lt<R&&Mt.push(It))}return rt.sort((It,Lt)=>(It.date||"").toString().localeCompare((Lt.date||"").toString())),Mt.sort((It,Lt)=>(Lt.date||"").toString().localeCompare((It.date||"").toString())),{upcomingThisMonth:e?rt.slice(0,6):rt.slice(0,12),pastHolidays:Mt}},[S,M,R,e]),{topNotices:k,currentNotices:z,pastNotices:D,topIdSet:Dt}=C.useMemo(()=>{const rt=[],Mt=[],jt=[];for(const be of a){const We=typeof be.mainOrder=="number",wn=(be.date||"").startsWith(M);We?rt.push(be):wn?Mt.push(be):jt.push(be)}rt.sort((be,We)=>{const wn=be.mainOrder??9999,_i=We.mainOrder??9999;return wn!==_i?wn-_i:(We.date||"").localeCompare(be.date||"")}),Mt.sort((be,We)=>(We.date||"").localeCompare(be.date||"")),jt.sort((be,We)=>(We.date||"").localeCompare(be.date||""));const It=e?U2:P2,Lt=e?L2:z2,Qt=rt.slice(0,It),_e=new Set(Qt.map(be=>be.id));return{topNotices:Qt,currentNotices:Mt.slice(0,Lt),pastNotices:jt,topIdSet:_e}},[a,M,e]),Ot=async rt=>{if(!m[rt])try{const Mt=await vn(Yt(St,"notices",rt));if(Mt.exists()){const jt=Mt.data()||{},It=(jt.contentHtml||"").toString(),Lt=(jt.contentPlain||"").toString(),Qt=(jt.content||"").toString(),_e=Lt||Qt;let be=It;be||(be=B2(_e)),y(We=>({...We,[rt]:{html:be,plain:_e}}))}else y(jt=>({...jt,[rt]:{html:" .",plain:" ."}}))}catch(Mt){console.error("notice detail  :",Mt),y(jt=>({...jt,[rt]:{html:"  .",plain:""}}))}},tt=async rt=>{if(c===rt){f(null);return}await Ot(rt),f(rt)},pt=async()=>{if(!r){alert("  .  .");return}const rt=!P;mt(!0);try{await Gm(Yt(St,"parents",r),{noticeAlertEnabled:rt},{merge:!0}),Z(rt)}catch(Mt){console.error("    :",Mt),alert(" .    .")}finally{mt(!1)}},At={maxWidth:820,margin:"0 auto",padding:e?10:16},Ft={display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexDirection:e?"column":"row"},L=rt=>({border:"1px solid "+(rt?"#111827":"#d1d5db"),background:rt?"#111827":"white",color:rt?"white":"#111827",borderRadius:999,padding:"8px 12px",fontWeight:900,fontSize:12,cursor:"pointer",width:e?"100%":"auto",opacity:st?.7:1}),lt={border:"1px solid #e5e7eb",borderRadius:14,background:"#fff"},yt=rt=>({padding:e?"12px 12px":"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:rt?"#f8fafc":"#fff",cursor:"pointer"}),ft={padding:"6px 10px",borderRadius:999,background:"#fff",border:"1px solid #e5e7eb",fontSize:12,display:"flex",gap:6,alignItems:"center"},Rt={border:"none",background:"none",color:"#2563eb",fontSize:13,fontWeight:800,cursor:"pointer",padding:0},Ct={...lt,border:"1px solid #e5e7eb",background:"linear-gradient(135deg, #fff7ed, #eff6ff)",padding:e?"10px 10px":"12px 12px",marginTop:10,marginBottom:10},J={display:"flex",alignItems:"center",gap:8,fontWeight:900,fontSize:14,marginBottom:8},_t=rt=>({display:"inline-flex",alignItems:"center",gap:6,padding:"6px 10px",borderRadius:999,border:"1px solid "+(rt==="must"?"#fecaca":"#bfdbfe"),background:rt==="must"?"#fee2e2":"#eff6ff",color:rt==="must"?"#b91c1c":"#2563eb",fontSize:12,fontWeight:900,cursor:"pointer",maxWidth:"100%"}),Et={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:e?240:520},kt=`${M.slice(0,4)} ${M.slice(5,7)}`,Wt=rt=>{const Mt=c===rt.id,jt=m[rt.id],It=typeof rt.mainOrder=="number",Lt=It&&rt.mainOrder<10,Qt=It&&rt.mainOrder>=10;return v.jsxs("div",{style:yt(Mt),onClick:()=>tt(rt.id),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[Lt&&v.jsx("span",{style:{fontSize:11,background:"#fee2e2",color:"#b91c1c",borderRadius:999,padding:"2px 8px",border:"1px solid #fecaca",fontWeight:900},children:" "}),Qt&&v.jsx("span",{style:{fontSize:11,background:"#eff6ff",color:"#2563eb",borderRadius:999,padding:"2px 8px",border:"1px solid #bfdbfe",fontWeight:900},children:""})]}),v.jsx("div",{style:{marginTop:6,fontSize:15,fontWeight:900,lineHeight:1.35,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:rt.title})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:6},children:[v.jsx("span",{style:{fontSize:12,color:"#9ca3af",fontWeight:800,whiteSpace:"nowrap"},children:rt.date}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:Mt?"":""})]})]}),Mt&&v.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px dashed #e5e7eb",fontSize:14,lineHeight:1.65,color:"#111827",wordBreak:"break-word"},children:jt?v.jsx("div",{dangerouslySetInnerHTML:{__html:jt.html}}):v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:" ..."})})]},rt.id)},qt=C.useMemo(()=>!c||!Dt||!Dt.has(c)?null:k.find(rt=>rt.id===c)||null,[c,Dt,k]);return v.jsxs("div",{style:At,children:[v.jsxs("div",{style:{...lt,border:"1px solid #fde68a",background:"linear-gradient(135deg, #fffbeb, #fff)",padding:e?"12px 12px":"14px 16px",marginBottom:12},onClick:()=>window.open("http://pf.kakao.com/_Kkxjsn","_blank"),children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[v.jsx("span",{style:{fontSize:18},children:""}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:900,fontSize:15,lineHeight:1.2},children:" "}),v.jsx("div",{style:{marginTop:4,fontSize:12,color:"#6b7280",fontWeight:800},children:"         ."})]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[v.jsx("span",{style:{fontSize:12,color:"#9ca3af",fontWeight:900},children:""}),v.jsx("span",{style:{fontSize:14,color:"#111827",fontWeight:900},children:""})]})]}),v.jsxs("div",{style:{marginTop:10,display:"flex",gap:10,flexWrap:"wrap"},children:[v.jsx("button",{type:"button",style:{border:"1px solid #111827",background:"#111827",color:"white",borderRadius:12,padding:"10px 12px",fontWeight:900,fontSize:13,cursor:"pointer"},onClick:rt=>{rt.preventDefault(),rt.stopPropagation(),window.open("http://pf.kakao.com/_Kkxjsn","_blank")},children:" "}),v.jsx("button",{type:"button",style:{border:"1px solid #e5e7eb",background:"white",color:"#111827",borderRadius:12,padding:"10px 12px",fontWeight:900,fontSize:13,cursor:"pointer"},onClick:rt=>{var Mt;rt.preventDefault(),rt.stopPropagation(),(Mt=navigator.clipboard)==null||Mt.writeText("http://pf.kakao.com/_Kkxjsn"),alert("  !")},children:" "})]})]}),v.jsxs("div",{style:{...lt,background:"linear-gradient(135deg, #f0f9ff, #e0f2fe)",border:"1px solid #bae6fd",padding:e?"12px 12px":"14px 16px",marginBottom:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[v.jsx("span",{style:{fontSize:18},children:""}),v.jsx("div",{style:{fontWeight:900,fontSize:15},children:" "}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:kt})]}),N.length>0&&v.jsx("button",{onClick:()=>j(rt=>!rt),style:Rt,children:O?"   ":"   "})]}),v.jsxs("div",{style:{marginTop:10},children:[W?v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"  ..."}):w.length>0?v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:w.map(rt=>v.jsxs("div",{style:ft,children:[v.jsx("span",{style:{fontWeight:900},children:(rt.name||"").toString()}),v.jsx("span",{style:{color:"#dc2626",fontSize:12,fontWeight:800},children:(rt.date||"").toString()})]},rt.id))}):v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"   ."}),O&&N.length>0&&v.jsx("div",{style:{marginTop:10,display:"flex",flexWrap:"wrap",gap:6},children:N.slice(0,e?12:30).map(rt=>v.jsxs("div",{style:{fontSize:12,padding:"5px 10px",borderRadius:999,background:"#f8fafc",border:"1px solid #e5e7eb",color:"#6b7280",fontWeight:700},children:[(rt.name||"").toString(),"  ",(rt.date||"").toString()]},rt.id))})]})]}),v.jsxs("div",{style:Ft,children:[v.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[v.jsx("h1",{style:{fontSize:e?18:20,fontWeight:900,margin:0},children:" "}),v.jsxs("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:[kt,"  "]})]}),v.jsx("button",{onClick:pt,disabled:st,style:L(P),title:"  (/  ) ON/OFF",children:st?" ...":P?"  ON":"  OFF"})]}),!p&&k.length>0&&v.jsxs("div",{style:Ct,children:[v.jsxs("div",{style:J,children:[v.jsx("span",{style:{fontSize:16},children:""}),v.jsx("span",{children:" "}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:"( )"})]}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:k.map(rt=>{const Mt=typeof rt.mainOrder=="number"&&rt.mainOrder<10,jt=Mt?"must":"imp";return v.jsxs("button",{style:_t(jt),onClick:async It=>{It.preventDefault(),It.stopPropagation(),await Ot(rt.id),f(Lt=>Lt===rt.id?null:rt.id)},title:rt.title,children:[v.jsx("span",{children:Mt?"":""}),v.jsx("span",{style:Et,children:rt.title})]},rt.id)})}),qt&&v.jsx("div",{style:{marginTop:10},children:Wt(qt)})]}),v.jsx("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:10},children:p?v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"  ..."}):z.length===0?v.jsx("div",{style:{fontSize:13,color:"#9ca3af"},children:"   ."}):z.map(Wt)}),!p&&D.length>0&&v.jsxs("div",{style:{marginTop:14},children:[v.jsx("button",{onClick:()=>H(rt=>!rt),style:Rt,children:F?"   ":`    (${D.length})`}),F&&v.jsxs("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:8},children:[D.slice(0,e?15:30).map(Wt),v.jsxs("div",{style:{fontSize:12,color:"#9ca3af",marginTop:2},children:["    ",e?"15":"30"," ."]})]})]})]})}function G2(){const[r,e]=C.useState([]),[i,a]=C.useState(""),o=localStorage.getItem("studentId"),[c,f]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const E=window.matchMedia("(max-width: 640px)"),S=A=>f(A.matches);return E.addEventListener?E.addEventListener("change",S):E.addListener(S),f(E.matches),()=>{E.removeEventListener?E.removeEventListener("change",S):E.removeListener(S)}},[]),C.useEffect(()=>{if(!o)return;const E=us(Ie(St,"books"),cs("studentId","==",o));return Oe(E,S=>{const A=S.docs.map(O=>({id:O.id,...O.data()}));e(A)})},[o]);const m=C.useMemo(()=>i?[...r].sort((S,A)=>{if(i==="grade"){const O=Number(S.grade||0),j=Number(A.grade||0);return O-j}if(i==="title")return String(S.title||"").localeCompare(String(A.title||""));if(i==="completedDate"){const O=String(S.completedDate||"9999-99-99"),j=String(A.completedDate||"9999-99-99");return O.localeCompare(j)}return 0}):r,[r,i]),y=()=>{const E=["",""," ",""],S=m.map((B,F)=>[F+1,B.grade??"",(B.title||"").replaceAll(`
`," "),B.completedDate??""]);let A=E.join(",")+`
`;S.forEach(B=>{A+=B.map(F=>`"${String(F).replaceAll('"','""')}"`).join(",")+`
`});const O=new Blob([A],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(O),W=document.createElement("a");W.href=j,W.download=`_${new Date().toISOString().slice(0,10)}.csv`,W.click(),URL.revokeObjectURL(j)},p={page:{maxWidth:980,margin:"0 auto",padding:c?"16px 12px 60px":"28px 14px 60px"},title:{fontSize:c?18:22,fontWeight:900,marginBottom:12},toolbar:{display:"flex",flexWrap:"wrap",gap:8,alignItems:"center",marginBottom:14},btn:{padding:c?"10px 12px":"8px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:13,fontWeight:700},btnPrimary:{padding:c?"10px 12px":"8px 12px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",cursor:"pointer",fontSize:13,fontWeight:800},pill:{fontSize:12,padding:"4px 10px",borderRadius:999,background:"#f3f4f6",color:"#374151"},list:{display:"grid",gap:10,marginTop:10},card:{background:"#fff",border:"1px solid #eef2f7",borderRadius:16,padding:12,boxShadow:"0 6px 18px rgba(15, 23, 42, 0.06)"},bookTitle:{fontSize:15,fontWeight:900,color:"#0f172a"},metaRow:{display:"flex",gap:8,flexWrap:"wrap",marginTop:8,alignItems:"center"},meta:{fontSize:12,padding:"4px 10px",borderRadius:999,background:"#eff6ff",border:"1px solid #dbeafe",color:"#1d4ed8"},metaGray:{fontSize:12,padding:"4px 10px",borderRadius:999,background:"#f3f4f6",color:"#374151"},tableWrap:{overflowX:"auto",borderRadius:14,border:"1px solid #eef2f7",marginTop:14,background:"#fff"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0,minWidth:640},th:{textAlign:"left",fontSize:12,color:"#6b7280",padding:"12px 12px",borderBottom:"1px solid #eef2f7",background:"#f8fafc"},td:{fontSize:13,padding:"12px 12px",borderBottom:"1px solid #f1f5f9"},empty:{padding:16,textAlign:"center",color:"#6b7280",fontSize:14}};return v.jsxs("div",{style:p.page,children:[v.jsxs("div",{style:p.title,children:["   ",v.jsxs("span",{style:p.pill,children:[" ",r.length,""]})]}),v.jsxs("div",{style:p.toolbar,children:[v.jsx("button",{style:p.btnPrimary,onClick:y,children:"(CSV) "}),v.jsx("button",{style:p.btn,onClick:()=>a("grade"),children:" "}),v.jsx("button",{style:p.btn,onClick:()=>a("title"),children:" "}),v.jsx("button",{style:p.btn,onClick:()=>a("completedDate"),children:" "}),v.jsx("button",{style:p.btn,onClick:()=>a(""),children:" "})]}),m.length===0?v.jsx("div",{style:p.empty,children:"  ."}):c?v.jsx("div",{style:p.list,children:m.map((E,S)=>v.jsxs("div",{style:p.card,children:[v.jsxs("div",{style:p.bookTitle,children:[S+1,". ",E.title||"-"]}),v.jsxs("div",{style:p.metaRow,children:[v.jsxs("span",{style:p.meta,children:[": ",E.grade??"-"]}),v.jsxs("span",{style:p.metaGray,children:[": ",E.completedDate||"-"]})]})]},E.id))}):v.jsx("div",{style:p.tableWrap,children:v.jsxs("table",{style:p.table,children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:p.th,children:""}),v.jsx("th",{style:p.th,children:""}),v.jsx("th",{style:p.th,children:" "}),v.jsx("th",{style:p.th,children:""})]})}),v.jsx("tbody",{children:m.map((E,S)=>v.jsxs("tr",{children:[v.jsx("td",{style:p.td,children:S+1}),v.jsx("td",{style:p.td,children:E.grade??""}),v.jsx("td",{style:p.td,children:E.title}),v.jsx("td",{style:p.td,children:E.completedDate})]},E.id))})]})})]})}function F2(){const[r,e]=C.useState([]),[i,a]=C.useState([]),[o,c]=C.useState({}),[f,m]=C.useState(null),[y,p]=C.useState(""),E=localStorage.getItem("studentId"),[S,A]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const Z=window.matchMedia("(max-width: 640px)"),st=mt=>A(mt.matches);return Z.addEventListener?Z.addEventListener("change",st):Z.addListener(st),A(Z.matches),()=>{Z.removeEventListener?Z.removeEventListener("change",st):Z.removeListener(st)}},[]),C.useEffect(()=>{if(!E)return;const Z=Ie(St,"comments");return Oe(Z,st=>{const M=st.docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.studentId===E);e(M.sort((R,w)=>(w.createdAt||"").localeCompare(R.createdAt||"")))})},[E]),C.useEffect(()=>{if(!E)return;const Z=Ie(St,"answer");return Oe(Z,st=>{const M=st.docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.studentId===E);a(M.sort((R,w)=>(w.createdAt||"").localeCompare(R.createdAt||"")))})},[E]);const O=C.useMemo(()=>{const Z={};for(const st of i){const mt=st.parentId||"unknown";Z[mt]||(Z[mt]=[]),Z[mt].push(st)}return Object.keys(Z).forEach(st=>{Z[st].sort((mt,M)=>(M.createdAt||"").localeCompare(mt.createdAt||""))}),Z},[i]),j=Z=>Z?Z.slice(0,19).replace("T"," "):"",W=async Z=>{const st=(o[Z]||"").trim();if(!st)return alert(" !");if(!E)return alert("  .    .");const mt=await vn(Yt(St,"students",E)),M=mt.exists()?mt.data().name:"";await C2(Ie(St,"answer"),{studentId:E,studentName:M,comment:st,date:new Date().toISOString().slice(0,10),createdAt:new Date().toISOString(),createdAtServer:Ln(),parentId:Z}),c(R=>({...R,[Z]:""})),alert(" !")},B=async Z=>{window.confirm("   ?")&&await R2(Yt(St,"answer",Z))},F=async Z=>{if(!y.trim())return alert("  !");await N1(Yt(St,"answer",Z),{comment:y,updatedAt:new Date().toISOString(),updatedAtServer:Ln()}),m(null),p("")},H={page:{maxWidth:920,margin:"0 auto",padding:S?"16px 12px 60px":"28px 14px 60px"},header:{display:"flex",flexDirection:"column",gap:6,marginBottom:16,textAlign:"left"},title:{fontSize:S?18:22,fontWeight:900,letterSpacing:-.3},sub:{fontSize:13,color:"#6b7280"},list:{listStyle:"none",padding:0,margin:0,display:"grid",gap:12},card:{background:"#fff",border:"1px solid #eef2f7",borderRadius:14,padding:S?12:14,boxShadow:"0 6px 18px rgba(15, 23, 42, 0.06)"},cardTop:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:10,marginBottom:10},commentText:{fontSize:14,lineHeight:1.6,color:"#111827",whiteSpace:"pre-wrap",wordBreak:"break-word"},metaRow:{display:"flex",gap:8,flexWrap:"wrap",marginTop:10},pill:{fontSize:12,padding:"4px 10px",borderRadius:999,background:"#f3f4f6",color:"#374151"},pillBlue:{fontSize:12,padding:"4px 10px",borderRadius:999,background:"#eff6ff",color:"#1d4ed8",border:"1px solid #dbeafe"},replyWrap:{marginTop:12,paddingTop:12,borderTop:"1px dashed #e5e7eb",display:"grid",gap:10},replyCard:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:12,padding:10},replyText:{fontSize:13,lineHeight:1.55,color:"#0f172a",whiteSpace:"pre-wrap",wordBreak:"break-word"},replyActions:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},textarea:{width:"100%",minHeight:S?92:88,resize:"vertical",borderRadius:12,border:"1px solid #e5e7eb",padding:"10px 12px",outline:"none",fontSize:13,lineHeight:1.5,background:"#fff"},row:{display:"flex",gap:8,justifyContent:"flex-end",flexWrap:"wrap"},btn:{border:"1px solid #e5e7eb",background:"#fff",padding:"10px 12px",borderRadius:10,fontSize:13,cursor:"pointer"},btnPrimary:{border:"1px solid #2563eb",background:"#2563eb",color:"#fff",padding:"10px 12px",borderRadius:10,fontSize:13,cursor:"pointer",fontWeight:700},btnDanger:{border:"1px solid #fecaca",background:"#fff",color:"#b91c1c",padding:"10px 12px",borderRadius:10,fontSize:13,cursor:"pointer",fontWeight:700},empty:{color:"#6b7280",fontSize:14,padding:18,textAlign:"center"}},P=r.filter(Z=>{var st;return!((st=Z.comment)!=null&&st.startsWith(":"))});return v.jsxs("div",{style:H.page,children:[v.jsxs("div",{style:H.header,children:[v.jsx("div",{style:H.title,children:"  "}),v.jsx("div",{style:H.sub,children:"      ."})]}),v.jsxs("ul",{style:H.list,children:[P.map(Z=>{const st=O[Z.id]||[];return v.jsxs("li",{style:H.card,children:[v.jsx("div",{style:H.cardTop,children:v.jsxs("div",{style:{flex:1},children:[v.jsx("div",{style:H.commentText,children:Z.comment||""}),v.jsxs("div",{style:H.metaRow,children:[v.jsxs("span",{style:H.pillBlue,children:[" ",Z.date||"-"]}),Z.createdAt?v.jsxs("span",{style:H.pill,children:["  ",j(Z.createdAt)]}):v.jsx("span",{style:H.pill,children:"  -"})]})]})}),v.jsxs("div",{style:H.replyWrap,children:[st.map(mt=>v.jsx("div",{style:H.replyCard,children:f===mt.id?v.jsxs(v.Fragment,{children:[v.jsx("textarea",{value:y,onChange:M=>p(M.target.value),style:H.textarea}),v.jsxs("div",{style:H.row,children:[v.jsx("button",{style:H.btnPrimary,onClick:()=>F(mt.id),children:""}),v.jsx("button",{style:H.btn,onClick:()=>m(null),children:""})]})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:H.replyText,children:[" ",mt.comment||""]}),v.jsxs("div",{style:{...H.metaRow,marginTop:8},children:[v.jsxs("span",{style:H.pill,children:[" ",mt.date||"-"]}),mt.createdAt?v.jsxs("span",{style:H.pill,children:[" ",j(mt.createdAt)]}):null]}),v.jsxs("div",{style:H.replyActions,children:[v.jsx("button",{style:H.btn,onClick:()=>{m(mt.id),p(mt.comment||"")},children:""}),v.jsx("button",{style:H.btnDanger,onClick:()=>B(mt.id),children:""})]})]})},mt.id)),v.jsxs("div",{children:[v.jsx("textarea",{placeholder:"  ( )",value:o[Z.id]||"",onChange:mt=>c(M=>({...M,[Z.id]:mt.target.value})),style:H.textarea}),v.jsx("div",{style:H.row,children:v.jsx("button",{style:H.btnPrimary,onClick:()=>W(Z.id),children:" "})})]})]})]},Z.id)}),P.length===0&&v.jsx("li",{style:H.empty,children:"  ."})]})]})}function Q2(){const[r,e]=C.useState("comments"),i=localStorage.getItem("parentPhone")||"",[a,o]=C.useState(localStorage.getItem("studentId")||""),[c,f]=C.useState((localStorage.getItem("studentName")||"").trim()),[m,y]=C.useState([]),[p,E]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const H=window.matchMedia("(max-width: 640px)"),P=Z=>E(Z.matches);return H.addEventListener?H.addEventListener("change",P):H.addListener(P),E(H.matches),()=>{H.removeEventListener?H.removeEventListener("change",P):H.removeListener(P)}},[]),C.useEffect(()=>{const H=()=>{o(localStorage.getItem("studentId")||""),f((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",H),window.addEventListener("hashchange",H);const P=setInterval(H,800);return()=>{window.removeEventListener("storage",H),window.removeEventListener("hashchange",H),clearInterval(P)}},[]),C.useEffect(()=>{(async()=>{var H,P;if(i)try{const Z=await vn(Yt(St,"parents",i));if(!Z.exists()){y([]);return}const st=((H=Z.data())==null?void 0:H.children)||[],mt=[];for(const M of st)try{const R=await vn(Yt(St,"students",M)),w=R.exists()?(((P=R.data())==null?void 0:P.name)||"").toString().trim():"";mt.push({id:M,name:w||""})}catch{mt.push({id:M,name:""})}mt.sort((M,R)=>(M.name||"").localeCompare(R.name||"")),y(mt)}catch(Z){console.error("children  :",Z),y([])}})()},[i]);const S=async H=>{var st;if(!H)return;const P=m.find(mt=>mt.id===H);let Z=((P==null?void 0:P.name)||"").trim();if(!Z)try{const mt=await vn(Yt(St,"students",H));mt.exists()&&(Z=(((st=mt.data())==null?void 0:st.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",H),Z&&localStorage.setItem("studentName",Z),o(H),f(Z)},A=C.useMemo(()=>({maxWidth:980,margin:"0 auto",padding:p?10:16}),[p]),O={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},j=H=>({padding:p?"10px 12px":"10px 14px",borderRadius:12,border:"1px solid "+(H?"#2563eb":"#e5e7eb"),background:H?"#2563eb":"#f9fafb",color:H?"white":"#111827",cursor:"pointer",fontWeight:900,fontSize:14,width:p?"calc(50% - 4px)":"auto"}),W={fontSize:12,color:"#6b7280",fontWeight:800,whiteSpace:"nowrap"},B={padding:p?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",width:p?"100%":220,minWidth:p?"auto":180},F={padding:p?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer",fontWeight:900,width:p?"100%":"auto"};return v.jsxs("div",{style:A,children:[v.jsxs("div",{style:{...O,padding:p?12:14,marginBottom:12},children:[v.jsxs("div",{style:{display:"flex",gap:10,alignItems:p?"stretch":"center",justifyContent:"space-between",flexWrap:"wrap",flexDirection:p?"column":"row"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:p?18:22,fontWeight:900},children:"    "}),v.jsx("div",{style:{fontSize:13,color:"#6b7280",marginTop:4},children:c?` : ${c}`:"  ."})]}),m.length>0&&v.jsxs("div",{style:{display:"flex",gap:8,alignItems:p?"stretch":"center",flexDirection:p?"column":"row",width:p?"100%":"auto"},children:[v.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:v.jsx("span",{style:W,children:" "})}),v.jsx("select",{value:a,onChange:H=>S(H.target.value),style:B,children:m.map(H=>v.jsx("option",{value:H.id,children:H.name},H.id))}),v.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:F,children:" "})]})]}),v.jsxs("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap",width:"100%"},children:[v.jsx("button",{onClick:()=>e("comments"),style:j(r==="comments"),children:" "}),v.jsx("button",{onClick:()=>e("books"),style:j(r==="books"),children:" "})]})]}),v.jsxs("div",{style:{...O,padding:p?12:14},children:[r==="comments"&&v.jsx(F2,{},`comments_${a}`),r==="books"&&v.jsx(G2,{},`books_${a}`)]})]})}function $2(){const[r,e]=C.useState("intensive"),[i,a]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const I=window.matchMedia("(max-width: 640px)"),Y=nt=>a(nt.matches);return I.addEventListener?I.addEventListener("change",Y):I.addListener(Y),a(I.matches),()=>{I.removeEventListener?I.removeEventListener("change",Y):I.removeListener(Y)}},[]);const o=localStorage.getItem("parentPhone")||"",[c,f]=C.useState([]),[m,y]=C.useState(localStorage.getItem("studentId")||""),[p,E]=C.useState((localStorage.getItem("studentName")||"").trim()),[S,A]=C.useState([]),[O,j]=C.useState({}),[W,B]=C.useState({}),[F,H]=C.useState([]),[P,Z]=C.useState(null),[st,mt]=C.useState({isOpen:!0,reserveOnly:!1}),M=["","","","",""],R=[{id:"A",label:"A (5 ~ 7)",timeRange:"5 ~ 7"},{id:"B",label:"B (7 ~ 9)",timeRange:"7 ~ 9"}],w=5,[N,k]=C.useState(null),[z,D]=C.useState({}),[Dt,Ot]=C.useState(null),[tt,pt]=C.useState(""),[At,Ft]=C.useState(null),[L,lt]=C.useState({}),yt=["","",""],ft=["3","4","5"],Rt=8,[Ct,J]=C.useState([]),[_t,Et]=C.useState([]),[kt,Wt]=C.useState({}),[qt,rt]=C.useState(null),Mt=["","","",""],jt=6,[It,Lt]=C.useState([]),[Qt,_e]=C.useState([]),[be,We]=C.useState({}),[wn,_i]=C.useState(null),[tr,Zn]=C.useState(!1),[er,Ee]=C.useState(!1),[ce,Rn]=C.useState(0),[un,nr]=C.useState(null),yl=C.useMemo(()=>({elementary:{:["230"],:["3","4"],:["2","3","4"],:["3","4"],:["3","4"]},middle:{:["330","5","630"],:["5","630"],:["5","630"],:["5","630"],:["5","630"]}}),[]),ir={intensive:"(261)",elementary:"(263)",middle:"(263)",high:"(263)",advanced:"(263)"},Jn=r==="elementary"||r==="middle"?yl[r]:null,Cn=(I,Y)=>`${I}|${Y}`,Ye=(I,Y,nt)=>I.some(ot=>ot.day===Y&&ot.time===nt),rr=(I,Y)=>`${I}|${Y}`,ti=I=>{if(!I)return"";const Y=String(I).match(/^(\d+)30$/);if(Y)return`${Y[1]}:30`;const nt=String(I).match(/^(\d+)30$/);return nt?`${nt[1]}:30`:String(I)},Vr=I=>I>=6?{text:"",tone:"danger"}:I>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},Or=I=>I>=8?{text:"",tone:"danger"}:I>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},xs=I=>I>=6?{text:"",tone:"danger"}:I>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},ei=I=>I==="danger"?"#ef4444":I==="warn"?"#f59e0b":"#22c55e",cn=({text:I,tone:Y})=>v.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,fontWeight:900,color:"#111827",whiteSpace:"nowrap"},children:[v.jsx("span",{style:{width:8,height:8,borderRadius:999,background:ei(Y),display:"inline-block"}}),I]}),jr=({tone:I})=>v.jsx("span",{style:{width:8,height:8,borderRadius:999,background:ei(I),display:"inline-block",flex:"0 0 auto"}}),ni={padding:i?10:16,maxWidth:980,margin:"0 auto"},bi={border:"1px solid #e5e7eb",borderRadius:14,background:"#fff",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},Pn=(I,Y=!1)=>({padding:i?"10px 8px":"11px 12px",borderRadius:i?12:14,border:`1px solid ${I?"#2563eb":"#e5e7eb"}`,background:I?"#eef5ff":"#fff",fontWeight:900,cursor:Y?"not-allowed":"pointer",opacity:Y?.55:1,textAlign:"left",width:"100%",transition:"transform 0.06s ease"}),sr={display:"flex",flexWrap:"nowrap",gap:10,overflowX:"auto",paddingBottom:6,WebkitOverflowScrolling:"touch"},Ei=(I,Y=!1)=>({...Pn(I,Y),flex:"0 0 auto",minWidth:160,width:"auto"}),ca={padding:i?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",width:i?"100%":"auto",minWidth:i?"auto":180},Te={display:"flex",gap:8,marginBottom:12,overflowX:i?"auto":"visible",WebkitOverflowScrolling:"touch",paddingBottom:i?4:0},Ue=I=>({padding:i?"9px 12px":"10px 14px",borderRadius:12,border:`1px solid ${I?"#2563eb":"#e5e7eb"}`,background:I?"#2563eb":"#fff",color:I?"#fff":"#111827",fontWeight:900,cursor:"pointer",whiteSpace:"nowrap",flex:"0 0 auto"});C.useEffect(()=>{(async()=>{var I,Y;if(o)try{const nt=await vn(Yt(St,"parents",o));if(!nt.exists()){f([]);return}const ot=((I=nt.data())==null?void 0:I.children)||[],dt=[];for(const gt of ot)try{const bt=await vn(Yt(St,"students",gt)),le=bt.exists()?(((Y=bt.data())==null?void 0:Y.name)||"").toString().trim():"";dt.push({id:gt,name:le||""})}catch{dt.push({id:gt,name:""})}if(dt.sort((gt,bt)=>(gt.name||"").localeCompare(bt.name||"")),f(dt),!m&&dt.length){const gt=dt[0];localStorage.setItem("studentId",gt.id),localStorage.setItem("studentName",gt.name),y(gt.id),E(gt.name)}}catch(nt){console.error("childList  :",nt),f([])}})()},[o]);const ke=async I=>{var ot;if(!I)return;const Y=c.find(dt=>dt.id===I);let nt=((Y==null?void 0:Y.name)||"").trim();if(!nt)try{const dt=await vn(Yt(St,"students",I));dt.exists()&&(nt=(((ot=dt.data())==null?void 0:ot.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",I),nt&&localStorage.setItem("studentName",nt),y(I),E(nt),A([]),H([]),Z(null),k(null),Ot(null),pt(""),Ft(null),J([]),Et([]),rt(null),Lt([]),_e([]),_i(null),Zn(!1),Ee(!1),nr(null)};C.useEffect(()=>{const I=Yt(St,"settings","enrollments"),Y=Oe(I,nt=>{if(!nt.exists())return;const ot=nt.data()||{};mt({isOpen:ot.isOpen!==void 0&&ot.isOpen!==null?!!ot.isOpen:!0,reserveOnly:ot.reserveOnly!==void 0&&ot.reserveOnly!==null?!!ot.reserveOnly:!1})},nt=>console.error("   :",nt));return()=>Y()},[]),C.useEffect(()=>{if(r!=="elementary"&&r!=="middle"){j({}),B({});return}const I=us(Ie(St,"enrollments"),cs("group","==",r)),Y=Oe(I,nt=>{const ot={},dt={};nt.forEach(gt=>{const bt=gt.data(),le=`${bt.day}|${bt.time}`;if(bt.status==="reserve")dt[le]=(dt[le]||0)+1;else{if(bt.status==="waitlist")return;ot[le]=(ot[le]||0)+1}}),j(ot),B(dt)});return()=>Y()},[r]),C.useEffect(()=>{if(!p.trim()){H([]),A([]),Z(null);return}const I=Yt(St,"enrollments_by_student",p.trim()),Y=Oe(I,nt=>{var ot,dt;if(nt.exists()){const gt=nt.data(),bt=Array.isArray(gt.applied)?gt.applied:[];H(bt),Z(((dt=(ot=gt.updatedAt)==null?void 0:ot.toDate)==null?void 0:dt.call(ot))||null),A(bt.map(({day:le,time:xe,status:Re})=>({day:le,time:xe,status:Re})))}else H([]),A([]),Z(null)});return()=>Y()},[p]),C.useEffect(()=>{if(!m){Ot(null),k(null);return}const I=Yt(St,"middle_clinic_days",m),Y=Oe(I,nt=>{if(!nt.exists()){Ot(null),k(null);return}const ot=nt.data()||{};Ot(ot),k(ot.regular||null)});return()=>Y()},[m]),C.useEffect(()=>{const I=Ie(St,"middle_clinic_days"),Y=Oe(I,nt=>{const ot={};nt.forEach(dt=>{const gt=dt.data()||{};if(gt.regular&&gt.regular.day&&gt.regular.blockId){const bt=rr(gt.regular.day,gt.regular.blockId);ot[bt]=(ot[bt]||0)+1}}),D(ot)});return()=>Y()},[]);const Dn=(I,Y,nt=!1)=>{const ot=rr(I,Y);let dt=z[ot]||0;return nt&&(Dt!=null&&Dt.regular)&&Dt.regular.day===I&&Dt.regular.blockId===Y&&(dt-=1),dt>=w};C.useEffect(()=>{if(!m){Ft(null),pt("");return}const I=Yt(St,"operation_by_student",m),Y=Oe(I,nt=>{if(nt.exists()){const ot=nt.data()||{};Ft(ot),pt(ot.time||"")}else Ft(null),pt("")});return()=>Y()},[m]),C.useEffect(()=>{const I=Ie(St,"operation_enrollments"),Y=Oe(I,nt=>{const ot={};nt.forEach(dt=>{const bt=(dt.data()||{}).time;bt&&(ot[bt]=(ot[bt]||0)+1)}),lt(ot)});return()=>Y()},[]),C.useEffect(()=>{if(!m){Et([]),J([]),rt(null);return}const I=Yt(St,"intensive_by_student",m),Y=Oe(I,nt=>{var gt,bt;if(!nt.exists()){Et([]),J([]),rt(null);return}const ot=nt.data()||{},dt=Array.isArray(ot.applied)?ot.applied:[];Et(dt),J(dt),rt(((bt=(gt=ot.updatedAt)==null?void 0:gt.toDate)==null?void 0:bt.call(gt))||null)});return()=>Y()},[m]),C.useEffect(()=>{const I=Ie(St,"intensive_enrollments"),Y=Oe(I,nt=>{const ot={};nt.forEach(dt=>{const gt=dt.data()||{};if(!gt.day||!gt.time)return;const bt=Cn(gt.day,gt.time);ot[bt]=(ot[bt]||0)+1}),Wt(ot)});return()=>Y()},[]);const kr=(I,Y)=>{if(Ye(Ct,I,Y)){J(Ct.filter(dt=>!(dt.day===I&&dt.time===Y)));return}const ot=Ct.findIndex(dt=>dt.day===I);if(ot!==-1){const dt=[...Ct];dt[ot]={day:I,time:Y},J(dt);return}if(Ct.length>=3){alert("  3   .");return}J([...Ct,{day:I,time:Y}])},vl=async()=>{if(!m||!p.trim()){alert("   .     .");return}if(Ct.length<1||Ct.length>3){alert(" 1 ~ 3  .");return}for(const{day:dt,time:gt}of Ct){const bt=Cn(dt,gt),le=kt[bt]||0;if((_t.some(Ae=>Ae.day===dt&&Ae.time===gt)?le-1:le)>=Rt){alert(`${dt} ${gt}  .`);return}}const I=Ya(St),Y=Yt(St,"intensive_by_student",m);I.set(Y,{studentId:m,studentName:p.trim(),applied:Ct.map(dt=>({day:dt.day,time:dt.time})),updatedAt:Ln()},{merge:!0});const nt=us(Ie(St,"intensive_enrollments"),cs("studentId","==",m));(await ps(nt)).forEach(dt=>I.delete(dt.ref)),Ct.forEach(({day:dt,time:gt})=>{const bt=`${m}|${dt}|${gt}`,le=Yt(St,"intensive_enrollments",bt);I.set(le,{studentId:m,studentName:p.trim(),day:dt,time:gt,createdAt:Ln()})}),await I.commit(),alert("  .")};C.useEffect(()=>{if(!m){_e([]),Lt([]),_i(null);return}const I=Yt(St,"high_by_student",m),Y=Oe(I,nt=>{var gt,bt;if(!nt.exists()){_e([]),Lt([]),_i(null);return}const ot=nt.data()||{},dt=Array.isArray(ot.days)?ot.days:[];_e(dt),Lt(dt),_i(((bt=(gt=ot.updatedAt)==null?void 0:gt.toDate)==null?void 0:bt.call(gt))||null)});return()=>Y()},[m]),C.useEffect(()=>{const I=Ie(St,"high_enrollments"),Y=Oe(I,nt=>{const ot={};nt.forEach(dt=>{const bt=(dt.data()||{}).day;bt&&(ot[bt]=(ot[bt]||0)+1)}),We(ot)});return()=>Y()},[]);const Ni=I=>{if(It.includes(I)){Lt(It.filter(Y=>Y!==I));return}if(It.length>=4){alert("  4    .");return}Lt([...It,I])},ha=async()=>{if(!m||!p.trim()){alert("   .     .");return}for(const dt of It){const gt=be[dt]||0;if((Qt.includes(dt)?gt-1:gt)>=jt){alert(`${dt} .`);return}}const I=Ya(St),Y=Yt(St,"high_by_student",m);I.set(Y,{studentId:m,studentName:p.trim(),days:It,updatedAt:Ln()},{merge:!0});const nt=us(Ie(St,"high_enrollments"),cs("studentId","==",m));(await ps(nt)).forEach(dt=>I.delete(dt.ref)),It.forEach(dt=>{const gt=`${m}|${dt}`,bt=Yt(St,"high_enrollments",gt);I.set(bt,{studentId:m,studentName:p.trim(),day:dt,createdAt:Ln()})}),await I.commit(),alert("  .")};C.useEffect(()=>{if(!m){Ee(!1),Zn(!1),nr(null);return}const I=Yt(St,"advanced_by_student",m),Y=Oe(I,nt=>{var gt,bt;if(!nt.exists()){Ee(!1),Zn(!1),nr(null);return}const ot=nt.data()||{},dt=!!ot.applied;Ee(dt),Zn(dt),nr(((bt=(gt=ot.updatedAt)==null?void 0:gt.toDate)==null?void 0:bt.call(gt))||null)});return()=>Y()},[m]),C.useEffect(()=>{const I=Ie(St,"advanced_enrollments"),Y=Oe(I,nt=>{Rn(nt.size||0)});return()=>Y()},[]);const Vi=async I=>{if(!m||!p.trim()){alert("   .     .");return}const Y=Ya(St),nt=Yt(St,"advanced_by_student",m);Y.set(nt,{studentId:m,studentName:p.trim(),applied:!!I,updatedAt:Ln()},{merge:!0});const ot=`${m}`,dt=Yt(St,"advanced_enrollments",ot);I?Y.set(dt,{studentId:m,studentName:p.trim(),createdAt:Ln()}):Y.delete(dt),await Y.commit(),alert(I?"  .":"  .")},Si=(I,Y)=>{if(Ye(S,I,Y)){A(S.filter(ot=>!(ot.day===I&&ot.time===Y)));return}const nt=S.findIndex(ot=>ot.day===I);if(nt!==-1){const ot=[...S];ot[nt]={day:I,time:Y},A(ot);return}if(S.length>=2){alert("    2   .");return}A([...S,{day:I,time:Y}])},ii=(I,Y)=>{if(Ye(S,I,Y)){A(S.filter(ot=>!(ot.day===I&&ot.time===Y)));return}const nt=S.findIndex(ot=>ot.day===I);if(nt!==-1){const ot=[...S];ot[nt]={day:I,time:Y},A(ot);return}if(S.length>=2){alert("    2   .");return}A([...S,{day:I,time:Y}])},ri=(I,Y)=>A(S.filter(nt=>!(nt.day===I&&nt.time===Y))),si=I=>{k(Y=>({day:I,blockId:(Y==null?void 0:Y.blockId)||"A"}))},hn=I=>{if(!(N!=null&&N.day)){alert("   .");return}k(Y=>({...Y||{day:M[0]},blockId:I}))},Ne=async()=>{if(!m||!p.trim()){alert("   .     .");return}if(!N||!N.day||!N.blockId){alert("  (A/B)  .");return}const{day:I,blockId:Y}=N;if(Dn(I,Y,!0)){alert(" /   .");return}const nt=Ya(St),ot=Yt(St,"middle_clinic_days",m);nt.set(ot,{studentId:m,studentName:p.trim(),regular:{day:I,blockId:Y},extra:null,updatedAt:Ln()},{merge:!0}),await nt.commit(),alert("  .")},As=async()=>{if(!m||!confirm("  ?"))return;const I=Ya(St);I.delete(Yt(St,"middle_clinic_days",m)),await I.commit(),alert(" .")},Lr=async()=>{if(r!=="elementary"&&r!=="middle")return;if(!st.isOpen){alert("  .");return}if(!p.trim()){alert("   .     .");return}if(S.length===0){alert("  .");return}if(S.length>2){alert("   2   .");return}let I=[...S],Y=!1,nt="";const ot=[];if(S.forEach(({day:xe,time:Re})=>{const Ae=Cn(xe,Re),ji=O[Ae]||0,zr=W[Ae]||0;let qn;if(st.reserveOnly){if(zr>=10){Y=!0,nt+=`${xe} ${Re}     .
`;return}qn="reserve"}else if(ji<6)qn="applied";else if(zr<10)qn="reserve";else{Y=!0,nt+=`${xe} ${Re}      .
`;return}ot.push({day:xe,time:Re,status:qn})}),Y){alert(nt||"    .   .");return}I=ot;const dt=Ya(St),gt=Yt(St,"enrollments_by_student",p.trim());dt.set(gt,{studentName:p.trim(),applied:I.map(({day:xe,time:Re,status:Ae})=>({day:xe,time:Re,group:r,status:Ae==="reserve"?"reserve":"applied",label:Ae==="reserve"?"()":""})),waitlist:[],updatedAt:Ln()});const bt=us(Ie(St,"enrollments"),cs("studentName","==",p.trim()));(await ps(bt)).forEach(xe=>dt.delete(xe.ref)),I.forEach(({day:xe,time:Re,status:Ae})=>{const ji=Ae==="reserve"?"reserve":"applied",zr=`${p.trim()}|${r}|${xe}|${Re}|${ji}`,qn=Yt(St,"enrollments",zr);dt.set(qn,{studentName:p.trim(),group:r,day:xe,time:Re,status:ji,createdAt:Ln()})}),await dt.commit(),A(I),alert(".")},Bn=(()=>{var ot,dt;const I=[];if(_t!=null&&_t.length){const gt=_t.map(bt=>`${bt.day} ${bt.time}`).join(", ");I.push(` : ${gt} ()`)}const Y=F.filter(gt=>gt.group==="elementary"),nt=F.filter(gt=>gt.group==="middle");if(Y.length){const gt=Y.map(bt=>`${bt.day} ${bt.time}${bt.status==="reserve"?" ()":" ()"}`).join(", ");I.push(` : ${gt}`)}if(nt.length){const gt=nt.map(bt=>`${bt.day} ${bt.time}${bt.status==="reserve"?" ()":" ()"}`).join(", ");I.push(` : ${gt}`)}if((ot=Dt==null?void 0:Dt.regular)!=null&&ot.day&&((dt=Dt==null?void 0:Dt.regular)!=null&&dt.blockId)){const gt=Dt.regular.blockId==="A"?"A(5~7)":"B(7~9)";I.push(` : ${Dt.regular.day} ${gt} ()`)}return Qt!=null&&Qt.length&&I.push(` : ${Qt.join(", ")} ()`),er&&I.push(" :  "),I.length||I.push("    ."),I})(),Ti=["intensive","elementary","middle","high","advanced"],ws=({day:I,children:Y})=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:10,background:"#fff"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:8,fontSize:13},children:I}),Y]}),Rs=({children:I})=>v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:I}),Oi=st.isOpen?st.reserveOnly?{text:" (/)",tone:"warn"}:{text:"(/)",tone:"ok"}:{text:" (/)",tone:"danger"},Cs=({timeText:I,tone:Y})=>v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15,lineHeight:1,whiteSpace:"nowrap",letterSpacing:-.2},children:I}),v.jsx(jr,{tone:Y})]});return v.jsxs("div",{style:ni,children:[v.jsxs("div",{style:{...bi,padding:i?12:14,marginBottom:12},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:i?"stretch":"center",gap:10,flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsx("div",{style:{fontSize:i?18:20,fontWeight:900},children:""}),v.jsx("div",{style:{marginTop:6,fontSize:13,color:"#374151",lineHeight:1.65},children:Bn.map((I,Y)=>v.jsx("div",{style:{whiteSpace:"pre-wrap"},children:I},Y))})]}),c.length>0&&v.jsxs("div",{style:{width:i?"100%":"auto"},children:[v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900,marginBottom:6},children:" "}),v.jsx("select",{value:m,onChange:I=>ke(I.target.value),style:ca,children:c.map(I=>v.jsx("option",{value:I.id,children:I.name},I.id))})]})]}),v.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",gap:10,flexWrap:"wrap"},children:[v.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap",fontSize:12},children:[v.jsx(cn,{text:"",tone:"ok"}),v.jsx(cn,{text:"",tone:"warn"}),v.jsx(cn,{text:"",tone:"danger"})]}),v.jsx("div",{style:{border:"1px solid #e5e7eb",background:"#fff",borderRadius:999,padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.04)"},children:v.jsx(cn,{text:Oi.text,tone:Oi.tone})})]})]}),v.jsx("div",{style:Te,children:Ti.map(I=>{const Y=r===I;return v.jsx("button",{onClick:()=>e(I),style:Ue(Y),children:ir[I]},I)})}),r==="intensive"?v.jsxs("div",{style:{...bi,padding:i?12:14},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(261)"}),v.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[" 9  ",v.jsx("b",{children:"1 ~ 3"}),"  /    "]})]}),!i&&v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:qt?`: ${qt.toLocaleString()}`:""})]}),i?v.jsx("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:10},children:yt.map(I=>v.jsx(ws,{day:`${I}`,children:v.jsx(Rs,{children:ft.map(Y=>{const nt=Cn(I,Y),ot=kt[nt]||0,dt=Or(ot),gt=Ye(Ct,I,Y),bt=ot>=Rt&&!_t.some(le=>le.day===I&&le.time===Y);return v.jsx("button",{onClick:()=>{if(bt)return alert("  .");kr(I,Y)},disabled:bt,style:Pn(gt,bt),children:v.jsx(Cs,{timeText:ti(Y),tone:dt.tone})},`${I}-${Y}`)})})},I))}):v.jsx("div",{style:{marginTop:14,overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),v.jsx("tbody",{children:yt.map(I=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:I}),v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:v.jsx("div",{style:sr,children:ft.map(Y=>{const nt=Cn(I,Y),ot=kt[nt]||0,dt=Or(ot),gt=Ye(Ct,I,Y),bt=ot>=Rt&&!_t.some(le=>le.day===I&&le.time===Y);return v.jsx("button",{onClick:()=>{if(bt)return alert("  .");kr(I,Y)},disabled:bt,style:Ei(gt,bt),children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:16,whiteSpace:"nowrap"},children:Y}),v.jsx(cn,{text:dt.text,tone:dt.tone})]})},`${I}-${Y}`)})})})]},I))})]})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{fontWeight:900},children:[" :"," ",Ct.length?v.jsxs("span",{children:[Ct.map(I=>`${I.day} ${I.time}`).join(", ")," ",v.jsxs("span",{style:{color:"#6b7280",fontWeight:900},children:["(",Ct.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:vl,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),i&&qt&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[": ",qt.toLocaleString()]})]})]}):null,r==="high"?v.jsxs("div",{style:{...bi,padding:i?12:14},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:"///   ( 4)"}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:i?"repeat(2, 1fr)":"repeat(4, minmax(160px, 1fr))",gap:10},children:Mt.map(I=>{const Y=be[I]||0,nt=xs(Y),ot=Y>=jt&&!Qt.includes(I),dt=It.includes(I);return v.jsx("button",{onClick:()=>{if(ot)return alert(`${I} .`);Ni(I)},disabled:ot,style:Pn(dt,ot),children:i?v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsxs("div",{style:{fontWeight:900,fontSize:15,whiteSpace:"nowrap"},children:[I,""]}),v.jsx(jr,{tone:nt.tone})]}):v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[v.jsxs("div",{style:{fontWeight:900,fontSize:18},children:[I,""]}),v.jsx(cn,{text:nt.text,tone:nt.tone})]})},I)})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{fontWeight:900},children:[":"," ",It.length?v.jsxs("span",{children:[It.join(", ")," ",v.jsxs("span",{style:{color:"#6b7280"},children:["(",It.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:ha,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),wn&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[": ",wn.toLocaleString()]})]})]}):null,r==="advanced"?v.jsxs("div",{style:{...bi,padding:i?12:14},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),v.jsxs("div",{style:{fontSize:12,color:"#374151",lineHeight:1.6,marginBottom:12},children:[" : (13)  ",v.jsx("br",{})," : (24)  ",v.jsx("br",{}),"   ,   .",v.jsx("br",{}),"      .",v.jsx("br",{})," 5         ."]}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:" /   ."}),v.jsxs("div",{style:{display:"flex",gap:10,alignItems:"stretch",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsx("button",{onClick:()=>{Zn(!0),Vi(!0)},style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:tr?"#2563eb":"#fff",color:tr?"#fff":"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""}),v.jsx("button",{onClick:()=>{Zn(!1),Vi(!1)},style:{padding:"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""}),v.jsx("span",{style:{fontSize:12,fontWeight:900,color:er?"#166534":"#6b7280",background:er?"#dcfce7":"#f3f4f6",border:"1px solid #e5e7eb",padding:"10px 12px",borderRadius:12,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:er?" : ":" : "})]})]}):null,r==="elementary"||r==="middle"?v.jsxs("div",{style:{...bi,padding:i?12:14},children:[i?v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:Jn&&Object.entries(Jn).map(([I,Y])=>v.jsx(ws,{day:`${I}`,children:v.jsx(Rs,{children:Y.map(nt=>{const ot=Cn(I,nt),dt=O[ot]||0,gt=Vr(dt),bt=Ye(S,I,nt),le=dt>=6,xe=(W[ot]||0)>=10,Re=st.isOpen?(st.reserveOnly||le)&&xe:!0;return v.jsx("button",{onClick:()=>{if(!st.isOpen)return alert("  .");r==="elementary"?Si(I,nt):ii(I,nt)},disabled:Re,style:Pn(bt,Re),children:v.jsx(Cs,{timeText:ti(nt),tone:gt.tone})},`${I}-${nt}`)})})},I))}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),v.jsx("tbody",{children:Jn&&Object.entries(Jn).map(([I,Y])=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:I}),v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:v.jsx("div",{style:sr,children:Y.map(nt=>{const ot=Cn(I,nt),dt=O[ot]||0,gt=Vr(dt),bt=Ye(S,I,nt),le=dt>=6,xe=(W[ot]||0)>=10,Re=st.isOpen?(st.reserveOnly||le)&&xe:!0;return v.jsx("button",{onClick:()=>{if(!st.isOpen)return alert("  .");r==="elementary"?Si(I,nt):ii(I,nt)},disabled:Re,style:Ei(bt,Re),children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,whiteSpace:"nowrap"},children:nt}),v.jsx(cn,{text:gt.text,tone:gt.tone})]})},`${I}-${nt}`)})})})]},I))})]})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{color:"#374151",fontWeight:900},children:[":"," ",S.length?v.jsxs("span",{children:[S.map(I=>`${I.day} ${I.time}`).join(", ")," ",v.jsxs("span",{style:{color:"#6b7280"},children:["(",S.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:Lr,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""})]}),v.jsxs("div",{style:{marginTop:14},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:8},children:" ( 2)"}),S.length===0?v.jsx("div",{style:{color:"#6b7280"},children:""}):v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:S.map(({day:I,time:Y,status:nt})=>v.jsxs("span",{style:{padding:"8px 12px",borderRadius:999,border:`1px solid ${nt==="reserve"?"#9ca3af":"#2563eb"}`,background:nt==="reserve"?"#f3f4f6":"#eef5ff",display:"inline-flex",alignItems:"center",gap:10,fontWeight:900,fontSize:13},children:[I," ",ti(Y)," ",nt==="reserve"?"()":"",v.jsx("button",{onClick:()=>ri(I,Y),title:"",style:{border:"none",background:"transparent",cursor:"pointer",fontWeight:900,color:nt==="reserve"?"#6b7280":"#2563eb"},children:""})]},`ap-${I}-${Y}`))})]}),r==="middle"?v.jsx("div",{style:{marginTop:14},children:v.jsxs("div",{style:{padding:12,borderRadius:14,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:14,marginBottom:6},children:"(/)   "}),v.jsxs("div",{style:{fontSize:12,color:"#6b7280",lineHeight:1.6,marginBottom:12},children:[v.jsx("span",{style:{color:"#16a34a",fontWeight:600},children:"       "}),v.jsx("br",{}),v.jsx("span",{style:{color:"#e11d48",fontWeight:700},children:"   /      "}),v.jsx("br",{}),v.jsx("span",{style:{color:"#2563eb",fontWeight:600},children:" :"})," ",v.jsx("b",{style:{color:"#1f2937"},children:"   /    /   "})]}),v.jsxs("div",{style:{marginBottom:10},children:[v.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:900},children:" "}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8},children:M.map(I=>{const Y=(N==null?void 0:N.day)===I;return v.jsx("button",{onClick:()=>si(I),style:{padding:"10px 8px",borderRadius:12,border:Y?"1px solid #2563eb":"1px solid #e5e7eb",background:Y?"#eef5ff":"#ffffff",cursor:"pointer",fontWeight:900,fontSize:13},children:I},I)})})]}),v.jsxs("div",{style:{marginBottom:10},children:[v.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:900},children:" "}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"1fr 1fr",gap:8},children:R.map(I=>{const Y=(N==null?void 0:N.blockId)===I.id,nt=(N==null?void 0:N.day)&&Dn(N.day,I.id,!0);return v.jsx("button",{onClick:()=>hn(I.id),disabled:nt,style:{padding:"12px 12px",borderRadius:12,border:Y?"1px solid #2563eb":"1px solid #e5e7eb",background:Y?"#eef5ff":"#ffffff",cursor:nt?"not-allowed":"pointer",opacity:nt?.6:1,fontWeight:900,textAlign:"left"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsx("span",{children:I.label}),v.jsx("span",{style:{fontSize:12,fontWeight:900,color:nt?"#ef4444":"#6b7280"},children:nt?"":""})]})},I.id)})})]}),v.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[v.jsx("button",{onClick:Ne,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"white",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),v.jsx("button",{onClick:As,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "})]}),v.jsxs("div",{style:{marginTop:12,padding:12,borderRadius:12,border:"1px solid #e5e7eb",background:"#fff"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:6},children:" "}),Dt!=null&&Dt.regular?v.jsxs("div",{style:{color:"#111827",fontWeight:900},children:[Dt.regular.day," ",Dt.regular.blockId==="A"?"A(5~7)":"B(7~9)"]}):v.jsx("div",{style:{color:"#6b7280"},children:"  ."})]})]})}):null,v.jsxs("div",{style:{marginTop:14,padding:12,border:"1px solid #e5e7eb",borderRadius:12,background:"#f9fafb"},children:[v.jsxs("div",{style:{fontWeight:900,marginBottom:8},children:["  ",p?`: ${p}`:""]}),p?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{marginBottom:4},children:[v.jsx("b",{children:":"})," ",F.length?F.map(I=>{const Y=I.group==="elementary"?"":"",nt=I.status==="reserve"||(I==null?void 0:I.label)==="()"?" ()":"";return`${Y} ${I.day} ${ti(I.time)}${nt}`}).join(", "):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),P&&v.jsxs("div",{style:{marginTop:6,fontSize:12,color:"#6b7280"},children:[": ",P.toLocaleString()]})]}):v.jsx("div",{style:{color:"#6b7280"},children:"   "})]})]}):null]})}function W2(){const r=(localStorage.getItem("parentPhone")||"").trim(),[e,i]=C.useState(()=>(localStorage.getItem("studentId")||"").trim()),[a,o]=C.useState(()=>(localStorage.getItem("studentName")||"").trim()),[c,f]=C.useState([]),[m,y]=C.useState(()=>(localStorage.getItem("studentId")||"").trim()),[p,E]=C.useState(()=>new Date().getFullYear()),[S,A]=C.useState(()=>new Date().getMonth()+1),[O,j]=C.useState([]),[W,B]=C.useState(null),F=C.useMemo(()=>{const w=new Date;return`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`},[]),H=C.useMemo(()=>`${p}-${String(S).padStart(2,"0")}`,[p,S]);C.useEffect(()=>{if(!r)return;const w=us(Ie(St,"students"),cs("parentPhone","==",r)),N=Oe(w,k=>{var Dt;const z=k.docs.map(Ot=>{const tt=Ot.data()||{},pt=String(tt.name||tt.studentName||tt.student||"").trim();return{id:Ot.id,name:pt||"( )"}});z.sort((Ot,tt)=>Ot.name.localeCompare(tt.name,"ko")),f(z);const D=z.some(Ot=>Ot.id===m)?m:((Dt=z[0])==null?void 0:Dt.id)||"";y(D),!z.some(Ot=>Ot.id===e)&&z.length>0&&P(z[0].id,z[0].name)},k=>console.error("students snapshot error:",k));return()=>N()},[r]);const P=(w,N)=>{i(w),o(N),localStorage.setItem("studentId",w),localStorage.setItem("studentName",N),B(null)};C.useEffect(()=>{if(!e)return;const w=us(Ie(St,"monthly_payments"),cs("studentId","==",e)),N=Oe(w,k=>{const z=k.docs.map(D=>({id:D.id,...D.data()}));z.sort((D,Dt)=>String(Dt.month||"").localeCompare(String(D.month||""))),j(z)},k=>console.error("monthly_payments snapshot error:",k));return()=>N()},[e]);const Z=C.useMemo(()=>O.find(w=>String(w.month||"")===F)||null,[O,F]),st=C.useMemo(()=>O.filter(w=>String(w.month||"")===H),[O,H]),mt=()=>{const w=new Date(p,S-2,1);E(w.getFullYear()),A(w.getMonth()+1)},M=()=>{const w=new Date(p,S,1);E(w.getFullYear()),A(w.getMonth()+1)},R=!!(e&&a);return v.jsxs("div",{style:{padding:16,maxWidth:820,margin:"0 auto"},children:[v.jsxs("h1",{style:{fontSize:22,fontWeight:900,marginBottom:6},children:["     ",R?` ${a}`:""]}),v.jsxs("div",{style:{fontSize:13,color:"#6b7280",lineHeight:1.6},children:["2026 3     ",v.jsx("br",{}),"      ."]}),v.jsx("div",{style:J2,children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:13,color:"#374151"},children:" "}),v.jsx("select",{value:m,onChange:w=>y(w.target.value),style:tR,children:c.length===0?v.jsx("option",{value:"",children:"(  )"}):c.map(w=>v.jsx("option",{value:w.id,children:w.name},w.id))}),v.jsx("button",{style:eR,onClick:()=>{const w=c.find(N=>N.id===m);w&&P(w.id,w.name)},disabled:!m,children:" "}),v.jsx("button",{style:nR,onClick:()=>window.location.hash="#/payment-history",children:" ()"}),R&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:[" : ",a]})]})}),R?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{marginTop:14,marginBottom:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[v.jsx("button",{onClick:mt,style:R0,children:" "}),v.jsxs("div",{style:{fontWeight:900,fontSize:16},children:[p," ",S,"",v.jsxs("span",{style:{marginLeft:10,fontSize:12,color:"#6b7280",fontWeight:700},children:["(: ",nl(F),")"]})]}),v.jsx("button",{onClick:M,style:R0,children:" "})]}),Z?v.jsx(Y2,{data:Z}):v.jsx(K2,{nowKey:F}),v.jsx("div",{style:{height:12}}),v.jsx("div",{style:{borderTop:"1px solid #e5e7eb"}}),v.jsx("div",{style:{height:10}}),v.jsxs("div",{style:{fontWeight:900,fontSize:15,marginBottom:8},children:["    ( : ",nl(H),")"]}),st.length===0?v.jsxs("div",{style:iR,children:[nl(H),"    ."]}):v.jsx("div",{style:{display:"grid",gap:10},children:st.map(w=>v.jsx(X2,{row:w,open:W===w.id,onToggle:()=>B(W===w.id?null:w.id)},w.id))})]}):v.jsxs("div",{style:{marginTop:12,color:"#6b7280",fontSize:13},children:["   ",v.jsx("b",{children:" "}),"  ."]})]})}function Y2({data:r}){const e=String(r.month||""),i=r.summary||{},a=i.baseTotal,o=i.discountTotal,c=i.finalTotal,f=String(i.status||"pending"),m=String(i.memo||""),y=j1(r.updatedAt),p=f==="paid"||f==="",E=f==="partial",S=p?"#ecfdf3":E?"#eef2ff":"#fffbeb",A=p?"#4ade80":E?"#a5b4fc":"#facc15",O=p?" ":E?" ":"   ";return v.jsxs("div",{style:{width:"100%",marginTop:12,padding:12,borderRadius:12,border:`1px solid ${A}`,background:S},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:"    "}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:8},children:[v.jsx(O1,{text:O,isPaid:p,isPartial:E}),e&&v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:nl(e)})]}),v.jsxs("div",{style:{marginTop:10,fontSize:13,lineHeight:1.55},children:[a!=null&&v.jsxs("div",{children:[" : ",Di(a)]}),o!=null&&v.jsxs("div",{style:{color:"#ef4444"},children:[" : -",Di(o)]}),c!=null&&v.jsxs("div",{style:{marginTop:4,fontWeight:900,fontSize:14},children:["    : ",Di(c)]})]}),o!=null&&Number(o)>0&&v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:" /        2   ."}),m&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",m]}),y&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",y]}),v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:"          ."})]})}function K2({nowKey:r}){return v.jsxs("div",{style:{width:"100%",marginTop:12,padding:12,borderRadius:12,border:"1px solid #bfdbfe",background:"#eff6ff"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:"    "}),v.jsxs("div",{style:{marginTop:8,fontSize:13,lineHeight:1.55},children:[nl(r),"      ."]}),v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:"        ."})]})}function X2({row:r,open:e,onToggle:i}){const a=String(r.month||""),o=r.summary||{},c=o.baseTotal,f=o.discountTotal,m=o.finalTotal,y=String(o.status||"pending"),p=String(o.memo||""),E=j1(r.updatedAt),S=r.partials,A=Array.isArray(S)?S:[],O=y==="paid"||y==="",j=y==="partial";return v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,background:"#fff"},children:[v.jsxs("button",{onClick:i,style:{width:"100%",textAlign:"left",border:"none",background:"transparent",padding:"12px 12px",cursor:"pointer"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[v.jsx("div",{style:{fontWeight:900,fontSize:13,flex:1},children:a?nl(a):" "}),v.jsx(O1,{text:O?" ":j?" ":"",isPaid:O,isPartial:j,small:!0})]}),v.jsxs("div",{style:{marginTop:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("div",{children:f!=null&&Number(f)>0&&v.jsxs("span",{style:{fontSize:11,color:"#ef4444",fontWeight:800},children:[": -",Di(f)]})}),v.jsx("div",{style:{fontSize:13,fontWeight:900},children:m!=null?Di(m):"-"})]}),v.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6b7280",fontWeight:800},children:e?" ":"  "})]}),e&&v.jsxs("div",{style:{padding:"0 12px 12px 12px"},children:[A.length>0&&v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:12,fontWeight:900,marginBottom:8},children:"   "}),v.jsx("div",{style:{display:"grid",gap:8},children:A.map((W,B)=>v.jsx(Z2,{data:W},B))})]}),p&&v.jsxs("div",{style:{marginTop:10,fontSize:12,color:"#6b7280"},children:[" : ",p]}),E&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",E]}),c!=null&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[" : ",Di(c)]})]})]})}function Z2({data:r}){const e=String(r.classType||""),i=r.baseAmount,a=r.discountAmount,o=r.finalAmount,c=r.discountPerUse,f=r.maxDiscountCountPerMonth,m=String(r.status||"pending"),y=String(r.memo||""),p=r.discountLogs,E=Array.isArray(p)?p:[],S=r.discountCount??E.length,A=m==="paid"||m==="";return v.jsxs("div",{style:{background:"#f9fafb",borderRadius:10,padding:10},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[v.jsx("div",{style:{fontWeight:900,fontSize:12,flex:1},children:e||"  "}),A&&v.jsx("div",{style:{fontSize:11,color:"#166534",fontWeight:900},children:" "})]}),v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#111827",display:"flex",gap:10,flexWrap:"wrap"},children:[i!=null&&v.jsxs("span",{children:[": ",Di(i)]}),a!=null&&Number(a)>0&&v.jsxs("span",{style:{color:"#ef4444"},children:[": -",Di(a)]}),o!=null&&v.jsxs("span",{style:{fontWeight:900},children:[": ",Di(o)]})]}),c!=null&&Number(c)>0&&v.jsxs("div",{style:{marginTop:6,fontSize:10,color:"#6b7280"},children:["1 : ",Di(c)," /  ",S??0,"",f!=null?` (  ${f})`:""]}),E.length>0&&v.jsxs("div",{style:{marginTop:8},children:[v.jsx("div",{style:{fontSize:11,fontWeight:900,marginBottom:6},children:"  :"}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:E.map((O,j)=>{const W=String(O.date||""),B=String(O.reasonCategory||""),F=O.amount;return v.jsx("span",{style:{fontSize:10,color:"#6b7280",border:"1px solid #e5e7eb",background:"#fff",padding:"4px 8px",borderRadius:999},children:`${W||"-"}  ${B}  -${Di(F)}`},j)})})]}),y&&v.jsxs("div",{style:{marginTop:6,fontSize:10,color:"#6b7280"},children:[": ",y]})]})}function O1({text:r,isPaid:e,isPartial:i,small:a=!1}){const o=e?"#dcfce7":i?"#e0e7ff":"#ffedd5",c=e?"#22c55e":i?"#6366f1":"#fb923c",f=e?"#166534":i?"#3730a3":"#9a3412";return v.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:a?"3px 7px":"4px 10px",borderRadius:999,border:`1px solid ${c}`,background:o,color:f,fontWeight:900,fontSize:a?10:11,whiteSpace:"nowrap"},children:r})}function Di(r){if(r==null)return"-";let e=0;return typeof r=="number"?e=r:e=Number(String(r).replaceAll(",",""))||0,`${Math.trunc(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function j1(r){if(!r)return null;const e=typeof(r==null?void 0:r.toDate)=="function"?r.toDate():new Date(r);if(isNaN(e.getTime()))return null;const i=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),c=String(e.getHours()).padStart(2,"0"),f=String(e.getMinutes()).padStart(2,"0");return`${i}-${a}-${o} ${c}:${f}`}function nl(r){try{const[e,i]=String(r).split("-"),a=Number(e),o=Number(i);if(a>0&&o>0)return`${a} ${o}`}catch{}return String(r)}const J2={marginTop:14,padding:12,borderRadius:16,border:"1px solid #e5e7eb",background:"#fff"},tR={minWidth:180,height:40,borderRadius:12,border:"1px solid #d1d5db",padding:"0 12px",fontWeight:900,outline:"none"},R0={padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:12,background:"#fff",cursor:"pointer",fontWeight:900},eR={height:40,padding:"0 14px",borderRadius:12,border:"none",background:"#111827",color:"#fff",cursor:"pointer",fontWeight:900,fontSize:13,whiteSpace:"nowrap"},nR={height:40,padding:"0 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:900,fontSize:13,whiteSpace:"nowrap"},iR={color:"#6b7280",fontSize:13,lineHeight:1.6,padding:12,border:"1px solid #e5e7eb",borderRadius:12};function rR(){const[r,e]=C.useState(""),[i,a]=C.useState(""),[o,c]=C.useState(""),[f,m]=C.useState(!0),y=Fc(),p=localStorage.getItem("parentPhone")||"";C.useEffect(()=>{(async()=>{if(!p){y("/login");return}m(!1)})()},[p,y]);const E=async()=>{if(c(""),!p){c(" .");return}if(r.length<8){c("  8   .");return}if(r!==i){c("   .");return}try{const S=Yt(St,"parents",p),A=await vn(S);if(!A.exists()){c("  .   .");return}await N1(S,{password:r,mustChangePassword:!1,updatedAt:Ln()}),localStorage.setItem("mustChangePassword","0");const j=(A.data()||{}).children||[];j.length<=1?(j[0]&&localStorage.setItem("studentId",j[0]),y("/attendance")):y("/select-child")}catch(S){console.error(S),c("    .")}};return f?null:v.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:900,marginBottom:10},children:" "}),v.jsxs("div",{style:{fontSize:13,color:"#6b7280",lineHeight:1.6},children:["  ",v.jsx("b",{children:"     "}),".",v.jsx("br",{}),"( 8  )"]}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:14},children:" "}),v.jsx("input",{value:r,onChange:S=>e(S.target.value),placeholder:"8 ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:10},children:"  "}),v.jsx("input",{value:i,onChange:S=>a(S.target.value),placeholder:"   ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("button",{onClick:E,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #16a34a",background:"#16a34a",color:"#fff",cursor:"pointer"},children:" "}),o&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:700},children:o})]})}class sR extends cE.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,i){console.error("ErrorBoundary caught:",e,i)}render(){return this.state.hasError?v.jsx("div",{style:{padding:16},children:" . (F5),       ."}):this.props.children}}const C0=r=>{if(!r)return null;if(typeof r.toDate=="function")return r.toDate();const e=new Date(r);return isNaN(e)?null:e};function aR(){return v.jsx(MS,{children:v.jsx(sR,{children:v.jsx(lR,{})})})}function lR(){const r=Nr(),[e,i]=C.useState(!!localStorage.getItem("parentPhone")),[a,o]=C.useState(localStorage.getItem("mustChangePassword")==="1"),[c,f]=C.useState(!1);C.useEffect(()=>{const p=()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1")};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[]),C.useEffect(()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1")},[r]),C.useEffect(()=>{const p=localStorage.getItem("studentId");if(!p){f(!1);return}(async()=>{const S=new Date,A=new Date;A.setDate(S.getDate()-3);const O=await ps(Ie(St,"comments")),j=await ps(Ie(St,"books")),W=O.docs.some(F=>{const H=F.data();return H.studentId===p&&(C0(H.createdAt||H.completedDate)??new Date(0))>=A}),B=j.docs.some(F=>{const H=F.data();return H.studentId===p&&(C0(H.createdAt||H.completedDate)??new Date(0))>=A});f(W||B)})()},[r]);const m=()=>{localStorage.clear(),i(!1),o(!1),window.location.hash="#/login"},y=p=>e?a?v.jsx(ea,{to:"change-password",replace:!0}):p:v.jsx(ea,{to:"login",replace:!0});return v.jsxs("div",{className:"app-shell page",children:[e&&!a&&v.jsx("nav",{className:"nav",children:v.jsxs("div",{className:"nav-links",style:{justifyContent:"center"},children:[["/attendance","/payment","/notices","/myclass","/enroll"].map(p=>v.jsx(G0,{to:p,style:({isActive:E})=>({margin:"0 0",padding:"6px 12px",borderRadius:6,textDecoration:"none",fontWeight:E?"bold":"normal",color:E?"#fff":"#333",backgroundColor:E?"#007bff":"#f5f5f7",position:"relative",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap"}),children:(()=>{const E={"/attendance":"","/payment":"","/notices":"","/enroll":""};return p==="/myclass"?v.jsxs(v.Fragment,{children:["",c&&v.jsx("span",{className:"pulse wiggle",style:{position:"absolute",top:-8,right:-12,backgroundColor:"red",color:"white",borderRadius:"12px",padding:"2px 6px",fontSize:"10px",fontWeight:"bold",fontFamily:"'Segoe UI','Apple SD Gothic Neo',sans-serif"},children:" "})]}):E[p]})()},p)),v.jsx("button",{onClick:()=>{window.location.hash="#/change-password"},style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:m,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:""})]})}),v.jsxs(lS,{children:[v.jsx(Ci,{index:!0,element:e?a?v.jsx(ea,{to:"change-password",replace:!0}):v.jsx(ea,{to:"notices",replace:!0}):v.jsx(ea,{to:"login",replace:!0})}),v.jsx(Ci,{path:"login",element:v.jsx(O2,{})}),v.jsx(Ci,{path:"change-password",element:e?v.jsx(rR,{}):v.jsx(ea,{to:"login",replace:!0})}),v.jsx(Ci,{path:"attendance",element:y(v.jsx(j2,{}))}),v.jsx(Ci,{path:"payment",element:y(v.jsx(W2,{}))}),v.jsx(Ci,{path:"payment-history",element:y(v.jsx(k2,{}))}),v.jsx(Ci,{path:"notices",element:y(v.jsx(H2,{}))}),v.jsx(Ci,{path:"myclass",element:y(v.jsx(Q2,{}))}),v.jsx(Ci,{path:"enroll",element:y(v.jsx($2,{}))}),v.jsx(Ci,{path:"*",element:v.jsx(ea,{to:"/",replace:!0})})]})]})}const oR="modulepreload",uR=function(r){return"/ysmath/"+r},D0={},cR=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let f=function(p){return Promise.all(p.map(E=>Promise.resolve(E).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=f(i.map(p=>{if(p=uR(p),p in D0)return;D0[p]=!0;const E=p.endsWith(".css"),S=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const A=document.createElement("link");if(A.rel=E?"stylesheet":oR,E||(A.as="script"),A.crossOrigin="",A.href=p,y&&A.setAttribute("nonce",y),document.head.appendChild(A),E)return new Promise((O,j)=>{A.addEventListener("load",O),A.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};function hR(r={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:a,onRegistered:o,onRegisteredSW:c,onRegisterError:f}=r;let m,y;const p=async(S=!0)=>{await y};async function E(){if("serviceWorker"in navigator){if(m=await cR(async()=>{const{Workbox:S}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:S}},[]).then(({Workbox:S})=>new S("/ysmath/sw.js",{scope:"/ysmath/",type:"classic"})).catch(S=>{f==null||f(S)}),!m)return;m.addEventListener("activated",S=>{(S.isUpdate||S.isExternal)&&window.location.reload()}),m.addEventListener("installed",S=>{S.isUpdate||a==null||a()}),m.register({immediate:e}).then(S=>{c?c("/ysmath/sw.js",S):o==null||o(S)}).catch(S=>{f==null||f(S)})}}return y=E(),p}hR({immediate:!0});yE.createRoot(document.getElementById("root")).render(v.jsx(C.StrictMode,{children:v.jsx(aR,{})}));
