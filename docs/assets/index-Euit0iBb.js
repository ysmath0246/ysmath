(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function ab(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ld={exports:{}},po={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function lb(){if(ev)return po;ev=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:a,key:f,ref:o!==void 0?o:null,props:c}}return po.Fragment=e,po.jsx=i,po.jsxs=i,po}var nv;function ob(){return nv||(nv=1,ld.exports=lb()),ld.exports}var v=ob(),od={exports:{}},Yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function ub(){if(iv)return Yt;iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.iterator;function A(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,G={};function B(k,at,gt){this.props=k,this.context=at,this.refs=G,this.updater=gt||O}B.prototype.isReactComponent={},B.prototype.setState=function(k,at){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,at,"setState")},B.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function H(){}H.prototype=B.prototype;function Y(k,at,gt){this.props=k,this.context=at,this.refs=G,this.updater=gt||O}var P=Y.prototype=new H;P.constructor=Y,N(P,B.prototype),P.isPureReactComponent=!0;var lt=Array.isArray,dt={H:null,A:null,T:null,S:null,V:null},St=Object.prototype.hasOwnProperty;function j(k,at,gt,ft,Rt,Ct){return gt=Ct.ref,{$$typeof:r,type:k,key:at,ref:gt!==void 0?gt:null,props:Ct}}function R(k,at){return j(k.type,at,void 0,void 0,void 0,k.props)}function w(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function M(k){var at={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(gt){return at[gt]})}var L=/\/+/g;function U(k,at){return typeof k=="object"&&k!==null&&k.key!=null?M(""+k.key):at.toString(36)}function I(){}function It(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(I,I):(k.status="pending",k.then(function(at){k.status==="pending"&&(k.status="fulfilled",k.value=at)},function(at){k.status==="pending"&&(k.status="rejected",k.reason=at)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Ot(k,at,gt,ft,Rt){var Ct=typeof k;(Ct==="undefined"||Ct==="boolean")&&(k=null);var X=!1;if(k===null)X=!0;else switch(Ct){case"bigint":case"string":case"number":X=!0;break;case"object":switch(k.$$typeof){case r:case e:X=!0;break;case b:return X=k._init,Ot(X(k._payload),at,gt,ft,Rt)}}if(X)return Rt=Rt(k),X=ft===""?"."+U(k,0):ft,lt(Rt)?(gt="",X!=null&&(gt=X.replace(L,"$&/")+"/"),Ot(Rt,at,gt,"",function(Lt){return Lt})):Rt!=null&&(w(Rt)&&(Rt=R(Rt,gt+(Rt.key==null||k&&k.key===Rt.key?"":(""+Rt.key).replace(L,"$&/")+"/")+X)),at.push(Rt)),1;X=0;var vt=ft===""?".":ft+":";if(lt(k))for(var Et=0;Et<k.length;Et++)ft=k[Et],Ct=vt+U(ft,Et),X+=Ot(ft,at,gt,Ct,Rt);else if(Et=A(k),typeof Et=="function")for(k=Et.call(k),Et=0;!(ft=k.next()).done;)ft=ft.value,Ct=vt+U(ft,Et++),X+=Ot(ft,at,gt,Ct,Rt);else if(Ct==="object"){if(typeof k.then=="function")return Ot(It(k),at,gt,ft,Rt);throw at=String(k),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return X}function J(k,at,gt){if(k==null)return k;var ft=[],Rt=0;return Ot(k,ft,"","",function(Ct){return at.call(gt,Ct,Rt++)}),ft}function mt(k){if(k._status===-1){var at=k._result;at=at(),at.then(function(gt){(k._status===0||k._status===-1)&&(k._status=1,k._result=gt)},function(gt){(k._status===0||k._status===-1)&&(k._status=2,k._result=gt)}),k._status===-1&&(k._status=0,k._result=at)}if(k._status===1)return k._result.default;throw k._result}var At=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ft(){}return Yt.Children={map:J,forEach:function(k,at,gt){J(k,function(){at.apply(this,arguments)},gt)},count:function(k){var at=0;return J(k,function(){at++}),at},toArray:function(k){return J(k,function(at){return at})||[]},only:function(k){if(!w(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Yt.Component=B,Yt.Fragment=i,Yt.Profiler=o,Yt.PureComponent=Y,Yt.StrictMode=a,Yt.Suspense=g,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dt,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return dt.H.useMemoCache(k)}},Yt.cache=function(k){return function(){return k.apply(null,arguments)}},Yt.cloneElement=function(k,at,gt){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ft=N({},k.props),Rt=k.key,Ct=void 0;if(at!=null)for(X in at.ref!==void 0&&(Ct=void 0),at.key!==void 0&&(Rt=""+at.key),at)!St.call(at,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&at.ref===void 0||(ft[X]=at[X]);var X=arguments.length-2;if(X===1)ft.children=gt;else if(1<X){for(var vt=Array(X),Et=0;Et<X;Et++)vt[Et]=arguments[Et+2];ft.children=vt}return j(k.type,Rt,void 0,void 0,Ct,ft)},Yt.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},Yt.createElement=function(k,at,gt){var ft,Rt={},Ct=null;if(at!=null)for(ft in at.key!==void 0&&(Ct=""+at.key),at)St.call(at,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Rt[ft]=at[ft]);var X=arguments.length-2;if(X===1)Rt.children=gt;else if(1<X){for(var vt=Array(X),Et=0;Et<X;Et++)vt[Et]=arguments[Et+2];Rt.children=vt}if(k&&k.defaultProps)for(ft in X=k.defaultProps,X)Rt[ft]===void 0&&(Rt[ft]=X[ft]);return j(k,Ct,void 0,void 0,null,Rt)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(k){return{$$typeof:m,render:k}},Yt.isValidElement=w,Yt.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:mt}},Yt.memo=function(k,at){return{$$typeof:p,type:k,compare:at===void 0?null:at}},Yt.startTransition=function(k){var at=dt.T,gt={};dt.T=gt;try{var ft=k(),Rt=dt.S;Rt!==null&&Rt(gt,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(Ft,At)}catch(Ct){At(Ct)}finally{dt.T=at}},Yt.unstable_useCacheRefresh=function(){return dt.H.useCacheRefresh()},Yt.use=function(k){return dt.H.use(k)},Yt.useActionState=function(k,at,gt){return dt.H.useActionState(k,at,gt)},Yt.useCallback=function(k,at){return dt.H.useCallback(k,at)},Yt.useContext=function(k){return dt.H.useContext(k)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(k,at){return dt.H.useDeferredValue(k,at)},Yt.useEffect=function(k,at,gt){var ft=dt.H;if(typeof gt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ft.useEffect(k,at)},Yt.useId=function(){return dt.H.useId()},Yt.useImperativeHandle=function(k,at,gt){return dt.H.useImperativeHandle(k,at,gt)},Yt.useInsertionEffect=function(k,at){return dt.H.useInsertionEffect(k,at)},Yt.useLayoutEffect=function(k,at){return dt.H.useLayoutEffect(k,at)},Yt.useMemo=function(k,at){return dt.H.useMemo(k,at)},Yt.useOptimistic=function(k,at){return dt.H.useOptimistic(k,at)},Yt.useReducer=function(k,at,gt){return dt.H.useReducer(k,at,gt)},Yt.useRef=function(k){return dt.H.useRef(k)},Yt.useState=function(k){return dt.H.useState(k)},Yt.useSyncExternalStore=function(k,at,gt){return dt.H.useSyncExternalStore(k,at,gt)},Yt.useTransition=function(){return dt.H.useTransition()},Yt.version="19.1.0",Yt}var rv;function Kd(){return rv||(rv=1,od.exports=ub()),od.exports}var C=Kd();const cb=ab(C);var ud={exports:{}},go={},cd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function hb(){return sv||(sv=1,function(r){function e(J,mt){var At=J.length;J.push(mt);t:for(;0<At;){var Ft=At-1>>>1,k=J[Ft];if(0<o(k,mt))J[Ft]=mt,J[At]=k,At=Ft;else break t}}function i(J){return J.length===0?null:J[0]}function a(J){if(J.length===0)return null;var mt=J[0],At=J.pop();if(At!==mt){J[0]=At;t:for(var Ft=0,k=J.length,at=k>>>1;Ft<at;){var gt=2*(Ft+1)-1,ft=J[gt],Rt=gt+1,Ct=J[Rt];if(0>o(ft,At))Rt<k&&0>o(Ct,ft)?(J[Ft]=Ct,J[Rt]=At,Ft=Rt):(J[Ft]=ft,J[gt]=At,Ft=gt);else if(Rt<k&&0>o(Ct,At))J[Ft]=Ct,J[Rt]=At,Ft=Rt;else break t}}return mt}function o(J,mt){var At=J.sortIndex-mt.sortIndex;return At!==0?At:J.id-mt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],p=[],b=1,S=null,A=3,O=!1,N=!1,G=!1,B=!1,H=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function lt(J){for(var mt=i(p);mt!==null;){if(mt.callback===null)a(p);else if(mt.startTime<=J)a(p),mt.sortIndex=mt.expirationTime,e(g,mt);else break;mt=i(p)}}function dt(J){if(G=!1,lt(J),!N)if(i(g)!==null)N=!0,St||(St=!0,U());else{var mt=i(p);mt!==null&&Ot(dt,mt.startTime-J)}}var St=!1,j=-1,R=5,w=-1;function M(){return B?!0:!(r.unstable_now()-w<R)}function L(){if(B=!1,St){var J=r.unstable_now();w=J;var mt=!0;try{t:{N=!1,G&&(G=!1,Y(j),j=-1),O=!0;var At=A;try{e:{for(lt(J),S=i(g);S!==null&&!(S.expirationTime>J&&M());){var Ft=S.callback;if(typeof Ft=="function"){S.callback=null,A=S.priorityLevel;var k=Ft(S.expirationTime<=J);if(J=r.unstable_now(),typeof k=="function"){S.callback=k,lt(J),mt=!0;break e}S===i(g)&&a(g),lt(J)}else a(g);S=i(g)}if(S!==null)mt=!0;else{var at=i(p);at!==null&&Ot(dt,at.startTime-J),mt=!1}}break t}finally{S=null,A=At,O=!1}mt=void 0}}finally{mt?U():St=!1}}}var U;if(typeof P=="function")U=function(){P(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,It=I.port2;I.port1.onmessage=L,U=function(){It.postMessage(null)}}else U=function(){H(L,0)};function Ot(J,mt){j=H(function(){J(r.unstable_now())},mt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(J){switch(A){case 1:case 2:case 3:var mt=3;break;default:mt=A}var At=A;A=mt;try{return J()}finally{A=At}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(J,mt){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var At=A;A=J;try{return mt()}finally{A=At}},r.unstable_scheduleCallback=function(J,mt,At){var Ft=r.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?Ft+At:Ft):At=Ft,J){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=At+k,J={id:b++,callback:mt,priorityLevel:J,startTime:At,expirationTime:k,sortIndex:-1},At>Ft?(J.sortIndex=At,e(p,J),i(g)===null&&J===i(p)&&(G?(Y(j),j=-1):G=!0,Ot(dt,At-Ft))):(J.sortIndex=k,e(g,J),N||O||(N=!0,St||(St=!0,U()))),J},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(J){var mt=A;return function(){var At=A;A=mt;try{return J.apply(this,arguments)}finally{A=At}}}}(hd)),hd}var av;function fb(){return av||(av=1,cd.exports=hb()),cd.exports}var fd={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function db(){if(lv)return Sn;lv=1;var r=Kd();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,p,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:p,implementation:b}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Sn.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,b)},Sn.flushSync=function(g){var p=f.T,b=a.p;try{if(f.T=null,a.p=2,g)return g()}finally{f.T=p,a.p=b,a.d.f()}},Sn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(g,p))},Sn.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Sn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,S=m(b,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?a.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:O}):b==="script"&&a.d.X(g,{crossOrigin:S,integrity:A,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Sn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);a.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(g)},Sn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,S=m(b,p.crossOrigin);a.d.L(g,b,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Sn.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);a.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(g)},Sn.requestFormReset=function(g){a.d.r(g)},Sn.unstable_batchedUpdates=function(g,p){return g(p)},Sn.useFormState=function(g,p,b){return f.H.useFormState(g,p,b)},Sn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Sn.version="19.1.0",Sn}var ov;function mb(){if(ov)return fd.exports;ov=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fd.exports=db(),fd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function pb(){if(uv)return go;uv=1;var r=fb(),e=Kd(),i=mb();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(a(188))}function g(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,l=n;;){var h=s.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){s=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===s)return m(h),t;if(d===l)return m(h),n;d=d.sibling}throw Error(a(188))}if(s.return!==l.return)s=h,l=d;else{for(var E=!1,T=h.child;T;){if(T===s){E=!0,s=h,l=d;break}if(T===l){E=!0,l=h,s=d;break}T=T.sibling}if(!E){for(T=d.child;T;){if(T===s){E=!0,s=d,l=h;break}if(T===l){E=!0,l=d,s=h;break}T=T.sibling}if(!E)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function p(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=p(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),P=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),St=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function It(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case N:return"Fragment";case B:return"Profiler";case G:return"StrictMode";case dt:return"Suspense";case St:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case P:return(t.displayName||"Context")+".Provider";case Y:return(t._context.displayName||"Context")+".Consumer";case lt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return n=t.displayName||null,n!==null?n:It(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return It(t(n))}catch{}}return null}var Ot=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At={pending:!1,data:null,method:null,action:null},Ft=[],k=-1;function at(t){return{current:t}}function gt(t){0>k||(t.current=Ft[k],Ft[k]=null,k--)}function ft(t,n){k++,Ft[k]=t.current,t.current=n}var Rt=at(null),Ct=at(null),X=at(null),vt=at(null);function Et(t,n){switch(ft(X,n),ft(Ct,t),ft(Rt,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Iy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Iy(n),t=Dy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}gt(Rt),ft(Rt,t)}function Lt(){gt(Rt),gt(Ct),gt(X)}function Kt(t){t.memoizedState!==null&&ft(vt,t);var n=Rt.current,s=Dy(n,t.type);n!==s&&(ft(Ct,t),ft(Rt,s))}function qt(t){Ct.current===t&&(gt(Rt),gt(Ct)),vt.current===t&&(gt(vt),uo._currentValue=At)}var st=Object.prototype.hasOwnProperty,Mt=r.unstable_scheduleCallback,jt=r.unstable_cancelCallback,Dt=r.unstable_shouldYield,kt=r.unstable_requestPaint,$t=r.unstable_now,_e=r.unstable_getCurrentPriorityLevel,Ee=r.unstable_ImmediatePriority,Ye=r.unstable_UserBlockingPriority,Rn=r.unstable_NormalPriority,bi=r.unstable_LowPriority,er=r.unstable_IdlePriority,Xn=r.log,nr=r.unstable_setDisableYieldValue,be=null,ce=null;function Cn(t){if(typeof Xn=="function"&&nr(t),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(be,t)}catch{}}var cn=Math.clz32?Math.clz32:rr,ir=Math.log,gl=Math.LN2;function rr(t){return t>>>=0,t===0?32:31-(ir(t)/gl|0)|0}var Zn=256,In=4194304;function Ke(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function sr(t,n,s){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=Ke(l):(E&=T,E!==0?h=Ke(E):s||(s=T&~t,s!==0&&(h=Ke(s))))):(T=l&~d,T!==0?h=Ke(T):E!==0?h=Ke(E):s||(s=l&~t,s!==0&&(h=Ke(s)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,s=n&-n,d>=s||d===32&&(s&4194048)!==0)?n:h}function Jn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Vr(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(){var t=Zn;return Zn<<=1,(Zn&4194048)===0&&(Zn=256),t}function bs(){var t=In;return In<<=1,(In&62914560)===0&&(In=4194304),t}function ti(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function hn(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function jr(t,n,s,l,h,d){var E=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,V=t.expirationTimes,$=t.hiddenUpdates;for(s=E&~s;0<s;){var nt=31-cn(s),ot=1<<nt;T[nt]=0,V[nt]=-1;var K=$[nt];if(K!==null)for($[nt]=null,nt=0;nt<K.length;nt++){var W=K[nt];W!==null&&(W.lane&=-536870913)}s&=~ot}l!==0&&ei(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~n))}function ei(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-cn(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function Si(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-cn(s),h=1<<l;h&n|t[l]&n&&(t[l]|=n),s&=~h}}function On(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Lr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oi(){var t=mt.p;return t!==0?t:(t=window.event,t===void 0?32:Ky(t.type))}function ua(t,n){var s=mt.p;try{return mt.p=t,n()}finally{mt.p=s}}var xe=Math.random().toString(36).slice(2),Le="__reactFiber$"+xe,Ne="__reactProps$"+xe,jn="__reactContainer$"+xe,Ss="__reactEvents$"+xe,yl="__reactListeners$"+xe,Ti="__reactHandles$"+xe,Ts="__reactResources$"+xe,ji="__reactMarker$"+xe;function Li(t){delete t[Le],delete t[Ne],delete t[Ss],delete t[yl],delete t[Ti]}function xi(t){var n=t[Le];if(n)return n;for(var s=t.parentNode;s;){if(n=s[jn]||s[Le]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Oy(t);t!==null;){if(s=t[Le])return s;t=Oy(t)}return n}t=s,s=t.parentNode}return null}function ni(t){if(t=t[Le]||t[jn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function ii(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function fn(t){var n=t[Ts];return n||(n=t[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Me(t){t[ji]=!0}var xs=new Set,kr={};function Ln(t,n){ri(t,n),ri(t+"Capture",n)}function ri(t,n){for(kr[t]=n,t=0;t<n.length;t++)xs.add(n[t])}var As=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ws={},D={};function Z(t){return st.call(D,t)?!0:st.call(ws,t)?!1:As.test(t)?D[t]=!0:(ws[t]=!0,!1)}function et(t,n,s){if(Z(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function rt(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function ht(t,n,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+l)}}var pt,_t;function ne(t){if(pt===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);pt=n&&n[1]||"",_t=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+t+_t}var Se=!1;function we(t,n){if(!t||Se)return"";Se=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(W){var K=W}Reflect.construct(t,[],ot)}else{try{ot.call()}catch(W){K=W}t.call(ot.prototype)}}else{try{throw Error()}catch(W){K=W}(ot=t())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(W){if(W&&K&&typeof W.stack=="string")return[W.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],T=d[1];if(E&&T){var V=E.split(`
`),$=T.split(`
`);for(h=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(l===V.length||h===$.length)for(l=V.length-1,h=$.length-1;1<=l&&0<=h&&V[l]!==$[h];)h--;for(;1<=l&&0<=h;l--,h--)if(V[l]!==$[h]){if(l!==1||h!==1)do if(l--,h--,0>h||V[l]!==$[h]){var nt=`
`+V[l].replace(" at new "," at ");return t.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",t.displayName)),nt}while(1<=l&&0<=h);break}}}finally{Se=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?ne(s):""}function En(t){switch(t.tag){case 26:case 27:case 5:return ne(t.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return we(t.type,!1);case 11:return we(t.type.render,!1);case 1:return we(t.type,!0);case 31:return ne("Activity");default:return""}}function Ai(t){try{var n="";do n+=En(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function qe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function si(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ch(t){var n=si(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,d=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ca(t){t._valueTracker||(t._valueTracker=ch(t))}function vl(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=si(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function Rs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hh=/[\n"\\]/g;function He(t){return t.replace(hh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function qn(t,n,s,l,h,d,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),n!=null?E==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+qe(n)):t.value!==""+qe(n)&&(t.value=""+qe(n)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),n!=null?Ur(t,E,qe(n)):s!=null?Ur(t,E,qe(s)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+qe(T):t.removeAttribute("name")}function Cs(t,n,s,l,h,d,E,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;s=s!=null?""+qe(s):"",n=n!=null?""+qe(n):s,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function Ur(t,n,s){n==="number"&&Rs(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function ar(t,n,s,l){if(t=t.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=n.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&l&&(t[s].defaultSelected=!0)}else{for(s=""+qe(s),n=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function pe(t,n,s){if(n!=null&&(n=""+qe(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+qe(s):""}function Is(t,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(a(92));if(Ot(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=qe(n),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function ai(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wo(t,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,s):typeof s!="number"||s===0||Ds.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function _l(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&s[h]!==l&&Wo(t,h,l)}else for(var d in n)n.hasOwnProperty(d)&&Wo(t,d,n[d])}function El(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ha(t){return dh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var lr=null;function li(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var or=null,ur=null;function bl(t){var n=ni(t);if(n&&(t=n.stateNode)){var s=t[Ne]||null;t:switch(t=n.stateNode,n.type){case"input":if(qn(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+He(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var h=l[Ne]||null;if(!h)throw Error(a(90));qn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===t.form&&vl(l)}break t;case"textarea":pe(t,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&ar(t,!!s.multiple,n,!1)}}}var ki=!1;function Xo(t,n,s){if(ki)return t(n,s);ki=!0;try{var l=t(n);return l}finally{if(ki=!1,(or!==null||ur!==null)&&(Gu(),or&&(n=or,t=ur,ur=or=null,bl(n),t)))for(n=0;n<t.length;n++)bl(t[n])}}function Ns(t,n){var s=t.stateNode;if(s===null)return null;var l=s[Ne]||null;if(l===null)return null;s=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oi=!1;if(wi)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{oi=!1}var Ui=null,zr=null,cr=null;function Sl(){if(cr)return cr;var t,n=zr,s=n.length,l,h="value"in Ui?Ui.value:Ui.textContent,d=h.length;for(t=0;t<s&&n[t]===h[t];t++);var E=s-t;for(l=1;l<=E&&n[s-l]===h[d-l];l++);return cr=h.slice(t,1<l?1-l:void 0)}function zi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Pi(){return!0}function Tl(){return!1}function rn(t){function n(s,l,h,d,E){this._reactName=s,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Pi:Tl,this.isPropagationStopped=Tl,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),n}var he={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=rn(he),Vs=b({},he,{view:0,detail:0}),Zo=rn(Vs),da,ma,Bi,Os=b({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bi&&(Bi&&t.type==="mousemove"?(da=t.screenX-Bi.screenX,ma=t.screenY-Bi.screenY):ma=da=0,Bi=t),da)},movementY:function(t){return"movementY"in t?t.movementY:ma}}),ui=rn(Os),Jo=b({},Os,{dataTransfer:0}),mh=rn(Jo),js=b({},Vs,{relatedTarget:0}),pa=rn(js),xl=b({},he,{animationName:0,elapsedTime:0,pseudoElement:0}),ga=rn(xl),tu=b({},he,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ya=rn(tu),ph=b({},he,{data:0}),Al=rn(ph),Ls={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wl(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=nu[t])?!!n[t]:!1}function ks(){return wl}var iu=b({},Vs,{key:function(t){if(t.key){var n=Ls[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=zi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(t){return t.type==="keypress"?zi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),va=rn(iu),ru=b({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rl=rn(ru),hr=b({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),su=rn(hr),au=b({},he,{propertyName:0,elapsedTime:0,pseudoElement:0}),lu=rn(au),ou=b({},Os,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_a=rn(ou),Dn=b({},he,{newState:0,oldState:0}),uu=rn(Dn),cu=[9,13,27,32],qi=wi&&"CompositionEvent"in window,u=null;wi&&"documentMode"in document&&(u=document.documentMode);var y=wi&&"TextEvent"in window&&!u,_=wi&&(!qi||u&&8<u&&11>=u),x=" ",F=!1;function tt(t,n){switch(t){case"keyup":return cu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ie=!1;function We(t,n){switch(t){case"compositionend":return yt(n);case"keypress":return n.which!==32?null:(F=!0,x);case"textInput":return t=n.data,t===x&&F?null:t;default:return null}}function re(t,n){if(ie)return t==="compositionend"||!qi&&tt(t,n)?(t=Sl(),cr=zr=Ui=null,ie=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _&&n.locale!=="ko"?null:n.data;default:return null}}var sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xe(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!sn[t.type]:n==="textarea"}function fr(t,n,s,l){or?ur?ur.push(l):ur=[l]:or=l,n=Wu(n,"onChange"),0<n.length&&(s=new fa("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var dn=null,Hi=null;function Cl(t){xy(t,0)}function hu(t){var n=ii(t);if(vl(n))return t}function Fm(t,n){if(t==="change")return n}var Qm=!1;if(wi){var gh;if(wi){var yh="oninput"in document;if(!yh){var $m=document.createElement("div");$m.setAttribute("oninput","return;"),yh=typeof $m.oninput=="function"}gh=yh}else gh=!1;Qm=gh&&(!document.documentMode||9<document.documentMode)}function Ym(){dn&&(dn.detachEvent("onpropertychange",Km),Hi=dn=null)}function Km(t){if(t.propertyName==="value"&&hu(Hi)){var n=[];fr(n,Hi,t,li(t)),Xo(Cl,n)}}function L1(t,n,s){t==="focusin"?(Ym(),dn=n,Hi=s,dn.attachEvent("onpropertychange",Km)):t==="focusout"&&Ym()}function k1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(Hi)}function U1(t,n){if(t==="click")return hu(n)}function z1(t,n){if(t==="input"||t==="change")return hu(n)}function P1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Hn=typeof Object.is=="function"?Object.is:P1;function Il(t,n){if(Hn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var h=s[l];if(!st.call(n,h)||!Hn(t[h],n[h]))return!1}return!0}function Wm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xm(t,n){var s=Wm(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Wm(s)}}function Zm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Zm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Jm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Rs(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Rs(t.document)}return n}function vh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var B1=wi&&"documentMode"in document&&11>=document.documentMode,Ea=null,_h=null,Dl=null,Eh=!1;function tp(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Eh||Ea==null||Ea!==Rs(l)||(l=Ea,"selectionStart"in l&&vh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Dl&&Il(Dl,l)||(Dl=l,l=Wu(_h,"onSelect"),0<l.length&&(n=new fa("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=Ea)))}function Us(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var ba={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},bh={},ep={};wi&&(ep=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function zs(t){if(bh[t])return bh[t];if(!ba[t])return t;var n=ba[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in ep)return bh[t]=n[s];return t}var np=zs("animationend"),ip=zs("animationiteration"),rp=zs("animationstart"),q1=zs("transitionrun"),H1=zs("transitionstart"),G1=zs("transitioncancel"),sp=zs("transitionend"),ap=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function Ri(t,n){ap.set(t,n),Ln(n,[t])}var lp=new WeakMap;function ci(t,n){if(typeof t=="object"&&t!==null){var s=lp.get(t);return s!==void 0?s:(n={value:t,source:n,stack:Ai(n)},lp.set(t,n),n)}return{value:t,source:n,stack:Ai(n)}}var hi=[],Sa=0,Th=0;function fu(){for(var t=Sa,n=Th=Sa=0;n<t;){var s=hi[n];hi[n++]=null;var l=hi[n];hi[n++]=null;var h=hi[n];hi[n++]=null;var d=hi[n];if(hi[n++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&op(s,h,d)}}function du(t,n,s,l){hi[Sa++]=t,hi[Sa++]=n,hi[Sa++]=s,hi[Sa++]=l,Th|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xh(t,n,s,l){return du(t,n,s,l),mu(t)}function Ta(t,n){return du(t,null,null,n),mu(t)}function op(t,n,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var h=!1,d=t.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-cn(s),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=s|536870912),d):null}function mu(t){if(50<eo)throw eo=0,Nf=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var xa={};function F1(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,n,s,l){return new F1(t,n,s,l)}function Ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dr(t,n){var s=t.alternate;return s===null?(s=Gn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function up(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function pu(t,n,s,l,h,d){var E=0;if(l=t,typeof t=="function")Ah(t)&&(E=1);else if(typeof t=="string")E=$E(t,s,Rt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case w:return t=Gn(31,s,n,h),t.elementType=w,t.lanes=d,t;case N:return Ps(s.children,h,d,n);case G:E=8,h|=24;break;case B:return t=Gn(12,s,n,h|2),t.elementType=B,t.lanes=d,t;case dt:return t=Gn(13,s,n,h),t.elementType=dt,t.lanes=d,t;case St:return t=Gn(19,s,n,h),t.elementType=St,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H:case P:E=10;break t;case Y:E=9;break t;case lt:E=11;break t;case j:E=14;break t;case R:E=16,l=null;break t}E=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=Gn(E,s,n,h),n.elementType=t,n.type=l,n.lanes=d,n}function Ps(t,n,s,l){return t=Gn(7,t,l,n),t.lanes=s,t}function wh(t,n,s){return t=Gn(6,t,null,n),t.lanes=s,t}function Rh(t,n,s){return n=Gn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Aa=[],wa=0,gu=null,yu=0,fi=[],di=0,Bs=null,mr=1,pr="";function qs(t,n){Aa[wa++]=yu,Aa[wa++]=gu,gu=t,yu=n}function cp(t,n,s){fi[di++]=mr,fi[di++]=pr,fi[di++]=Bs,Bs=t;var l=mr;t=pr;var h=32-cn(l)-1;l&=~(1<<h),s+=1;var d=32-cn(n)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,mr=1<<32-cn(n)+h|s<<h|l,pr=d+t}else mr=1<<d|s<<h|l,pr=t}function Ch(t){t.return!==null&&(qs(t,1),cp(t,1,0))}function Ih(t){for(;t===gu;)gu=Aa[--wa],Aa[wa]=null,yu=Aa[--wa],Aa[wa]=null;for(;t===Bs;)Bs=fi[--di],fi[di]=null,pr=fi[--di],fi[di]=null,mr=fi[--di],fi[di]=null}var Nn=null,ke=null,ue=!1,Hs=null,Gi=!1,Dh=Error(a(519));function Gs(t){var n=Error(a(418,""));throw Vl(ci(n,t)),Dh}function hp(t){var n=t.stateNode,s=t.type,l=t.memoizedProps;switch(n[Le]=t,n[Ne]=l,s){case"dialog":te("cancel",n),te("close",n);break;case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(s=0;s<io.length;s++)te(io[s],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"details":te("toggle",n);break;case"input":te("invalid",n),Cs(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ca(n);break;case"select":te("invalid",n);break;case"textarea":te("invalid",n),Is(n,l.value,l.defaultValue,l.children),ca(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||Cy(n.textContent,s)?(l.popover!=null&&(te("beforetoggle",n),te("toggle",n)),l.onScroll!=null&&te("scroll",n),l.onScrollEnd!=null&&te("scrollend",n),l.onClick!=null&&(n.onclick=Xu),n=!0):n=!1,n||Gs(t)}function fp(t){for(Nn=t.return;Nn;)switch(Nn.tag){case 5:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:Nn=Nn.return}}function Nl(t){if(t!==Nn)return!1;if(!ue)return fp(t),ue=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||$f(t.type,t.memoizedProps)),s=!s),s&&ke&&Gs(t),fp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){ke=Ii(t.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}ke=null}}else n===27?(n=ke,es(t.type)?(t=Xf,Xf=null,ke=t):ke=n):ke=Nn?Ii(t.stateNode.nextSibling):null;return!0}function Ml(){ke=Nn=null,ue=!1}function dp(){var t=Hs;return t!==null&&(zn===null?zn=t:zn.push.apply(zn,t),Hs=null),t}function Vl(t){Hs===null?Hs=[t]:Hs.push(t)}var Nh=at(null),Fs=null,gr=null;function Pr(t,n,s){ft(Nh,n._currentValue),n._currentValue=s}function yr(t){t._currentValue=Nh.current,gt(Nh)}function Mh(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function Vh(t,n,s,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var V=0;V<n.length;V++)if(T.context===n[V]){d.lanes|=s,T=d.alternate,T!==null&&(T.lanes|=s),Mh(d.return,s,t),l||(E=null);break t}d=T.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(a(341));E.lanes|=s,d=E.alternate,d!==null&&(d.lanes|=s),Mh(E,s,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Ol(t,n,s,l){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var T=h.type;Hn(h.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(h===vt.current){if(E=h.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(uo):t=[uo])}h=h.return}t!==null&&Vh(n,t,s,l),n.flags|=262144}function vu(t){for(t=t.firstContext;t!==null;){if(!Hn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Qs(t){Fs=t,gr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bn(t){return mp(Fs,t)}function _u(t,n){return Fs===null&&Qs(t),mp(t,n)}function mp(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},gr===null){if(t===null)throw Error(a(308));gr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else gr=gr.next=n;return s}var Q1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},$1=r.unstable_scheduleCallback,Y1=r.unstable_NormalPriority,Ze={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oh(){return{controller:new Q1,data:new Map,refCount:0}}function jl(t){t.refCount--,t.refCount===0&&$1(Y1,function(){t.controller.abort()})}var Ll=null,jh=0,Ra=0,Ca=null;function K1(t,n){if(Ll===null){var s=Ll=[];jh=0,Ra=Uf(),Ca={status:"pending",value:void 0,then:function(l){s.push(l)}}}return jh++,n.then(pp,pp),n}function pp(){if(--jh===0&&Ll!==null){Ca!==null&&(Ca.status="fulfilled");var t=Ll;Ll=null,Ra=0,Ca=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function W1(t,n){var s=[],l={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<s.length;h++)(0,s[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),l}var gp=J.S;J.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&K1(t,n),gp!==null&&gp(t,n)};var $s=at(null);function Lh(){var t=$s.current;return t!==null?t:Ae.pooledCache}function Eu(t,n){n===null?ft($s,$s.current):ft($s,n.pool)}function yp(){var t=Lh();return t===null?null:{parent:Ze._currentValue,pool:t}}var kl=Error(a(460)),vp=Error(a(474)),bu=Error(a(542)),kh={then:function(){}};function _p(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Su(){}function Ep(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(Su,Su),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t;default:if(typeof n.status=="string")n.then(Su,Su);else{if(t=Ae,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Sp(t),t}throw Ul=n,kl}}var Ul=null;function bp(){if(Ul===null)throw Error(a(459));var t=Ul;return Ul=null,t}function Sp(t){if(t===kl||t===bu)throw Error(a(483))}var Br=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Hr(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(de&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=mu(t),op(t,null,s),n}return du(t,l,n,s),mu(t)}function zl(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Si(t,s)}}function Ph(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var h=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var E={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,s=s.next}while(s!==null);d===null?h=d=n:d=d.next=n}else h=d=n;s={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var Bh=!1;function Pl(){if(Bh){var t=Ca;if(t!==null)throw t}}function Bl(t,n,s,l){Bh=!1;var h=t.updateQueue;Br=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var V=T,$=V.next;V.next=null,E===null?d=$:E.next=$,E=V;var nt=t.alternate;nt!==null&&(nt=nt.updateQueue,T=nt.lastBaseUpdate,T!==E&&(T===null?nt.firstBaseUpdate=$:T.next=$,nt.lastBaseUpdate=V))}if(d!==null){var ot=h.baseState;E=0,nt=$=V=null,T=d;do{var K=T.lane&-536870913,W=K!==T.lane;if(W?(se&K)===K:(l&K)===K){K!==0&&K===Ra&&(Bh=!0),nt!==null&&(nt=nt.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Pt=t,Ut=T;K=n;var ve=s;switch(Ut.tag){case 1:if(Pt=Ut.payload,typeof Pt=="function"){ot=Pt.call(ve,ot,K);break t}ot=Pt;break t;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Ut.payload,K=typeof Pt=="function"?Pt.call(ve,ot,K):Pt,K==null)break t;ot=b({},ot,K);break t;case 2:Br=!0}}K=T.callback,K!==null&&(t.flags|=64,W&&(t.flags|=8192),W=h.callbacks,W===null?h.callbacks=[K]:W.push(K))}else W={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},nt===null?($=nt=W,V=ot):nt=nt.next=W,E|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;W=T,T=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);nt===null&&(V=ot),h.baseState=V,h.firstBaseUpdate=$,h.lastBaseUpdate=nt,d===null&&(h.shared.lanes=0),Xr|=E,t.lanes=E,t.memoizedState=ot}}function Tp(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function xp(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Tp(s[t],n)}var Ia=at(null),Tu=at(0);function Ap(t,n){t=xr,ft(Tu,t),ft(Ia,n),xr=t|n.baseLanes}function qh(){ft(Tu,xr),ft(Ia,Ia.current)}function Hh(){xr=Tu.current,gt(Ia),gt(Tu)}var Gr=0,Wt=null,ge=null,Ge=null,xu=!1,Da=!1,Ys=!1,Au=0,ql=0,Na=null,X1=0;function ze(){throw Error(a(321))}function Gh(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Hn(t[s],n[s]))return!1;return!0}function Fh(t,n,s,l,h,d){return Gr=d,Wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,J.H=t===null||t.memoizedState===null?og:ug,Ys=!1,d=s(l,h),Ys=!1,Da&&(d=Rp(n,s,l,h)),wp(t),d}function wp(t){J.H=Nu;var n=ge!==null&&ge.next!==null;if(Gr=0,Ge=ge=Wt=null,xu=!1,ql=0,Na=null,n)throw Error(a(300));t===null||an||(t=t.dependencies,t!==null&&vu(t)&&(an=!0))}function Rp(t,n,s,l){Wt=t;var h=0;do{if(Da&&(Na=null),ql=0,Da=!1,25<=h)throw Error(a(301));if(h+=1,Ge=ge=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=rE,d=n(s,l)}while(Da);return d}function Z1(){var t=J.H,n=t.useState()[0];return n=typeof n.then=="function"?Hl(n):n,t=t.useState()[0],(ge!==null?ge.memoizedState:null)!==t&&(Wt.flags|=1024),n}function Qh(){var t=Au!==0;return Au=0,t}function $h(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Yh(t){if(xu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}xu=!1}Gr=0,Ge=ge=Wt=null,Da=!1,ql=Au=0,Na=null}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Wt.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Fe(){if(ge===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=ge.next;var n=Ge===null?Wt.memoizedState:Ge.next;if(n!==null)Ge=n,ge=t;else{if(t===null)throw Wt.alternate===null?Error(a(467)):Error(a(310));ge=t,t={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},Ge===null?Wt.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(t){var n=ql;return ql+=1,Na===null&&(Na=[]),t=Ep(Na,t,n),n=Wt,(Ge===null?n.memoizedState:Ge.next)===null&&(n=n.alternate,J.H=n===null||n.memoizedState===null?og:ug),t}function wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Hl(t);if(t.$$typeof===P)return bn(t)}throw Error(a(438,String(t)))}function Wh(t){var n=null,s=Wt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=Wt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Kh(),Wt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),l=0;l<t;l++)s[l]=M;return n.index++,s}function vr(t,n){return typeof n=="function"?n(t):n}function Ru(t){var n=Fe();return Xh(n,ge,t)}function Xh(t,n,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}n.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var T=E=null,V=null,$=n,nt=!1;do{var ot=$.lane&-536870913;if(ot!==$.lane?(se&ot)===ot:(Gr&ot)===ot){var K=$.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ot===Ra&&(nt=!0);else if((Gr&K)===K){$=$.next,K===Ra&&(nt=!0);continue}else ot={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(T=V=ot,E=d):V=V.next=ot,Wt.lanes|=K,Xr|=K;ot=$.action,Ys&&s(d,ot),d=$.hasEagerState?$.eagerState:s(d,ot)}else K={lane:ot,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(T=V=K,E=d):V=V.next=K,Wt.lanes|=ot,Xr|=ot;$=$.next}while($!==null&&$!==n);if(V===null?E=d:V.next=T,!Hn(d,t.memoizedState)&&(an=!0,nt&&(s=Ca,s!==null)))throw s;t.memoizedState=d,t.baseState=E,t.baseQueue=V,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Zh(t){var n=Fe(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,h=s.pending,d=n.memoizedState;if(h!==null){s.pending=null;var E=h=h.next;do d=t(d,E.action),E=E.next;while(E!==h);Hn(d,n.memoizedState)||(an=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,l]}function Cp(t,n,s){var l=Wt,h=Fe(),d=ue;if(d){if(s===void 0)throw Error(a(407));s=s()}else s=n();var E=!Hn((ge||h).memoizedState,s);E&&(h.memoizedState=s,an=!0),h=h.queue;var T=Np.bind(null,l,h,t);if(Gl(2048,8,T,[t]),h.getSnapshot!==n||E||Ge!==null&&Ge.memoizedState.tag&1){if(l.flags|=2048,Ma(9,Cu(),Dp.bind(null,l,h,s,n),null),Ae===null)throw Error(a(349));d||(Gr&124)!==0||Ip(l,n,s)}return s}function Ip(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Wt.updateQueue,n===null?(n=Kh(),Wt.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function Dp(t,n,s,l){n.value=s,n.getSnapshot=l,Mp(n)&&Vp(t)}function Np(t,n,s){return s(function(){Mp(n)&&Vp(t)})}function Mp(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!Hn(t,s)}catch{return!0}}function Vp(t){var n=Ta(t,2);n!==null&&Kn(n,t,2)}function Jh(t){var n=kn();if(typeof t=="function"){var s=t;if(t=s(),Ys){Cn(!0);try{s()}finally{Cn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:t},n}function Op(t,n,s,l){return t.baseState=s,Xh(t,ge,typeof l=="function"?l:vr)}function J1(t,n,s,l,h){if(Du(t))throw Error(a(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};J.T!==null?s(!0):d.isTransition=!1,l(d),s=n.pending,s===null?(d.next=n.pending=d,jp(n,d)):(d.next=s.next,n.pending=s.next=d)}}function jp(t,n){var s=n.action,l=n.payload,h=t.state;if(n.isTransition){var d=J.T,E={};J.T=E;try{var T=s(h,l),V=J.S;V!==null&&V(E,T),Lp(t,n,T)}catch($){tf(t,n,$)}finally{J.T=d}}else try{d=s(h,l),Lp(t,n,d)}catch($){tf(t,n,$)}}function Lp(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){kp(t,n,l)},function(l){return tf(t,n,l)}):kp(t,n,s)}function kp(t,n,s){n.status="fulfilled",n.value=s,Up(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,jp(t,s)))}function tf(t,n,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,Up(n),n=n.next;while(n!==l)}t.action=null}function Up(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function zp(t,n){return n}function Pp(t,n){if(ue){var s=Ae.formState;if(s!==null){t:{var l=Wt;if(ue){if(ke){e:{for(var h=ke,d=Gi;h.nodeType!==8;){if(!d){h=null;break e}if(h=Ii(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ke=Ii(h.nextSibling),l=h.data==="F!";break t}}Gs(l)}l=!1}l&&(n=s[0])}}return s=kn(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:n},s.queue=l,s=sg.bind(null,Wt,l),l.dispatch=s,l=Jh(!1),d=af.bind(null,Wt,!1,l.queue),l=kn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,s=J1.bind(null,Wt,h,d,s),h.dispatch=s,l.memoizedState=t,[n,s,!1]}function Bp(t){var n=Fe();return qp(n,ge,t)}function qp(t,n,s){if(n=Xh(t,n,zp)[0],t=Ru(vr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Hl(n)}catch(E){throw E===kl?bu:E}else l=n;n=Fe();var h=n.queue,d=h.dispatch;return s!==n.memoizedState&&(Wt.flags|=2048,Ma(9,Cu(),tE.bind(null,h,s),null)),[l,d,t]}function tE(t,n){t.action=n}function Hp(t){var n=Fe(),s=ge;if(s!==null)return qp(n,s,t);Fe(),n=n.memoizedState,s=Fe();var l=s.queue.dispatch;return s.memoizedState=t,[n,l,!1]}function Ma(t,n,s,l){return t={tag:t,create:s,deps:l,inst:n,next:null},n=Wt.updateQueue,n===null&&(n=Kh(),Wt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t),t}function Cu(){return{destroy:void 0,resource:void 0}}function Gp(){return Fe().memoizedState}function Iu(t,n,s,l){var h=kn();l=l===void 0?null:l,Wt.flags|=t,h.memoizedState=Ma(1|n,Cu(),s,l)}function Gl(t,n,s,l){var h=Fe();l=l===void 0?null:l;var d=h.memoizedState.inst;ge!==null&&l!==null&&Gh(l,ge.memoizedState.deps)?h.memoizedState=Ma(n,d,s,l):(Wt.flags|=t,h.memoizedState=Ma(1|n,d,s,l))}function Fp(t,n){Iu(8390656,8,t,n)}function Qp(t,n){Gl(2048,8,t,n)}function $p(t,n){return Gl(4,2,t,n)}function Yp(t,n){return Gl(4,4,t,n)}function Kp(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Wp(t,n,s){s=s!=null?s.concat([t]):null,Gl(4,4,Kp.bind(null,n,t),s)}function ef(){}function Xp(t,n){var s=Fe();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&Gh(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function Zp(t,n){var s=Fe();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&Gh(n,l[1]))return l[0];if(l=t(),Ys){Cn(!0);try{t()}finally{Cn(!1)}}return s.memoizedState=[l,n],l}function nf(t,n,s){return s===void 0||(Gr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=ey(),Wt.lanes|=t,Xr|=t,s)}function Jp(t,n,s,l){return Hn(s,n)?s:Ia.current!==null?(t=nf(t,s,l),Hn(t,n)||(an=!0),t):(Gr&42)===0?(an=!0,t.memoizedState=s):(t=ey(),Wt.lanes|=t,Xr|=t,n)}function tg(t,n,s,l,h){var d=mt.p;mt.p=d!==0&&8>d?d:8;var E=J.T,T={};J.T=T,af(t,!1,n,s);try{var V=h(),$=J.S;if($!==null&&$(T,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var nt=W1(V,l);Fl(t,n,nt,Yn(t))}else Fl(t,n,l,Yn(t))}catch(ot){Fl(t,n,{then:function(){},status:"rejected",reason:ot},Yn())}finally{mt.p=d,J.T=E}}function eE(){}function rf(t,n,s,l){if(t.tag!==5)throw Error(a(476));var h=eg(t).queue;tg(t,h,n,At,s===null?eE:function(){return ng(t),s(l)})}function eg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:At,baseState:At,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:At},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function ng(t){var n=eg(t).next.queue;Fl(t,n,{},Yn())}function sf(){return bn(uo)}function ig(){return Fe().memoizedState}function rg(){return Fe().memoizedState}function nE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=Yn();t=qr(s);var l=Hr(n,t,s);l!==null&&(Kn(l,n,s),zl(l,n,s)),n={cache:Oh()},t.payload=n;return}n=n.return}}function iE(t,n,s){var l=Yn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Du(t)?ag(n,s):(s=xh(t,n,s,l),s!==null&&(Kn(s,t,l),lg(s,n,l)))}function sg(t,n,s){var l=Yn();Fl(t,n,s,l)}function Fl(t,n,s,l){var h={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Du(t))ag(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var E=n.lastRenderedState,T=d(E,s);if(h.hasEagerState=!0,h.eagerState=T,Hn(T,E))return du(t,n,h,0),Ae===null&&fu(),!1}catch{}finally{}if(s=xh(t,n,h,l),s!==null)return Kn(s,t,l),lg(s,n,l),!0}return!1}function af(t,n,s,l){if(l={lane:2,revertLane:Uf(),action:l,hasEagerState:!1,eagerState:null,next:null},Du(t)){if(n)throw Error(a(479))}else n=xh(t,s,l,2),n!==null&&Kn(n,t,2)}function Du(t){var n=t.alternate;return t===Wt||n!==null&&n===Wt}function ag(t,n){Da=xu=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function lg(t,n,s){if((s&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Si(t,s)}}var Nu={readContext:bn,use:wu,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze},og={readContext:bn,use:wu,useCallback:function(t,n){return kn().memoizedState=[t,n===void 0?null:n],t},useContext:bn,useEffect:Fp,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,Iu(4194308,4,Kp.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Iu(4194308,4,t,n)},useInsertionEffect:function(t,n){Iu(4,2,t,n)},useMemo:function(t,n){var s=kn();n=n===void 0?null:n;var l=t();if(Ys){Cn(!0);try{t()}finally{Cn(!1)}}return s.memoizedState=[l,n],l},useReducer:function(t,n,s){var l=kn();if(s!==void 0){var h=s(n);if(Ys){Cn(!0);try{s(n)}finally{Cn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=iE.bind(null,Wt,t),[l.memoizedState,t]},useRef:function(t){var n=kn();return t={current:t},n.memoizedState=t},useState:function(t){t=Jh(t);var n=t.queue,s=sg.bind(null,Wt,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:ef,useDeferredValue:function(t,n){var s=kn();return nf(s,t,n)},useTransition:function(){var t=Jh(!1);return t=tg.bind(null,Wt,t.queue,!0,!1),kn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var l=Wt,h=kn();if(ue){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),Ae===null)throw Error(a(349));(se&124)!==0||Ip(l,n,s)}h.memoizedState=s;var d={value:s,getSnapshot:n};return h.queue=d,Fp(Np.bind(null,l,d,t),[t]),l.flags|=2048,Ma(9,Cu(),Dp.bind(null,l,d,s,n),null),s},useId:function(){var t=kn(),n=Ae.identifierPrefix;if(ue){var s=pr,l=mr;s=(l&~(1<<32-cn(l)-1)).toString(32)+s,n=""+n+"R"+s,s=Au++,0<s&&(n+="H"+s.toString(32)),n+=""}else s=X1++,n=""+n+"r"+s.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:sf,useFormState:Pp,useActionState:Pp,useOptimistic:function(t){var n=kn();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=af.bind(null,Wt,!0,s),s.dispatch=n,[t,n]},useMemoCache:Wh,useCacheRefresh:function(){return kn().memoizedState=nE.bind(null,Wt)}},ug={readContext:bn,use:wu,useCallback:Xp,useContext:bn,useEffect:Qp,useImperativeHandle:Wp,useInsertionEffect:$p,useLayoutEffect:Yp,useMemo:Zp,useReducer:Ru,useRef:Gp,useState:function(){return Ru(vr)},useDebugValue:ef,useDeferredValue:function(t,n){var s=Fe();return Jp(s,ge.memoizedState,t,n)},useTransition:function(){var t=Ru(vr)[0],n=Fe().memoizedState;return[typeof t=="boolean"?t:Hl(t),n]},useSyncExternalStore:Cp,useId:ig,useHostTransitionStatus:sf,useFormState:Bp,useActionState:Bp,useOptimistic:function(t,n){var s=Fe();return Op(s,ge,t,n)},useMemoCache:Wh,useCacheRefresh:rg},rE={readContext:bn,use:wu,useCallback:Xp,useContext:bn,useEffect:Qp,useImperativeHandle:Wp,useInsertionEffect:$p,useLayoutEffect:Yp,useMemo:Zp,useReducer:Zh,useRef:Gp,useState:function(){return Zh(vr)},useDebugValue:ef,useDeferredValue:function(t,n){var s=Fe();return ge===null?nf(s,t,n):Jp(s,ge.memoizedState,t,n)},useTransition:function(){var t=Zh(vr)[0],n=Fe().memoizedState;return[typeof t=="boolean"?t:Hl(t),n]},useSyncExternalStore:Cp,useId:ig,useHostTransitionStatus:sf,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,n){var s=Fe();return ge!==null?Op(s,ge,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:rg},Va=null,Ql=0;function Mu(t){var n=Ql;return Ql+=1,Va===null&&(Va=[]),Ep(Va,t,n)}function $l(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Vu(t,n){throw n.$$typeof===S?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function cg(t){var n=t._init;return n(t._payload)}function hg(t){function n(q,z){if(t){var Q=q.deletions;Q===null?(q.deletions=[z],q.flags|=16):Q.push(z)}}function s(q,z){if(!t)return null;for(;z!==null;)n(q,z),z=z.sibling;return null}function l(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function h(q,z){return q=dr(q,z),q.index=0,q.sibling=null,q}function d(q,z,Q){return q.index=Q,t?(Q=q.alternate,Q!==null?(Q=Q.index,Q<z?(q.flags|=67108866,z):Q):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function E(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function T(q,z,Q,it){return z===null||z.tag!==6?(z=wh(Q,q.mode,it),z.return=q,z):(z=h(z,Q),z.return=q,z)}function V(q,z,Q,it){var wt=Q.type;return wt===N?nt(q,z,Q.props.children,it,Q.key):z!==null&&(z.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===R&&cg(wt)===z.type)?(z=h(z,Q.props),$l(z,Q),z.return=q,z):(z=pu(Q.type,Q.key,Q.props,null,q.mode,it),$l(z,Q),z.return=q,z)}function $(q,z,Q,it){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=Rh(Q,q.mode,it),z.return=q,z):(z=h(z,Q.children||[]),z.return=q,z)}function nt(q,z,Q,it,wt){return z===null||z.tag!==7?(z=Ps(Q,q.mode,it,wt),z.return=q,z):(z=h(z,Q),z.return=q,z)}function ot(q,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=wh(""+z,q.mode,Q),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return Q=pu(z.type,z.key,z.props,null,q.mode,Q),$l(Q,z),Q.return=q,Q;case O:return z=Rh(z,q.mode,Q),z.return=q,z;case R:var it=z._init;return z=it(z._payload),ot(q,z,Q)}if(Ot(z)||U(z))return z=Ps(z,q.mode,Q,null),z.return=q,z;if(typeof z.then=="function")return ot(q,Mu(z),Q);if(z.$$typeof===P)return ot(q,_u(q,z),Q);Vu(q,z)}return null}function K(q,z,Q,it){var wt=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return wt!==null?null:T(q,z,""+Q,it);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return Q.key===wt?V(q,z,Q,it):null;case O:return Q.key===wt?$(q,z,Q,it):null;case R:return wt=Q._init,Q=wt(Q._payload),K(q,z,Q,it)}if(Ot(Q)||U(Q))return wt!==null?null:nt(q,z,Q,it,null);if(typeof Q.then=="function")return K(q,z,Mu(Q),it);if(Q.$$typeof===P)return K(q,z,_u(q,Q),it);Vu(q,Q)}return null}function W(q,z,Q,it,wt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return q=q.get(Q)||null,T(z,q,""+it,wt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case A:return q=q.get(it.key===null?Q:it.key)||null,V(z,q,it,wt);case O:return q=q.get(it.key===null?Q:it.key)||null,$(z,q,it,wt);case R:var Zt=it._init;return it=Zt(it._payload),W(q,z,Q,it,wt)}if(Ot(it)||U(it))return q=q.get(Q)||null,nt(z,q,it,wt,null);if(typeof it.then=="function")return W(q,z,Q,Mu(it),wt);if(it.$$typeof===P)return W(q,z,Q,_u(z,it),wt);Vu(z,it)}return null}function Pt(q,z,Q,it){for(var wt=null,Zt=null,Nt=z,zt=z=0,on=null;Nt!==null&&zt<Q.length;zt++){Nt.index>zt?(on=Nt,Nt=null):on=Nt.sibling;var oe=K(q,Nt,Q[zt],it);if(oe===null){Nt===null&&(Nt=on);break}t&&Nt&&oe.alternate===null&&n(q,Nt),z=d(oe,z,zt),Zt===null?wt=oe:Zt.sibling=oe,Zt=oe,Nt=on}if(zt===Q.length)return s(q,Nt),ue&&qs(q,zt),wt;if(Nt===null){for(;zt<Q.length;zt++)Nt=ot(q,Q[zt],it),Nt!==null&&(z=d(Nt,z,zt),Zt===null?wt=Nt:Zt.sibling=Nt,Zt=Nt);return ue&&qs(q,zt),wt}for(Nt=l(Nt);zt<Q.length;zt++)on=W(Nt,q,zt,Q[zt],it),on!==null&&(t&&on.alternate!==null&&Nt.delete(on.key===null?zt:on.key),z=d(on,z,zt),Zt===null?wt=on:Zt.sibling=on,Zt=on);return t&&Nt.forEach(function(as){return n(q,as)}),ue&&qs(q,zt),wt}function Ut(q,z,Q,it){if(Q==null)throw Error(a(151));for(var wt=null,Zt=null,Nt=z,zt=z=0,on=null,oe=Q.next();Nt!==null&&!oe.done;zt++,oe=Q.next()){Nt.index>zt?(on=Nt,Nt=null):on=Nt.sibling;var as=K(q,Nt,oe.value,it);if(as===null){Nt===null&&(Nt=on);break}t&&Nt&&as.alternate===null&&n(q,Nt),z=d(as,z,zt),Zt===null?wt=as:Zt.sibling=as,Zt=as,Nt=on}if(oe.done)return s(q,Nt),ue&&qs(q,zt),wt;if(Nt===null){for(;!oe.done;zt++,oe=Q.next())oe=ot(q,oe.value,it),oe!==null&&(z=d(oe,z,zt),Zt===null?wt=oe:Zt.sibling=oe,Zt=oe);return ue&&qs(q,zt),wt}for(Nt=l(Nt);!oe.done;zt++,oe=Q.next())oe=W(Nt,q,zt,oe.value,it),oe!==null&&(t&&oe.alternate!==null&&Nt.delete(oe.key===null?zt:oe.key),z=d(oe,z,zt),Zt===null?wt=oe:Zt.sibling=oe,Zt=oe);return t&&Nt.forEach(function(sb){return n(q,sb)}),ue&&qs(q,zt),wt}function ve(q,z,Q,it){if(typeof Q=="object"&&Q!==null&&Q.type===N&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:t:{for(var wt=Q.key;z!==null;){if(z.key===wt){if(wt=Q.type,wt===N){if(z.tag===7){s(q,z.sibling),it=h(z,Q.props.children),it.return=q,q=it;break t}}else if(z.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===R&&cg(wt)===z.type){s(q,z.sibling),it=h(z,Q.props),$l(it,Q),it.return=q,q=it;break t}s(q,z);break}else n(q,z);z=z.sibling}Q.type===N?(it=Ps(Q.props.children,q.mode,it,Q.key),it.return=q,q=it):(it=pu(Q.type,Q.key,Q.props,null,q.mode,it),$l(it,Q),it.return=q,q=it)}return E(q);case O:t:{for(wt=Q.key;z!==null;){if(z.key===wt)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){s(q,z.sibling),it=h(z,Q.children||[]),it.return=q,q=it;break t}else{s(q,z);break}else n(q,z);z=z.sibling}it=Rh(Q,q.mode,it),it.return=q,q=it}return E(q);case R:return wt=Q._init,Q=wt(Q._payload),ve(q,z,Q,it)}if(Ot(Q))return Pt(q,z,Q,it);if(U(Q)){if(wt=U(Q),typeof wt!="function")throw Error(a(150));return Q=wt.call(Q),Ut(q,z,Q,it)}if(typeof Q.then=="function")return ve(q,z,Mu(Q),it);if(Q.$$typeof===P)return ve(q,z,_u(q,Q),it);Vu(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,z!==null&&z.tag===6?(s(q,z.sibling),it=h(z,Q),it.return=q,q=it):(s(q,z),it=wh(Q,q.mode,it),it.return=q,q=it),E(q)):s(q,z)}return function(q,z,Q,it){try{Ql=0;var wt=ve(q,z,Q,it);return Va=null,wt}catch(Nt){if(Nt===kl||Nt===bu)throw Nt;var Zt=Gn(29,Nt,null,q.mode);return Zt.lanes=it,Zt.return=q,Zt}finally{}}}var Oa=hg(!0),fg=hg(!1),mi=at(null),Fi=null;function Fr(t){var n=t.alternate;ft(Je,Je.current&1),ft(mi,t),Fi===null&&(n===null||Ia.current!==null||n.memoizedState!==null)&&(Fi=t)}function dg(t){if(t.tag===22){if(ft(Je,Je.current),ft(mi,t),Fi===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Fi=t)}}else Qr()}function Qr(){ft(Je,Je.current),ft(mi,mi.current)}function _r(t){gt(mi),Fi===t&&(Fi=null),gt(Je)}var Je=at(0);function Ou(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Wf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function lf(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:b({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var of={enqueueSetState:function(t,n,s){t=t._reactInternals;var l=Yn(),h=qr(l);h.payload=n,s!=null&&(h.callback=s),n=Hr(t,h,l),n!==null&&(Kn(n,t,l),zl(n,t,l))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=Yn(),h=qr(l);h.tag=1,h.payload=n,s!=null&&(h.callback=s),n=Hr(t,h,l),n!==null&&(Kn(n,t,l),zl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=Yn(),l=qr(s);l.tag=2,n!=null&&(l.callback=n),n=Hr(t,l,s),n!==null&&(Kn(n,t,s),zl(n,t,s))}};function mg(t,n,s,l,h,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):n.prototype&&n.prototype.isPureReactComponent?!Il(s,l)||!Il(h,d):!0}function pg(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&of.enqueueReplaceState(n,n.state,null)}function Ks(t,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(t=t.defaultProps){s===n&&(s=b({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}var ju=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function gg(t){ju(t)}function yg(t){console.error(t)}function vg(t){ju(t)}function Lu(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function _g(t,n,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function uf(t,n,s){return s=qr(s),s.tag=3,s.payload={element:null},s.callback=function(){Lu(t,n)},s}function Eg(t){return t=qr(t),t.tag=3,t}function bg(t,n,s,l){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){_g(n,s,l)}}var E=s.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){_g(n,s,l),typeof h!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function sE(t,n,s,l,h){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&Ol(n,s,h,!0),s=mi.current,s!==null){switch(s.tag){case 13:return Fi===null?Vf():s.alternate===null&&Ue===0&&(Ue=3),s.flags&=-257,s.flags|=65536,s.lanes=h,l===kh?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),jf(t,l,h)),!1;case 22:return s.flags|=65536,l===kh?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),jf(t,l,h)),!1}throw Error(a(435,s.tag))}return jf(t,l,h),Vf(),!1}if(ue)return n=mi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Dh&&(t=Error(a(422),{cause:l}),Vl(ci(t,s)))):(l!==Dh&&(n=Error(a(423),{cause:l}),Vl(ci(n,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ci(l,s),h=uf(t.stateNode,l,h),Ph(t,h),Ue!==4&&(Ue=2)),!1;var d=Error(a(520),{cause:l});if(d=ci(d,s),to===null?to=[d]:to.push(d),Ue!==4&&(Ue=2),n===null)return!0;l=ci(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=uf(s.stateNode,l,t),Ph(s,t),!1;case 1:if(n=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Zr===null||!Zr.has(d))))return s.flags|=65536,h&=-h,s.lanes|=h,h=Eg(h),bg(h,t,s,l),Ph(s,h),!1}s=s.return}while(s!==null);return!1}var Sg=Error(a(461)),an=!1;function mn(t,n,s,l){n.child=t===null?fg(n,null,s,l):Oa(n,t.child,s,l)}function Tg(t,n,s,l,h){s=s.render;var d=n.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return Qs(n),l=Fh(t,n,s,E,d,h),T=Qh(),t!==null&&!an?($h(t,n,h),Er(t,n,h)):(ue&&T&&Ch(n),n.flags|=1,mn(t,n,l,h),n.child)}function xg(t,n,s,l,h){if(t===null){var d=s.type;return typeof d=="function"&&!Ah(d)&&d.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=d,Ag(t,n,d,l,h)):(t=pu(s.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!yf(t,h)){var E=d.memoizedProps;if(s=s.compare,s=s!==null?s:Il,s(E,l)&&t.ref===n.ref)return Er(t,n,h)}return n.flags|=1,t=dr(d,l),t.ref=n.ref,t.return=n,n.child=t}function Ag(t,n,s,l,h){if(t!==null){var d=t.memoizedProps;if(Il(d,l)&&t.ref===n.ref)if(an=!1,n.pendingProps=l=d,yf(t,h))(t.flags&131072)!==0&&(an=!0);else return n.lanes=t.lanes,Er(t,n,h)}return cf(t,n,s,l,h)}function wg(t,n,s){var l=n.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=d!==null?d.baseLanes|s:s,t!==null){for(h=n.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;n.childLanes=d&~l}else n.childLanes=0,n.child=null;return Rg(t,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eu(n,d!==null?d.cachePool:null),d!==null?Ap(n,d):qh(),dg(n);else return n.lanes=n.childLanes=536870912,Rg(t,n,d!==null?d.baseLanes|s:s,s)}else d!==null?(Eu(n,d.cachePool),Ap(n,d),Qr(),n.memoizedState=null):(t!==null&&Eu(n,null),qh(),Qr());return mn(t,n,h,s),n.child}function Rg(t,n,s,l){var h=Lh();return h=h===null?null:{parent:Ze._currentValue,pool:h},n.memoizedState={baseLanes:s,cachePool:h},t!==null&&Eu(n,null),qh(),dg(n),t!==null&&Ol(t,n,l,!0),null}function ku(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function cf(t,n,s,l,h){return Qs(n),s=Fh(t,n,s,l,void 0,h),l=Qh(),t!==null&&!an?($h(t,n,h),Er(t,n,h)):(ue&&l&&Ch(n),n.flags|=1,mn(t,n,s,h),n.child)}function Cg(t,n,s,l,h,d){return Qs(n),n.updateQueue=null,s=Rp(n,l,s,h),wp(t),l=Qh(),t!==null&&!an?($h(t,n,d),Er(t,n,d)):(ue&&l&&Ch(n),n.flags|=1,mn(t,n,s,d),n.child)}function Ig(t,n,s,l,h){if(Qs(n),n.stateNode===null){var d=xa,E=s.contextType;typeof E=="object"&&E!==null&&(d=bn(E)),d=new s(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=of,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},Uh(n),E=s.contextType,d.context=typeof E=="object"&&E!==null?bn(E):xa,d.state=n.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(lf(n,s,E,l),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&of.enqueueReplaceState(d,d.state,null),Bl(n,l,d,h),Pl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){d=n.stateNode;var T=n.memoizedProps,V=Ks(s,T);d.props=V;var $=d.context,nt=s.contextType;E=xa,typeof nt=="object"&&nt!==null&&(E=bn(nt));var ot=s.getDerivedStateFromProps;nt=typeof ot=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,nt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||$!==E)&&pg(n,d,l,E),Br=!1;var K=n.memoizedState;d.state=K,Bl(n,l,d,h),Pl(),$=n.memoizedState,T||K!==$||Br?(typeof ot=="function"&&(lf(n,s,ot,l),$=n.memoizedState),(V=Br||mg(n,s,V,l,K,$,E))?(nt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=$),d.props=l,d.state=$,d.context=E,l=V):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,zh(t,n),E=n.memoizedProps,nt=Ks(s,E),d.props=nt,ot=n.pendingProps,K=d.context,$=s.contextType,V=xa,typeof $=="object"&&$!==null&&(V=bn($)),T=s.getDerivedStateFromProps,($=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ot||K!==V)&&pg(n,d,l,V),Br=!1,K=n.memoizedState,d.state=K,Bl(n,l,d,h),Pl();var W=n.memoizedState;E!==ot||K!==W||Br||t!==null&&t.dependencies!==null&&vu(t.dependencies)?(typeof T=="function"&&(lf(n,s,T,l),W=n.memoizedState),(nt=Br||mg(n,s,nt,l,K,W,V)||t!==null&&t.dependencies!==null&&vu(t.dependencies))?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,W,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,W,V)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=W),d.props=l,d.state=W,d.context=V,l=nt):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(n.flags|=1024),l=!1)}return d=l,ku(t,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&l?(n.child=Oa(n,t.child,null,h),n.child=Oa(n,null,s,h)):mn(t,n,s,h),n.memoizedState=d.state,t=n.child):t=Er(t,n,h),t}function Dg(t,n,s,l){return Ml(),n.flags|=256,mn(t,n,s,l),n.child}var hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(t){return{baseLanes:t,cachePool:yp()}}function df(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=pi),t}function Ng(t,n,s){var l=n.pendingProps,h=!1,d=(n.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(Je.current&2)!==0),E&&(h=!0,n.flags&=-129),E=(n.flags&32)!==0,n.flags&=-33,t===null){if(ue){if(h?Fr(n):Qr(),ue){var T=ke,V;if(V=T){t:{for(V=T,T=Gi;V.nodeType!==8;){if(!T){T=null;break t}if(V=Ii(V.nextSibling),V===null){T=null;break t}}T=V}T!==null?(n.memoizedState={dehydrated:T,treeContext:Bs!==null?{id:mr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},V=Gn(18,null,null,0),V.stateNode=T,V.return=n,n.child=V,Nn=n,ke=null,V=!0):V=!1}V||Gs(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Wf(T)?n.lanes=32:n.lanes=536870912,null;_r(n)}return T=l.children,l=l.fallback,h?(Qr(),h=n.mode,T=Uu({mode:"hidden",children:T},h),l=Ps(l,h,s,null),T.return=n,l.return=n,T.sibling=l,n.child=T,h=n.child,h.memoizedState=ff(s),h.childLanes=df(t,E,s),n.memoizedState=hf,l):(Fr(n),mf(n,T))}if(V=t.memoizedState,V!==null&&(T=V.dehydrated,T!==null)){if(d)n.flags&256?(Fr(n),n.flags&=-257,n=pf(t,n,s)):n.memoizedState!==null?(Qr(),n.child=t.child,n.flags|=128,n=null):(Qr(),h=l.fallback,T=n.mode,l=Uu({mode:"visible",children:l.children},T),h=Ps(h,T,s,null),h.flags|=2,l.return=n,h.return=n,l.sibling=h,n.child=l,Oa(n,t.child,null,s),l=n.child,l.memoizedState=ff(s),l.childLanes=df(t,E,s),n.memoizedState=hf,n=h);else if(Fr(n),Wf(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var $=E.dgst;E=$,l=Error(a(419)),l.stack="",l.digest=E,Vl({value:l,source:null,stack:null}),n=pf(t,n,s)}else if(an||Ol(t,n,s,!1),E=(s&t.childLanes)!==0,an||E){if(E=Ae,E!==null&&(l=s&-s,l=(l&42)!==0?1:On(l),l=(l&(E.suspendedLanes|s))!==0?0:l,l!==0&&l!==V.retryLane))throw V.retryLane=l,Ta(t,l),Kn(E,t,l),Sg;T.data==="$?"||Vf(),n=pf(t,n,s)}else T.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=V.treeContext,ke=Ii(T.nextSibling),Nn=n,ue=!0,Hs=null,Gi=!1,t!==null&&(fi[di++]=mr,fi[di++]=pr,fi[di++]=Bs,mr=t.id,pr=t.overflow,Bs=n),n=mf(n,l.children),n.flags|=4096);return n}return h?(Qr(),h=l.fallback,T=n.mode,V=t.child,$=V.sibling,l=dr(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,$!==null?h=dr($,h):(h=Ps(h,T,s,null),h.flags|=2),h.return=n,l.return=n,l.sibling=h,n.child=l,l=h,h=n.child,T=t.child.memoizedState,T===null?T=ff(s):(V=T.cachePool,V!==null?($=Ze._currentValue,V=V.parent!==$?{parent:$,pool:$}:V):V=yp(),T={baseLanes:T.baseLanes|s,cachePool:V}),h.memoizedState=T,h.childLanes=df(t,E,s),n.memoizedState=hf,l):(Fr(n),s=t.child,t=s.sibling,s=dr(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,t!==null&&(E=n.deletions,E===null?(n.deletions=[t],n.flags|=16):E.push(t)),n.child=s,n.memoizedState=null,s)}function mf(t,n){return n=Uu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Uu(t,n){return t=Gn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function pf(t,n,s){return Oa(n,t.child,null,s),t=mf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Mg(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Mh(t.return,n,s)}function gf(t,n,s,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:h}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=h)}function Vg(t,n,s){var l=n.pendingProps,h=l.revealOrder,d=l.tail;if(mn(t,n,l.children,s),l=Je.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mg(t,s,n);else if(t.tag===19)Mg(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ft(Je,l),h){case"forwards":for(s=n.child,h=null;s!==null;)t=s.alternate,t!==null&&Ou(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),gf(n,!1,h,s,d);break;case"backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Ou(t)===null){n.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}gf(n,!0,s,null,d);break;case"together":gf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Er(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Xr|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(Ol(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=dr(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=dr(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function yf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&vu(t)))}function aE(t,n,s){switch(n.tag){case 3:Et(n,n.stateNode.containerInfo),Pr(n,Ze,t.memoizedState.cache),Ml();break;case 27:case 5:Kt(n);break;case 4:Et(n,n.stateNode.containerInfo);break;case 10:Pr(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Fr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Ng(t,n,s):(Fr(n),t=Er(t,n,s),t!==null?t.sibling:null);Fr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(Ol(t,n,s,!1),l=(s&n.childLanes)!==0),h){if(l)return Vg(t,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ft(Je,Je.current),l)break;return null;case 22:case 23:return n.lanes=0,wg(t,n,s);case 24:Pr(n,Ze,t.memoizedState.cache)}return Er(t,n,s)}function Og(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)an=!0;else{if(!yf(t,s)&&(n.flags&128)===0)return an=!1,aE(t,n,s);an=(t.flags&131072)!==0}else an=!1,ue&&(n.flags&1048576)!==0&&cp(n,yu,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,h=l._init;if(l=h(l._payload),n.type=l,typeof l=="function")Ah(l)?(t=Ks(l,t),n.tag=1,n=Ig(null,n,l,t,s)):(n.tag=0,n=cf(null,n,l,t,s));else{if(l!=null){if(h=l.$$typeof,h===lt){n.tag=11,n=Tg(null,n,l,t,s);break t}else if(h===j){n.tag=14,n=xg(null,n,l,t,s);break t}}throw n=It(l)||l,Error(a(306,n,""))}}return n;case 0:return cf(t,n,n.type,n.pendingProps,s);case 1:return l=n.type,h=Ks(l,n.pendingProps),Ig(t,n,l,h,s);case 3:t:{if(Et(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var d=n.memoizedState;h=d.element,zh(t,n),Bl(n,l,null,s);var E=n.memoizedState;if(l=E.cache,Pr(n,Ze,l),l!==d.cache&&Vh(n,[Ze],s,!0),Pl(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Dg(t,n,l,s);break t}else if(l!==h){h=ci(Error(a(424)),n),Vl(h),n=Dg(t,n,l,s);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ke=Ii(t.firstChild),Nn=n,ue=!0,Hs=null,Gi=!0,s=fg(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ml(),l===h){n=Er(t,n,s);break t}mn(t,n,l,s)}n=n.child}return n;case 26:return ku(t,n),t===null?(s=Uy(n.type,null,n.pendingProps,null))?n.memoizedState=s:ue||(s=n.type,t=n.pendingProps,l=Zu(X.current).createElement(s),l[Le]=n,l[Ne]=t,gn(l,s,t),Me(l),n.stateNode=l):n.memoizedState=Uy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Kt(n),t===null&&ue&&(l=n.stateNode=jy(n.type,n.pendingProps,X.current),Nn=n,Gi=!0,h=ke,es(n.type)?(Xf=h,ke=Ii(l.firstChild)):ke=h),mn(t,n,n.pendingProps.children,s),ku(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ue&&((h=l=ke)&&(l=OE(l,n.type,n.pendingProps,Gi),l!==null?(n.stateNode=l,Nn=n,ke=Ii(l.firstChild),Gi=!1,h=!0):h=!1),h||Gs(n)),Kt(n),h=n.type,d=n.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,$f(h,d)?l=null:E!==null&&$f(h,E)&&(n.flags|=32),n.memoizedState!==null&&(h=Fh(t,n,Z1,null,null,s),uo._currentValue=h),ku(t,n),mn(t,n,l,s),n.child;case 6:return t===null&&ue&&((t=s=ke)&&(s=jE(s,n.pendingProps,Gi),s!==null?(n.stateNode=s,Nn=n,ke=null,t=!0):t=!1),t||Gs(n)),null;case 13:return Ng(t,n,s);case 4:return Et(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Oa(n,null,l,s):mn(t,n,l,s),n.child;case 11:return Tg(t,n,n.type,n.pendingProps,s);case 7:return mn(t,n,n.pendingProps,s),n.child;case 8:return mn(t,n,n.pendingProps.children,s),n.child;case 12:return mn(t,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,Pr(n,n.type,l.value),mn(t,n,l.children,s),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Qs(n),h=bn(h),l=l(h),n.flags|=1,mn(t,n,l,s),n.child;case 14:return xg(t,n,n.type,n.pendingProps,s);case 15:return Ag(t,n,n.type,n.pendingProps,s);case 19:return Vg(t,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},t===null?(s=Uu(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=dr(t.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return wg(t,n,s);case 24:return Qs(n),l=bn(Ze),t===null?(h=Lh(),h===null&&(h=Ae,d=Oh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=s),h=d),n.memoizedState={parent:l,cache:h},Uh(n),Pr(n,Ze,h)):((t.lanes&s)!==0&&(zh(t,n),Bl(n,null,null,s),Pl()),h=t.memoizedState,d=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Pr(n,Ze,l)):(l=d.cache,Pr(n,Ze,l),l!==h.cache&&Vh(n,[Ze],s,!0))),mn(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function br(t){t.flags|=4}function jg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hy(n)){if(n=mi.current,n!==null&&((se&4194048)===se?Fi!==null:(se&62914560)!==se&&(se&536870912)===0||n!==Fi))throw Ul=kh,vp;t.flags|=8192}}function zu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?bs():536870912,t.lanes|=n,Ua|=n)}function Yl(t,n){if(!ue)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ve(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function lE(t,n,s){var l=n.pendingProps;switch(Ih(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(n),null;case 1:return Ve(n),null;case 3:return s=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),yr(Ze),Lt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Nl(n)?br(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dp())),Ve(n),null;case 26:return s=n.memoizedState,t===null?(br(n),s!==null?(Ve(n),jg(n,s)):(Ve(n),n.flags&=-16777217)):s?s!==t.memoizedState?(br(n),Ve(n),jg(n,s)):(Ve(n),n.flags&=-16777217):(t.memoizedProps!==l&&br(n),Ve(n),n.flags&=-16777217),null;case 27:qt(n),s=X.current;var h=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&br(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}t=Rt.current,Nl(n)?hp(n):(t=jy(h,l,s),n.stateNode=t,br(n))}return Ve(n),null;case 5:if(qt(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&br(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ve(n),null}if(t=Rt.current,Nl(n))hp(n);else{switch(h=Zu(X.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(s,{is:l.is}):h.createElement(s)}}t[Le]=n,t[Ne]=l;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=t;t:switch(gn(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&br(n)}}return Ve(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&br(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=X.current,Nl(n)){if(t=n.stateNode,s=n.memoizedProps,l=null,h=Nn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Le]=n,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Cy(t.nodeValue,s)),t||Gs(n)}else t=Zu(t).createTextNode(l),t[Le]=n,n.stateNode=t}return Ve(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Nl(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Le]=n}else Ml(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),h=!1}else h=dp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(_r(n),n):(_r(n),null)}if(_r(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),zu(n,n.updateQueue),Ve(n),null;case 4:return Lt(),t===null&&qf(n.stateNode.containerInfo),Ve(n),null;case 10:return yr(n.type),Ve(n),null;case 19:if(gt(Je),h=n.memoizedState,h===null)return Ve(n),null;if(l=(n.flags&128)!==0,d=h.rendering,d===null)if(l)Yl(h,!1);else{if(Ue!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Ou(t),d!==null){for(n.flags|=128,Yl(h,!1),t=d.updateQueue,n.updateQueue=t,zu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)up(s,t),s=s.sibling;return ft(Je,Je.current&1|2),n.child}t=t.sibling}h.tail!==null&&$t()>qu&&(n.flags|=128,l=!0,Yl(h,!1),n.lanes=4194304)}else{if(!l)if(t=Ou(d),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,zu(n,t),Yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!ue)return Ve(n),null}else 2*$t()-h.renderingStartTime>qu&&s!==536870912&&(n.flags|=128,l=!0,Yl(h,!1),n.lanes=4194304);h.isBackwards?(d.sibling=n.child,n.child=d):(t=h.last,t!==null?t.sibling=d:n.child=d,h.last=d)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=$t(),n.sibling=null,t=Je.current,ft(Je,l?t&1|2:t&1),n):(Ve(n),null);case 22:case 23:return _r(n),Hh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(Ve(n),n.subtreeFlags&6&&(n.flags|=8192)):Ve(n),s=n.updateQueue,s!==null&&zu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),t!==null&&gt($s),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),yr(Ze),Ve(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function oE(t,n){switch(Ih(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return yr(Ze),Lt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return qt(n),null;case 13:if(_r(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Ml()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return gt(Je),null;case 4:return Lt(),null;case 10:return yr(n.type),null;case 22:case 23:return _r(n),Hh(),t!==null&&gt($s),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return yr(Ze),null;case 25:return null;default:return null}}function Lg(t,n){switch(Ih(n),n.tag){case 3:yr(Ze),Lt();break;case 26:case 27:case 5:qt(n);break;case 4:Lt();break;case 13:_r(n);break;case 19:gt(Je);break;case 10:yr(n.type);break;case 22:case 23:_r(n),Hh(),t!==null&&gt($s);break;case 24:yr(Ze)}}function Kl(t,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&t)===t){l=void 0;var d=s.create,E=s.inst;l=d(),E.destroy=l}s=s.next}while(s!==h)}}catch(T){Te(n,n.return,T)}}function $r(t,n,s){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,h=n;var V=s,$=T;try{$()}catch(nt){Te(h,V,nt)}}}l=l.next}while(l!==d)}}catch(nt){Te(n,n.return,nt)}}function kg(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{xp(n,s)}catch(l){Te(t,t.return,l)}}}function Ug(t,n,s){s.props=Ks(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Te(t,n,l)}}function Wl(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(h){Te(t,n,h)}}function Qi(t,n){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(h){Te(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Te(t,n,h)}else s.current=null}function zg(t){var n=t.type,s=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(h){Te(t,t.return,h)}}function vf(t,n,s){try{var l=t.stateNode;IE(l,t.type,s,n),l[Ne]=n}catch(h){Te(t,t.return,h)}}function Pg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&es(t.type)||t.tag===4}function _f(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Pg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&es(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Xu));else if(l!==4&&(l===27&&es(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(Ef(t,n,s),t=t.sibling;t!==null;)Ef(t,n,s),t=t.sibling}function Pu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(l===27&&es(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Pu(t,n,s),t=t.sibling;t!==null;)Pu(t,n,s),t=t.sibling}function Bg(t){var n=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);gn(n,l,s),n[Le]=t,n[Ne]=s}catch(d){Te(t,t.return,d)}}var Sr=!1,Pe=!1,bf=!1,qg=typeof WeakSet=="function"?WeakSet:Set,ln=null;function uE(t,n){if(t=t.containerInfo,Ff=rc,t=Jm(t),vh(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break t}var E=0,T=-1,V=-1,$=0,nt=0,ot=t,K=null;e:for(;;){for(var W;ot!==s||h!==0&&ot.nodeType!==3||(T=E+h),ot!==d||l!==0&&ot.nodeType!==3||(V=E+l),ot.nodeType===3&&(E+=ot.nodeValue.length),(W=ot.firstChild)!==null;)K=ot,ot=W;for(;;){if(ot===t)break e;if(K===s&&++$===h&&(T=E),K===d&&++nt===l&&(V=E),(W=ot.nextSibling)!==null)break;ot=K,K=ot.parentNode}ot=W}s=T===-1||V===-1?null:{start:T,end:V}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qf={focusedElem:t,selectionRange:s},rc=!1,ln=n;ln!==null;)if(n=ln,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,ln=t;else for(;ln!==null;){switch(n=ln,d=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=n,h=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var Pt=Ks(s.type,h,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Pt,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ut){Te(s,s.return,Ut)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Kf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Kf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,ln=t;break}ln=n.return}}function Hg(t,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Yr(t,s),l&4&&Kl(5,s);break;case 1:if(Yr(t,s),l&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(E){Te(s,s.return,E)}else{var h=Ks(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(E){Te(s,s.return,E)}}l&64&&kg(s),l&512&&Wl(s,s.return);break;case 3:if(Yr(t,s),l&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{xp(t,n)}catch(E){Te(s,s.return,E)}}break;case 27:n===null&&l&4&&Bg(s);case 26:case 5:Yr(t,s),n===null&&l&4&&zg(s),l&512&&Wl(s,s.return);break;case 12:Yr(t,s);break;case 13:Yr(t,s),l&4&&Qg(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=vE.bind(null,s),LE(t,s))));break;case 22:if(l=s.memoizedState!==null||Sr,!l){n=n!==null&&n.memoizedState!==null||Pe,h=Sr;var d=Pe;Sr=l,(Pe=n)&&!d?Kr(t,s,(s.subtreeFlags&8772)!==0):Yr(t,s),Sr=h,Pe=d}break;case 30:break;default:Yr(t,s)}}function Gg(t){var n=t.alternate;n!==null&&(t.alternate=null,Gg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Li(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ce=null,Un=!1;function Tr(t,n,s){for(s=s.child;s!==null;)Fg(t,n,s),s=s.sibling}function Fg(t,n,s){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(be,s)}catch{}switch(s.tag){case 26:Pe||Qi(s,n),Tr(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Pe||Qi(s,n);var l=Ce,h=Un;es(s.type)&&(Ce=s.stateNode,Un=!1),Tr(t,n,s),so(s.stateNode),Ce=l,Un=h;break;case 5:Pe||Qi(s,n);case 6:if(l=Ce,h=Un,Ce=null,Tr(t,n,s),Ce=l,Un=h,Ce!==null)if(Un)try{(Ce.nodeType===9?Ce.body:Ce.nodeName==="HTML"?Ce.ownerDocument.body:Ce).removeChild(s.stateNode)}catch(d){Te(s,n,d)}else try{Ce.removeChild(s.stateNode)}catch(d){Te(s,n,d)}break;case 18:Ce!==null&&(Un?(t=Ce,Vy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),mo(t)):Vy(Ce,s.stateNode));break;case 4:l=Ce,h=Un,Ce=s.stateNode.containerInfo,Un=!0,Tr(t,n,s),Ce=l,Un=h;break;case 0:case 11:case 14:case 15:Pe||$r(2,s,n),Pe||$r(4,s,n),Tr(t,n,s);break;case 1:Pe||(Qi(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Ug(s,n,l)),Tr(t,n,s);break;case 21:Tr(t,n,s);break;case 22:Pe=(l=Pe)||s.memoizedState!==null,Tr(t,n,s),Pe=l;break;default:Tr(t,n,s)}}function Qg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{mo(t)}catch(s){Te(n,n.return,s)}}function cE(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new qg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new qg),n;default:throw Error(a(435,t.tag))}}function Sf(t,n){var s=cE(t);n.forEach(function(l){var h=_E.bind(null,t,l);s.has(l)||(s.add(l),l.then(h,h))})}function Fn(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var h=s[l],d=t,E=n,T=E;t:for(;T!==null;){switch(T.tag){case 27:if(es(T.type)){Ce=T.stateNode,Un=!1;break t}break;case 5:Ce=T.stateNode,Un=!1;break t;case 3:case 4:Ce=T.stateNode.containerInfo,Un=!0;break t}T=T.return}if(Ce===null)throw Error(a(160));Fg(d,E,h),Ce=null,Un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)$g(n,t),n=n.sibling}var Ci=null;function $g(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fn(n,t),Qn(t),l&4&&($r(3,t,t.return),Kl(3,t),$r(5,t,t.return));break;case 1:Fn(n,t),Qn(t),l&512&&(Pe||s===null||Qi(s,s.return)),l&64&&Sr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var h=Ci;if(Fn(n,t),Qn(t),l&512&&(Pe||s===null||Qi(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){t:{l=t.type,s=t.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ji]||d[Le]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),gn(d,l,s),d[Le]=t,Me(d),l=d;break t;case"link":var E=By("link","href",h).get(l+(s.href||""));if(E){for(var T=0;T<E.length;T++)if(d=E[T],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){E.splice(T,1);break e}}d=h.createElement(l),gn(d,l,s),h.head.appendChild(d);break;case"meta":if(E=By("meta","content",h).get(l+(s.content||""))){for(T=0;T<E.length;T++)if(d=E[T],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){E.splice(T,1);break e}}d=h.createElement(l),gn(d,l,s),h.head.appendChild(d);break;default:throw Error(a(468,l))}d[Le]=t,Me(d),l=d}t.stateNode=l}else qy(h,t.type,t.stateNode);else t.stateNode=Py(h,l,t.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?qy(h,t.type,t.stateNode):Py(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&vf(t,t.memoizedProps,s.memoizedProps)}break;case 27:Fn(n,t),Qn(t),l&512&&(Pe||s===null||Qi(s,s.return)),s!==null&&l&4&&vf(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Fn(n,t),Qn(t),l&512&&(Pe||s===null||Qi(s,s.return)),t.flags&32){h=t.stateNode;try{ai(h,"")}catch(W){Te(t,t.return,W)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,vf(t,h,s!==null?s.memoizedProps:h)),l&1024&&(bf=!0);break;case 6:if(Fn(n,t),Qn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(W){Te(t,t.return,W)}}break;case 3:if(ec=null,h=Ci,Ci=Ju(n.containerInfo),Fn(n,t),Ci=h,Qn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{mo(n.containerInfo)}catch(W){Te(t,t.return,W)}bf&&(bf=!1,Yg(t));break;case 4:l=Ci,Ci=Ju(t.stateNode.containerInfo),Fn(n,t),Qn(t),Ci=l;break;case 12:Fn(n,t),Qn(t);break;case 13:Fn(n,t),Qn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Cf=$t()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 22:h=t.memoizedState!==null;var V=s!==null&&s.memoizedState!==null,$=Sr,nt=Pe;if(Sr=$||h,Pe=nt||V,Fn(n,t),Pe=nt,Sr=$,Qn(t),l&8192)t:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(s===null||V||Sr||Pe||Ws(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){V=s=n;try{if(d=V.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=V.stateNode;var ot=V.memoizedProps.style,K=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(W){Te(V,V.return,W)}}}else if(n.tag===6){if(s===null){V=n;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(W){Te(V,V.return,W)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Sf(t,s))));break;case 19:Fn(n,t),Qn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 30:break;case 21:break;default:Fn(n,t),Qn(t)}}function Qn(t){var n=t.flags;if(n&2){try{for(var s,l=t.return;l!==null;){if(Pg(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,d=_f(t);Pu(t,d,h);break;case 5:var E=s.stateNode;s.flags&32&&(ai(E,""),s.flags&=-33);var T=_f(t);Pu(t,T,E);break;case 3:case 4:var V=s.stateNode.containerInfo,$=_f(t);Ef(t,$,V);break;default:throw Error(a(161))}}catch(nt){Te(t,t.return,nt)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Yg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Yg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Yr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Hg(t,n.alternate,n),n=n.sibling}function Ws(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:$r(4,n,n.return),Ws(n);break;case 1:Qi(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Ug(n,n.return,s),Ws(n);break;case 27:so(n.stateNode);case 26:case 5:Qi(n,n.return),Ws(n);break;case 22:n.memoizedState===null&&Ws(n);break;case 30:Ws(n);break;default:Ws(n)}t=t.sibling}}function Kr(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,d=n,E=d.flags;switch(d.tag){case 0:case 11:case 15:Kr(h,d,s),Kl(4,d);break;case 1:if(Kr(h,d,s),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){Te(l,l.return,$)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)Tp(V[h],T)}catch($){Te(l,l.return,$)}}s&&E&64&&kg(d),Wl(d,d.return);break;case 27:Bg(d);case 26:case 5:Kr(h,d,s),s&&l===null&&E&4&&zg(d),Wl(d,d.return);break;case 12:Kr(h,d,s);break;case 13:Kr(h,d,s),s&&E&4&&Qg(h,d);break;case 22:d.memoizedState===null&&Kr(h,d,s),Wl(d,d.return);break;case 30:break;default:Kr(h,d,s)}n=n.sibling}}function Tf(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&jl(s))}function xf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&jl(t))}function $i(t,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Kg(t,n,s,l),n=n.sibling}function Kg(t,n,s,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:$i(t,n,s,l),h&2048&&Kl(9,n);break;case 1:$i(t,n,s,l);break;case 3:$i(t,n,s,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&jl(t)));break;case 12:if(h&2048){$i(t,n,s,l),t=n.stateNode;try{var d=n.memoizedProps,E=d.id,T=d.onPostCommit;typeof T=="function"&&T(E,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){Te(n,n.return,V)}}else $i(t,n,s,l);break;case 13:$i(t,n,s,l);break;case 23:break;case 22:d=n.stateNode,E=n.alternate,n.memoizedState!==null?d._visibility&2?$i(t,n,s,l):Xl(t,n):d._visibility&2?$i(t,n,s,l):(d._visibility|=2,ja(t,n,s,l,(n.subtreeFlags&10256)!==0)),h&2048&&Tf(E,n);break;case 24:$i(t,n,s,l),h&2048&&xf(n.alternate,n);break;default:$i(t,n,s,l)}}function ja(t,n,s,l,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=t,E=n,T=s,V=l,$=E.flags;switch(E.tag){case 0:case 11:case 15:ja(d,E,T,V,h),Kl(8,E);break;case 23:break;case 22:var nt=E.stateNode;E.memoizedState!==null?nt._visibility&2?ja(d,E,T,V,h):Xl(d,E):(nt._visibility|=2,ja(d,E,T,V,h)),h&&$&2048&&Tf(E.alternate,E);break;case 24:ja(d,E,T,V,h),h&&$&2048&&xf(E.alternate,E);break;default:ja(d,E,T,V,h)}n=n.sibling}}function Xl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,l=n,h=l.flags;switch(l.tag){case 22:Xl(s,l),h&2048&&Tf(l.alternate,l);break;case 24:Xl(s,l),h&2048&&xf(l.alternate,l);break;default:Xl(s,l)}n=n.sibling}}var Zl=8192;function La(t){if(t.subtreeFlags&Zl)for(t=t.child;t!==null;)Wg(t),t=t.sibling}function Wg(t){switch(t.tag){case 26:La(t),t.flags&Zl&&t.memoizedState!==null&&KE(Ci,t.memoizedState,t.memoizedProps);break;case 5:La(t);break;case 3:case 4:var n=Ci;Ci=Ju(t.stateNode.containerInfo),La(t),Ci=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Zl,Zl=16777216,La(t),Zl=n):La(t));break;default:La(t)}}function Xg(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Jl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];ln=l,Jg(l,t)}Xg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zg(t),t=t.sibling}function Zg(t){switch(t.tag){case 0:case 11:case 15:Jl(t),t.flags&2048&&$r(9,t,t.return);break;case 3:Jl(t);break;case 12:Jl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Bu(t)):Jl(t);break;default:Jl(t)}}function Bu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];ln=l,Jg(l,t)}Xg(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:$r(8,n,n.return),Bu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Bu(n));break;default:Bu(n)}t=t.sibling}}function Jg(t,n){for(;ln!==null;){var s=ln;switch(s.tag){case 0:case 11:case 15:$r(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,ln=l;else t:for(s=t;ln!==null;){l=ln;var h=l.sibling,d=l.return;if(Gg(l),l===s){ln=null;break t}if(h!==null){h.return=d,ln=h;break t}ln=d}}}var hE={getCacheForType:function(t){var n=bn(Ze),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},fE=typeof WeakMap=="function"?WeakMap:Map,de=0,Ae=null,Jt=null,se=0,me=0,$n=null,Wr=!1,ka=!1,Af=!1,xr=0,Ue=0,Xr=0,Xs=0,wf=0,pi=0,Ua=0,to=null,zn=null,Rf=!1,Cf=0,qu=1/0,Hu=null,Zr=null,pn=0,Jr=null,za=null,Pa=0,If=0,Df=null,ty=null,eo=0,Nf=null;function Yn(){if((de&2)!==0&&se!==0)return se&-se;if(J.T!==null){var t=Ra;return t!==0?t:Uf()}return Oi()}function ey(){pi===0&&(pi=(se&536870912)===0||ue?Or():536870912);var t=mi.current;return t!==null&&(t.flags|=32),pi}function Kn(t,n,s){(t===Ae&&(me===2||me===9)||t.cancelPendingCommit!==null)&&(Ba(t,0),ts(t,se,pi,!1)),hn(t,s),((de&2)===0||t!==Ae)&&(t===Ae&&((de&2)===0&&(Xs|=s),Ue===4&&ts(t,se,pi,!1)),Yi(t))}function ny(t,n,s){if((de&6)!==0)throw Error(a(327));var l=!s&&(n&124)===0&&(n&t.expiredLanes)===0||Jn(t,n),h=l?pE(t,n):Of(t,n,!0),d=l;do{if(h===0){ka&&!l&&ts(t,n,0,!1);break}else{if(s=t.current.alternate,d&&!dE(s)){h=Of(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){n=E;t:{var T=t;h=to;var V=T.current.memoizedState.isDehydrated;if(V&&(Ba(T,E).flags|=256),E=Of(T,E,!1),E!==2){if(Af&&!V){T.errorRecoveryDisabledLanes|=d,Xs|=d,h=4;break t}d=zn,zn=h,d!==null&&(zn===null?zn=d:zn.push.apply(zn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Ba(t,0),ts(t,n,0,!0);break}t:{switch(l=t,d=h,d){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:ts(l,n,pi,!Wr);break t;case 2:zn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=Cf+300-$t(),10<h)){if(ts(l,n,pi,!Wr),sr(l,0,!0)!==0)break t;l.timeoutHandle=Ny(iy.bind(null,l,s,zn,Hu,Rf,n,pi,Xs,Ua,Wr,d,2,-0,0),h);break t}iy(l,s,zn,Hu,Rf,n,pi,Xs,Ua,Wr,d,0,-0,0)}}break}while(!0);Yi(t)}function iy(t,n,s,l,h,d,E,T,V,$,nt,ot,K,W){if(t.timeoutHandle=-1,ot=n.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(oo={stylesheets:null,count:0,unsuspend:YE},Wg(n),ot=WE(),ot!==null)){t.cancelPendingCommit=ot(cy.bind(null,t,n,d,s,l,h,E,T,V,nt,1,K,W)),ts(t,d,E,!$);return}cy(t,n,d,s,l,h,E,T,V)}function dE(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var h=s[l],d=h.getSnapshot;h=h.value;try{if(!Hn(d(),h))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ts(t,n,s,l){n&=~wf,n&=~Xs,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var d=31-cn(h),E=1<<d;l[d]=-1,h&=~E}s!==0&&ei(t,s,n)}function Gu(){return(de&6)===0?(no(0),!1):!0}function Mf(){if(Jt!==null){if(me===0)var t=Jt.return;else t=Jt,gr=Fs=null,Yh(t),Va=null,Ql=0,t=Jt;for(;t!==null;)Lg(t.alternate,t),t=t.return;Jt=null}}function Ba(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,NE(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Mf(),Ae=t,Jt=s=dr(t.current,null),se=n,me=0,$n=null,Wr=!1,ka=Jn(t,n),Af=!1,Ua=pi=wf=Xs=Xr=Ue=0,zn=to=null,Rf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-cn(l),d=1<<h;n|=t[h],l&=~d}return xr=n,fu(),s}function ry(t,n){Wt=null,J.H=Nu,n===kl||n===bu?(n=bp(),me=3):n===vp?(n=bp(),me=4):me=n===Sg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$n=n,Jt===null&&(Ue=1,Lu(t,ci(n,t.current)))}function sy(){var t=J.H;return J.H=Nu,t===null?Nu:t}function ay(){var t=J.A;return J.A=hE,t}function Vf(){Ue=4,Wr||(se&4194048)!==se&&mi.current!==null||(ka=!0),(Xr&134217727)===0&&(Xs&134217727)===0||Ae===null||ts(Ae,se,pi,!1)}function Of(t,n,s){var l=de;de|=2;var h=sy(),d=ay();(Ae!==t||se!==n)&&(Hu=null,Ba(t,n)),n=!1;var E=Ue;t:do try{if(me!==0&&Jt!==null){var T=Jt,V=$n;switch(me){case 8:Mf(),E=6;break t;case 3:case 2:case 9:case 6:mi.current===null&&(n=!0);var $=me;if(me=0,$n=null,qa(t,T,V,$),s&&ka){E=0;break t}break;default:$=me,me=0,$n=null,qa(t,T,V,$)}}mE(),E=Ue;break}catch(nt){ry(t,nt)}while(!0);return n&&t.shellSuspendCounter++,gr=Fs=null,de=l,J.H=h,J.A=d,Jt===null&&(Ae=null,se=0,fu()),E}function mE(){for(;Jt!==null;)ly(Jt)}function pE(t,n){var s=de;de|=2;var l=sy(),h=ay();Ae!==t||se!==n?(Hu=null,qu=$t()+500,Ba(t,n)):ka=Jn(t,n);t:do try{if(me!==0&&Jt!==null){n=Jt;var d=$n;e:switch(me){case 1:me=0,$n=null,qa(t,n,d,1);break;case 2:case 9:if(_p(d)){me=0,$n=null,oy(n);break}n=function(){me!==2&&me!==9||Ae!==t||(me=7),Yi(t)},d.then(n,n);break t;case 3:me=7;break t;case 4:me=5;break t;case 7:_p(d)?(me=0,$n=null,oy(n)):(me=0,$n=null,qa(t,n,d,7));break;case 5:var E=null;switch(Jt.tag){case 26:E=Jt.memoizedState;case 5:case 27:var T=Jt;if(!E||Hy(E)){me=0,$n=null;var V=T.sibling;if(V!==null)Jt=V;else{var $=T.return;$!==null?(Jt=$,Fu($)):Jt=null}break e}}me=0,$n=null,qa(t,n,d,5);break;case 6:me=0,$n=null,qa(t,n,d,6);break;case 8:Mf(),Ue=6;break t;default:throw Error(a(462))}}gE();break}catch(nt){ry(t,nt)}while(!0);return gr=Fs=null,J.H=l,J.A=h,de=s,Jt!==null?0:(Ae=null,se=0,fu(),Ue)}function gE(){for(;Jt!==null&&!Dt();)ly(Jt)}function ly(t){var n=Og(t.alternate,t,xr);t.memoizedProps=t.pendingProps,n===null?Fu(t):Jt=n}function oy(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=Cg(s,n,n.pendingProps,n.type,void 0,se);break;case 11:n=Cg(s,n,n.pendingProps,n.type.render,n.ref,se);break;case 5:Yh(n);default:Lg(s,n),n=Jt=up(n,xr),n=Og(s,n,xr)}t.memoizedProps=t.pendingProps,n===null?Fu(t):Jt=n}function qa(t,n,s,l){gr=Fs=null,Yh(n),Va=null,Ql=0;var h=n.return;try{if(sE(t,h,n,s,se)){Ue=1,Lu(t,ci(s,t.current)),Jt=null;return}}catch(d){if(h!==null)throw Jt=h,d;Ue=1,Lu(t,ci(s,t.current)),Jt=null;return}n.flags&32768?(ue||l===1?t=!0:ka||(se&536870912)!==0?t=!1:(Wr=t=!0,(l===2||l===9||l===3||l===6)&&(l=mi.current,l!==null&&l.tag===13&&(l.flags|=16384))),uy(n,t)):Fu(n)}function Fu(t){var n=t;do{if((n.flags&32768)!==0){uy(n,Wr);return}t=n.return;var s=lE(n.alternate,n,xr);if(s!==null){Jt=s;return}if(n=n.sibling,n!==null){Jt=n;return}Jt=n=t}while(n!==null);Ue===0&&(Ue=5)}function uy(t,n){do{var s=oE(t.alternate,t);if(s!==null){s.flags&=32767,Jt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){Jt=t;return}Jt=t=s}while(t!==null);Ue=6,Jt=null}function cy(t,n,s,l,h,d,E,T,V){t.cancelPendingCommit=null;do Qu();while(pn!==0);if((de&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(d=n.lanes|n.childLanes,d|=Th,jr(t,s,d,E,T,V),t===Ae&&(Jt=Ae=null,se=0),za=n,Jr=t,Pa=s,If=d,Df=h,ty=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,EE(Rn,function(){return py(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,h=mt.p,mt.p=2,E=de,de|=4;try{uE(t,n,s)}finally{de=E,mt.p=h,J.T=l}}pn=1,hy(),fy(),dy()}}function hy(){if(pn===1){pn=0;var t=Jr,n=za,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=J.T,J.T=null;var l=mt.p;mt.p=2;var h=de;de|=4;try{$g(n,t);var d=Qf,E=Jm(t.containerInfo),T=d.focusedElem,V=d.selectionRange;if(E!==T&&T&&T.ownerDocument&&Zm(T.ownerDocument.documentElement,T)){if(V!==null&&vh(T)){var $=V.start,nt=V.end;if(nt===void 0&&(nt=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(nt,T.value.length);else{var ot=T.ownerDocument||document,K=ot&&ot.defaultView||window;if(K.getSelection){var W=K.getSelection(),Pt=T.textContent.length,Ut=Math.min(V.start,Pt),ve=V.end===void 0?Ut:Math.min(V.end,Pt);!W.extend&&Ut>ve&&(E=ve,ve=Ut,Ut=E);var q=Xm(T,Ut),z=Xm(T,ve);if(q&&z&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var Q=ot.createRange();Q.setStart(q.node,q.offset),W.removeAllRanges(),Ut>ve?(W.addRange(Q),W.extend(z.node,z.offset)):(Q.setEnd(z.node,z.offset),W.addRange(Q))}}}}for(ot=[],W=T;W=W.parentNode;)W.nodeType===1&&ot.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ot.length;T++){var it=ot[T];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}rc=!!Ff,Qf=Ff=null}finally{de=h,mt.p=l,J.T=s}}t.current=n,pn=2}}function fy(){if(pn===2){pn=0;var t=Jr,n=za,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=J.T,J.T=null;var l=mt.p;mt.p=2;var h=de;de|=4;try{Hg(t,n.alternate,n)}finally{de=h,mt.p=l,J.T=s}}pn=3}}function dy(){if(pn===4||pn===3){pn=0,kt();var t=Jr,n=za,s=Pa,l=ty;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?pn=5:(pn=0,za=Jr=null,my(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Zr=null),Lr(s),n=n.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(be,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=J.T,h=mt.p,mt.p=2,J.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];d(T.value,{componentStack:T.stack})}}finally{J.T=n,mt.p=h}}(Pa&3)!==0&&Qu(),Yi(t),h=t.pendingLanes,(s&4194090)!==0&&(h&42)!==0?t===Nf?eo++:(eo=0,Nf=t):eo=0,no(0)}}function my(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,jl(n)))}function Qu(t){return hy(),fy(),dy(),py()}function py(){if(pn!==5)return!1;var t=Jr,n=If;If=0;var s=Lr(Pa),l=J.T,h=mt.p;try{mt.p=32>s?32:s,J.T=null,s=Df,Df=null;var d=Jr,E=Pa;if(pn=0,za=Jr=null,Pa=0,(de&6)!==0)throw Error(a(331));var T=de;if(de|=4,Zg(d.current),Kg(d,d.current,E,s),de=T,no(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(be,d)}catch{}return!0}finally{mt.p=h,J.T=l,my(t,n)}}function gy(t,n,s){n=ci(s,n),n=uf(t.stateNode,n,2),t=Hr(t,n,2),t!==null&&(hn(t,2),Yi(t))}function Te(t,n,s){if(t.tag===3)gy(t,t,s);else for(;n!==null;){if(n.tag===3){gy(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Zr===null||!Zr.has(l))){t=ci(s,t),s=Eg(2),l=Hr(n,s,2),l!==null&&(bg(s,l,n,t),hn(l,2),Yi(l));break}}n=n.return}}function jf(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new fE;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(s)||(Af=!0,h.add(s),t=yE.bind(null,t,n,s),n.then(t,t))}function yE(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Ae===t&&(se&s)===s&&(Ue===4||Ue===3&&(se&62914560)===se&&300>$t()-Cf?(de&2)===0&&Ba(t,0):wf|=s,Ua===se&&(Ua=0)),Yi(t)}function yy(t,n){n===0&&(n=bs()),t=Ta(t,n),t!==null&&(hn(t,n),Yi(t))}function vE(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),yy(t,s)}function _E(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),yy(t,s)}function EE(t,n){return Mt(t,n)}var $u=null,Ha=null,Lf=!1,Yu=!1,kf=!1,Zs=0;function Yi(t){t!==Ha&&t.next===null&&(Ha===null?$u=Ha=t:Ha=Ha.next=t),Yu=!0,Lf||(Lf=!0,SE())}function no(t,n){if(!kf&&Yu){kf=!0;do for(var s=!1,l=$u;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-cn(42|t)+1)-1,d&=h&~(E&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,by(l,d))}else d=se,d=sr(l,l===Ae?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Jn(l,d)||(s=!0,by(l,d));l=l.next}while(s);kf=!1}}function bE(){vy()}function vy(){Yu=Lf=!1;var t=0;Zs!==0&&(DE()&&(t=Zs),Zs=0);for(var n=$t(),s=null,l=$u;l!==null;){var h=l.next,d=_y(l,n);d===0?(l.next=null,s===null?$u=h:s.next=h,h===null&&(Ha=s)):(s=l,(t!==0||(d&3)!==0)&&(Yu=!0)),l=h}no(t)}function _y(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-cn(d),T=1<<E,V=h[E];V===-1?((T&s)===0||(T&l)!==0)&&(h[E]=Vr(T,n)):V<=n&&(t.expiredLanes|=T),d&=~T}if(n=Ae,s=se,s=sr(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===n&&(me===2||me===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jt(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Jn(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(l!==null&&jt(l),Lr(s)){case 2:case 8:s=Ye;break;case 32:s=Rn;break;case 268435456:s=er;break;default:s=Rn}return l=Ey.bind(null,t),s=Mt(s,l),t.callbackPriority=n,t.callbackNode=s,n}return l!==null&&l!==null&&jt(l),t.callbackPriority=2,t.callbackNode=null,2}function Ey(t,n){if(pn!==0&&pn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Qu()&&t.callbackNode!==s)return null;var l=se;return l=sr(t,t===Ae?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ny(t,l,n),_y(t,$t()),t.callbackNode!=null&&t.callbackNode===s?Ey.bind(null,t):null)}function by(t,n){if(Qu())return null;ny(t,n,!0)}function SE(){ME(function(){(de&6)!==0?Mt(Ee,bE):vy()})}function Uf(){return Zs===0&&(Zs=Or()),Zs}function Sy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ha(""+t)}function Ty(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function TE(t,n,s,l,h){if(n==="submit"&&s&&s.stateNode===h){var d=Sy((h[Ne]||null).action),E=l.submitter;E&&(n=(n=E[Ne]||null)?Sy(n.formAction):E.getAttribute("formAction"),n!==null&&(d=n,E=null));var T=new fa("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Zs!==0){var V=E?Ty(h,E):new FormData(h);rf(s,{pending:!0,data:V,method:h.method,action:d},null,V)}}else typeof d=="function"&&(T.preventDefault(),V=E?Ty(h,E):new FormData(h),rf(s,{pending:!0,data:V,method:h.method,action:d},d,V))},currentTarget:h}]})}}for(var zf=0;zf<Sh.length;zf++){var Pf=Sh[zf],xE=Pf.toLowerCase(),AE=Pf[0].toUpperCase()+Pf.slice(1);Ri(xE,"on"+AE)}Ri(np,"onAnimationEnd"),Ri(ip,"onAnimationIteration"),Ri(rp,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(q1,"onTransitionRun"),Ri(H1,"onTransitionStart"),Ri(G1,"onTransitionCancel"),Ri(sp,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(io));function xy(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],h=l.event;l=l.listeners;t:{var d=void 0;if(n)for(var E=l.length-1;0<=E;E--){var T=l[E],V=T.instance,$=T.currentTarget;if(T=T.listener,V!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=$;try{d(h)}catch(nt){ju(nt)}h.currentTarget=null,d=V}else for(E=0;E<l.length;E++){if(T=l[E],V=T.instance,$=T.currentTarget,T=T.listener,V!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=$;try{d(h)}catch(nt){ju(nt)}h.currentTarget=null,d=V}}}}function te(t,n){var s=n[Ss];s===void 0&&(s=n[Ss]=new Set);var l=t+"__bubble";s.has(l)||(Ay(n,t,2,!1),s.add(l))}function Bf(t,n,s){var l=0;n&&(l|=4),Ay(s,t,l,n)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function qf(t){if(!t[Ku]){t[Ku]=!0,xs.forEach(function(s){s!=="selectionchange"&&(wE.has(s)||Bf(s,!1,t),Bf(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ku]||(n[Ku]=!0,Bf("selectionchange",!1,n))}}function Ay(t,n,s,l){switch(Ky(n)){case 2:var h=JE;break;case 8:h=tb;break;default:h=nd}s=h.bind(null,n,s,t),h=void 0,!oi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,s,{capture:!0,passive:h}):t.addEventListener(n,s,!0):h!==void 0?t.addEventListener(n,s,{passive:h}):t.addEventListener(n,s,!1)}function Hf(t,n,s,l,h){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===h)break;if(E===4)for(E=l.return;E!==null;){var V=E.tag;if((V===3||V===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;T!==null;){if(E=xi(T),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){l=d=E;continue t}T=T.parentNode}}l=l.return}Xo(function(){var $=d,nt=li(s),ot=[];t:{var K=ap.get(t);if(K!==void 0){var W=fa,Pt=t;switch(t){case"keypress":if(zi(s)===0)break t;case"keydown":case"keyup":W=va;break;case"focusin":Pt="focus",W=pa;break;case"focusout":Pt="blur",W=pa;break;case"beforeblur":case"afterblur":W=pa;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=su;break;case np:case ip:case rp:W=ga;break;case sp:W=lu;break;case"scroll":case"scrollend":W=Zo;break;case"wheel":W=_a;break;case"copy":case"cut":case"paste":W=ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Rl;break;case"toggle":case"beforetoggle":W=uu}var Ut=(n&4)!==0,ve=!Ut&&(t==="scroll"||t==="scrollend"),q=Ut?K!==null?K+"Capture":null:K;Ut=[];for(var z=$,Q;z!==null;){var it=z;if(Q=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||Q===null||q===null||(it=Ns(z,q),it!=null&&Ut.push(ro(z,it,Q))),ve)break;z=z.return}0<Ut.length&&(K=new W(K,Pt,null,s,nt),ot.push({event:K,listeners:Ut}))}}if((n&7)===0){t:{if(K=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",K&&s!==lr&&(Pt=s.relatedTarget||s.fromElement)&&(xi(Pt)||Pt[jn]))break t;if((W||K)&&(K=nt.window===nt?nt:(K=nt.ownerDocument)?K.defaultView||K.parentWindow:window,W?(Pt=s.relatedTarget||s.toElement,W=$,Pt=Pt?xi(Pt):null,Pt!==null&&(ve=c(Pt),Ut=Pt.tag,Pt!==ve||Ut!==5&&Ut!==27&&Ut!==6)&&(Pt=null)):(W=null,Pt=$),W!==Pt)){if(Ut=ui,it="onMouseLeave",q="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(Ut=Rl,it="onPointerLeave",q="onPointerEnter",z="pointer"),ve=W==null?K:ii(W),Q=Pt==null?K:ii(Pt),K=new Ut(it,z+"leave",W,s,nt),K.target=ve,K.relatedTarget=Q,it=null,xi(nt)===$&&(Ut=new Ut(q,z+"enter",Pt,s,nt),Ut.target=Q,Ut.relatedTarget=ve,it=Ut),ve=it,W&&Pt)e:{for(Ut=W,q=Pt,z=0,Q=Ut;Q;Q=Ga(Q))z++;for(Q=0,it=q;it;it=Ga(it))Q++;for(;0<z-Q;)Ut=Ga(Ut),z--;for(;0<Q-z;)q=Ga(q),Q--;for(;z--;){if(Ut===q||q!==null&&Ut===q.alternate)break e;Ut=Ga(Ut),q=Ga(q)}Ut=null}else Ut=null;W!==null&&wy(ot,K,W,Ut,!1),Pt!==null&&ve!==null&&wy(ot,ve,Pt,Ut,!0)}}t:{if(K=$?ii($):window,W=K.nodeName&&K.nodeName.toLowerCase(),W==="select"||W==="input"&&K.type==="file")var wt=Fm;else if(Xe(K))if(Qm)wt=z1;else{wt=k1;var Zt=L1}else W=K.nodeName,!W||W.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&El($.elementType)&&(wt=Fm):wt=U1;if(wt&&(wt=wt(t,$))){fr(ot,wt,s,nt);break t}Zt&&Zt(t,K,$),t==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Ur(K,"number",K.value)}switch(Zt=$?ii($):window,t){case"focusin":(Xe(Zt)||Zt.contentEditable==="true")&&(Ea=Zt,_h=$,Dl=null);break;case"focusout":Dl=_h=Ea=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,tp(ot,s,nt);break;case"selectionchange":if(B1)break;case"keydown":case"keyup":tp(ot,s,nt)}var Nt;if(qi)t:{switch(t){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else ie?tt(t,s)&&(zt="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(zt="onCompositionStart");zt&&(_&&s.locale!=="ko"&&(ie||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&ie&&(Nt=Sl()):(Ui=nt,zr="value"in Ui?Ui.value:Ui.textContent,ie=!0)),Zt=Wu($,zt),0<Zt.length&&(zt=new Al(zt,t,null,s,nt),ot.push({event:zt,listeners:Zt}),Nt?zt.data=Nt:(Nt=yt(s),Nt!==null&&(zt.data=Nt)))),(Nt=y?We(t,s):re(t,s))&&(zt=Wu($,"onBeforeInput"),0<zt.length&&(Zt=new Al("onBeforeInput","beforeinput",null,s,nt),ot.push({event:Zt,listeners:zt}),Zt.data=Nt)),TE(ot,t,$,s,nt)}xy(ot,n)})}function ro(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Wu(t,n){for(var s=n+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ns(t,s),h!=null&&l.unshift(ro(t,h,d)),h=Ns(t,n),h!=null&&l.push(ro(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wy(t,n,s,l,h){for(var d=n._reactName,E=[];s!==null&&s!==l;){var T=s,V=T.alternate,$=T.stateNode;if(T=T.tag,V!==null&&V===l)break;T!==5&&T!==26&&T!==27||$===null||(V=$,h?($=Ns(s,d),$!=null&&E.unshift(ro(s,$,V))):h||($=Ns(s,d),$!=null&&E.push(ro(s,$,V)))),s=s.return}E.length!==0&&t.push({event:n,listeners:E})}var RE=/\r\n?/g,CE=/\u0000|\uFFFD/g;function Ry(t){return(typeof t=="string"?t:""+t).replace(RE,`
`).replace(CE,"")}function Cy(t,n){return n=Ry(n),Ry(t)===n}function Xu(){}function ye(t,n,s,l,h,d){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||ai(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&ai(t,""+l);break;case"className":rt(t,"class",l);break;case"tabIndex":rt(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(t,s,l);break;case"style":_l(t,l,d);break;case"data":if(n!=="object"){rt(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ha(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(n!=="input"&&ye(t,n,"name",h.name,h,null),ye(t,n,"formEncType",h.formEncType,h,null),ye(t,n,"formMethod",h.formMethod,h,null),ye(t,n,"formTarget",h.formTarget,h,null)):(ye(t,n,"encType",h.encType,h,null),ye(t,n,"method",h.method,h,null),ye(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ha(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Xu);break;case"onScroll":l!=null&&te("scroll",t);break;case"onScrollEnd":l!=null&&te("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=ha(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":te("beforetoggle",t),te("toggle",t),et(t,"popover",l);break;case"xlinkActuate":ht(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ht(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ht(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ht(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ht(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ht(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ht(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ht(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ht(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":et(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=fh.get(s)||s,et(t,s,l))}}function Gf(t,n,s,l,h,d){switch(s){case"style":_l(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?ai(t,l):(typeof l=="number"||typeof l=="bigint")&&ai(t,""+l);break;case"onScroll":l!=null&&te("scroll",t);break;case"onScrollEnd":l!=null&&te("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kr.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),n=s.slice(2,h?s.length-7:void 0),d=t[Ne]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,l,h);break t}s in t?t[s]=l:l===!0?t.setAttribute(s,""):et(t,s,l)}}}function gn(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",t),te("load",t);var l=!1,h=!1,d;for(d in s)if(s.hasOwnProperty(d)){var E=s[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ye(t,n,d,E,s,null)}}h&&ye(t,n,"srcSet",s.srcSet,s,null),l&&ye(t,n,"src",s.src,s,null);return;case"input":te("invalid",t);var T=d=E=h=null,V=null,$=null;for(l in s)if(s.hasOwnProperty(l)){var nt=s[l];if(nt!=null)switch(l){case"name":h=nt;break;case"type":E=nt;break;case"checked":V=nt;break;case"defaultChecked":$=nt;break;case"value":d=nt;break;case"defaultValue":T=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(a(137,n));break;default:ye(t,n,l,nt,s,null)}}Cs(t,d,T,V,$,E,h,!1),ca(t);return;case"select":te("invalid",t),l=E=d=null;for(h in s)if(s.hasOwnProperty(h)&&(T=s[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:ye(t,n,h,T,s,null)}n=d,s=E,t.multiple=!!l,n!=null?ar(t,!!l,n,!1):s!=null&&ar(t,!!l,s,!0);return;case"textarea":te("invalid",t),d=h=l=null;for(E in s)if(s.hasOwnProperty(E)&&(T=s[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:ye(t,n,E,T,s,null)}Is(t,l,h,d),ca(t);return;case"option":for(V in s)if(s.hasOwnProperty(V)&&(l=s[V],l!=null))switch(V){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ye(t,n,V,l,s,null)}return;case"dialog":te("beforetoggle",t),te("toggle",t),te("cancel",t),te("close",t);break;case"iframe":case"object":te("load",t);break;case"video":case"audio":for(l=0;l<io.length;l++)te(io[l],t);break;case"image":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"embed":case"source":case"link":te("error",t),te("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in s)if(s.hasOwnProperty($)&&(l=s[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ye(t,n,$,l,s,null)}return;default:if(El(n)){for(nt in s)s.hasOwnProperty(nt)&&(l=s[nt],l!==void 0&&Gf(t,n,nt,l,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(l=s[T],l!=null&&ye(t,n,T,l,s,null))}function IE(t,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,T=null,V=null,$=null,nt=null;for(W in s){var ot=s[W];if(s.hasOwnProperty(W)&&ot!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":V=ot;default:l.hasOwnProperty(W)||ye(t,n,W,null,l,ot)}}for(var K in l){var W=l[K];if(ot=s[K],l.hasOwnProperty(K)&&(W!=null||ot!=null))switch(K){case"type":d=W;break;case"name":h=W;break;case"checked":$=W;break;case"defaultChecked":nt=W;break;case"value":E=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,n));break;default:W!==ot&&ye(t,n,K,W,l,ot)}}qn(t,E,T,V,$,nt,d,h);return;case"select":W=E=T=K=null;for(d in s)if(V=s[d],s.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":W=V;default:l.hasOwnProperty(d)||ye(t,n,d,null,l,V)}for(h in l)if(d=l[h],V=s[h],l.hasOwnProperty(h)&&(d!=null||V!=null))switch(h){case"value":K=d;break;case"defaultValue":T=d;break;case"multiple":E=d;default:d!==V&&ye(t,n,h,d,l,V)}n=T,s=E,l=W,K!=null?ar(t,!!s,K,!1):!!l!=!!s&&(n!=null?ar(t,!!s,n,!0):ar(t,!!s,s?[]:"",!1));return;case"textarea":W=K=null;for(T in s)if(h=s[T],s.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ye(t,n,T,null,l,h)}for(E in l)if(h=l[E],d=s[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":K=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==d&&ye(t,n,E,h,l,d)}pe(t,K,W);return;case"option":for(var Pt in s)if(K=s[Pt],s.hasOwnProperty(Pt)&&K!=null&&!l.hasOwnProperty(Pt))switch(Pt){case"selected":t.selected=!1;break;default:ye(t,n,Pt,null,l,K)}for(V in l)if(K=l[V],W=s[V],l.hasOwnProperty(V)&&K!==W&&(K!=null||W!=null))switch(V){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ye(t,n,V,K,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ut in s)K=s[Ut],s.hasOwnProperty(Ut)&&K!=null&&!l.hasOwnProperty(Ut)&&ye(t,n,Ut,null,l,K);for($ in l)if(K=l[$],W=s[$],l.hasOwnProperty($)&&K!==W&&(K!=null||W!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,n));break;default:ye(t,n,$,K,l,W)}return;default:if(El(n)){for(var ve in s)K=s[ve],s.hasOwnProperty(ve)&&K!==void 0&&!l.hasOwnProperty(ve)&&Gf(t,n,ve,void 0,l,K);for(nt in l)K=l[nt],W=s[nt],!l.hasOwnProperty(nt)||K===W||K===void 0&&W===void 0||Gf(t,n,nt,K,l,W);return}}for(var q in s)K=s[q],s.hasOwnProperty(q)&&K!=null&&!l.hasOwnProperty(q)&&ye(t,n,q,null,l,K);for(ot in l)K=l[ot],W=s[ot],!l.hasOwnProperty(ot)||K===W||K==null&&W==null||ye(t,n,ot,K,l,W)}var Ff=null,Qf=null;function Zu(t){return t.nodeType===9?t:t.ownerDocument}function Iy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function $f(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Yf=null;function DE(){var t=window.event;return t&&t.type==="popstate"?t===Yf?!1:(Yf=t,!0):(Yf=null,!1)}var Ny=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0,My=typeof Promise=="function"?Promise:void 0,ME=typeof queueMicrotask=="function"?queueMicrotask:typeof My<"u"?function(t){return My.resolve(null).then(t).catch(VE)}:Ny;function VE(t){setTimeout(function(){throw t})}function es(t){return t==="head"}function Vy(t,n){var s=n,l=0,h=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(0<l&&8>l){s=l;var E=t.ownerDocument;if(s&1&&so(E.documentElement),s&2&&so(E.body),s&4)for(s=E.head,so(s),E=s.firstChild;E;){var T=E.nextSibling,V=E.nodeName;E[ji]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&E.rel.toLowerCase()==="stylesheet"||s.removeChild(E),E=T}}if(h===0){t.removeChild(d),mo(n);return}h--}else s==="$"||s==="$?"||s==="$!"?h++:l=s.charCodeAt(0)-48;else l=0;s=d}while(s);mo(n)}function Kf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Kf(s),Li(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function OE(t,n,s,l){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ji])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ii(t.nextSibling),t===null)break}return null}function jE(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ii(t.nextSibling),t===null))return null;return t}function Wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function LE(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ii(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Xf=null;function Oy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function jy(t,n,s){switch(n=Zu(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function so(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Li(t)}var gi=new Map,Ly=new Set;function Ju(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ar=mt.d;mt.d={f:kE,r:UE,D:zE,C:PE,L:BE,m:qE,X:GE,S:HE,M:FE};function kE(){var t=Ar.f(),n=Gu();return t||n}function UE(t){var n=ni(t);n!==null&&n.tag===5&&n.type==="form"?ng(n):Ar.r(t)}var Fa=typeof document>"u"?null:document;function ky(t,n,s){var l=Fa;if(l&&typeof n=="string"&&n){var h=He(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),Ly.has(h)||(Ly.add(h),t={rel:t,crossOrigin:s,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),gn(n,"link",t),Me(n),l.head.appendChild(n)))}}function zE(t){Ar.D(t),ky("dns-prefetch",t,null)}function PE(t,n){Ar.C(t,n),ky("preconnect",t,n)}function BE(t,n,s){Ar.L(t,n,s);var l=Fa;if(l&&t&&n){var h='link[rel="preload"][as="'+He(n)+'"]';n==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+He(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+He(s.imageSizes)+'"]')):h+='[href="'+He(t)+'"]';var d=h;switch(n){case"style":d=Qa(t);break;case"script":d=$a(t)}gi.has(d)||(t=b({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),gi.set(d,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(ao(d))||n==="script"&&l.querySelector(lo(d))||(n=l.createElement("link"),gn(n,"link",t),Me(n),l.head.appendChild(n)))}}function qE(t,n){Ar.m(t,n);var s=Fa;if(s&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+He(l)+'"][href="'+He(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=$a(t)}if(!gi.has(d)&&(t=b({rel:"modulepreload",href:t},n),gi.set(d,t),s.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(lo(d)))return}l=s.createElement("link"),gn(l,"link",t),Me(l),s.head.appendChild(l)}}}function HE(t,n,s){Ar.S(t,n,s);var l=Fa;if(l&&t){var h=fn(l).hoistableStyles,d=Qa(t);n=n||"default";var E=h.get(d);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(ao(d)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},s),(s=gi.get(d))&&Zf(t,s);var V=E=l.createElement("link");Me(V),gn(V,"link",t),V._p=new Promise(function($,nt){V.onload=$,V.onerror=nt}),V.addEventListener("load",function(){T.loading|=1}),V.addEventListener("error",function(){T.loading|=2}),T.loading|=4,tc(E,n,l)}E={type:"stylesheet",instance:E,count:1,state:T},h.set(d,E)}}}function GE(t,n){Ar.X(t,n);var s=Fa;if(s&&t){var l=fn(s).hoistableScripts,h=$a(t),d=l.get(h);d||(d=s.querySelector(lo(h)),d||(t=b({src:t,async:!0},n),(n=gi.get(h))&&Jf(t,n),d=s.createElement("script"),Me(d),gn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function FE(t,n){Ar.M(t,n);var s=Fa;if(s&&t){var l=fn(s).hoistableScripts,h=$a(t),d=l.get(h);d||(d=s.querySelector(lo(h)),d||(t=b({src:t,async:!0,type:"module"},n),(n=gi.get(h))&&Jf(t,n),d=s.createElement("script"),Me(d),gn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Uy(t,n,s,l){var h=(h=X.current)?Ju(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Qa(s.href),s=fn(h).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Qa(s.href);var d=fn(h).hoistableStyles,E=d.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=h.querySelector(ao(t)))&&!d._p&&(E.instance=d,E.state.loading=5),gi.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},gi.set(t,s),d||QE(h,t,s,E.state))),n&&l===null)throw Error(a(528,""));return E}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=$a(s),s=fn(h).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Qa(t){return'href="'+He(t)+'"'}function ao(t){return'link[rel="stylesheet"]['+t+"]"}function zy(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function QE(t,n,s,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),gn(n,"link",s),Me(n),t.head.appendChild(n))}function $a(t){return'[src="'+He(t)+'"]'}function lo(t){return"script[async]"+t}function Py(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+He(s.href)+'"]');if(l)return n.instance=l,Me(l),l;var h=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Me(l),gn(l,"style",h),tc(l,s.precedence,t),n.instance=l;case"stylesheet":h=Qa(s.href);var d=t.querySelector(ao(h));if(d)return n.state.loading|=4,n.instance=d,Me(d),d;l=zy(s),(h=gi.get(h))&&Zf(l,h),d=(t.ownerDocument||t).createElement("link"),Me(d);var E=d;return E._p=new Promise(function(T,V){E.onload=T,E.onerror=V}),gn(d,"link",l),n.state.loading|=4,tc(d,s.precedence,t),n.instance=d;case"script":return d=$a(s.src),(h=t.querySelector(lo(d)))?(n.instance=h,Me(h),h):(l=s,(h=gi.get(d))&&(l=b({},s),Jf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Me(h),gn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,tc(l,s.precedence,t));return n.instance}function tc(t,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function Zf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Jf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var ec=null;function By(t,n,s){if(ec===null){var l=new Map,h=ec=new Map;h.set(s,l)}else h=ec,l=h.get(s),l||(l=new Map,h.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var d=s[h];if(!(d[ji]||d[Le]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(n)||"";E=t+E;var T=l.get(E);T?T.push(d):l.set(E,[d])}}return l}function qy(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function $E(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Hy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var oo=null;function YE(){}function KE(t,n,s){if(oo===null)throw Error(a(475));var l=oo;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=Qa(s.href),d=t.querySelector(ao(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=nc.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=d,Me(d);return}d=t.ownerDocument||t,s=zy(s),(h=gi.get(h))&&Zf(s,h),d=d.createElement("link"),Me(d);var E=d;E._p=new Promise(function(T,V){E.onload=T,E.onerror=V}),gn(d,"link",s),n.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=nc.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function WE(){if(oo===null)throw Error(a(475));var t=oo;return t.stylesheets&&t.count===0&&td(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&td(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function nc(){if(this.count--,this.count===0){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ic=null;function td(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ic=new Map,n.forEach(XE,t),ic=null,nc.call(t))}function XE(t,n){if(!(n.state.loading&4)){var s=ic.get(t);if(s)var l=s.get(null);else{s=new Map,ic.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(s.set(E.dataset.precedence,E),l=E)}l&&s.set(null,l)}h=n.instance,E=h.getAttribute("data-precedence"),d=s.get(E)||l,d===l&&s.set(null,h),s.set(E,h),this.count++,l=nc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var uo={$$typeof:P,Provider:null,Consumer:null,_currentValue:At,_currentValue2:At,_threadCount:0};function ZE(t,n,s,l,h,d,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Gy(t,n,s,l,h,d,E,T,V,$,nt,ot){return t=new ZE(t,n,s,E,T,V,$,ot),n=1,d===!0&&(n|=24),d=Gn(3,null,null,n),t.current=d,d.stateNode=t,n=Oh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:n},Uh(d),t}function Fy(t){return t?(t=xa,t):xa}function Qy(t,n,s,l,h,d){h=Fy(h),l.context===null?l.context=h:l.pendingContext=h,l=qr(n),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=Hr(t,l,n),s!==null&&(Kn(s,t,n),zl(s,t,n))}function $y(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function ed(t,n){$y(t,n),(t=t.alternate)&&$y(t,n)}function Yy(t){if(t.tag===13){var n=Ta(t,67108864);n!==null&&Kn(n,t,67108864),ed(t,67108864)}}var rc=!0;function JE(t,n,s,l){var h=J.T;J.T=null;var d=mt.p;try{mt.p=2,nd(t,n,s,l)}finally{mt.p=d,J.T=h}}function tb(t,n,s,l){var h=J.T;J.T=null;var d=mt.p;try{mt.p=8,nd(t,n,s,l)}finally{mt.p=d,J.T=h}}function nd(t,n,s,l){if(rc){var h=id(l);if(h===null)Hf(t,n,l,sc,s),Wy(t,l);else if(nb(h,t,n,s,l))l.stopPropagation();else if(Wy(t,l),n&4&&-1<eb.indexOf(t)){for(;h!==null;){var d=ni(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=Ke(d.pendingLanes);if(E!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var V=1<<31-cn(E);T.entanglements[1]|=V,E&=~V}Yi(d),(de&6)===0&&(qu=$t()+500,no(0))}}break;case 13:T=Ta(d,2),T!==null&&Kn(T,d,2),Gu(),ed(d,2)}if(d=id(l),d===null&&Hf(t,n,l,sc,s),d===h)break;h=d}h!==null&&l.stopPropagation()}else Hf(t,n,l,null,s)}}function id(t){return t=li(t),rd(t)}var sc=null;function rd(t){if(sc=null,t=xi(t),t!==null){var n=c(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=f(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return sc=t,null}function Ky(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case Ee:return 2;case Ye:return 8;case Rn:case bi:return 32;case er:return 268435456;default:return 32}default:return 32}}var sd=!1,ns=null,is=null,rs=null,co=new Map,ho=new Map,ss=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wy(t,n){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":co.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ho.delete(n.pointerId)}}function fo(t,n,s,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},n!==null&&(n=ni(n),n!==null&&Yy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function nb(t,n,s,l,h){switch(n){case"focusin":return ns=fo(ns,t,n,s,l,h),!0;case"dragenter":return is=fo(is,t,n,s,l,h),!0;case"mouseover":return rs=fo(rs,t,n,s,l,h),!0;case"pointerover":var d=h.pointerId;return co.set(d,fo(co.get(d)||null,t,n,s,l,h)),!0;case"gotpointercapture":return d=h.pointerId,ho.set(d,fo(ho.get(d)||null,t,n,s,l,h)),!0}return!1}function Xy(t){var n=xi(t.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=f(s),n!==null){t.blockedOn=n,ua(t.priority,function(){if(s.tag===13){var l=Yn();l=On(l);var h=Ta(s,l);h!==null&&Kn(h,s,l),ed(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ac(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=id(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);lr=l,s.target.dispatchEvent(l),lr=null}else return n=ni(s),n!==null&&Yy(n),t.blockedOn=s,!1;n.shift()}return!0}function Zy(t,n,s){ac(t)&&s.delete(n)}function ib(){sd=!1,ns!==null&&ac(ns)&&(ns=null),is!==null&&ac(is)&&(is=null),rs!==null&&ac(rs)&&(rs=null),co.forEach(Zy),ho.forEach(Zy)}function lc(t,n){t.blockedOn===n&&(t.blockedOn=null,sd||(sd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ib)))}var oc=null;function Jy(t){oc!==t&&(oc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){oc===t&&(oc=null);for(var n=0;n<t.length;n+=3){var s=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(rd(l||s)===null)continue;break}var d=ni(s);d!==null&&(t.splice(n,3),n-=3,rf(d,{pending:!0,data:h,method:s.method,action:l},l,h))}}))}function mo(t){function n(V){return lc(V,t)}ns!==null&&lc(ns,t),is!==null&&lc(is,t),rs!==null&&lc(rs,t),co.forEach(n),ho.forEach(n);for(var s=0;s<ss.length;s++){var l=ss[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ss.length&&(s=ss[0],s.blockedOn===null);)Xy(s),s.blockedOn===null&&ss.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var h=s[l],d=s[l+1],E=h[Ne]||null;if(typeof d=="function")E||Jy(s);else if(E){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Ne]||null)T=E.formAction;else if(rd(h)!==null)continue}else T=E.action;typeof T=="function"?s[l+1]=T:(s.splice(l,3),l-=3),Jy(s)}}}function ad(t){this._internalRoot=t}uc.prototype.render=ad.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,l=Yn();Qy(s,l,t,n,null,null)},uc.prototype.unmount=ad.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Qy(t.current,2,null,t,null,null),Gu(),n[jn]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Oi();t={blockedOn:null,target:t,priority:n};for(var s=0;s<ss.length&&n!==0&&n<ss[s].priority;s++);ss.splice(s,0,t),s===0&&Xy(t)}};var tv=e.version;if(tv!=="19.1.0")throw Error(a(527,tv,"19.1.0"));mt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(n),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var rb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{be=cc.inject(rb),ce=cc}catch{}}return go.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,l="",h=gg,d=yg,E=vg,T=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(E=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=Gy(t,1,!1,null,null,s,l,h,d,E,T,null),t[jn]=n.current,qf(t),new ad(n)},go.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var l=!1,h="",d=gg,E=yg,T=vg,V=null,$=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(E=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(V=s.unstable_transitionCallbacks),s.formState!==void 0&&($=s.formState)),n=Gy(t,1,!0,n,s??null,l,h,d,E,T,V,$),n.context=Fy(null),s=n.current,l=Yn(),l=On(l),h=qr(l),h.callback=null,Hr(s,h,l),s=l,n.current.lanes=s,hn(n,s),Yi(n),t[jn]=n.current,qf(t),new uc(n)},go.version="19.1.0",go}var cv;function gb(){if(cv)return ud.exports;cv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ud.exports=pb(),ud.exports}var yb=gb(),yo={},hv;function vb(){if(hv)return yo;hv=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.parse=f,yo.serialize=p;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function f(A,O){const N=new c,G=A.length;if(G<2)return N;const B=(O==null?void 0:O.decode)||b;let H=0;do{const Y=A.indexOf("=",H);if(Y===-1)break;const P=A.indexOf(";",H),lt=P===-1?G:P;if(Y>lt){H=A.lastIndexOf(";",Y-1)+1;continue}const dt=m(A,H,Y),St=g(A,Y,dt),j=A.slice(dt,St);if(N[j]===void 0){let R=m(A,Y+1,lt),w=g(A,lt,R);const M=B(A.slice(R,w));N[j]=M}H=lt+1}while(H<G);return N}function m(A,O,N){do{const G=A.charCodeAt(O);if(G!==32&&G!==9)return O}while(++O<N);return N}function g(A,O,N){for(;O>N;){const G=A.charCodeAt(--O);if(G!==32&&G!==9)return O+1}return N}function p(A,O,N){const G=(N==null?void 0:N.encode)||encodeURIComponent;if(!r.test(A))throw new TypeError(`argument name is invalid: ${A}`);const B=G(O);if(!e.test(B))throw new TypeError(`argument val is invalid: ${O}`);let H=A+"="+B;if(!N)return H;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);H+="; Max-Age="+N.maxAge}if(N.domain){if(!i.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);H+="; Domain="+N.domain}if(N.path){if(!a.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);H+="; Path="+N.path}if(N.expires){if(!S(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);H+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(H+="; HttpOnly"),N.secure&&(H+="; Secure"),N.partitioned&&(H+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return H}function b(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function S(A){return o.call(A)==="[object Date]"}return yo}vb();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fv="popstate";function _b(r={}){function e(o,c){let{pathname:f="/",search:m="",hash:g=""}=sa(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),xd("",{pathname:f,search:m,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(o,c){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let g=o.location.href,p=g.indexOf("#");m=p===-1?g:g.slice(0,p)}return m+"#"+(typeof c=="string"?c:Ro(c))}function a(o,c){_i(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return bb(e,i,a,r)}function De(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function _i(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Eb(){return Math.random().toString(36).substring(2,10)}function dv(r,e){return{usr:r.state,key:r.key,idx:e}}function xd(r,e,i=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?sa(e):e,state:i,key:e&&e.key||a||Eb()}}function Ro({pathname:r="/",search:e="",hash:i=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function sa(r){let e={};if(r){let i=r.indexOf("#");i>=0&&(e.hash=r.substring(i),r=r.substring(0,i));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function bb(r,e,i,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,f=o.history,m="POP",g=null,p=b();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function b(){return(f.state||{idx:null}).idx}function S(){m="POP";let B=b(),H=B==null?null:B-p;p=B,g&&g({action:m,location:G.location,delta:H})}function A(B,H){m="PUSH";let Y=xd(G.location,B,H);i&&i(Y,B),p=b()+1;let P=dv(Y,p),lt=G.createHref(Y);try{f.pushState(P,"",lt)}catch(dt){if(dt instanceof DOMException&&dt.name==="DataCloneError")throw dt;o.location.assign(lt)}c&&g&&g({action:m,location:G.location,delta:1})}function O(B,H){m="REPLACE";let Y=xd(G.location,B,H);i&&i(Y,B),p=b();let P=dv(Y,p),lt=G.createHref(Y);f.replaceState(P,"",lt),c&&g&&g({action:m,location:G.location,delta:0})}function N(B){let H=o.location.origin!=="null"?o.location.origin:o.location.href,Y=typeof B=="string"?B:Ro(B);return Y=Y.replace(/ $/,"%20"),De(H,`No window.location.(origin|href) available to create URL for href: ${Y}`),new URL(Y,H)}let G={get action(){return m},get location(){return r(o,f)},listen(B){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(fv,S),g=B,()=>{o.removeEventListener(fv,S),g=null}},createHref(B){return e(o,B)},createURL:N,encodeLocation(B){let H=N(B);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:A,replace:O,go(B){return f.go(B)}};return G}function D0(r,e,i="/"){return Sb(r,e,i,!1)}function Sb(r,e,i,a){let o=typeof e=="string"?sa(e):e,c=Cr(o.pathname||"/",i);if(c==null)return null;let f=N0(r);Tb(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let p=Ob(c);m=Mb(f[g],p,a)}return m}function N0(r,e=[],i=[],a=""){let o=(c,f,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};g.relativePath.startsWith("/")&&(De(g.relativePath.startsWith(a),`Absolute route path "${g.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(a.length));let p=wr([a,g.relativePath]),b=i.concat(g);c.children&&c.children.length>0&&(De(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),N0(c.children,e,b,p)),!(c.path==null&&!c.index)&&e.push({path:p,score:Db(p,c.index),routesMeta:b})};return r.forEach((c,f)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,f);else for(let g of M0(c.path))o(c,f,g)}),e}function M0(r){let e=r.split("/");if(e.length===0)return[];let[i,...a]=e,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let f=M0(a.join("/")),m=[];return m.push(...f.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...f),m.map(g=>r.startsWith("/")&&g===""?"/":g)}function Tb(r){r.sort((e,i)=>e.score!==i.score?i.score-e.score:Nb(e.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var xb=/^:[\w-]+$/,Ab=3,wb=2,Rb=1,Cb=10,Ib=-2,mv=r=>r==="*";function Db(r,e){let i=r.split("/"),a=i.length;return i.some(mv)&&(a+=Ib),e&&(a+=wb),i.filter(o=>!mv(o)).reduce((o,c)=>o+(xb.test(c)?Ab:c===""?Rb:Cb),a)}function Nb(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function Mb(r,e,i=!1){let{routesMeta:a}=r,o={},c="/",f=[];for(let m=0;m<a.length;++m){let g=a[m],p=m===a.length-1,b=c==="/"?e:e.slice(c.length)||"/",S=Rc({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},b),A=g.route;if(!S&&p&&i&&!a[a.length-1].route.index&&(S=Rc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!S)return null;Object.assign(o,S.params),f.push({params:o,pathname:wr([c,S.pathname]),pathnameBase:Ub(wr([c,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(c=wr([c,S.pathnameBase]))}return f}function Rc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,a]=Vb(r.path,r.caseSensitive,r.end),o=e.match(i);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((p,{paramName:b,isOptional:S},A)=>{if(b==="*"){let N=m[A]||"";f=c.slice(0,c.length-N.length).replace(/(.)\/+$/,"$1")}const O=m[A];return S&&!O?p[b]=void 0:p[b]=(O||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:f,pattern:r}}function Vb(r,e=!1,i=!0){_i(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(a.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function Ob(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _i(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Cr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,a=r.charAt(i);return a&&a!=="/"?null:r.slice(i)||"/"}function jb(r,e="/"){let{pathname:i,search:a="",hash:o=""}=typeof r=="string"?sa(r):r;return{pathname:i?i.startsWith("/")?i:Lb(i,e):e,search:zb(a),hash:Pb(o)}}function Lb(r,e){let i=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function dd(r,e,i,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kb(r){return r.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function Wd(r){let e=kb(r);return e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase)}function Xd(r,e,i,a=!1){let o;typeof r=="string"?o=sa(r):(o={...r},De(!o.pathname||!o.pathname.includes("?"),dd("?","pathname","search",o)),De(!o.pathname||!o.pathname.includes("#"),dd("#","pathname","hash",o)),De(!o.search||!o.search.includes("#"),dd("#","search","hash",o)));let c=r===""||o.pathname==="",f=c?"/":o.pathname,m;if(f==null)m=i;else{let S=e.length-1;if(!a&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),S-=1;o.pathname=A.join("/")}m=S>=0?e[S]:"/"}let g=jb(o,m),p=f&&f!=="/"&&f.endsWith("/"),b=(c||f===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(p||b)&&(g.pathname+="/"),g}var wr=r=>r.join("/").replace(/\/\/+/g,"/"),Ub=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),zb=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Pb=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Bb(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var V0=["POST","PUT","PATCH","DELETE"];new Set(V0);var qb=["GET",...V0];new Set(qb);var ul=C.createContext(null);ul.displayName="DataRouter";var Gc=C.createContext(null);Gc.displayName="DataRouterState";var O0=C.createContext({isTransitioning:!1});O0.displayName="ViewTransition";var Hb=C.createContext(new Map);Hb.displayName="Fetchers";var Gb=C.createContext(null);Gb.displayName="Await";var Vi=C.createContext(null);Vi.displayName="Navigation";var ko=C.createContext(null);ko.displayName="Location";var tr=C.createContext({outlet:null,matches:[],isDataRoute:!1});tr.displayName="Route";var Zd=C.createContext(null);Zd.displayName="RouteError";function Fb(r,{relative:e}={}){De(cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=C.useContext(Vi),{hash:o,pathname:c,search:f}=zo(r,{relative:e}),m=c;return i!=="/"&&(m=c==="/"?i:wr([i,c])),a.createHref({pathname:m,search:f,hash:o})}function cl(){return C.useContext(ko)!=null}function Mr(){return De(cl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(ko).location}var j0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function L0(r){C.useContext(Vi).static||C.useLayoutEffect(r)}function Uo(){let{isDataRoute:r}=C.useContext(tr);return r?rS():Qb()}function Qb(){De(cl(),"useNavigate() may be used only in the context of a <Router> component.");let r=C.useContext(ul),{basename:e,navigator:i}=C.useContext(Vi),{matches:a}=C.useContext(tr),{pathname:o}=Mr(),c=JSON.stringify(Wd(a)),f=C.useRef(!1);return L0(()=>{f.current=!0}),C.useCallback((g,p={})=>{if(_i(f.current,j0),!f.current)return;if(typeof g=="number"){i.go(g);return}let b=Xd(g,JSON.parse(c),o,p.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:wr([e,b.pathname])),(p.replace?i.replace:i.push)(b,p.state,p)},[e,i,c,o,r])}C.createContext(null);function zo(r,{relative:e}={}){let{matches:i}=C.useContext(tr),{pathname:a}=Mr(),o=JSON.stringify(Wd(i));return C.useMemo(()=>Xd(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function $b(r,e){return k0(r,e)}function k0(r,e,i,a){var Y;De(cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:c}=C.useContext(Vi),{matches:f}=C.useContext(tr),m=f[f.length-1],g=m?m.params:{},p=m?m.pathname:"/",b=m?m.pathnameBase:"/",S=m&&m.route;{let P=S&&S.path||"";U0(p,!S||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let A=Mr(),O;if(e){let P=typeof e=="string"?sa(e):e;De(b==="/"||((Y=P.pathname)==null?void 0:Y.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${P.pathname}" was given in the \`location\` prop.`),O=P}else O=A;let N=O.pathname||"/",G=N;if(b!=="/"){let P=b.replace(/^\//,"").split("/");G="/"+N.replace(/^\//,"").split("/").slice(P.length).join("/")}let B=!c&&i&&i.matches&&i.matches.length>0?i.matches:D0(r,{pathname:G});_i(S||B!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),_i(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=Zb(B&&B.map(P=>Object.assign({},P,{params:Object.assign({},g,P.params),pathname:wr([b,o.encodeLocation?o.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?b:wr([b,o.encodeLocation?o.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),f,i,a);return e&&H?C.createElement(ko.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},H):H}function Yb(){let r=iS(),e=Bb(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),i?C.createElement("pre",{style:o},i):null,f)}var Kb=C.createElement(Yb,null),Wb=class extends C.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?C.createElement(tr.Provider,{value:this.props.routeContext},C.createElement(Zd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xb({routeContext:r,match:e,children:i}){let a=C.useContext(ul);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(tr.Provider,{value:r},i)}function Zb(r,e=[],i=null,a=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let o=r,c=i==null?void 0:i.errors;if(c!=null){let g=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);De(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let f=!1,m=-1;if(i)for(let g=0;g<o.length;g++){let p=o[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=g),p.route.id){let{loaderData:b,errors:S}=i,A=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!S||S[p.route.id]===void 0);if(p.route.lazy||A){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,p,b)=>{let S,A=!1,O=null,N=null;i&&(S=c&&p.route.id?c[p.route.id]:void 0,O=p.route.errorElement||Kb,f&&(m<0&&b===0?(U0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,N=null):m===b&&(A=!0,N=p.route.hydrateFallbackElement||null)));let G=e.concat(o.slice(0,b+1)),B=()=>{let H;return S?H=O:A?H=N:p.route.Component?H=C.createElement(p.route.Component,null):p.route.element?H=p.route.element:H=g,C.createElement(Xb,{match:p,routeContext:{outlet:g,matches:G,isDataRoute:i!=null},children:H})};return i&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?C.createElement(Wb,{location:i.location,revalidation:i.revalidation,component:O,error:S,children:B(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):B()},null)}function Jd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jb(r){let e=C.useContext(ul);return De(e,Jd(r)),e}function tS(r){let e=C.useContext(Gc);return De(e,Jd(r)),e}function eS(r){let e=C.useContext(tr);return De(e,Jd(r)),e}function tm(r){let e=eS(r),i=e.matches[e.matches.length-1];return De(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function nS(){return tm("useRouteId")}function iS(){var a;let r=C.useContext(Zd),e=tS("useRouteError"),i=tm("useRouteError");return r!==void 0?r:(a=e.errors)==null?void 0:a[i]}function rS(){let{router:r}=Jb("useNavigate"),e=tm("useNavigate"),i=C.useRef(!1);return L0(()=>{i.current=!0}),C.useCallback(async(o,c={})=>{_i(i.current,j0),i.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var pv={};function U0(r,e,i){!e&&!pv[r]&&(pv[r]=!0,_i(!1,i))}C.memo(sS);function sS({routes:r,future:e,state:i}){return k0(r,void 0,i,e)}function Di({to:r,replace:e,state:i,relative:a}){De(cl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Vi);_i(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=C.useContext(tr),{pathname:f}=Mr(),m=Uo(),g=Xd(r,Wd(c),f,a==="path"),p=JSON.stringify(g);return C.useEffect(()=>{m(JSON.parse(p),{replace:e,state:i,relative:a})},[m,p,a,e,i]),null}function yi(r){De(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aS({basename:r="/",children:e=null,location:i,navigationType:a="POP",navigator:o,static:c=!1}){De(!cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:f,navigator:o,static:c,future:{}}),[f,o,c]);typeof i=="string"&&(i=sa(i));let{pathname:g="/",search:p="",hash:b="",state:S=null,key:A="default"}=i,O=C.useMemo(()=>{let N=Cr(g,f);return N==null?null:{location:{pathname:N,search:p,hash:b,state:S,key:A},navigationType:a}},[f,g,p,b,S,A,a]);return _i(O!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:C.createElement(Vi.Provider,{value:m},C.createElement(ko.Provider,{children:e,value:O}))}function lS({children:r,location:e}){return $b(Ad(r),e)}function Ad(r,e=[]){let i=[];return C.Children.forEach(r,(a,o)=>{if(!C.isValidElement(a))return;let c=[...e,o];if(a.type===C.Fragment){i.push.apply(i,Ad(a.props.children,c));return}De(a.type===yi,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),De(!a.props.index||!a.props.children,"An index route cannot have child routes.");let f={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(f.children=Ad(a.props.children,c)),i.push(f)}),i}var _c="get",Ec="application/x-www-form-urlencoded";function Fc(r){return r!=null&&typeof r.tagName=="string"}function oS(r){return Fc(r)&&r.tagName.toLowerCase()==="button"}function uS(r){return Fc(r)&&r.tagName.toLowerCase()==="form"}function cS(r){return Fc(r)&&r.tagName.toLowerCase()==="input"}function hS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fS(r,e){return r.button===0&&(!e||e==="_self")&&!hS(r)}var hc=null;function dS(){if(hc===null)try{new FormData(document.createElement("form"),0),hc=!1}catch{hc=!0}return hc}var mS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function md(r){return r!=null&&!mS.has(r)?(_i(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ec}"`),null):r}function pS(r,e){let i,a,o,c,f;if(uS(r)){let m=r.getAttribute("action");a=m?Cr(m,e):null,i=r.getAttribute("method")||_c,o=md(r.getAttribute("enctype"))||Ec,c=new FormData(r)}else if(oS(r)||cS(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||m.getAttribute("action");if(a=g?Cr(g,e):null,i=r.getAttribute("formmethod")||m.getAttribute("method")||_c,o=md(r.getAttribute("formenctype"))||md(m.getAttribute("enctype"))||Ec,c=new FormData(m,r),!dS()){let{name:p,type:b,value:S}=r;if(b==="image"){let A=p?`${p}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else p&&c.append(p,S)}}else{if(Fc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=_c,a=null,o=Ec,f=r}return c&&o==="text/plain"&&(f=c,c=void 0),{action:a,method:i.toLowerCase(),encType:o,formData:c,body:f}}function em(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function gS(r,e){if(r.id in e)return e[r.id];try{let i=await import(r.module);return e[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function vS(r,e,i){let a=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await gS(c,i);return f.links?f.links():[]}return[]}));return SS(a.flat(1).filter(yS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function gv(r,e,i,a,o,c){let f=(g,p)=>i[p]?g.route.id!==i[p].route.id:!0,m=(g,p)=>{var b;return i[p].pathname!==g.pathname||((b=i[p].route.path)==null?void 0:b.endsWith("*"))&&i[p].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,p)=>f(g,p)||m(g,p)):c==="data"?e.filter((g,p)=>{var S;let b=a.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(f(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=i[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function _S(r,e,{includeHydrateFallback:i}={}){return ES(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function ES(r){return[...new Set(r)]}function bS(r){let e={},i=Object.keys(r).sort();for(let a of i)e[a]=r[a];return e}function SS(r,e){let i=new Set;return new Set(e),r.reduce((a,o)=>{let c=JSON.stringify(bS(o));return i.has(c)||(i.add(c),a.push({key:c,link:o})),a},[])}var TS=new Set([100,101,204,205]);function xS(r,e){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname="_root.data":e&&Cr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function z0(){let r=C.useContext(ul);return em(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function AS(){let r=C.useContext(Gc);return em(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var nm=C.createContext(void 0);nm.displayName="FrameworkContext";function P0(){let r=C.useContext(nm);return em(r,"You must render this element inside a <HydratedRouter> element"),r}function wS(r,e){let i=C.useContext(nm),[a,o]=C.useState(!1),[c,f]=C.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:b,onTouchStart:S}=e,A=C.useRef(null);C.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let G=H=>{H.forEach(Y=>{f(Y.isIntersecting)})},B=new IntersectionObserver(G,{threshold:.5});return A.current&&B.observe(A.current),()=>{B.disconnect()}}},[r]),C.useEffect(()=>{if(a){let G=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(G)}}},[a]);let O=()=>{o(!0)},N=()=>{o(!1),f(!1)};return i?r!=="intent"?[c,A,{}]:[c,A,{onFocus:vo(m,O),onBlur:vo(g,N),onMouseEnter:vo(p,O),onMouseLeave:vo(b,N),onTouchStart:vo(S,O)}]:[!1,A,{}]}function vo(r,e){return i=>{r&&r(i),i.defaultPrevented||e(i)}}function RS({page:r,...e}){let{router:i}=z0(),a=C.useMemo(()=>D0(i.routes,r,i.basename),[i.routes,r,i.basename]);return a?C.createElement(IS,{page:r,matches:a,...e}):null}function CS(r){let{manifest:e,routeModules:i}=P0(),[a,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return vS(r,e,i).then(f=>{c||o(f)}),()=>{c=!0}},[r,e,i]),a}function IS({page:r,matches:e,...i}){let a=Mr(),{manifest:o,routeModules:c}=P0(),{basename:f}=z0(),{loaderData:m,matches:g}=AS(),p=C.useMemo(()=>gv(r,e,g,o,a,"data"),[r,e,g,o,a]),b=C.useMemo(()=>gv(r,e,g,o,a,"assets"),[r,e,g,o,a]),S=C.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let N=new Set,G=!1;if(e.forEach(H=>{var P;let Y=o.routes[H.route.id];!Y||!Y.hasLoader||(!p.some(lt=>lt.route.id===H.route.id)&&H.route.id in m&&((P=c[H.route.id])!=null&&P.shouldRevalidate)||Y.hasClientLoader?G=!0:N.add(H.route.id))}),N.size===0)return[];let B=xS(r,f);return G&&N.size>0&&B.searchParams.set("_routes",e.filter(H=>N.has(H.route.id)).map(H=>H.route.id).join(",")),[B.pathname+B.search]},[f,m,a,o,p,e,r,c]),A=C.useMemo(()=>_S(b,o),[b,o]),O=CS(b);return C.createElement(C.Fragment,null,S.map(N=>C.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...i})),A.map(N=>C.createElement("link",{key:N,rel:"modulepreload",href:N,...i})),O.map(({key:N,link:G})=>C.createElement("link",{key:N,...G})))}function DS(...r){return e=>{r.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var B0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{B0&&(window.__reactRouterVersion="7.5.1")}catch{}function NS({basename:r,children:e,window:i}){let a=C.useRef();a.current==null&&(a.current=_b({window:i,v5Compat:!0}));let o=a.current,[c,f]=C.useState({action:o.action,location:o.location}),m=C.useCallback(g=>{C.startTransition(()=>f(g))},[f]);return C.useLayoutEffect(()=>o.listen(m),[o,m]),C.createElement(aS,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H0=C.forwardRef(function({onClick:e,discover:i="render",prefetch:a="none",relative:o,reloadDocument:c,replace:f,state:m,target:g,to:p,preventScrollReset:b,viewTransition:S,...A},O){let{basename:N}=C.useContext(Vi),G=typeof p=="string"&&q0.test(p),B,H=!1;if(typeof p=="string"&&G&&(B=p,B0))try{let w=new URL(window.location.href),M=p.startsWith("//")?new URL(w.protocol+p):new URL(p),L=Cr(M.pathname,N);M.origin===w.origin&&L!=null?p=L+M.search+M.hash:H=!0}catch{_i(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=Fb(p,{relative:o}),[P,lt,dt]=wS(a,A),St=OS(p,{replace:f,state:m,target:g,preventScrollReset:b,relative:o,viewTransition:S});function j(w){e&&e(w),w.defaultPrevented||St(w)}let R=C.createElement("a",{...A,...dt,href:B||Y,onClick:H||c?e:j,ref:DS(O,lt),target:g,"data-discover":!G&&i==="render"?"true":void 0});return P&&!G?C.createElement(C.Fragment,null,R,C.createElement(RS,{page:Y})):R});H0.displayName="Link";var G0=C.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:a="",end:o=!1,style:c,to:f,viewTransition:m,children:g,...p},b){let S=zo(f,{relative:p.relative}),A=Mr(),O=C.useContext(Gc),{navigator:N,basename:G}=C.useContext(Vi),B=O!=null&&zS(S)&&m===!0,H=N.encodeLocation?N.encodeLocation(S).pathname:S.pathname,Y=A.pathname,P=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;i||(Y=Y.toLowerCase(),P=P?P.toLowerCase():null,H=H.toLowerCase()),P&&G&&(P=Cr(P,G)||P);const lt=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let dt=Y===H||!o&&Y.startsWith(H)&&Y.charAt(lt)==="/",St=P!=null&&(P===H||!o&&P.startsWith(H)&&P.charAt(H.length)==="/"),j={isActive:dt,isPending:St,isTransitioning:B},R=dt?e:void 0,w;typeof a=="function"?w=a(j):w=[a,dt?"active":null,St?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(j):c;return C.createElement(H0,{...p,"aria-current":R,className:w,ref:b,style:M,to:f,viewTransition:m},typeof g=="function"?g(j):g)});G0.displayName="NavLink";var MS=C.forwardRef(({discover:r="render",fetcherKey:e,navigate:i,reloadDocument:a,replace:o,state:c,method:f=_c,action:m,onSubmit:g,relative:p,preventScrollReset:b,viewTransition:S,...A},O)=>{let N=kS(),G=US(m,{relative:p}),B=f.toLowerCase()==="get"?"get":"post",H=typeof m=="string"&&q0.test(m),Y=P=>{if(g&&g(P),P.defaultPrevented)return;P.preventDefault();let lt=P.nativeEvent.submitter,dt=(lt==null?void 0:lt.getAttribute("formmethod"))||f;N(lt||P.currentTarget,{fetcherKey:e,method:dt,navigate:i,replace:o,state:c,relative:p,preventScrollReset:b,viewTransition:S})};return C.createElement("form",{ref:O,method:B,action:G,onSubmit:a?g:Y,...A,"data-discover":!H&&r==="render"?"true":void 0})});MS.displayName="Form";function VS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F0(r){let e=C.useContext(ul);return De(e,VS(r)),e}function OS(r,{target:e,replace:i,state:a,preventScrollReset:o,relative:c,viewTransition:f}={}){let m=Uo(),g=Mr(),p=zo(r,{relative:c});return C.useCallback(b=>{if(fS(b,e)){b.preventDefault();let S=i!==void 0?i:Ro(g)===Ro(p);m(r,{replace:S,state:a,preventScrollReset:o,relative:c,viewTransition:f})}},[g,m,p,i,a,e,r,o,c,f])}var jS=0,LS=()=>`__${String(++jS)}__`;function kS(){let{router:r}=F0("useSubmit"),{basename:e}=C.useContext(Vi),i=nS();return C.useCallback(async(a,o={})=>{let{action:c,method:f,encType:m,formData:g,body:p}=pS(a,e);if(o.navigate===!1){let b=o.fetcherKey||LS();await r.fetch(b,i,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,i])}function US(r,{relative:e}={}){let{basename:i}=C.useContext(Vi),a=C.useContext(tr);De(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...zo(r||".",{relative:e})},f=Mr();if(r==null){c.search=f.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(b=>b==="")){m.delete("index"),g.filter(S=>S).forEach(S=>m.append("index",S));let b=m.toString();c.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:wr([i,c.pathname])),Ro(c)}function zS(r,e={}){let i=C.useContext(O0);De(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=F0("useViewTransitionState"),o=zo(r,{relative:e.relative});if(!i.isTransitioning)return!1;let c=Cr(i.currentLocation.pathname,a)||i.currentLocation.pathname,f=Cr(i.nextLocation.pathname,a)||i.nextLocation.pathname;return Rc(o.pathname,f)!=null||Rc(o.pathname,c)!=null}new TextEncoder;[...TS];const PS=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},BS=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const o=r[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[i++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[i++],f=r[i++],m=r[i++],g=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const c=r[i++],f=r[i++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},$0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const c=r[o],f=o+1<r.length,m=f?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,b=c>>2,S=(c&3)<<4|m>>4;let A=(m&15)<<2|p>>6,O=p&63;g||(O=64,f||(A=64)),a.push(i[b],i[S],i[A],i[O])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Q0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):BS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const c=i[r.charAt(o++)],m=o<r.length?i[r.charAt(o)]:0;++o;const p=o<r.length?i[r.charAt(o)]:64;++o;const S=o<r.length?i[r.charAt(o)]:64;if(++o,c==null||m==null||p==null||S==null)throw new qS;const A=c<<2|m>>4;if(a.push(A),p!==64){const O=m<<4&240|p>>2;if(a.push(O),S!==64){const N=p<<6&192|S;a.push(N)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(r){const e=Q0(r);return $0.encodeByteArray(e,!0)},Cc=function(r){return HS(r).replace(/\./g,"")},GS=function(r){try{return $0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=()=>FS().__FIREBASE_DEFAULTS__,$S=()=>{if(typeof process>"u"||typeof yv>"u")return;const r=yv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&GS(r[1]);return e&&JSON.parse(e)},im=()=>{try{return PS()||QS()||$S()||YS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},KS=r=>{var e,i;return(i=(e=im())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[r]},WS=r=>{const e=KS(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},Y0=()=>{var r;return(r=im())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Cc(JSON.stringify(i)),Cc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tT(){var r;const e=(r=im())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eT(){return!tT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nT(){try{return typeof indexedDB=="object"}catch{return!1}}function iT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="FirebaseError";class hl extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=rT,Object.setPrototypeOf(this,hl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K0.prototype.create)}}class K0{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?sT(c,a):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new hl(o,m,a)}}function sT(r,e){return r.replace(aT,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const aT=/\{\$([^}]+)}/g;function Ic(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const c=r[o],f=e[o];if(vv(c)&&vv(f)){if(!Ic(c,f))return!1}else if(c!==f)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function vv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(r){return r&&r._delegate?r._delegate:r}class Co{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new XS;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uT(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&f.resolve(o)}return o}onInit(e,i){var a;const o=this.normalizeInstanceIdentifier(i),c=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;c.add(e),this.onInitCallbacks.set(o,c);const f=this.instances.get(o);return f&&e(f,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:oT(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oT(r){return r===Js?void 0:r}function uT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new lT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(le||(le={}));const hT={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},fT=le.INFO,dT={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},mT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=dT[e];if(o)console[o](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W0{constructor(e){this.name=e,this._logLevel=fT,this._logHandler=mT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const pT=(r,e)=>e.some(i=>r instanceof i);let _v,Ev;function gT(){return _v||(_v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yT(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,wd=new WeakMap,Z0=new WeakMap,pd=new WeakMap,rm=new WeakMap;function vT(r){const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{i(os(r.result)),o()},f=()=>{a(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&X0.set(i,r)}).catch(()=>{}),rm.set(e,r),e}function _T(r){if(wd.has(r))return;const e=new Promise((i,a)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{i(),o()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});wd.set(r,e)}let Rd={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return wd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Z0.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return os(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ET(r){Rd=r(Rd)}function bT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(gd(this),e,...i);return Z0.set(a,e.sort?e.sort():[e]),os(a)}:yT().includes(r)?function(...e){return r.apply(gd(this),e),os(X0.get(this))}:function(...e){return os(r.apply(gd(this),e))}}function ST(r){return typeof r=="function"?bT(r):(r instanceof IDBTransaction&&_T(r),pT(r,gT())?new Proxy(r,Rd):r)}function os(r){if(r instanceof IDBRequest)return vT(r);if(pd.has(r))return pd.get(r);const e=ST(r);return e!==r&&(pd.set(r,e),rm.set(e,r)),e}const gd=r=>rm.get(r);function TT(r,e,{blocked:i,upgrade:a,blocking:o,terminated:c}={}){const f=indexedDB.open(r,e),m=os(f);return a&&f.addEventListener("upgradeneeded",g=>{a(os(f.result),g.oldVersion,g.newVersion,os(f.transaction),g)}),i&&f.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const xT=["get","getKey","getAll","getAllKeys","count"],AT=["put","add","delete","clear"],yd=new Map;function bv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=AT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||xT.includes(i)))return;const c=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let p=g.store;return a&&(p=p.index(m.shift())),(await Promise.all([p[i](...m),o&&g.done]))[0]};return yd.set(e,c),c}ET(r=>({...r,get:(e,i,a)=>bv(e,i)||r.get(e,i,a),has:(e,i)=>!!bv(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(RT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function RT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cd="@firebase/app",Sv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new W0("@firebase/app"),CT="@firebase/app-compat",IT="@firebase/analytics-compat",DT="@firebase/analytics",NT="@firebase/app-check-compat",MT="@firebase/app-check",VT="@firebase/auth",OT="@firebase/auth-compat",jT="@firebase/database",LT="@firebase/data-connect",kT="@firebase/database-compat",UT="@firebase/functions",zT="@firebase/functions-compat",PT="@firebase/installations",BT="@firebase/installations-compat",qT="@firebase/messaging",HT="@firebase/messaging-compat",GT="@firebase/performance",FT="@firebase/performance-compat",QT="@firebase/remote-config",$T="@firebase/remote-config-compat",YT="@firebase/storage",KT="@firebase/storage-compat",WT="@firebase/firestore",XT="@firebase/vertexai",ZT="@firebase/firestore-compat",JT="firebase",tx="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="[DEFAULT]",ex={[Cd]:"fire-core",[CT]:"fire-core-compat",[DT]:"fire-analytics",[IT]:"fire-analytics-compat",[MT]:"fire-app-check",[NT]:"fire-app-check-compat",[VT]:"fire-auth",[OT]:"fire-auth-compat",[jT]:"fire-rtdb",[LT]:"fire-data-connect",[kT]:"fire-rtdb-compat",[UT]:"fire-fn",[zT]:"fire-fn-compat",[PT]:"fire-iid",[BT]:"fire-iid-compat",[qT]:"fire-fcm",[HT]:"fire-fcm-compat",[GT]:"fire-perf",[FT]:"fire-perf-compat",[QT]:"fire-rc",[$T]:"fire-rc-compat",[YT]:"fire-gcs",[KT]:"fire-gcs-compat",[WT]:"fire-fst",[ZT]:"fire-fst-compat",[XT]:"fire-vertex","fire-js":"fire-js",[JT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,nx=new Map,Dd=new Map;function Tv(r,e){try{r.container.addComponent(e)}catch(i){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function Nc(r){const e=r.name;if(Dd.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,r);for(const i of Dc.values())Tv(i,r);for(const i of nx.values())Tv(i,r);return!0}function ix(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function rx(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new K0("app","Firebase",sx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,i,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=tx;function J0(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Id,automaticDataCollectionEnabled:!1},e),o=a.name;if(typeof o!="string"||!o)throw us.create("bad-app-name",{appName:String(o)});if(i||(i=Y0()),!i)throw us.create("no-options");const c=Dc.get(o);if(c){if(Ic(i,c.options)&&Ic(a,c.config))return c;throw us.create("duplicate-app",{appName:o})}const f=new cT(o);for(const g of Dd.values())f.addComponent(g);const m=new ax(i,a,f);return Dc.set(o,m),m}function ox(r=Id){const e=Dc.get(r);if(!e&&r===Id&&Y0())return J0();if(!e)throw us.create("no-app",{appName:r});return e}function Ja(r,e,i){var a;let o=(a=ex[r])!==null&&a!==void 0?a:r;i&&(o+=`-${i}`);const c=o.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(m.join(" "));return}Nc(new Co(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebase-heartbeat-database",cx=1,Io="firebase-heartbeat-store";let vd=null;function t_(){return vd||(vd=TT(ux,cx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Io)}catch(i){console.warn(i)}}}}).catch(r=>{throw us.create("idb-open",{originalErrorMessage:r.message})})),vd}async function hx(r){try{const i=(await t_()).transaction(Io),a=await i.objectStore(Io).get(e_(r));return await i.done,a}catch(e){if(e instanceof hl)Ir.warn(e.message);else{const i=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(i.message)}}}async function xv(r,e){try{const a=(await t_()).transaction(Io,"readwrite");await a.objectStore(Io).put(e,e_(r)),await a.done}catch(i){if(i instanceof hl)Ir.warn(i.message);else{const a=us.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Ir.warn(a.message)}}}function e_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=1024,dx=30;class mx{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new gx(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Av();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>dx){const f=yx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ir.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Av(),{heartbeatsToSend:a,unsentEntries:o}=px(this._heartbeatsCache.heartbeats),c=Cc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(i){return Ir.warn(i),""}}}function Av(){return new Date().toISOString().substring(0,10)}function px(r,e=fx){const i=[];let a=r.slice();for(const o of r){const c=i.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),wv(i)>e){c.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),wv(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class gx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nT()?iT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await hx(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return xv(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function wv(r){return Cc(JSON.stringify({version:2,heartbeats:r})).length}function yx(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(r){Nc(new Co("platform-logger",e=>new wT(e),"PRIVATE")),Nc(new Co("heartbeat",e=>new mx(e),"PRIVATE")),Ja(Cd,Sv,r),Ja(Cd,Sv,"esm2017"),Ja("fire-js","")}vx("");var _x="firebase",Ex="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ja(_x,Ex,"app");var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,n_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,R){function w(){}w.prototype=R.prototype,j.D=R.prototype,j.prototype=new w,j.prototype.constructor=j,j.C=function(M,L,U){for(var I=Array(arguments.length-2),It=2;It<arguments.length;It++)I[It-2]=arguments[It];return R.prototype[L].apply(M,I)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,R,w){w||(w=0);var M=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)M[L]=R.charCodeAt(w++)|R.charCodeAt(w++)<<8|R.charCodeAt(w++)<<16|R.charCodeAt(w++)<<24;else for(L=0;16>L;++L)M[L]=R[w++]|R[w++]<<8|R[w++]<<16|R[w++]<<24;R=j.g[0],w=j.g[1],L=j.g[2];var U=j.g[3],I=R+(U^w&(L^U))+M[0]+3614090360&4294967295;R=w+(I<<7&4294967295|I>>>25),I=U+(L^R&(w^L))+M[1]+3905402710&4294967295,U=R+(I<<12&4294967295|I>>>20),I=L+(w^U&(R^w))+M[2]+606105819&4294967295,L=U+(I<<17&4294967295|I>>>15),I=w+(R^L&(U^R))+M[3]+3250441966&4294967295,w=L+(I<<22&4294967295|I>>>10),I=R+(U^w&(L^U))+M[4]+4118548399&4294967295,R=w+(I<<7&4294967295|I>>>25),I=U+(L^R&(w^L))+M[5]+1200080426&4294967295,U=R+(I<<12&4294967295|I>>>20),I=L+(w^U&(R^w))+M[6]+2821735955&4294967295,L=U+(I<<17&4294967295|I>>>15),I=w+(R^L&(U^R))+M[7]+4249261313&4294967295,w=L+(I<<22&4294967295|I>>>10),I=R+(U^w&(L^U))+M[8]+1770035416&4294967295,R=w+(I<<7&4294967295|I>>>25),I=U+(L^R&(w^L))+M[9]+2336552879&4294967295,U=R+(I<<12&4294967295|I>>>20),I=L+(w^U&(R^w))+M[10]+4294925233&4294967295,L=U+(I<<17&4294967295|I>>>15),I=w+(R^L&(U^R))+M[11]+2304563134&4294967295,w=L+(I<<22&4294967295|I>>>10),I=R+(U^w&(L^U))+M[12]+1804603682&4294967295,R=w+(I<<7&4294967295|I>>>25),I=U+(L^R&(w^L))+M[13]+4254626195&4294967295,U=R+(I<<12&4294967295|I>>>20),I=L+(w^U&(R^w))+M[14]+2792965006&4294967295,L=U+(I<<17&4294967295|I>>>15),I=w+(R^L&(U^R))+M[15]+1236535329&4294967295,w=L+(I<<22&4294967295|I>>>10),I=R+(L^U&(w^L))+M[1]+4129170786&4294967295,R=w+(I<<5&4294967295|I>>>27),I=U+(w^L&(R^w))+M[6]+3225465664&4294967295,U=R+(I<<9&4294967295|I>>>23),I=L+(R^w&(U^R))+M[11]+643717713&4294967295,L=U+(I<<14&4294967295|I>>>18),I=w+(U^R&(L^U))+M[0]+3921069994&4294967295,w=L+(I<<20&4294967295|I>>>12),I=R+(L^U&(w^L))+M[5]+3593408605&4294967295,R=w+(I<<5&4294967295|I>>>27),I=U+(w^L&(R^w))+M[10]+38016083&4294967295,U=R+(I<<9&4294967295|I>>>23),I=L+(R^w&(U^R))+M[15]+3634488961&4294967295,L=U+(I<<14&4294967295|I>>>18),I=w+(U^R&(L^U))+M[4]+3889429448&4294967295,w=L+(I<<20&4294967295|I>>>12),I=R+(L^U&(w^L))+M[9]+568446438&4294967295,R=w+(I<<5&4294967295|I>>>27),I=U+(w^L&(R^w))+M[14]+3275163606&4294967295,U=R+(I<<9&4294967295|I>>>23),I=L+(R^w&(U^R))+M[3]+4107603335&4294967295,L=U+(I<<14&4294967295|I>>>18),I=w+(U^R&(L^U))+M[8]+1163531501&4294967295,w=L+(I<<20&4294967295|I>>>12),I=R+(L^U&(w^L))+M[13]+2850285829&4294967295,R=w+(I<<5&4294967295|I>>>27),I=U+(w^L&(R^w))+M[2]+4243563512&4294967295,U=R+(I<<9&4294967295|I>>>23),I=L+(R^w&(U^R))+M[7]+1735328473&4294967295,L=U+(I<<14&4294967295|I>>>18),I=w+(U^R&(L^U))+M[12]+2368359562&4294967295,w=L+(I<<20&4294967295|I>>>12),I=R+(w^L^U)+M[5]+4294588738&4294967295,R=w+(I<<4&4294967295|I>>>28),I=U+(R^w^L)+M[8]+2272392833&4294967295,U=R+(I<<11&4294967295|I>>>21),I=L+(U^R^w)+M[11]+1839030562&4294967295,L=U+(I<<16&4294967295|I>>>16),I=w+(L^U^R)+M[14]+4259657740&4294967295,w=L+(I<<23&4294967295|I>>>9),I=R+(w^L^U)+M[1]+2763975236&4294967295,R=w+(I<<4&4294967295|I>>>28),I=U+(R^w^L)+M[4]+1272893353&4294967295,U=R+(I<<11&4294967295|I>>>21),I=L+(U^R^w)+M[7]+4139469664&4294967295,L=U+(I<<16&4294967295|I>>>16),I=w+(L^U^R)+M[10]+3200236656&4294967295,w=L+(I<<23&4294967295|I>>>9),I=R+(w^L^U)+M[13]+681279174&4294967295,R=w+(I<<4&4294967295|I>>>28),I=U+(R^w^L)+M[0]+3936430074&4294967295,U=R+(I<<11&4294967295|I>>>21),I=L+(U^R^w)+M[3]+3572445317&4294967295,L=U+(I<<16&4294967295|I>>>16),I=w+(L^U^R)+M[6]+76029189&4294967295,w=L+(I<<23&4294967295|I>>>9),I=R+(w^L^U)+M[9]+3654602809&4294967295,R=w+(I<<4&4294967295|I>>>28),I=U+(R^w^L)+M[12]+3873151461&4294967295,U=R+(I<<11&4294967295|I>>>21),I=L+(U^R^w)+M[15]+530742520&4294967295,L=U+(I<<16&4294967295|I>>>16),I=w+(L^U^R)+M[2]+3299628645&4294967295,w=L+(I<<23&4294967295|I>>>9),I=R+(L^(w|~U))+M[0]+4096336452&4294967295,R=w+(I<<6&4294967295|I>>>26),I=U+(w^(R|~L))+M[7]+1126891415&4294967295,U=R+(I<<10&4294967295|I>>>22),I=L+(R^(U|~w))+M[14]+2878612391&4294967295,L=U+(I<<15&4294967295|I>>>17),I=w+(U^(L|~R))+M[5]+4237533241&4294967295,w=L+(I<<21&4294967295|I>>>11),I=R+(L^(w|~U))+M[12]+1700485571&4294967295,R=w+(I<<6&4294967295|I>>>26),I=U+(w^(R|~L))+M[3]+2399980690&4294967295,U=R+(I<<10&4294967295|I>>>22),I=L+(R^(U|~w))+M[10]+4293915773&4294967295,L=U+(I<<15&4294967295|I>>>17),I=w+(U^(L|~R))+M[1]+2240044497&4294967295,w=L+(I<<21&4294967295|I>>>11),I=R+(L^(w|~U))+M[8]+1873313359&4294967295,R=w+(I<<6&4294967295|I>>>26),I=U+(w^(R|~L))+M[15]+4264355552&4294967295,U=R+(I<<10&4294967295|I>>>22),I=L+(R^(U|~w))+M[6]+2734768916&4294967295,L=U+(I<<15&4294967295|I>>>17),I=w+(U^(L|~R))+M[13]+1309151649&4294967295,w=L+(I<<21&4294967295|I>>>11),I=R+(L^(w|~U))+M[4]+4149444226&4294967295,R=w+(I<<6&4294967295|I>>>26),I=U+(w^(R|~L))+M[11]+3174756917&4294967295,U=R+(I<<10&4294967295|I>>>22),I=L+(R^(U|~w))+M[2]+718787259&4294967295,L=U+(I<<15&4294967295|I>>>17),I=w+(U^(L|~R))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+R&4294967295,j.g[1]=j.g[1]+(L+(I<<21&4294967295|I>>>11))&4294967295,j.g[2]=j.g[2]+L&4294967295,j.g[3]=j.g[3]+U&4294967295}a.prototype.u=function(j,R){R===void 0&&(R=j.length);for(var w=R-this.blockSize,M=this.B,L=this.h,U=0;U<R;){if(L==0)for(;U<=w;)o(this,j,U),U+=this.blockSize;if(typeof j=="string"){for(;U<R;)if(M[L++]=j.charCodeAt(U++),L==this.blockSize){o(this,M),L=0;break}}else for(;U<R;)if(M[L++]=j[U++],L==this.blockSize){o(this,M),L=0;break}}this.h=L,this.o+=R},a.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var R=1;R<j.length-8;++R)j[R]=0;var w=8*this.o;for(R=j.length-8;R<j.length;++R)j[R]=w&255,w/=256;for(this.u(j),j=Array(16),R=w=0;4>R;++R)for(var M=0;32>M;M+=8)j[w++]=this.g[R]>>>M&255;return j};function c(j,R){var w=m;return Object.prototype.hasOwnProperty.call(w,j)?w[j]:w[j]=R(j)}function f(j,R){this.h=R;for(var w=[],M=!0,L=j.length-1;0<=L;L--){var U=j[L]|0;M&&U==R||(w[L]=U,M=!1)}this.g=w}var m={};function g(j){return-128<=j&&128>j?c(j,function(R){return new f([R|0],0>R?-1:0)}):new f([j|0],0>j?-1:0)}function p(j){if(isNaN(j)||!isFinite(j))return S;if(0>j)return B(p(-j));for(var R=[],w=1,M=0;j>=w;M++)R[M]=j/w|0,w*=4294967296;return new f(R,0)}function b(j,R){if(j.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(j.charAt(0)=="-")return B(b(j.substring(1),R));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=p(Math.pow(R,8)),M=S,L=0;L<j.length;L+=8){var U=Math.min(8,j.length-L),I=parseInt(j.substring(L,L+U),R);8>U?(U=p(Math.pow(R,U)),M=M.j(U).add(p(I))):(M=M.j(w),M=M.add(p(I)))}return M}var S=g(0),A=g(1),O=g(16777216);r=f.prototype,r.m=function(){if(G(this))return-B(this).m();for(var j=0,R=1,w=0;w<this.g.length;w++){var M=this.i(w);j+=(0<=M?M:4294967296+M)*R,R*=4294967296}return j},r.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(N(this))return"0";if(G(this))return"-"+B(this).toString(j);for(var R=p(Math.pow(j,6)),w=this,M="";;){var L=lt(w,R).g;w=H(w,L.j(R));var U=((0<w.g.length?w.g[0]:w.h)>>>0).toString(j);if(w=L,N(w))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},r.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function N(j){if(j.h!=0)return!1;for(var R=0;R<j.g.length;R++)if(j.g[R]!=0)return!1;return!0}function G(j){return j.h==-1}r.l=function(j){return j=H(this,j),G(j)?-1:N(j)?0:1};function B(j){for(var R=j.g.length,w=[],M=0;M<R;M++)w[M]=~j.g[M];return new f(w,~j.h).add(A)}r.abs=function(){return G(this)?B(this):this},r.add=function(j){for(var R=Math.max(this.g.length,j.g.length),w=[],M=0,L=0;L<=R;L++){var U=M+(this.i(L)&65535)+(j.i(L)&65535),I=(U>>>16)+(this.i(L)>>>16)+(j.i(L)>>>16);M=I>>>16,U&=65535,I&=65535,w[L]=I<<16|U}return new f(w,w[w.length-1]&-2147483648?-1:0)};function H(j,R){return j.add(B(R))}r.j=function(j){if(N(this)||N(j))return S;if(G(this))return G(j)?B(this).j(B(j)):B(B(this).j(j));if(G(j))return B(this.j(B(j)));if(0>this.l(O)&&0>j.l(O))return p(this.m()*j.m());for(var R=this.g.length+j.g.length,w=[],M=0;M<2*R;M++)w[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<j.g.length;L++){var U=this.i(M)>>>16,I=this.i(M)&65535,It=j.i(L)>>>16,Ot=j.i(L)&65535;w[2*M+2*L]+=I*Ot,Y(w,2*M+2*L),w[2*M+2*L+1]+=U*Ot,Y(w,2*M+2*L+1),w[2*M+2*L+1]+=I*It,Y(w,2*M+2*L+1),w[2*M+2*L+2]+=U*It,Y(w,2*M+2*L+2)}for(M=0;M<R;M++)w[M]=w[2*M+1]<<16|w[2*M];for(M=R;M<2*R;M++)w[M]=0;return new f(w,0)};function Y(j,R){for(;(j[R]&65535)!=j[R];)j[R+1]+=j[R]>>>16,j[R]&=65535,R++}function P(j,R){this.g=j,this.h=R}function lt(j,R){if(N(R))throw Error("division by zero");if(N(j))return new P(S,S);if(G(j))return R=lt(B(j),R),new P(B(R.g),B(R.h));if(G(R))return R=lt(j,B(R)),new P(B(R.g),R.h);if(30<j.g.length){if(G(j)||G(R))throw Error("slowDivide_ only works with positive integers.");for(var w=A,M=R;0>=M.l(j);)w=dt(w),M=dt(M);var L=St(w,1),U=St(M,1);for(M=St(M,2),w=St(w,2);!N(M);){var I=U.add(M);0>=I.l(j)&&(L=L.add(w),U=I),M=St(M,1),w=St(w,1)}return R=H(j,L.j(R)),new P(L,R)}for(L=S;0<=j.l(R);){for(w=Math.max(1,Math.floor(j.m()/R.m())),M=Math.ceil(Math.log(w)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=p(w),I=U.j(R);G(I)||0<I.l(j);)w-=M,U=p(w),I=U.j(R);N(U)&&(U=A),L=L.add(U),j=H(j,I)}return new P(L,j)}r.A=function(j){return lt(this,j).h},r.and=function(j){for(var R=Math.max(this.g.length,j.g.length),w=[],M=0;M<R;M++)w[M]=this.i(M)&j.i(M);return new f(w,this.h&j.h)},r.or=function(j){for(var R=Math.max(this.g.length,j.g.length),w=[],M=0;M<R;M++)w[M]=this.i(M)|j.i(M);return new f(w,this.h|j.h)},r.xor=function(j){for(var R=Math.max(this.g.length,j.g.length),w=[],M=0;M<R;M++)w[M]=this.i(M)^j.i(M);return new f(w,this.h^j.h)};function dt(j){for(var R=j.g.length+1,w=[],M=0;M<R;M++)w[M]=j.i(M)<<1|j.i(M-1)>>>31;return new f(w,j.h)}function St(j,R){var w=R>>5;R%=32;for(var M=j.g.length-w,L=[],U=0;U<M;U++)L[U]=0<R?j.i(U+w)>>>R|j.i(U+w+1)<<32-R:j.i(U+w);return new f(L,j.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,n_=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=b,cs=f}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var i_,_o,r_,bc,Nd,s_,a_,l_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,_){return u==Array.prototype||u==Object.prototype||(u[y]=_.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=i(this);function o(u,y){if(y)t:{var _=a;u=u.split(".");for(var x=0;x<u.length-1;x++){var F=u[x];if(!(F in _))break t;_=_[F]}u=u[u.length-1],x=_[u],y=y(x),y!=x&&y!=null&&e(_,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var _=0,x=!1,F={next:function(){if(!x&&_<u.length){var tt=_++;return{value:y(tt,u[tt]),done:!1}}return x=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function p(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function b(u,y,_){return u.call.apply(u.bind,arguments)}function S(u,y,_){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,x),u.apply(y,F)}}return function(){return u.apply(y,arguments)}}function A(u,y,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:S,A.apply(null,arguments)}function O(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function N(u,y){function _(){}_.prototype=y.prototype,u.aa=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(x,F,tt){for(var yt=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)yt[ie-2]=arguments[ie];return y.prototype[F].apply(x,yt)}}function G(u){const y=u.length;if(0<y){const _=Array(y);for(let x=0;x<y;x++)_[x]=u[x];return _}return[]}function B(u,y){for(let _=1;_<arguments.length;_++){const x=arguments[_];if(g(x)){const F=u.length||0,tt=x.length||0;u.length=F+tt;for(let yt=0;yt<tt;yt++)u[F+yt]=x[yt]}else u.push(x)}}class H{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function lt(u){return lt[" "](u),u}lt[" "]=function(){};var dt=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function St(u,y,_){for(const x in u)y.call(_,u[x],x,u)}function j(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function R(u){const y={};for(const _ in u)y[_]=u[_];return y}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,y){let _,x;for(let F=1;F<arguments.length;F++){x=arguments[F];for(_ in x)u[_]=x[_];for(let tt=0;tt<w.length;tt++)_=w[tt],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function L(u){var y=1;u=u.split(":");const _=[];for(;0<y&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function U(u){m.setTimeout(()=>{throw u},0)}function I(){var u=Ft;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class It{constructor(){this.h=this.g=null}add(y,_){const x=Ot.get();x.set(y,_),this.h?this.h.next=x:this.g=x,this.h=x}}var Ot=new H(()=>new J,u=>u.reset());class J{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let mt,At=!1,Ft=new It,k=()=>{const u=m.Promise.resolve(void 0);mt=()=>{u.then(at)}};var at=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(_){U(_)}var y=Ot;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}At=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var Rt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return u}();function Ct(u,y){if(ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(dt){t:{try{lt(y.nodeName);var F=!0;break t}catch{}F=!1}F||(y=null)}}else _=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement);this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:X[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ct.aa.h.call(this)}}N(Ct,ft);var X={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),Et=0;function Lt(u,y,_,x,F){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!x,this.ha=F,this.key=++Et,this.da=this.fa=!1}function Kt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qt(u){this.src=u,this.g={},this.h=0}qt.prototype.add=function(u,y,_,x,F){var tt=u.toString();u=this.g[tt],u||(u=this.g[tt]=[],this.h++);var yt=Mt(u,y,x,F);return-1<yt?(y=u[yt],_||(y.fa=!1)):(y=new Lt(y,this.src,tt,!!x,F),y.fa=_,u.push(y)),y};function st(u,y){var _=y.type;if(_ in u.g){var x=u.g[_],F=Array.prototype.indexOf.call(x,y,void 0),tt;(tt=0<=F)&&Array.prototype.splice.call(x,F,1),tt&&(Kt(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Mt(u,y,_,x){for(var F=0;F<u.length;++F){var tt=u[F];if(!tt.da&&tt.listener==y&&tt.capture==!!_&&tt.ha==x)return F}return-1}var jt="closure_lm_"+(1e6*Math.random()|0),Dt={};function kt(u,y,_,x,F){if(Array.isArray(y)){for(var tt=0;tt<y.length;tt++)kt(u,y[tt],_,x,F);return null}return _=nr(_),u&&u[vt]?u.K(y,_,p(x)?!!x.capture:!1,F):$t(u,y,_,!1,x,F)}function $t(u,y,_,x,F,tt){if(!y)throw Error("Invalid event type");var yt=p(F)?!!F.capture:!!F,ie=er(u);if(ie||(u[jt]=ie=new qt(u)),_=ie.add(y,_,x,yt,tt),_.proxy)return _;if(x=_e(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)Rt||(F=yt),F===void 0&&(F=!1),u.addEventListener(y.toString(),x,F);else if(u.attachEvent)u.attachEvent(Rn(y.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function _e(){function u(_){return y.call(u.src,u.listener,_)}const y=bi;return u}function Ee(u,y,_,x,F){if(Array.isArray(y))for(var tt=0;tt<y.length;tt++)Ee(u,y[tt],_,x,F);else x=p(x)?!!x.capture:!!x,_=nr(_),u&&u[vt]?(u=u.i,y=String(y).toString(),y in u.g&&(tt=u.g[y],_=Mt(tt,_,x,F),-1<_&&(Kt(tt[_]),Array.prototype.splice.call(tt,_,1),tt.length==0&&(delete u.g[y],u.h--)))):u&&(u=er(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Mt(y,_,x,F)),(_=-1<u?y[u]:null)&&Ye(_))}function Ye(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[vt])st(y.i,u);else{var _=u.type,x=u.proxy;y.removeEventListener?y.removeEventListener(_,x,u.capture):y.detachEvent?y.detachEvent(Rn(_),x):y.addListener&&y.removeListener&&y.removeListener(x),(_=er(y))?(st(_,u),_.h==0&&(_.src=null,y[jt]=null)):Kt(u)}}}function Rn(u){return u in Dt?Dt[u]:Dt[u]="on"+u}function bi(u,y){if(u.da)u=!0;else{y=new Ct(y,this);var _=u.listener,x=u.ha||u.src;u.fa&&Ye(u),u=_.call(x,y)}return u}function er(u){return u=u[jt],u instanceof qt?u:null}var Xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function nr(u){return typeof u=="function"?u:(u[Xn]||(u[Xn]=function(y){return u.handleEvent(y)}),u[Xn])}function be(){gt.call(this),this.i=new qt(this),this.M=this,this.F=null}N(be,gt),be.prototype[vt]=!0,be.prototype.removeEventListener=function(u,y,_,x){Ee(this,u,y,_,x)};function ce(u,y){var _,x=u.F;if(x)for(_=[];x;x=x.F)_.push(x);if(u=u.M,x=y.type||y,typeof y=="string")y=new ft(y,u);else if(y instanceof ft)y.target=y.target||u;else{var F=y;y=new ft(x,u),M(y,F)}if(F=!0,_)for(var tt=_.length-1;0<=tt;tt--){var yt=y.g=_[tt];F=Cn(yt,x,!0,y)&&F}if(yt=y.g=u,F=Cn(yt,x,!0,y)&&F,F=Cn(yt,x,!1,y)&&F,_)for(tt=0;tt<_.length;tt++)yt=y.g=_[tt],F=Cn(yt,x,!1,y)&&F}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var _=u.g[y],x=0;x<_.length;x++)Kt(_[x]);delete u.g[y],u.h--}}this.F=null},be.prototype.K=function(u,y,_,x){return this.i.add(String(u),y,!1,_,x)},be.prototype.L=function(u,y,_,x){return this.i.add(String(u),y,!0,_,x)};function Cn(u,y,_,x){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var F=!0,tt=0;tt<y.length;++tt){var yt=y[tt];if(yt&&!yt.da&&yt.capture==_){var ie=yt.listener,We=yt.ha||yt.src;yt.fa&&st(u.i,yt),F=ie.call(We,x)!==!1&&F}}return F&&!x.defaultPrevented}function cn(u,y,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function ir(u){u.g=cn(()=>{u.g=null,u.i&&(u.i=!1,ir(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class gl extends gt{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ir(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rr(u){gt.call(this),this.h=u,this.g={}}N(rr,gt);var Zn=[];function In(u){St(u.g,function(y,_){this.g.hasOwnProperty(_)&&Ye(y)},u),u.g={}}rr.prototype.N=function(){rr.aa.N.call(this),In(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ke=m.JSON.stringify,sr=m.JSON.parse,Jn=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Vr(){}Vr.prototype.h=null;function Or(u){return u.h||(u.h=u.i())}function bs(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hn(){ft.call(this,"d")}N(hn,ft);function jr(){ft.call(this,"c")}N(jr,ft);var ei={},Si=null;function On(){return Si=Si||new be}ei.La="serverreachability";function Lr(u){ft.call(this,ei.La,u)}N(Lr,ft);function Oi(u){const y=On();ce(y,new Lr(y))}ei.STAT_EVENT="statevent";function ua(u,y){ft.call(this,ei.STAT_EVENT,u),this.stat=y}N(ua,ft);function xe(u){const y=On();ce(y,new ua(y,u))}ei.Ma="timingevent";function Le(u,y){ft.call(this,ei.Ma,u),this.size=y}N(Le,ft);function Ne(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function Ss(u,y,_,x,F,tt){u.info(function(){if(u.g)if(tt)for(var yt="",ie=tt.split("&"),We=0;We<ie.length;We++){var re=ie[We].split("=");if(1<re.length){var sn=re[0];re=re[1];var Xe=sn.split("_");yt=2<=Xe.length&&Xe[1]=="type"?yt+(sn+"="+re+"&"):yt+(sn+"=redacted&")}}else yt=null;else yt=tt;return"XMLHTTP REQ ("+x+") [attempt "+F+"]: "+y+`
`+_+`
`+yt})}function yl(u,y,_,x,F,tt,yt){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+F+"]: "+y+`
`+_+`
`+tt+" "+yt})}function Ti(u,y,_,x){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+ji(u,_)+(x?" "+x:"")})}function Ts(u,y){u.info(function(){return"TIMEOUT: "+y})}jn.prototype.info=function(){};function ji(u,y){if(!u.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var x=_[u];if(!(2>x.length)){var F=x[1];if(Array.isArray(F)&&!(1>F.length)){var tt=F[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(var yt=1;yt<F.length;yt++)F[yt]=""}}}}return Ke(_)}catch{return y}}var Li={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ni;function ii(){}N(ii,Vr),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ni=new ii;function fn(u,y,_,x){this.j=u,this.i=y,this.l=_,this.R=x||1,this.U=new rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}var xs={},kr={};function Ln(u,y,_){u.L=1,u.v=Is(qn(y)),u.m=_,u.P=!0,ri(u,null)}function ri(u,y){u.F=Date.now(),D(u),u.A=qn(u.v);var _=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),bl(_.i,"t",x),u.C=0,_=u.j.J,u.h=new Me,u.g=lu(u.j,_?y:null,!u.m),0<u.O&&(u.M=new gl(A(u.Y,u,u.g),u.O)),y=u.U,_=u.g,x=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Zn[0]=F.toString()),F=Zn);for(var tt=0;tt<F.length;tt++){var yt=kt(_,F[tt],x||y.handleEvent,!1,y.h||y);if(!yt)break;y.g[yt.key]=yt}y=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Oi(),Ss(u.i,u.u,u.A,u.l,u.R,u.m)}fn.prototype.ca=function(u){u=u.target;const y=this.M;y&&ui(u)==3?y.j():this.Y(u)},fn.prototype.Y=function(u){try{if(u==this.g)t:{const Xe=ui(this.g);var y=this.g.Ba();const fr=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||Jo(this.g)))){this.J||Xe!=4||y==7||(y==8||0>=fr?Oi(3):Oi(2)),et(this);var _=this.g.Z();this.X=_;e:if(As(this)){var x=Jo(this.g);u="";var F=x.length,tt=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ht(this),rt(this);var yt="";break e}this.h.i=new m.TextDecoder}for(y=0;y<F;y++)this.h.h=!0,u+=this.h.i.decode(x[y],{stream:!(tt&&y==F-1)});x.length=0,this.h.g+=u,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=_==200,yl(this.i,this.u,this.A,this.l,this.R,Xe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var ie,We=this.g;if((ie=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ie)){var re=ie;break e}}re=null}if(_=re)Ti(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pt(this,_);else{this.o=!1,this.s=3,xe(12),ht(this),rt(this);break t}}if(this.P){_=!0;let dn;for(;!this.J&&this.C<yt.length;)if(dn=ws(this,yt),dn==kr){Xe==4&&(this.s=4,xe(14),_=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==xs){this.s=4,xe(15),Ti(this.i,this.l,yt,"[Invalid Chunk]"),_=!1;break}else Ti(this.i,this.l,dn,null),pt(this,dn);if(As(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||yt.length!=0||this.h.h||(this.s=1,xe(16),_=!1),this.o=this.o&&_,!_)Ti(this.i,this.l,yt,"[Invalid Chunked Response]"),ht(this),rt(this);else if(0<yt.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),ks(sn),sn.M=!0,xe(11))}}else Ti(this.i,this.l,yt,null),pt(this,yt);Xe==4&&ht(this),this.o&&!this.J&&(Xe==4?ru(this.j,this):(this.o=!1,D(this)))}else mh(this.g),_==400&&0<yt.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),ht(this),rt(this)}}}catch{}finally{}};function As(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ws(u,y){var _=u.C,x=y.indexOf(`
`,_);return x==-1?kr:(_=Number(y.substring(_,x)),isNaN(_)?xs:(x+=1,x+_>y.length?kr:(y=y.slice(x,x+_),u.C=x+_,y)))}fn.prototype.cancel=function(){this.J=!0,ht(this)};function D(u){u.S=Date.now()+u.I,Z(u,u.I)}function Z(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ne(A(u.ba,u),y)}function et(u){u.B&&(m.clearTimeout(u.B),u.B=null)}fn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ts(this.i,this.A),this.L!=2&&(Oi(),xe(17)),ht(this),this.s=2,rt(this)):Z(this,this.S-u)};function rt(u){u.j.G==0||u.J||ru(u.j,u)}function ht(u){et(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,In(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function pt(u,y){try{var _=u.j;if(_.G!=0&&(_.g==u||En(_.h,u))){if(!u.K&&En(_.h,u)&&_.G==3){try{var x=_.Da.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var F=x;if(F[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)va(_),ga(_);else break t;wl(_),xe(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ne(A(_.Za,_),6e3));if(1>=we(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else hr(_,11)}else if((u.K||_.g==u)&&va(_),!Y(y))for(F=_.Da.g.parse(y),y=0;y<F.length;y++){let re=F[y];if(_.T=re[0],re=re[1],_.G==2)if(re[0]=="c"){_.K=re[1],_.ia=re[2];const sn=re[3];sn!=null&&(_.la=sn,_.j.info("VER="+_.la));const Xe=re[4];Xe!=null&&(_.Aa=Xe,_.j.info("SVER="+_.Aa));const fr=re[5];fr!=null&&typeof fr=="number"&&0<fr&&(x=1.5*fr,_.L=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const dn=u.g;if(dn){const Hi=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hi){var tt=x.h;tt.g||Hi.indexOf("spdy")==-1&&Hi.indexOf("quic")==-1&&Hi.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(Ai(tt,tt.h),tt.h=null))}if(x.D){const Cl=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&(x.ya=Cl,pe(x.I,x.D,Cl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),x=_;var yt=u;if(x.qa=au(x,x.J?x.ia:null,x.W),yt.K){qe(x.h,yt);var ie=yt,We=x.L;We&&(ie.I=We),ie.B&&(et(ie),D(ie)),x.g=yt}else nu(x);0<_.i.length&&ya(_)}else re[0]!="stop"&&re[0]!="close"||hr(_,7);else _.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?hr(_,7):xl(_):re[0]!="noop"&&_.l&&_.l.ta(re),_.v=0)}}Oi(4)}catch{}}var _t=class{constructor(u,y){this.g=u,this.map=y}};function ne(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Se(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function we(u){return u.h?1:u.g?u.g.size:0}function En(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Ai(u,y){u.g?u.g.add(y):u.h=y}function qe(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}ne.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function si(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.D);return y}return G(u.i)}function ch(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],_=u.length,x=0;x<_;x++)y.push(u[x]);return y}y=[],_=0;for(x in u)y[_++]=u[x];return y}function ca(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var _=0;_<u;_++)y.push(_);return y}y=[],_=0;for(const x in u)y[_++]=x;return y}}}function vl(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var _=ca(u),x=ch(u),F=x.length,tt=0;tt<F;tt++)y.call(void 0,x[tt],_&&_[tt],u)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hh(u,y){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var x=u[_].indexOf("="),F=null;if(0<=x){var tt=u[_].substring(0,x);F=u[_].substring(x+1)}else tt=u[_];y(tt,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function He(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof He){this.h=u.h,Cs(this,u.j),this.o=u.o,this.g=u.g,Ur(this,u.s),this.l=u.l;var y=u.i,_=new lr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),ar(this,_),this.m=u.m}else u&&(y=String(u).match(Rs))?(this.h=!1,Cs(this,y[1]||"",!0),this.o=ai(y[2]||""),this.g=ai(y[3]||"",!0),Ur(this,y[4]),this.l=ai(y[5]||"",!0),ar(this,y[6]||"",!0),this.m=ai(y[7]||"")):(this.h=!1,this.i=new lr(null,this.h))}He.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Ds(y,_l,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Ds(y,_l,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ds(_,_.charAt(0)=="/"?fh:El,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ds(_,ha)),u.join("")};function qn(u){return new He(u)}function Cs(u,y,_){u.j=_?ai(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Ur(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function ar(u,y,_){y instanceof lr?(u.i=y,Xo(u.i,u.h)):(_||(y=Ds(y,dh)),u.i=new lr(y,u.h))}function pe(u,y,_){u.i.set(y,_)}function Is(u){return pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ai(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ds(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,Wo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _l=/[#\/\?@]/g,El=/[#\?:]/g,fh=/[#\?]/g,dh=/[#\?@]/g,ha=/#/g;function lr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function li(u){u.g||(u.g=new Map,u.h=0,u.i&&hh(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=lr.prototype,r.add=function(u,y){li(this),this.i=null,u=ki(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function or(u,y){li(u),y=ki(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function ur(u,y){return li(u),y=ki(u,y),u.g.has(y)}r.forEach=function(u,y){li(this),this.g.forEach(function(_,x){_.forEach(function(F){u.call(y,F,x,this)},this)},this)},r.na=function(){li(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let x=0;x<y.length;x++){const F=u[x];for(let tt=0;tt<F.length;tt++)_.push(y[x])}return _},r.V=function(u){li(this);let y=[];if(typeof u=="string")ur(this,u)&&(y=y.concat(this.g.get(ki(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)y=y.concat(u[_])}return y},r.set=function(u,y){return li(this),this.i=null,u=ki(this,u),ur(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function bl(u,y,_){or(u,y),0<_.length&&(u.i=null,u.g.set(ki(u,y),G(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var x=y[_];const tt=encodeURIComponent(String(x)),yt=this.V(x);for(x=0;x<yt.length;x++){var F=tt;yt[x]!==""&&(F+="="+encodeURIComponent(String(yt[x]))),u.push(F)}}return this.i=u.join("&")};function ki(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Xo(u,y){y&&!u.j&&(li(u),u.i=null,u.g.forEach(function(_,x){var F=x.toLowerCase();x!=F&&(or(this,x),bl(this,F,_))},u)),u.j=y}function Ns(u,y){const _=new jn;if(m.Image){const x=new Image;x.onload=O(oi,_,"TestLoadImage: loaded",!0,y,x),x.onerror=O(oi,_,"TestLoadImage: error",!1,y,x),x.onabort=O(oi,_,"TestLoadImage: abort",!1,y,x),x.ontimeout=O(oi,_,"TestLoadImage: timeout",!1,y,x),m.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else y(!1)}function wi(u,y){const _=new jn,x=new AbortController,F=setTimeout(()=>{x.abort(),oi(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:x.signal}).then(tt=>{clearTimeout(F),tt.ok?oi(_,"TestPingServer: ok",!0,y):oi(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),oi(_,"TestPingServer: error",!1,y)})}function oi(u,y,_,x,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),x(_)}catch{}}function Ms(){this.g=new Jn}function Ui(u,y,_){const x=_||"";try{vl(u,function(F,tt){let yt=F;p(F)&&(yt=Ke(F)),y.push(x+tt+"="+encodeURIComponent(yt))})}catch(F){throw y.push(x+"type="+encodeURIComponent("_badmap")),F}}function zr(u){this.l=u.Ub||null,this.j=u.eb||!1}N(zr,Vr),zr.prototype.g=function(){return new cr(this.l,this.j)},zr.prototype.i=function(u){return function(){return u}}({});function cr(u,y){be.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(cr,be),r=cr.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Pi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?zi(this):Pi(this),this.readyState==3&&Sl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,zi(this))},r.Qa=function(u){this.g&&(this.response=u,zi(this))},r.ga=function(){this.g&&zi(this)};function zi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pi(u)}r.setRequestHeader=function(u,y){this.u.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function Pi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Tl(u){let y="";return St(u,function(_,x){y+=x,y+=":",y+=_,y+=`\r
`}),y}function rn(u,y,_){t:{for(x in _){var x=!1;break t}x=!0}x||(_=Tl(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):pe(u,y,_))}function he(u){be.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(he,be);var fa=/^https?$/i,Vs=["POST","PUT"];r=he.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,y,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ni.g(),this.v=this.o?Or(this.o):Or(ni),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(tt){Zo(this,tt);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var F in x)_.set(F,x[F]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const tt of x.keys())_.set(tt,x.get(tt));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(tt=>tt.toLowerCase()=="content-type"),F=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Vs,y,void 0))||x||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,yt]of _)this.g.setRequestHeader(tt,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Os(this),this.u=!0,this.g.send(u),this.u=!1}catch(tt){Zo(this,tt)}};function Zo(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,da(u),Bi(u)}function da(u){u.A||(u.A=!0,ce(u,"complete"),ce(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ce(this,"complete"),ce(this,"abort"),Bi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),he.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ma(this):this.bb())},r.bb=function(){ma(this)};function ma(u){if(u.h&&typeof f<"u"&&(!u.v[1]||ui(u)!=4||u.Z()!=2)){if(u.u&&ui(u)==4)cn(u.Ea,0,u);else if(ce(u,"readystatechange"),ui(u)==4){u.h=!1;try{const yt=u.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var _;if(!(_=y)){var x;if(x=yt===0){var F=String(u.D).match(Rs)[1]||null;!F&&m.self&&m.self.location&&(F=m.self.location.protocol.slice(0,-1)),x=!fa.test(F?F.toLowerCase():"")}_=x}if(_)ce(u,"complete"),ce(u,"success");else{u.m=6;try{var tt=2<ui(u)?u.g.statusText:""}catch{tt=""}u.l=tt+" ["+u.Z()+"]",da(u)}}finally{Bi(u)}}}}function Bi(u,y){if(u.g){Os(u);const _=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||ce(u,"ready");try{_.onreadystatechange=x}catch{}}}function Os(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function ui(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),sr(y)}};function Jo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mh(u){const y={};u=(u.g&&2<=ui(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(Y(u[x]))continue;var _=L(u[x]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const tt=y[F]||[];y[F]=tt,tt.push(_)}j(y,function(x){return x.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function pa(u){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=js("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=js("baseRetryDelayMs",5e3,u),this.cb=js("retryDelaySeedMs",1e4,u),this.Wa=js("forwardChannelMaxRetries",2,u),this.wa=js("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ne(u&&u.concurrentRequestLimit),this.Da=new Ms,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=pa.prototype,r.la=8,r.G=1,r.connect=function(u,y,_,x){xe(0),this.W=u,this.H=y||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.I=au(this,null,this.W),ya(this)};function xl(u){if(tu(u),u.G==3){var y=u.U++,_=qn(u.I);if(pe(_,"SID",u.K),pe(_,"RID",y),pe(_,"TYPE","terminate"),Ls(u,_),y=new fn(u,u.j,y),y.L=2,y.v=Is(qn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=lu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),D(y)}su(u)}function ga(u){u.g&&(ks(u),u.g.cancel(),u.g=null)}function tu(u){ga(u),u.u&&(m.clearTimeout(u.u),u.u=null),va(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function ya(u){if(!Se(u.h)&&!u.s){u.s=!0;var y=u.Ga;mt||k(),At||(mt(),At=!0),Ft.add(y,u),u.B=0}}function ph(u,y){return we(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ne(A(u.Ga,u,y),Rl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new fn(this,this.j,u);let tt=this.o;if(this.S&&(tt?(tt=R(tt),M(tt,this.S)):tt=this.S),this.m!==null||this.O||(F.H=tt,tt=null),this.P)t:{for(var y=0,_=0;_<this.i.length;_++){e:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(y+=x,4096<y){y=_;break t}if(y===4096||_===this.i.length-1){y=_+1;break t}}y=1e3}else y=1e3;y=eu(this,F,y),_=qn(this.I),pe(_,"RID",u),pe(_,"CVER",22),this.D&&pe(_,"X-HTTP-Session-Id",this.D),Ls(this,_),tt&&(this.O?y="headers="+encodeURIComponent(String(Tl(tt)))+"&"+y:this.m&&rn(_,this.m,tt)),Ai(this.h,F),this.Ua&&pe(_,"TYPE","init"),this.P?(pe(_,"$req",y),pe(_,"SID","null"),F.T=!0,Ln(F,_,null)):Ln(F,_,y),this.G=2}}else this.G==3&&(u?Al(this,u):this.i.length==0||Se(this.h)||Al(this))};function Al(u,y){var _;y?_=y.l:_=u.U++;const x=qn(u.I);pe(x,"SID",u.K),pe(x,"RID",_),pe(x,"AID",u.T),Ls(u,x),u.m&&u.o&&rn(x,u.m,u.o),_=new fn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),y&&(u.i=y.D.concat(u.i)),y=eu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ai(u.h,_),Ln(_,x,y)}function Ls(u,y){u.H&&St(u.H,function(_,x){pe(y,x,_)}),u.l&&vl({},function(_,x){pe(y,x,_)})}function eu(u,y,_){_=Math.min(u.i.length,_);var x=u.l?A(u.l.Na,u.l,u):null;t:{var F=u.i;let tt=-1;for(;;){const yt=["count="+_];tt==-1?0<_?(tt=F[0].g,yt.push("ofs="+tt)):tt=0:yt.push("ofs="+tt);let ie=!0;for(let We=0;We<_;We++){let re=F[We].g;const sn=F[We].map;if(re-=tt,0>re)tt=Math.max(0,F[We].g-100),ie=!1;else try{Ui(sn,yt,"req"+re+"_")}catch{x&&x(sn)}}if(ie){x=yt.join("&");break t}}}return u=u.i.splice(0,_),y.D=u,x}function nu(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;mt||k(),At||(mt(),At=!0),Ft.add(y,u),u.v=0}}function wl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ne(A(u.Fa,u),Rl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ne(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),ga(this),iu(this))};function ks(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function iu(u){u.g=new fn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=qn(u.qa);pe(y,"RID","rpc"),pe(y,"SID",u.K),pe(y,"AID",u.T),pe(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&pe(y,"TO",u.ja),pe(y,"TYPE","xmlhttp"),Ls(u,y),u.m&&u.o&&rn(y,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Is(qn(y)),_.m=null,_.P=!0,ri(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ga(this),wl(this),xe(19))};function va(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function ru(u,y){var _=null;if(u.g==y){va(u),ks(u),u.g=null;var x=2}else if(En(u.h,y))_=y.D,qe(u.h,y),x=1;else return;if(u.G!=0){if(y.o)if(x==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var F=u.B;x=On(),ce(x,new Le(x,_)),ya(u)}else nu(u);else if(F=y.s,F==3||F==0&&0<y.X||!(x==1&&ph(u,y)||x==2&&wl(u)))switch(_&&0<_.length&&(y=u.h,y.i=y.i.concat(_)),F){case 1:hr(u,5);break;case 4:hr(u,10);break;case 3:hr(u,6);break;default:hr(u,2)}}}function Rl(u,y){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*y}function hr(u,y){if(u.j.info("Error code "+y),y==2){var _=A(u.fb,u),x=u.Xa;const F=!x;x=new He(x||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Cs(x,"https"),Is(x),F?Ns(x.toString(),_):wi(x.toString(),_)}else xe(2);u.G=0,u.l&&u.l.sa(y),su(u),tu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function su(u){if(u.G=0,u.ka=[],u.l){const y=si(u.h);(y.length!=0||u.i.length!=0)&&(B(u.ka,y),B(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function au(u,y,_){var x=_ instanceof He?qn(_):new He(_);if(x.g!="")y&&(x.g=y+"."+x.g),Ur(x,x.s);else{var F=m.location;x=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;var tt=new He(null);x&&Cs(tt,x),y&&(tt.g=y),F&&Ur(tt,F),_&&(tt.l=_),x=tt}return _=u.D,y=u.ya,_&&y&&pe(x,_,y),pe(x,"VER",u.la),Ls(u,x),x}function lu(u,y,_){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new he(new zr({eb:_})):new he(u.pa),y.Ha(u.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ou(){}r=ou.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function _a(){}_a.prototype.g=function(u,y){return new Dn(u,y)};function Dn(u,y){be.call(this),this.g=new pa(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!Y(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Y(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new qi(this)}N(Dn,be),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){xl(this.g)},Dn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ke(u),u=_);y.i.push(new _t(y.Ya++,u)),y.G==3&&ya(y)},Dn.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,Dn.aa.N.call(this)};function uu(u){hn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){t:{for(const _ in y){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}N(uu,hn);function cu(){jr.call(this),this.status=1}N(cu,jr);function qi(u){this.g=u}N(qi,ou),qi.prototype.ua=function(){ce(this.g,"a")},qi.prototype.ta=function(u){ce(this.g,new uu(u))},qi.prototype.sa=function(u){ce(this.g,new cu)},qi.prototype.ra=function(){ce(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,l_=function(){return new _a},a_=function(){return On()},s_=ei,Nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Li.NO_ERROR=0,Li.TIMEOUT=8,Li.HTTP_ERROR=6,bc=Li,xi.COMPLETE="complete",r_=xi,bs.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",be.prototype.listen=be.prototype.K,_o=bs,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,i_=he}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const Cv="@firebase/firestore",Iv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new W0("@firebase/firestore");function Ka(){return ia.logLevel}function Tt(r,...e){if(ia.logLevel<=le.DEBUG){const i=e.map(sm);ia.debug(`Firestore (${fl}): ${r}`,...i)}}function Dr(r,...e){if(ia.logLevel<=le.ERROR){const i=e.map(sm);ia.error(`Firestore (${fl}): ${r}`,...i)}}function nl(r,...e){if(ia.logLevel<=le.WARN){const i=e.map(sm);ia.warn(`Firestore (${fl}): ${r}`,...i)}}function sm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(r="Unexpected state"){const e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+r;throw Dr(e),new Error(e)}function fe(r,e){r||Bt()}function Gt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends hl{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(xn.UNAUTHENTICATED))}shutdown(){}}class Sx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Tx{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){fe(this.o===void 0);let a=this.i;const o=g=>this.i!==a?(a=this.i,i(g)):Promise.resolve();let c=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Rr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Rr)}},0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(fe(typeof a.accessToken=="string"),new o_(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new xn(e)}}class xx{constructor(e,i,a){this.l=e,this.h=i,this.P=a,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ax{constructor(e,i,a){this.l=e,this.h=i,this.P=a}getToken(){return Promise.resolve(new xx(this.l,this.h,this.P))}start(e,i){e.enqueueRetryable(()=>i(xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wx{constructor(e,i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,rx(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,i){fe(this.o===void 0);const a=c=>{c.error!=null&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,Tt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>a(c))};const o=c=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Dv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(fe(typeof i.token=="string"),this.R=i.token,new Dv(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=Rx(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<i&&(a+=e.charAt(o[c]%62))}return a}}function Xt(r,e){return r<e?-1:r>e?1:0}function Md(r,e){let i=0;for(;i<r.length&&i<e.length;){const a=r.codePointAt(i),o=e.codePointAt(i);if(a!==o){if(a<128&&o<128)return Xt(a,o);{const c=u_(),f=Cx(c.encode(Nv(r,i)),c.encode(Nv(e,i)));return f!==0?f:Xt(a,o)}}i+=a>65535?2:1}return Xt(r.length,e.length)}function Nv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Cx(r,e){for(let i=0;i<r.length&&i<e.length;++i)if(r[i]!==e[i])return Xt(r[i],e[i]);return Xt(r.length,e.length)}function il(r,e,i){return r.length===e.length&&r.every((a,o)=>i(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=-62135596800,Vv=1e6;class en{static now(){return en.fromMillis(Date.now())}static fromDate(e){return en.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Vv);return new en(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new xt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new xt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Mv)throw new xt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vv}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new en(0,0))}static max(){return new Ht(new en(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class Ki{constructor(e,i,a){i===void 0?i=0:i>e.length&&Bt(),a===void 0?a=e.length-i:a>e.length-i&&Bt(),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const c=Ki.compareSegments(e.get(o),i.get(o));if(c!==0)return c}return Xt(e.length,i.length)}static compareSegments(e,i){const a=Ki.isNumericId(e),o=Ki.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?Ki.extractNumericId(e).compare(Ki.extractNumericId(i)):Md(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class Re extends Ki{construct(e,i,a){return new Re(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new xt(ut.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(o=>o.length>0))}return new Re(i)}static emptyPath(){return new Re([])}}const Ix=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Ki{construct(e,i,a){return new vn(e,i,a)}static isValidIdentifier(e){return Ix.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new vn([Ov])}static fromServerFormat(e){const i=[];let a="",o=0;const c=()=>{if(a.length===0)throw new xt(ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new xt(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new xt(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(a+=m,o++):(c(),o++)}if(c(),f)throw new xt(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(i)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.path=e}static fromPath(e){return new Vt(Re.fromString(e))}static fromName(e){return new Vt(Re.fromString(e).popFirst(5))}static empty(){return new Vt(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Re.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vt(new Re(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=-1;function Dx(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Ht.fromTimestamp(a===1e9?new en(i+1,0):new en(i,a));return new ds(o,Vt.empty(),e)}function Nx(r){return new ds(r.readTime,r.key,Do)}class ds{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new ds(Ht.min(),Vt.empty(),Do)}static max(){return new ds(Ht.max(),Vt.empty(),Do)}}function Mx(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=Vt.comparator(r.documentKey,e.documentKey),i!==0?i:Xt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ox{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(r){if(r.code!==ut.FAILED_PRECONDITION||r.message!==Vx)throw r;Tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ct((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof ct?i:ct.resolve(i)}catch(i){return ct.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):ct.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):ct.reject(i)}static resolve(e){return new ct((i,a)=>{i(e)})}static reject(e){return new ct((i,a)=>{a(e)})}static waitFor(e){return new ct((i,a)=>{let o=0,c=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++c,f&&c===o&&i()},g=>a(g))}),f=!0,c===o&&i()})}static or(e){let i=ct.resolve(!1);for(const a of e)i=i.next(o=>o?ct.resolve(o):a());return i}static forEach(e,i){const a=[];return e.forEach((o,c)=>{a.push(i.call(this,o,c))}),this.waitFor(a)}static mapArray(e,i){return new ct((a,o)=>{const c=e.length,f=new Array(c);let m=0;for(let g=0;g<c;g++){const p=g;i(e[p]).next(b=>{f[p]=b,++m,m===c&&a(f)},b=>o(b))}})}static doWhile(e,i){return new ct((a,o)=>{const c=()=>{e()===!0?i().next(()=>{c()},o):a()};c()})}}function jx(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function ml(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.oe(a),this._e=a=>i.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=-1;function $c(r){return r==null}function Mc(r){return r===0&&1/r==-1/0}function Lx(r){return typeof r=="number"&&Number.isInteger(r)&&!Mc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="";function kx(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=jv(e)),e=Ux(r.get(i),e);return jv(e)}function Ux(r,e){let i=e;const a=r.length;for(let o=0;o<a;o++){const c=r.charAt(o);switch(c){case"\0":i+="";break;case h_:i+="";break;default:i+=c}}return i}function jv(r){return r+h_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function _s(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function f_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,i){this.comparator=e,this.root=i||yn.EMPTY}insert(e,i){return new je(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?a(e.key,i):1,i&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,i,a,o,c){this.key=e,this.value=i,this.color=a??yn.RED,this.left=o??yn.EMPTY,this.right=c??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,c){return new yn(e??this.key,i??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,i,a),null):c===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return yn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(e,i,a,o,c){return this}insert(e,i,a){return new yn(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new nn(this.comparator);return i.data=e,i}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Wn([])}unionWith(e){let i=new nn(vn.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new Wn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new d_("Invalid base64 string: "+c):c}}(e);return new _n(i)}static fromUint8Array(e){const i=function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c}(e);return new _n(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const zx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(r){if(fe(!!r),typeof r=="string"){let e=0;const i=zx.exec(r);if(fe(!!i),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Be(r.seconds),nanos:Be(r.nanos)}}function Be(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ps(r){return typeof r=="string"?_n.fromBase64String(r):_n.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="server_timestamp",p_="__type__",g_="__previous_value__",y_="__local_write_time__";function lm(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[p_])===null||i===void 0?void 0:i.stringValue)===m_}function Yc(r){const e=r.mapValue.fields[g_];return lm(e)?Yc(e):e}function No(r){const e=ms(r.mapValue.fields[y_].timestampValue);return new en(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,i,a,o,c,f,m,g,p){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p}}const Vc="(default)";class Mo{constructor(e,i){this.projectId=e,this.database=i||Vc}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__type__",Bx="__max__",mc={mapValue:{}},__="__vector__",Oc="value";function gs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lm(r)?4:Hx(r)?9007199254740991:qx(r)?10:11:Bt()}function Zi(r,e){if(r===e)return!0;const i=gs(r);if(i!==gs(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return No(r).isEqual(No(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=ms(o.timestampValue),m=ms(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,c){return ps(o.bytesValue).isEqual(ps(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,c){return Be(o.geoPointValue.latitude)===Be(c.geoPointValue.latitude)&&Be(o.geoPointValue.longitude)===Be(c.geoPointValue.longitude)}(r,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Be(o.integerValue)===Be(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Be(o.doubleValue),m=Be(c.doubleValue);return f===m?Mc(f)===Mc(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return il(r.arrayValue.values||[],e.arrayValue.values||[],Zi);case 10:case 11:return function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Lv(f)!==Lv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Zi(f[g],m[g])))return!1;return!0}(r,e);default:return Bt()}}function Vo(r,e){return(r.values||[]).find(i=>Zi(i,e))!==void 0}function rl(r,e){if(r===e)return 0;const i=gs(r),a=gs(e);if(i!==a)return Xt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Xt(r.booleanValue,e.booleanValue);case 2:return function(c,f){const m=Be(c.integerValue||c.doubleValue),g=Be(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return Uv(r.timestampValue,e.timestampValue);case 4:return Uv(No(r),No(e));case 5:return Md(r.stringValue,e.stringValue);case 6:return function(c,f){const m=ps(c),g=ps(f);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const m=c.split("/"),g=f.split("/");for(let p=0;p<m.length&&p<g.length;p++){const b=Xt(m[p],g[p]);if(b!==0)return b}return Xt(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const m=Xt(Be(c.latitude),Be(f.latitude));return m!==0?m:Xt(Be(c.longitude),Be(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return zv(r.arrayValue,e.arrayValue);case 10:return function(c,f){var m,g,p,b;const S=c.fields||{},A=f.fields||{},O=(m=S[Oc])===null||m===void 0?void 0:m.arrayValue,N=(g=A[Oc])===null||g===void 0?void 0:g.arrayValue,G=Xt(((p=O==null?void 0:O.values)===null||p===void 0?void 0:p.length)||0,((b=N==null?void 0:N.values)===null||b===void 0?void 0:b.length)||0);return G!==0?G:zv(O,N)}(r.mapValue,e.mapValue);case 11:return function(c,f){if(c===mc.mapValue&&f===mc.mapValue)return 0;if(c===mc.mapValue)return 1;if(f===mc.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),p=f.fields||{},b=Object.keys(p);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const A=Md(g[S],b[S]);if(A!==0)return A;const O=rl(m[g[S]],p[b[S]]);if(O!==0)return O}return Xt(g.length,b.length)}(r.mapValue,e.mapValue);default:throw Bt()}}function Uv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Xt(r,e);const i=ms(r),a=ms(e),o=Xt(i.seconds,a.seconds);return o!==0?o:Xt(i.nanos,a.nanos)}function zv(r,e){const i=r.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const c=rl(i[o],a[o]);if(c)return c}return Xt(i.length,a.length)}function sl(r){return Vd(r)}function Vd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const a=ms(i);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return ps(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return Vt.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let a="[",o=!0;for(const c of i.values||[])o?o=!1:a+=",",a+=Vd(c);return a+"]"}(r.arrayValue):"mapValue"in r?function(i){const a=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const f of a)c?c=!1:o+=",",o+=`${f}:${Vd(i.fields[f])}`;return o+"}"}(r.mapValue):Bt()}function Sc(r){switch(gs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yc(r);return e?16+Sc(e):16;case 5:return 2*r.stringValue.length;case 6:return ps(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,c)=>o+Sc(c),0)}(r.arrayValue);case 10:case 11:return function(a){let o=0;return _s(a.fields,(c,f)=>{o+=c.length+Sc(f)}),o}(r.mapValue);default:throw Bt()}}function Pv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Od(r){return!!r&&"integerValue"in r}function om(r){return!!r&&"arrayValue"in r}function Bv(r){return!!r&&"nullValue"in r}function qv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tc(r){return!!r&&"mapValue"in r}function qx(r){var e,i;return((i=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[v_])===null||i===void 0?void 0:i.stringValue)===__}function To(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return _s(r.mapValue.fields,(i,a)=>e.mapValue.fields[i]=To(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=To(r.arrayValue.values[i]);return e}return Object.assign({},r)}function Hx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Bx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Tc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(i)}setAll(e){let i=vn.emptyPath(),a={},o=[];e.forEach((f,m)=>{if(!i.isImmediateParentOf(m)){const g=this.getFieldsMap(i);this.applyChanges(g,a,o),a={},o=[],i=m.popLast()}f?a[m.lastSegment()]=To(f):o.push(m.lastSegment())});const c=this.getFieldsMap(i);this.applyChanges(c,a,o)}delete(e){const i=this.field(e.popLast());Tc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Zi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];Tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){_s(i,(o,c)=>e[o]=c);for(const o of a)delete e[o]}clone(){return new Bn(To(this.value))}}function E_(r){const e=[];return _s(r.fields,(i,a)=>{const o=new vn([i]);if(Tc(a)){const c=E_(a.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,i,a,o,c,f,m){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new An(e,0,Ht.min(),Ht.min(),Ht.min(),Bn.empty(),0)}static newFoundDocument(e,i,a,o){return new An(e,1,i,Ht.min(),a,o,0)}static newNoDocument(e,i){return new An(e,2,i,Ht.min(),Ht.min(),Bn.empty(),0)}static newUnknownDocument(e,i){return new An(e,3,i,Ht.min(),Ht.min(),Bn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,i){this.position=e,this.inclusive=i}}function Hv(r,e,i){let a=0;for(let o=0;o<r.position.length;o++){const c=e[o],f=r.position[o];if(c.field.isKeyField()?a=Vt.comparator(Vt.fromName(f.referenceValue),i.key):a=rl(f,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Gv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Zi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,i="asc"){this.field=e,this.dir=i}}function Gx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{}class $e extends b_{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new Qx(e,i,a):i==="array-contains"?new Kx(e,a):i==="in"?new Wx(e,a):i==="not-in"?new Xx(e,a):i==="array-contains-any"?new Zx(e,a):new $e(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new $x(e,a):new Yx(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(rl(i,this.value)):i!==null&&gs(this.value)===gs(i)&&this.matchesComparison(rl(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends b_{constructor(e,i){super(),this.filters=e,this.op=i,this.ce=null}static create(e,i){return new Mi(e,i)}matches(e){return S_(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function S_(r){return r.op==="and"}function T_(r){return Fx(r)&&S_(r)}function Fx(r){for(const e of r.filters)if(e instanceof Mi)return!1;return!0}function jd(r){if(r instanceof $e)return r.field.canonicalString()+r.op.toString()+sl(r.value);if(T_(r))return r.filters.map(e=>jd(e)).join(",");{const e=r.filters.map(i=>jd(i)).join(",");return`${r.op}(${e})`}}function x_(r,e){return r instanceof $e?function(a,o){return o instanceof $e&&a.op===o.op&&a.field.isEqual(o.field)&&Zi(a.value,o.value)}(r,e):r instanceof Mi?function(a,o){return o instanceof Mi&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((c,f,m)=>c&&x_(f,o.filters[m]),!0):!1}(r,e):void Bt()}function A_(r){return r instanceof $e?function(i){return`${i.field.canonicalString()} ${i.op} ${sl(i.value)}`}(r):r instanceof Mi?function(i){return i.op.toString()+" {"+i.getFilters().map(A_).join(" ,")+"}"}(r):"Filter"}class Qx extends $e{constructor(e,i,a){super(e,i,a),this.key=Vt.fromName(a.referenceValue)}matches(e){const i=Vt.comparator(e.key,this.key);return this.matchesComparison(i)}}class $x extends $e{constructor(e,i){super(e,"in",i),this.keys=w_("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Yx extends $e{constructor(e,i){super(e,"not-in",i),this.keys=w_("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function w_(r,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>Vt.fromName(a.referenceValue))}class Kx extends $e{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return om(i)&&Vo(i.arrayValue,this.value)}}class Wx extends $e{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Vo(this.value.arrayValue,i)}}class Xx extends $e{constructor(e,i){super(e,"not-in",i)}matches(e){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&!Vo(this.value.arrayValue,i)}}class Zx extends $e{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!om(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>Vo(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,i=null,a=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.le=null}}function Fv(r,e=null,i=[],a=[],o=null,c=null,f=null){return new Jx(r,e,i,a,o,c,f)}function um(r){const e=Gt(r);if(e.le===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>jd(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),$c(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>sl(a)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>sl(a)).join(",")),e.le=i}return e.le}function cm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Gx(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!x_(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Gv(r.startAt,e.startAt)&&Gv(r.endAt,e.endAt)}function Ld(r){return Vt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,i=null,a=[],o=[],c=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function tA(r,e,i,a,o,c,f,m){return new Po(r,e,i,a,o,c,f,m)}function Kc(r){return new Po(r)}function Qv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function R_(r){return r.collectionGroup!==null}function xo(r){const e=Gt(r);if(e.he===null){e.he=[];const i=new Set;for(const c of e.explicitOrderBy)e.he.push(c),i.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new nn(vn.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(m=m.add(p.field))})}),m})(e).forEach(c=>{i.has(c.canonicalString())||c.isKeyField()||e.he.push(new Lc(c,a))}),i.has(vn.keyField().canonicalString())||e.he.push(new Lc(vn.keyField(),a))}return e.he}function Wi(r){const e=Gt(r);return e.Pe||(e.Pe=eA(e,xo(r))),e.Pe}function eA(r,e){if(r.limitType==="F")return Fv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Lc(o.field,c)});const i=r.endAt?new jc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new jc(r.startAt.position,r.startAt.inclusive):null;return Fv(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function kd(r,e){const i=r.filters.concat([e]);return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Ud(r,e,i){return new Po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Wc(r,e){return cm(Wi(r),Wi(e))&&r.limitType===e.limitType}function C_(r){return`${um(Wi(r))}|lt:${r.limitType}`}function Wa(r){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(o=>A_(o)).join(", ")}]`),$c(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(o=>sl(o)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(o=>sl(o)).join(",")),`Target(${a})`}(Wi(r))}; limitType=${r.limitType})`}function Xc(r,e){return e.isFoundDocument()&&function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Vt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(r,e)&&function(a,o){for(const c of xo(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(r,e)&&function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0}(r,e)&&function(a,o){return!(a.startAt&&!function(f,m,g){const p=Hv(f,m,g);return f.inclusive?p<=0:p<0}(a.startAt,xo(a),o)||a.endAt&&!function(f,m,g){const p=Hv(f,m,g);return f.inclusive?p>=0:p>0}(a.endAt,xo(a),o))}(r,e)}function nA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function I_(r){return(e,i)=>{let a=!1;for(const o of xo(r)){const c=iA(o,e,i);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function iA(r,e,i){const a=r.field.isKeyField()?Vt.comparator(e.key,i.key):function(c,f,m){const g=f.data.field(c),p=m.data.field(c);return g!==null&&p!==null?rl(g,p):Bt()}(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(i,a)=>{for(const[o,c]of a)e(o,c)})}isEmpty(){return f_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new je(Vt.comparator);function Nr(){return rA}const D_=new je(Vt.comparator);function Eo(...r){let e=D_;for(const i of r)e=e.insert(i.key,i);return e}function N_(r){let e=D_;return r.forEach((i,a)=>e=e.insert(i,a.overlayedDocument)),e}function ta(){return Ao()}function M_(){return Ao()}function Ao(){return new aa(r=>r.toString(),(r,e)=>r.isEqual(e))}const sA=new je(Vt.comparator),aA=new nn(Vt.comparator);function ee(...r){let e=aA;for(const i of r)e=e.add(i);return e}const lA=new nn(Xt);function oA(){return lA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function V_(r){return{integerValue:""+r}}function uA(r,e){return Lx(e)?V_(e):hm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function cA(r,e,i){return r instanceof Oo?function(o,c){const f={fields:{[p_]:{stringValue:m_},[y_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&lm(c)&&(c=Yc(c)),c&&(f.fields[g_]=c),{mapValue:f}}(i,e):r instanceof jo?j_(r,e):r instanceof Lo?L_(r,e):function(o,c){const f=O_(o,c),m=$v(f)+$v(o.Ie);return Od(f)&&Od(o.Ie)?V_(m):hm(o.serializer,m)}(r,e)}function hA(r,e,i){return r instanceof jo?j_(r,e):r instanceof Lo?L_(r,e):i}function O_(r,e){return r instanceof kc?function(a){return Od(a)||function(c){return!!c&&"doubleValue"in c}(a)}(e)?e:{integerValue:0}:null}class Oo extends Zc{}class jo extends Zc{constructor(e){super(),this.elements=e}}function j_(r,e){const i=k_(e);for(const a of r.elements)i.some(o=>Zi(o,a))||i.push(a);return{arrayValue:{values:i}}}class Lo extends Zc{constructor(e){super(),this.elements=e}}function L_(r,e){let i=k_(e);for(const a of r.elements)i=i.filter(o=>!Zi(o,a));return{arrayValue:{values:i}}}class kc extends Zc{constructor(e,i){super(),this.serializer=e,this.Ie=i}}function $v(r){return Be(r.integerValue||r.doubleValue)}function k_(r){return om(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,i){this.field=e,this.transform=i}}function dA(r,e){return r.field.isEqual(e.field)&&function(a,o){return a instanceof jo&&o instanceof jo||a instanceof Lo&&o instanceof Lo?il(a.elements,o.elements,Zi):a instanceof kc&&o instanceof kc?Zi(a.Ie,o.Ie):a instanceof Oo&&o instanceof Oo}(r.transform,e.transform)}class mA{constructor(e,i){this.version=e,this.transformResults=i}}class Mn{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Jc{}function U_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new th(r.key,Mn.none()):new Bo(r.key,r.data,Mn.none());{const i=r.data,a=Bn.empty();let o=new nn(vn.comparator);for(let c of e.fields)if(!o.has(c)){let f=i.field(c);f===null&&c.length>1&&(c=c.popLast(),f=i.field(c)),f===null?a.delete(c):a.set(c,f),o=o.add(c)}return new Es(r.key,a,new Wn(o.toArray()),Mn.none())}}function pA(r,e,i){r instanceof Bo?function(o,c,f){const m=o.value.clone(),g=Kv(o.fieldTransforms,c,f.transformResults);m.setAll(g),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,i):r instanceof Es?function(o,c,f){if(!xc(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Kv(o.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(z_(o)),g.setAll(m),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,e,i):function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,i)}function wo(r,e,i,a){return r instanceof Bo?function(c,f,m,g){if(!xc(c.precondition,f))return m;const p=c.value.clone(),b=Wv(c.fieldTransforms,g,f);return p.setAll(b),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(r,e,i,a):r instanceof Es?function(c,f,m,g){if(!xc(c.precondition,f))return m;const p=Wv(c.fieldTransforms,g,f),b=f.data;return b.setAll(z_(c)),b.setAll(p),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(r,e,i,a):function(c,f,m){return xc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,i)}function gA(r,e){let i=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),c=O_(a.transform,o||null);c!=null&&(i===null&&(i=Bn.empty()),i.set(a.field,c))}return i||null}function Yv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&il(a,o,(c,f)=>dA(c,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Bo extends Jc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Es extends Jc{constructor(e,i,a,o,c=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function z_(r){const e=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}}),e}function Kv(r,e,i){const a=new Map;fe(r.length===i.length);for(let o=0;o<i.length;o++){const c=r[o],f=c.transform,m=e.data.field(c.field);a.set(c.field,hA(f,m,i[o]))}return a}function Wv(r,e,i){const a=new Map;for(const o of r){const c=o.transform,f=i.data.field(o.field);a.set(o.field,cA(c,f,e))}return a}class th extends Jc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yA extends Jc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&pA(c,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=wo(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=wo(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=M_();return this.mutations.forEach(o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=i.has(o.key)?null:m;const g=U_(f,m);g!==null&&a.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Ht.min())}),a}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),ee())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,(i,a)=>Yv(i,a))&&il(this.baseMutations,e.baseMutations,(i,a)=>Yv(i,a))}}class fm{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){fe(e.mutations.length===a.length);let o=function(){return sA}();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,a[f].version);return new fm(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,ae;function bA(r){switch(r){case ut.OK:return Bt();case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0;default:return Bt()}}function P_(r){if(r===void 0)return Dr("GRPC error has no .code"),ut.UNKNOWN;switch(r){case Qe.OK:return ut.OK;case Qe.CANCELLED:return ut.CANCELLED;case Qe.UNKNOWN:return ut.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return ut.INTERNAL;case Qe.UNAVAILABLE:return ut.UNAVAILABLE;case Qe.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case Qe.NOT_FOUND:return ut.NOT_FOUND;case Qe.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case Qe.ABORTED:return ut.ABORTED;case Qe.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case Qe.DATA_LOSS:return ut.DATA_LOSS;default:return Bt()}}(ae=Qe||(Qe={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new cs([4294967295,4294967295],0);function Xv(r){const e=u_().encode(r),i=new n_;return i.update(e),new Uint8Array(i.digest())}function Zv(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new cs([i,a],0),new cs([o,c],0)]}class dm{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new bo(`Invalid padding: ${i}`);if(a<0)throw new bo(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new bo(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new bo(`Invalid padding when bitmap length is 0: ${i}`);this.Ee=8*e.length-i,this.de=cs.fromNumber(this.Ee)}Ae(e,i,a){let o=e.add(i.multiply(cs.fromNumber(a)));return o.compare(SA)===1&&(o=new cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const i=Xv(e),[a,o]=Zv(i);for(let c=0;c<this.hashCount;c++){const f=this.Ae(a,o,c);if(!this.Re(f))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new dm(c,o,i);return a.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const i=Xv(e),[a,o]=Zv(i);for(let c=0;c<this.hashCount;c++){const f=this.Ae(a,o,c);this.Ve(f)}}Ve(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,i,a,o,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new eh(Ht.min(),o,new je(Xt),Nr(),ee())}}class qo{constructor(e,i,a,o,c){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new qo(a,i,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,i,a,o){this.me=e,this.removedTargetIds=i,this.key=a,this.fe=o}}class B_{constructor(e,i){this.targetId=e,this.ge=i}}class q_{constructor(e,i,a=_n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class Jv{constructor(){this.pe=0,this.ye=t0(),this.we=_n.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ee(),i=ee(),a=ee();return this.ye.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:Bt()}}),new qo(this.we,this.Se,e,i,a)}Me(){this.be=!1,this.ye=t0()}xe(e,i){this.be=!0,this.ye=this.ye.insert(e,i)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,fe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class TA{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Nr(),this.$e=pc(),this.Ue=pc(),this.Ke=new je(Xt)}We(e){for(const i of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(i,e.fe):this.ze(i,e.key,e.fe);for(const i of e.removedTargetIds)this.ze(i,e.key,e.fe)}je(e){this.forEachTarget(e,i=>{const a=this.He(i);switch(e.state){case 0:this.Je(i)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(i);break;case 3:this.Je(i)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(i)&&(this.Ye(i),a.Ce(e.resumeToken));break;default:Bt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.qe.forEach((a,o)=>{this.Je(o)&&i(o)})}Ze(e){const i=e.targetId,a=e.ge.count,o=this.Xe(i);if(o){const c=o.target;if(Ld(c))if(a===0){const f=new Vt(c.path);this.ze(i,f,An.newNoDocument(f,Ht.min()))}else fe(a===1);else{const f=this.et(i);if(f!==a){const m=this.tt(e),g=m?this.nt(m,e,f):1;if(g!==0){this.Ye(i);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,p)}}}}}tt(e){const i=e.ge.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=i;let f,m;try{f=ps(a).toUint8Array()}catch(g){if(g instanceof d_)return nl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new dm(f,o,c)}catch(g){return nl(g instanceof bo?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(e,i,a){return i.ge.count===a-this.st(e,i.targetId)?0:2}st(e,i){const a=this.ke.getRemoteKeysForTarget(i);let o=0;return a.forEach(c=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.ze(i,c,null),o++)}),o}ot(e){const i=new Map;this.qe.forEach((c,f)=>{const m=this.Xe(f);if(m){if(c.current&&Ld(m.target)){const g=new Vt(m.target.path);this._t(g).has(f)||this.ut(f,g)||this.ze(f,g,An.newNoDocument(g,e))}c.ve&&(i.set(f,c.Fe()),c.Me())}});let a=ee();this.Ue.forEach((c,f)=>{let m=!0;f.forEachWhile(g=>{const p=this.Xe(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(a=a.add(c))}),this.Qe.forEach((c,f)=>f.setReadTime(e));const o=new eh(e,i,this.Ke,this.Qe,a);return this.Qe=Nr(),this.$e=pc(),this.Ue=pc(),this.Ke=new je(Xt),o}Ge(e,i){if(!this.Je(e))return;const a=this.ut(e,i.key)?2:0;this.He(e).xe(i.key,a),this.Qe=this.Qe.insert(i.key,i),this.$e=this.$e.insert(i.key,this._t(i.key).add(e)),this.Ue=this.Ue.insert(i.key,this.ct(i.key).add(e))}ze(e,i,a){if(!this.Je(e))return;const o=this.He(e);this.ut(e,i)?o.xe(i,1):o.Oe(i),this.Ue=this.Ue.insert(i,this.ct(i).delete(e)),this.Ue=this.Ue.insert(i,this.ct(i).add(e)),a&&(this.Qe=this.Qe.insert(i,a))}removeTarget(e){this.qe.delete(e)}et(e){const i=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let i=this.qe.get(e);return i||(i=new Jv,this.qe.set(e,i)),i}ct(e){let i=this.Ue.get(e);return i||(i=new nn(Xt),this.Ue=this.Ue.insert(e,i)),i}_t(e){let i=this.$e.get(e);return i||(i=new nn(Xt),this.$e=this.$e.insert(e,i)),i}Je(e){const i=this.Xe(e)!==null;return i||Tt("WatchChangeAggregator","Detected inactive target",e),i}Xe(e){const i=this.qe.get(e);return i&&i.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Jv),this.ke.getRemoteKeysForTarget(e).forEach(i=>{this.ze(e,i,null)})}ut(e,i){return this.ke.getRemoteKeysForTarget(e).has(i)}}function pc(){return new je(Vt.comparator)}function t0(){return new je(Vt.comparator)}const xA={asc:"ASCENDING",desc:"DESCENDING"},AA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wA={and:"AND",or:"OR"};class RA{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function zd(r,e){return r.useProto3Json||$c(e)?e:{value:e}}function Uc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function CA(r,e){return Uc(r,e.toTimestamp())}function Xi(r){return fe(!!r),Ht.fromTimestamp(function(i){const a=ms(i);return new en(a.seconds,a.nanos)}(r))}function mm(r,e){return Pd(r,e).canonicalString()}function Pd(r,e){const i=function(o){return new Re(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?i:i.child(e)}function G_(r){const e=Re.fromString(r);return fe(K_(e)),e}function Bd(r,e){return mm(r.databaseId,e.path)}function _d(r,e){const i=G_(e);if(i.get(1)!==r.databaseId.projectId)throw new xt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new xt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Vt(Q_(i))}function F_(r,e){return mm(r.databaseId,e)}function IA(r){const e=G_(r);return e.length===4?Re.emptyPath():Q_(e)}function qd(r){return new Re(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Q_(r){return fe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function e0(r,e,i){return{name:Bd(r,e),fields:i.value.mapValue.fields}}function DA(r,e){let i;if("targetChange"in e){e.targetChange;const a=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(p,b){return p.useProto3Json?(fe(b===void 0||typeof b=="string"),_n.fromBase64String(b||"")):(fe(b===void 0||b instanceof Buffer||b instanceof Uint8Array),_n.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(p){const b=p.code===void 0?ut.UNKNOWN:P_(p.code);return new xt(b,p.message||"")}(f);i=new q_(a,o,c,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=_d(r,a.document.name),c=Xi(a.document.updateTime),f=a.document.createTime?Xi(a.document.createTime):Ht.min(),m=new Bn({mapValue:{fields:a.document.fields}}),g=An.newFoundDocument(o,c,f,m),p=a.targetIds||[],b=a.removedTargetIds||[];i=new Ac(p,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=_d(r,a.document),c=a.readTime?Xi(a.readTime):Ht.min(),f=An.newNoDocument(o,c),m=a.removedTargetIds||[];i=new Ac([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=_d(r,a.document),c=a.removedTargetIds||[];i=new Ac([],c,o,null)}else{if(!("filter"in e))return Bt();{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,f=new EA(o,c),m=a.targetId;i=new B_(m,f)}}return i}function NA(r,e){let i;if(e instanceof Bo)i={update:e0(r,e.key,e.value)};else if(e instanceof th)i={delete:Bd(r,e.key)};else if(e instanceof Es)i={update:e0(r,e.key,e.data),updateMask:PA(e.fieldMask)};else{if(!(e instanceof yA))return Bt();i={verify:Bd(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(c,f){const m=f.transform;if(m instanceof Oo)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof jo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Lo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof kc)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Bt()}(0,a))),e.precondition.isNone||(i.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:CA(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Bt()}(r,e.precondition)),i}function MA(r,e){return r&&r.length>0?(fe(e!==void 0),r.map(i=>function(o,c){let f=o.updateTime?Xi(o.updateTime):Xi(c);return f.isEqual(Ht.min())&&(f=Xi(c)),new mA(f,o.transformResults||[])}(i,e))):[]}function VA(r,e){return{documents:[F_(r,e.path)]}}function OA(r,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=F_(r,o);const c=function(p){if(p.length!==0)return Y_(Mi.create(p,"and"))}(e.filters);c&&(i.structuredQuery.where=c);const f=function(p){if(p.length!==0)return p.map(b=>function(A){return{field:Xa(A.field),direction:kA(A.dir)}}(b))}(e.orderBy);f&&(i.structuredQuery.orderBy=f);const m=zd(r,e.limit);return m!==null&&(i.structuredQuery.limit=m),e.startAt&&(i.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:i,parent:o}}function jA(r){let e=IA(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){fe(a===1);const b=i.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];i.where&&(c=function(S){const A=$_(S);return A instanceof Mi&&T_(A)?A.getFilters():[A]}(i.where));let f=[];i.orderBy&&(f=function(S){return S.map(A=>function(N){return new Lc(Za(N.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(A))}(i.orderBy));let m=null;i.limit&&(m=function(S){let A;return A=typeof S=="object"?S.value:S,$c(A)?null:A}(i.limit));let g=null;i.startAt&&(g=function(S){const A=!!S.before,O=S.values||[];return new jc(O,A)}(i.startAt));let p=null;return i.endAt&&(p=function(S){const A=!S.before,O=S.values||[];return new jc(O,A)}(i.endAt)),tA(e,o,f,c,m,"F",g,p)}function LA(r,e){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function $_(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Za(i.unaryFilter.field);return $e.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Za(i.unaryFilter.field);return $e.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Za(i.unaryFilter.field);return $e.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Za(i.unaryFilter.field);return $e.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(r):r.fieldFilter!==void 0?function(i){return $e.create(Za(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return Mi.create(i.compositeFilter.filters.map(a=>$_(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Bt()}}(i.compositeFilter.op))}(r):Bt()}function kA(r){return xA[r]}function UA(r){return AA[r]}function zA(r){return wA[r]}function Xa(r){return{fieldPath:r.canonicalString()}}function Za(r){return vn.fromServerFormat(r.fieldPath)}function Y_(r){return r instanceof $e?function(i){if(i.op==="=="){if(qv(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NAN"}};if(Bv(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(qv(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NOT_NAN"}};if(Bv(i.value))return{unaryFilter:{field:Xa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(i.field),op:UA(i.op),value:i.value}}}(r):r instanceof Mi?function(i){const a=i.getFilters().map(o=>Y_(o));return a.length===1?a[0]:{compositeFilter:{op:zA(i.op),filters:a}}}(r):Bt()}function PA(r){const e=[];return r.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function K_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,i,a,o,c=Ht.min(),f=Ht.min(),m=_n.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.Tt=e}}function qA(r){const e=jA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.Tn=new GA}addToCollectionParentIndex(e,i){return this.Tn.add(i),ct.resolve()}getCollectionParents(e,i){return ct.resolve(this.Tn.getEntries(i))}addFieldIndex(e,i){return ct.resolve()}deleteFieldIndex(e,i){return ct.resolve()}deleteAllFieldIndexes(e){return ct.resolve()}createTargetIndexes(e,i){return ct.resolve()}getDocumentsMatchingTarget(e,i){return ct.resolve(null)}getIndexType(e,i){return ct.resolve(0)}getFieldIndexes(e,i){return ct.resolve([])}getNextCollectionGroupToUpdate(e){return ct.resolve(null)}getMinOffset(e,i){return ct.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,i){return ct.resolve(ds.min())}updateCollectionGroup(e,i,a){return ct.resolve()}updateIndexEntries(e,i){return ct.resolve()}}class GA{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new nn(Re.comparator),c=!o.has(a);return this.index[i]=o.add(a),c}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new nn(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W_=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(W_,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new al(0)}static Kn(){return new al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="LruGarbageCollector",FA=1048576;function r0([r,e],[i,a]){const o=Xt(r,i);return o===0?Xt(e,a):o}class QA{constructor(e){this.Hn=e,this.buffer=new nn(r0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const i=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();r0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class $A{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Tt(i0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){ml(i)?Tt(i0,"Ignoring IndexedDB error during garbage collection: ",i):await dl(i)}await this.er(3e5)})}}class YA{constructor(e,i){this.tr=e,this.params=i}calculateTargetCount(e,i){return this.tr.nr(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(i===0)return ct.resolve(Qc.ae);const a=new QA(i);return this.tr.forEachTarget(e,o=>a.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>a.Zn(o))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.tr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.tr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(n0)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n0):this.ir(e,i))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,i){let a,o,c,f,m,g,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(a=S,m=Date.now(),this.removeTargets(e,a,i))).next(S=>(c=S,g=Date.now(),this.removeOrphanedDocuments(e,a))).next(S=>(p=Date.now(),Ka()<=le.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(p-g)+`ms
Total Duration: ${p-b}ms`),ct.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S})))}}function KA(r,e){return new YA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.changes=new aa(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?ct.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,i))).next(o=>(a!==null&&wo(a.mutation,o,Wn.empty(),en.now()),o))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.getLocalViewOfDocuments(e,a,ee()).next(()=>a))}getLocalViewOfDocuments(e,i,a=ee()){const o=ta();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,a).next(c=>{let f=Eo();return c.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,i){const a=ta();return this.populateOverlays(e,a,i).next(()=>this.computeViews(e,i,a,ee()))}populateOverlays(e,i,a){const o=[];return a.forEach(c=>{i.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((f,m)=>{i.set(f,m)})})}computeViews(e,i,a,o){let c=Nr();const f=Ao(),m=function(){return Ao()}();return i.forEach((g,p)=>{const b=a.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof Es)?c=c.insert(p.key,p):b!==void 0?(f.set(p.key,b.mutation.getFieldMask()),wo(b.mutation,p,b.mutation.getFieldMask(),en.now())):f.set(p.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((p,b)=>f.set(p,b)),i.forEach((p,b)=>{var S;return m.set(p,new XA(b,(S=f.get(p))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,i){const a=Ao();let o=new je((f,m)=>f-m),c=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(f=>{for(const m of f)m.keys().forEach(g=>{const p=i.get(g);if(p===null)return;let b=a.get(g)||Wn.empty();b=m.applyToLocalView(p,b),a.set(g,b);const S=(o.get(m.batchId)||ee()).add(g);o=o.insert(m.batchId,S)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,b=g.value,S=M_();b.forEach(A=>{if(!c.has(A)){const O=U_(i.get(A),a.get(A));O!==null&&S.set(A,O),c=c.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,S))}return ct.waitFor(f)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,i,a,o){return function(f){return Vt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):R_(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next(c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-c.size):ct.resolve(ta());let m=Do,g=c;return f.next(p=>ct.forEach(p,(b,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),c.get(b)?ct.resolve():this.remoteDocumentCache.getEntry(e,b).next(A=>{g=g.insert(b,A)}))).next(()=>this.populateOverlays(e,p,c)).next(()=>this.computeViews(e,g,p,ee())).next(b=>({batchId:m,changes:N_(b)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Vt(i)).next(a=>{let o=Eo();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const c=i.collectionGroup;let f=Eo();return this.indexManager.getCollectionParents(e,c).next(m=>ct.forEach(m,g=>{const p=function(S,A){return new Po(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(i,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next(b=>{b.forEach((S,A)=>{f=f.insert(S,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,i,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,c,o))).next(f=>{c.forEach((g,p)=>{const b=p.getKey();f.get(b)===null&&(f=f.insert(b,An.newInvalidDocument(b)))});let m=Eo();return f.forEach((g,p)=>{const b=c.get(g);b!==void 0&&wo(b.mutation,p,Wn.empty(),en.now()),Xc(i,p)&&(m=m.insert(g,p))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,i){return ct.resolve(this.dr.get(i))}saveBundleMetadata(e,i){return this.dr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:Xi(o.createTime)}}(i)),ct.resolve()}getNamedQuery(e,i){return ct.resolve(this.Ar.get(i))}saveNamedQuery(e,i){return this.Ar.set(i.name,function(o){return{name:o.name,query:qA(o.bundledQuery),readTime:Xi(o.readTime)}}(i)),ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.overlays=new je(Vt.comparator),this.Rr=new Map}getOverlay(e,i){return ct.resolve(this.overlays.get(i))}getOverlays(e,i){const a=ta();return ct.forEach(i,o=>this.getOverlay(e,o).next(c=>{c!==null&&a.set(o,c)})).next(()=>a)}saveOverlays(e,i,a){return a.forEach((o,c)=>{this.Et(e,i,c)}),ct.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.Rr.get(a);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(a)),ct.resolve()}getOverlaysForCollection(e,i,a){const o=ta(),c=i.length+1,f=new Vt(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!i.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>a&&o.set(g.getKey(),g)}return ct.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let c=new je((p,b)=>p-b);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===i&&p.largestBatchId>a){let b=c.get(p.largestBatchId);b===null&&(b=ta(),c=c.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const m=ta(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,b)=>m.set(p,b)),!(m.size()>=o)););return ct.resolve(m)}Et(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(a.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new _A(i,a));let c=this.Rr.get(i);c===void 0&&(c=ee(),this.Rr.set(i,c)),this.Rr.set(i,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return ct.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.Vr=new nn(un.mr),this.gr=new nn(un.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,i){const a=new un(e,i);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.wr(new un(e,i))}Sr(e,i){e.forEach(a=>this.removeReference(a,i))}br(e){const i=new Vt(new Re([])),a=new un(i,e),o=new un(i,e+1),c=[];return this.gr.forEachInRange([a,o],f=>{this.wr(f),c.push(f.key)}),c}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const i=new Vt(new Re([])),a=new un(i,e),o=new un(i,e+1);let c=ee();return this.gr.forEachInRange([a,o],f=>{c=c.add(f.key)}),c}containsKey(e){const i=new un(e,0),a=this.Vr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class un{constructor(e,i){this.key=e,this.Cr=i}static mr(e,i){return Vt.comparator(e.key,i.key)||Xt(e.Cr,i.Cr)}static pr(e,i){return Xt(e.Cr,i.Cr)||Vt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.Fr=1,this.Mr=new nn(un.mr)}checkEmpty(e){return ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new vA(c,i,a,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new un(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ct.resolve(f)}lookupMutationBatch(e,i){return ct.resolve(this.Or(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.Nr(a),c=o<0?0:o;return ct.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(this.mutationQueue.length===0?am:this.Fr-1)}getAllMutationBatches(e){return ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new un(i,0),o=new un(i,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([a,o],f=>{const m=this.Or(f.Cr);c.push(m)}),ct.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new nn(Xt);return i.forEach(o=>{const c=new un(o,0),f=new un(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,f],m=>{a=a.add(m.Cr)})}),ct.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let c=a;Vt.isDocumentKey(c)||(c=c.child(""));const f=new un(new Vt(c),0);let m=new nn(Xt);return this.Mr.forEachWhile(g=>{const p=g.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Cr)),!0)},f),ct.resolve(this.Br(m))}Br(e){const i=[];return e.forEach(a=>{const o=this.Or(a);o!==null&&i.push(o)}),i}removeMutationBatch(e,i){fe(this.Lr(i.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return ct.forEach(i.mutations,o=>{const c=new un(o.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,i){const a=new un(i,0),o=this.Mr.firstAfterOrEqual(a);return ct.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ct.resolve()}Lr(e,i){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const i=this.Nr(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.kr=e,this.docs=function(){return new je(Vt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),c=o?o.size:0,f=this.kr(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ct.resolve(a?a.document.mutableCopy():An.newInvalidDocument(i))}getEntries(e,i){let a=Nr();return i.forEach(o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():An.newInvalidDocument(o))}),ct.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let c=Nr();const f=i.path,m=new Vt(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:b}}=g.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||Mx(Nx(b),a)<=0||(o.has(b.key)||Xc(i,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ct.resolve(c)}getAllFromCollectionGroup(e,i,a,o){Bt()}qr(e,i){return ct.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new rw(this)}getSize(e){return ct.resolve(this.size)}}class rw extends WA{constructor(e){super(),this.Ir=e}applyChanges(e){const i=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?i.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(a)}),ct.waitFor(i)}getFromCache(e,i){return this.Ir.getEntry(e,i)}getAllFromCache(e,i){return this.Ir.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.persistence=e,this.Qr=new aa(i=>um(i),cm),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.$r=0,this.Ur=new pm,this.targetCount=0,this.Kr=al.Un()}forEachTarget(e,i){return this.Qr.forEach((a,o)=>i(o)),ct.resolve()}getLastRemoteSnapshotVersion(e){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ct.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.$r&&(this.$r=i),ct.resolve()}zn(e){this.Qr.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Kr=new al(i),this.highestTargetId=i),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,i){return this.zn(i),this.targetCount+=1,ct.resolve()}updateTargetData(e,i){return this.zn(i),ct.resolve()}removeTargetData(e,i){return this.Qr.delete(i.target),this.Ur.br(i.targetId),this.targetCount-=1,ct.resolve()}removeTargets(e,i,a){let o=0;const c=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=i&&a.get(m.targetId)===null&&(this.Qr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ct.waitFor(c).next(()=>o)}getTargetCount(e){return ct.resolve(this.targetCount)}getTargetData(e,i){const a=this.Qr.get(i)||null;return ct.resolve(a)}addMatchingKeys(e,i,a){return this.Ur.yr(i,a),ct.resolve()}removeMatchingKeys(e,i,a){this.Ur.Sr(i,a);const o=this.persistence.referenceDelegate,c=[];return o&&i.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),ct.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this.Ur.br(i),ct.resolve()}getMatchingKeysForTargetId(e,i){const a=this.Ur.vr(i);return ct.resolve(a)}containsKey(e,i){return ct.resolve(this.Ur.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,i){this.Wr={},this.overlays={},this.Gr=new Qc(0),this.zr=!1,this.zr=!0,this.jr=new ew,this.referenceDelegate=e(this),this.Hr=new sw(this),this.indexManager=new HA,this.remoteDocumentCache=function(o){return new iw(o)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new BA(i),this.Yr=new JA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new tw,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.Wr[e.toKey()];return a||(a=new nw(i,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,i,a){Tt("MemoryPersistence","Starting transaction:",e);const o=new aw(this.Gr.next());return this.referenceDelegate.Zr(),a(o).next(c=>this.referenceDelegate.Xr(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}ei(e,i){return ct.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,i)))}}class aw extends Ox{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.ti=new pm,this.ni=null}static ri(e){return new gm(e)}get ii(){if(this.ni)return this.ni;throw Bt()}addReference(e,i,a){return this.ti.addReference(a,i),this.ii.delete(a.toString()),ct.resolve()}removeReference(e,i,a){return this.ti.removeReference(a,i),this.ii.add(a.toString()),ct.resolve()}markPotentiallyOrphaned(e,i){return this.ii.add(i.toString()),ct.resolve()}removeTarget(e,i){this.ti.br(i.targetId).forEach(o=>this.ii.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(o=>{o.forEach(c=>this.ii.add(c.toString()))}).next(()=>a.removeTargetData(e,i))}Zr(){this.ni=new Set}Xr(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.ii,a=>{const o=Vt.fromPath(a);return this.si(e,o).next(c=>{c||i.removeEntry(o,Ht.min())})}).next(()=>(this.ni=null,i.apply(e)))}updateLimboDocument(e,i){return this.si(e,i).next(a=>{a?this.ii.delete(i.toString()):this.ii.add(i.toString())})}Jr(e){return 0}si(e,i){return ct.or([()=>ct.resolve(this.ti.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.ei(e,i)])}}class zc{constructor(e,i){this.persistence=e,this.oi=new aa(a=>kx(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=KA(this,i)}static ri(e,i){return new zc(e,i)}Zr(){}Xr(e){return ct.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}nr(e){const i=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>i.next(o=>a+o))}sr(e){let i=0;return this.rr(e,a=>{i++}).next(()=>i)}rr(e,i){return ct.forEach(this.oi,(a,o)=>this.ar(e,a,o).next(c=>c?ct.resolve():i(o)))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,i).next(m=>{m||(a++,c.removeEntry(f,Ht.min()))})).next(()=>c.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,i){return this.oi.set(i,e.currentSequenceNumber),ct.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.oi.set(a,e.currentSequenceNumber),ct.resolve()}removeReference(e,i,a){return this.oi.set(a,e.currentSequenceNumber),ct.resolve()}updateLimboDocument(e,i){return this.oi.set(i,e.currentSequenceNumber),ct.resolve()}Jr(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Sc(e.data.value)),i}ar(e,i,a){return ct.or([()=>this.persistence.ei(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.oi.get(i);return ct.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.Hi=a,this.Ji=o}static Yi(e,i){let a=ee(),o=ee();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new ym(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return eT()?8:jx(JS())>0?6:4}()}initialize(e,i){this.ns=e,this.indexManager=i,this.Zi=!0}getDocumentsMatchingQuery(e,i,a,o){const c={result:null};return this.rs(e,i).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ss(e,i,o,a).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new lw;return this._s(e,i,f).next(m=>{if(c.result=m,this.Xi)return this.us(e,i,f,m.size)})}).next(()=>c.result)}us(e,i,a,o){return a.documentReadCount<this.es?(Ka()<=le.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",Wa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ct.resolve()):(Ka()<=le.DEBUG&&Tt("QueryEngine","Query:",Wa(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ts*o?(Ka()<=le.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",Wa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(i))):ct.resolve())}rs(e,i){if(Qv(i))return ct.resolve(null);let a=Wi(i);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=Ud(i,null,"F"),a=Wi(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next(c=>{const f=ee(...c);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,a).next(g=>{const p=this.cs(i,m);return this.ls(i,p,f,g.readTime)?this.rs(e,Ud(i,null,"F")):this.hs(e,p,i,g)}))})))}ss(e,i,a,o){return Qv(i)||o.isEqual(Ht.min())?ct.resolve(null):this.ns.getDocuments(e,a).next(c=>{const f=this.cs(i,c);return this.ls(i,f,a,o)?ct.resolve(null):(Ka()<=le.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wa(i)),this.hs(e,f,i,Dx(o,Do)).next(m=>m))})}cs(e,i){let a=new nn(I_(e));return i.forEach((o,c)=>{Xc(e,c)&&(a=a.add(c))}),a}ls(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}_s(e,i,a){return Ka()<=le.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",Wa(i)),this.ns.getDocumentsMatchingQuery(e,i,ds.min(),a)}hs(e,i,a,o){return this.ns.getDocumentsMatchingQuery(e,a,o).next(c=>(i.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="LocalStore",uw=3e8;class cw{constructor(e,i,a,o){this.persistence=e,this.Ps=i,this.serializer=o,this.Ts=new je(Xt),this.Is=new aa(c=>um(c),cm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZA(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ts))}}function hw(r,e,i,a){return new cw(r,e,i,a)}async function Z_(r,e){const i=Gt(r);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next(c=>(o=c,i.As(e),i.mutationQueue.getAllMutationBatches(a))).next(c=>{const f=[],m=[];let g=ee();for(const p of o){f.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}for(const p of c){m.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}return i.localDocuments.getDocuments(a,g).next(p=>({Rs:p,removedBatchIds:f,addedBatchIds:m}))})})}function fw(r,e){const i=Gt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),c=i.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,p,b){const S=p.batch,A=S.keys();let O=ct.resolve();return A.forEach(N=>{O=O.next(()=>b.getEntry(g,N)).next(G=>{const B=p.docVersions.get(N);fe(B!==null),G.version.compareTo(B)<0&&(S.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),b.addEntry(G)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(g,S))}(i,a,e,c).next(()=>c.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(m){let g=ee();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g}(e))).next(()=>i.localDocuments.getDocuments(a,o))})}function J_(r){const e=Gt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Hr.getLastRemoteSnapshotVersion(i))}function dw(r,e){const i=Gt(r),a=e.snapshotVersion;let o=i.Ts;return i.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=i.ds.newChangeBuffer({trackRemovals:!0});o=i.Ts;const m=[];e.targetChanges.forEach((b,S)=>{const A=o.get(S);if(!A)return;m.push(i.Hr.removeMatchingKeys(c,b.removedDocuments,S).next(()=>i.Hr.addMatchingKeys(c,b.addedDocuments,S)));let O=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?O=O.withResumeToken(_n.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,a)),o=o.insert(S,O),function(G,B,H){return G.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=uw?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(A,O,b)&&m.push(i.Hr.updateTargetData(c,O))});let g=Nr(),p=ee();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(c,b))}),m.push(mw(c,f,e.documentUpdates).next(b=>{g=b.Vs,p=b.fs})),!a.isEqual(Ht.min())){const b=i.Hr.getLastRemoteSnapshotVersion(c).next(S=>i.Hr.setTargetsMetadata(c,c.currentSequenceNumber,a));m.push(b)}return ct.waitFor(m).next(()=>f.apply(c)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,g,p)).next(()=>g)}).then(c=>(i.Ts=o,c))}function mw(r,e,i){let a=ee(),o=ee();return i.forEach(c=>a=a.add(c)),e.getEntries(r,a).next(c=>{let f=Nr();return i.forEach((m,g)=>{const p=c.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ht.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):Tt(vm,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)}),{Vs:f,fs:o}})}function pw(r,e){const i=Gt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=am),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function gw(r,e){const i=Gt(r);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return i.Hr.getTargetData(a,e).next(c=>c?(o=c,ct.resolve(o)):i.Hr.allocateTargetId(a).next(f=>(o=new ls(e,f,"TargetPurposeListen",a.currentSequenceNumber),i.Hr.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=i.Ts.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ts=i.Ts.insert(a.targetId,a),i.Is.set(e,a.targetId)),a})}async function Hd(r,e,i){const a=Gt(r),o=a.Ts.get(e),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,f=>a.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!ml(f))throw f;Tt(vm,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ts=a.Ts.remove(e),a.Is.delete(o.target)}function s0(r,e,i){const a=Gt(r);let o=Ht.min(),c=ee();return a.persistence.runTransaction("Execute query","readwrite",f=>function(g,p,b){const S=Gt(g),A=S.Is.get(b);return A!==void 0?ct.resolve(S.Ts.get(A)):S.Hr.getTargetData(p,b)}(a,f,Wi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(f,m.targetId).next(g=>{c=g})}).next(()=>a.Ps.getDocumentsMatchingQuery(f,e,i?o:Ht.min(),i?c:ee())).next(m=>(yw(a,nA(e),m),{documents:m,gs:c})))}function yw(r,e,i){let a=r.Es.get(e)||Ht.min();i.forEach((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),r.Es.set(e,a)}class a0{constructor(){this.activeTargetIds=oA()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vw{constructor(){this.ho=new a0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,i,a){this.Po[e]=i}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new a0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="ConnectivityMonitor";class o0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Tt(l0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Tt(l0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function Gd(){return gc===null?gc=function(){return 268435456+Math.round(2147483648*Math.random())}():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="RestConnection",Ew={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bw{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=i+"://"+e.host,this.yo=`projects/${a}/databases/${o}`,this.wo=this.databaseId.database===Vc?`project_id=${a}`:`project_id=${a}&database_id=${o}`}So(e,i,a,o,c){const f=Gd(),m=this.bo(e,i.toUriEncodedString());Tt(Ed,`Sending RPC '${e}' ${f}:`,m,a);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,c),this.vo(e,m,g,a).then(p=>(Tt(Ed,`Received RPC '${e}' ${f}: `,p),p),p=>{throw nl(Ed,`RPC '${e}' ${f} failed with error: `,p,"url: ",m,"request:",a),p})}Co(e,i,a,o,c,f){return this.So(e,i,a,o,c)}Do(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,c)=>e[c]=o),a&&a.headers.forEach((o,c)=>e[c]=o)}bo(e,i){const a=Ew[e];return`${this.po}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class Tw extends bw{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,i,a,o){const c=Gd();return new Promise((f,m)=>{const g=new i_;g.setWithCredentials(!0),g.listenOnce(r_.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case bc.NO_ERROR:const b=g.getResponseJson();Tt(Tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),f(b);break;case bc.TIMEOUT:Tt(Tn,`RPC '${e}' ${c} timed out`),m(new xt(ut.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const S=g.getStatus();if(Tt(Tn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A==null?void 0:A.error;if(O&&O.status&&O.message){const N=function(B){const H=B.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(H)>=0?H:ut.UNKNOWN}(O.status);m(new xt(N,O.message))}else m(new xt(ut.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new xt(ut.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{Tt(Tn,`RPC '${e}' ${c} completed.`)}});const p=JSON.stringify(o);Tt(Tn,`RPC '${e}' ${c} sending request:`,o),g.send(i,"POST",p,a,15)})}Wo(e,i,a){const o=Gd(),c=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=l_(),m=a_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,i,a),g.encodeInitMessageHeaders=!0;const b=c.join("");Tt(Tn,`Creating RPC '${e}' stream ${o}: ${b}`,g);const S=f.createWebChannel(b,g);let A=!1,O=!1;const N=new Sw({Fo:B=>{O?Tt(Tn,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(A||(Tt(Tn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),Tt(Tn,`RPC '${e}' stream ${o} sending:`,B),S.send(B))},Mo:()=>S.close()}),G=(B,H,Y)=>{B.listen(H,P=>{try{Y(P)}catch(lt){setTimeout(()=>{throw lt},0)}})};return G(S,_o.EventType.OPEN,()=>{O||(Tt(Tn,`RPC '${e}' stream ${o} transport opened.`),N.Qo())}),G(S,_o.EventType.CLOSE,()=>{O||(O=!0,Tt(Tn,`RPC '${e}' stream ${o} transport closed`),N.Uo())}),G(S,_o.EventType.ERROR,B=>{O||(O=!0,nl(Tn,`RPC '${e}' stream ${o} transport errored:`,B),N.Uo(new xt(ut.UNAVAILABLE,"The operation could not be completed")))}),G(S,_o.EventType.MESSAGE,B=>{var H;if(!O){const Y=B.data[0];fe(!!Y);const P=Y,lt=(P==null?void 0:P.error)||((H=P[0])===null||H===void 0?void 0:H.error);if(lt){Tt(Tn,`RPC '${e}' stream ${o} received error:`,lt);const dt=lt.status;let St=function(w){const M=Qe[w];if(M!==void 0)return P_(M)}(dt),j=lt.message;St===void 0&&(St=ut.INTERNAL,j="Unknown error status: "+dt+" with message "+lt.message),O=!0,N.Uo(new xt(St,j)),S.close()}else Tt(Tn,`RPC '${e}' stream ${o} received:`,Y),N.Ko(Y)}}),G(m,s_.STAT_EVENT,B=>{B.stat===Nd.PROXY?Tt(Tn,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Nd.NOPROXY&&Tt(Tn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{N.$o()},0),N}}function bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(r){return new RA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,i,a=1e3,o=1.5,c=6e4){this.Ti=e,this.timerId=i,this.Go=a,this.zo=o,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const i=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),o=Math.max(0,i-a);o>0&&Tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="PersistentStream";class e1{constructor(e,i,a,o,c,f,m,g){this.Ti=e,this.n_=a,this.r_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new t1(e,i)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,i){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():i&&i.code===ut.RESOURCE_EXHAUSTED?(Dr(i.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):i&&i.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(i)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),i=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.i_===i&&this.V_(a,o)},a=>{e(()=>{const o=new xt(ut.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(o)})})}V_(e,i){const a=this.R_(this.i_);this.stream=this.f_(e,i),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{a(()=>this.m_(o))}),this.stream.onMessage(o=>{a(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Tt(u0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return i=>{this.Ti.enqueueAndForget(()=>this.i_===e?i():(Tt(u0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xw extends e1{constructor(e,i,a,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}f_(e,i){return this.connection.Wo("Listen",e,i)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const i=DA(this.serializer,e),a=function(c){if(!("targetChange"in c))return Ht.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ht.min():f.readTime?Xi(f.readTime):Ht.min()}(e);return this.listener.p_(i,a)}y_(e){const i={};i.database=qd(this.serializer),i.addTarget=function(c,f){let m;const g=f.target;if(m=Ld(g)?{documents:VA(c,g)}:{query:OA(c,g).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=H_(c,f.resumeToken);const p=zd(c,f.expectedCount);p!==null&&(m.expectedCount=p)}else if(f.snapshotVersion.compareTo(Ht.min())>0){m.readTime=Uc(c,f.snapshotVersion.toTimestamp());const p=zd(c,f.expectedCount);p!==null&&(m.expectedCount=p)}return m}(this.serializer,e);const a=LA(this.serializer,e);a&&(i.labels=a),this.I_(i)}w_(e){const i={};i.database=qd(this.serializer),i.removeTarget=e,this.I_(i)}}class Aw extends e1{constructor(e,i,a,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,i){return this.connection.Wo("Write",e,i)}g_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const i=MA(e.writeResults,e.commitTime),a=Xi(e.commitTime);return this.listener.v_(a,i)}C_(){const e={};e.database=qd(this.serializer),this.I_(e)}b_(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>NA(this.serializer,a))};this.I_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Rw extends ww{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new xt(ut.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.So(e,Pd(i,a),o,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xt(ut.UNKNOWN,c.toString())})}Co(e,i,a,o,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,Pd(i,a),o,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new xt(ut.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Cw{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Dr(i),this.N_=!1):Tt("OnlineStateTracker",i)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class Iw{constructor(e,i,a,o,c){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(f=>{a.enqueueAndForget(async()=>{la(this)&&(Tt(ra,"Restarting streams for network reachability change."),await async function(g){const p=Gt(g);p.W_.add(4),await Ho(p),p.j_.set("Unknown"),p.W_.delete(4),await ih(p)}(this))})}),this.j_=new Cw(a,o)}}async function ih(r){if(la(r))for(const e of r.G_)await e(!0)}async function Ho(r){for(const e of r.G_)await e(!1)}function n1(r,e){const i=Gt(r);i.K_.has(e.targetId)||(i.K_.set(e.targetId,e),Sm(i)?bm(i):pl(i).c_()&&Em(i,e))}function _m(r,e){const i=Gt(r),a=pl(i);i.K_.delete(e),a.c_()&&i1(i,e),i.K_.size===0&&(a.c_()?a.P_():la(i)&&i.j_.set("Unknown"))}function Em(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ht.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}pl(r).y_(e)}function i1(r,e){r.H_.Ne(e),pl(r).w_(e)}function bm(r){r.H_=new TA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),pl(r).start(),r.j_.B_()}function Sm(r){return la(r)&&!pl(r).u_()&&r.K_.size>0}function la(r){return Gt(r).W_.size===0}function r1(r){r.H_=void 0}async function Dw(r){r.j_.set("Online")}async function Nw(r){r.K_.forEach((e,i)=>{Em(r,e)})}async function Mw(r,e){r1(r),Sm(r)?(r.j_.q_(e),bm(r)):r.j_.set("Unknown")}async function Vw(r,e,i){if(r.j_.set("Online"),e instanceof q_&&e.state===2&&e.cause)try{await async function(o,c){const f=c.cause;for(const m of c.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(r,e)}catch(a){Tt(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Pc(r,a)}else if(e instanceof Ac?r.H_.We(e):e instanceof B_?r.H_.Ze(e):r.H_.je(e),!i.isEqual(Ht.min()))try{const a=await J_(r.localStore);i.compareTo(a)>=0&&await function(c,f){const m=c.H_.ot(f);return m.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.K_.get(p);b&&c.K_.set(p,b.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,p)=>{const b=c.K_.get(g);if(!b)return;c.K_.set(g,b.withResumeToken(_n.EMPTY_BYTE_STRING,b.snapshotVersion)),i1(c,g);const S=new ls(b.target,g,p,b.sequenceNumber);Em(c,S)}),c.remoteSyncer.applyRemoteEvent(m)}(r,i)}catch(a){Tt(ra,"Failed to raise snapshot:",a),await Pc(r,a)}}async function Pc(r,e,i){if(!ml(e))throw e;r.W_.add(1),await Ho(r),r.j_.set("Offline"),i||(i=()=>J_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Tt(ra,"Retrying IndexedDB access"),await i(),r.W_.delete(1),await ih(r)})}function s1(r,e){return e().catch(i=>Pc(r,i,e))}async function rh(r){const e=Gt(r),i=ys(e);let a=e.U_.length>0?e.U_[e.U_.length-1].batchId:am;for(;Ow(e);)try{const o=await pw(e.localStore,a);if(o===null){e.U_.length===0&&i.P_();break}a=o.batchId,jw(e,o)}catch(o){await Pc(e,o)}a1(e)&&l1(e)}function Ow(r){return la(r)&&r.U_.length<10}function jw(r,e){r.U_.push(e);const i=ys(r);i.c_()&&i.S_&&i.b_(e.mutations)}function a1(r){return la(r)&&!ys(r).u_()&&r.U_.length>0}function l1(r){ys(r).start()}async function Lw(r){ys(r).C_()}async function kw(r){const e=ys(r);for(const i of r.U_)e.b_(i.mutations)}async function Uw(r,e,i){const a=r.U_.shift(),o=fm.from(a,e,i);await s1(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await rh(r)}async function zw(r,e){e&&ys(r).S_&&await async function(a,o){if(function(f){return bA(f)&&f!==ut.ABORTED}(o.code)){const c=a.U_.shift();ys(a).h_(),await s1(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o)),await rh(a)}}(r,e),a1(r)&&l1(r)}async function c0(r,e){const i=Gt(r);i.asyncQueue.verifyOperationInProgress(),Tt(ra,"RemoteStore received new credentials");const a=la(i);i.W_.add(3),await Ho(i),a&&i.j_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.W_.delete(3),await ih(i)}async function Pw(r,e){const i=Gt(r);e?(i.W_.delete(2),await ih(i)):e||(i.W_.add(2),await Ho(i),i.j_.set("Unknown"))}function pl(r){return r.J_||(r.J_=function(i,a,o){const c=Gt(i);return c.M_(),new xw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:Dw.bind(null,r),No:Nw.bind(null,r),Lo:Mw.bind(null,r),p_:Vw.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),Sm(r)?bm(r):r.j_.set("Unknown")):(await r.J_.stop(),r1(r))})),r.J_}function ys(r){return r.Y_||(r.Y_=function(i,a,o){const c=Gt(i);return c.M_(),new Aw(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:Lw.bind(null,r),Lo:zw.bind(null,r),D_:kw.bind(null,r),v_:Uw.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await rh(r)):(await r.Y_.stop(),r.U_.length>0&&(Tt(ra,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,i,a,o,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,c){const f=Date.now()+a,m=new Tm(e,i,f,o,c);return m.start(a),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xt(ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(r,e){if(Dr("AsyncQueue",`${e}: ${r}`),ml(r))return new xt(ut.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{static emptySet(e){return new tl(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Vt.comparator(i.key,a.key):(i,a)=>Vt.comparator(i.key,a.key),this.keyedMap=Eo(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof tl)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new tl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.Z_=new je(Vt.comparator)}track(e){const i=e.doc.key,a=this.Z_.get(i);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(i,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(i):e.type===1&&a.type===2?this.Z_=this.Z_.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(i,{type:2,doc:e.doc}):Bt():this.Z_=this.Z_.insert(i,e)}X_(){const e=[];return this.Z_.inorderTraversal((i,a)=>{e.push(a)}),e}}class ll{constructor(e,i,a,o,c,f,m,g,p){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,i,a,o,c){const f=[];return i.forEach(m=>{f.push({type:0,doc:m})}),new ll(e,i,tl.emptySet(i),f,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class qw{constructor(){this.queries=f0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(i,a){const o=Gt(i),c=o.queries;o.queries=f0(),c.forEach((f,m)=>{for(const g of m.ta)g.onError(a)})})(this,new xt(ut.ABORTED,"Firestore shutting down"))}}function f0(){return new aa(r=>C_(r),Wc)}async function Am(r,e){const i=Gt(r);let a=3;const o=e.query;let c=i.queries.get(o);c?!c.na()&&e.ra()&&(a=2):(c=new Bw,a=e.ra()?0:1);try{switch(a){case 0:c.ea=await i.onListen(o,!0);break;case 1:c.ea=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=xm(f,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(m)}i.queries.set(o,c),c.ta.push(e),e.sa(i.onlineState),c.ea&&e.oa(c.ea)&&Rm(i)}async function wm(r,e){const i=Gt(r),a=e.query;let o=3;const c=i.queries.get(a);if(c){const f=c.ta.indexOf(e);f>=0&&(c.ta.splice(f,1),c.ta.length===0?o=e.ra()?0:1:!c.na()&&e.ra()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function Hw(r,e){const i=Gt(r);let a=!1;for(const o of e){const c=o.query,f=i.queries.get(c);if(f){for(const m of f.ta)m.oa(o)&&(a=!0);f.ea=o}}a&&Rm(i)}function Gw(r,e,i){const a=Gt(r),o=a.queries.get(e);if(o)for(const c of o.ta)c.onError(i);a.queries.delete(e)}function Rm(r){r.ia.forEach(e=>{e.next()})}var Fd,d0;(d0=Fd||(Fd={}))._a="default",d0.Cache="cache";class Cm{constructor(e,i,a){this.query=e,this.aa=i,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new ll(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.ua?this.la(e)&&(this.aa.next(e),i=!0):this.ha(e,this.onlineState)&&(this.Pa(e),i=!0),this.ca=e,i}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let i=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),i=!0),i}ha(e,i){if(!e.fromCache||!this.ra())return!0;const a=i!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}la(e){if(e.docChanges.length>0)return!0;const i=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Pa(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Fd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class Fw{constructor(e,i){this.query=e,this.fa=i,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ee(),this.mutatedKeys=ee(),this.ya=I_(e),this.wa=new tl(this.ya)}get Sa(){return this.fa}ba(e,i){const a=i?i.Da:new h0,o=i?i.wa:this.wa;let c=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,S)=>{const A=o.get(b),O=Xc(this.query,S)?S:null,N=!!A&&this.mutatedKeys.has(A.key),G=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let B=!1;A&&O?A.data.isEqual(O.data)?N!==G&&(a.track({type:3,doc:O}),B=!0):this.va(A,O)||(a.track({type:2,doc:O}),B=!0,(g&&this.ya(O,g)>0||p&&this.ya(O,p)<0)&&(m=!0)):!A&&O?(a.track({type:0,doc:O}),B=!0):A&&!O&&(a.track({type:1,doc:A}),B=!0,(g||p)&&(m=!0)),B&&(O?(f=f.add(O),c=G?c.add(b):c.delete(b)):(f=f.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),c=c.delete(b.key),a.track({type:1,doc:b})}return{wa:f,Da:a,ls:m,mutatedKeys:c}}va(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const c=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((b,S)=>function(O,N){const G=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return G(O)-G(N)}(b.type,S.type)||this.ya(b.doc,S.doc)),this.Ca(a),o=o!=null&&o;const m=i&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,p=g!==this.ga;return this.ga=g,f.length!==0||p?{snapshot:new ll(this.query,e.wa,c,f,e.mutatedKeys,g===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new h0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(i=>this.fa=this.fa.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.fa=this.fa.delete(i)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ee(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const i=[];return e.forEach(a=>{this.pa.has(a)||i.push(new u1(a))}),this.pa.forEach(a=>{e.has(a)||i.push(new o1(a))}),i}Oa(e){this.fa=e.gs,this.pa=ee();const i=this.ba(e.documents);return this.applyChanges(i,!0)}Na(){return ll.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Im="SyncEngine";class Qw{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class $w{constructor(e){this.key=e,this.Ba=!1}}class Yw{constructor(e,i,a,o,c,f){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new aa(m=>C_(m),Wc),this.qa=new Map,this.Qa=new Set,this.$a=new je(Vt.comparator),this.Ua=new Map,this.Ka=new pm,this.Wa={},this.Ga=new Map,this.za=al.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Kw(r,e,i=!0){const a=p1(r);let o;const c=a.ka.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Na()):o=await c1(a,e,i,!0),o}async function Ww(r,e){const i=p1(r);await c1(i,e,!0,!1)}async function c1(r,e,i,a){const o=await gw(r.localStore,Wi(e)),c=o.targetId,f=r.sharedClientState.addLocalQueryTarget(c,i);let m;return a&&(m=await Xw(r,e,c,f==="current",o.resumeToken)),r.isPrimaryClient&&i&&n1(r.remoteStore,o),m}async function Xw(r,e,i,a,o){r.Ha=(S,A,O)=>async function(G,B,H,Y){let P=B.view.ba(H);P.ls&&(P=await s0(G.localStore,B.query,!1).then(({documents:j})=>B.view.ba(j,P)));const lt=Y&&Y.targetChanges.get(B.targetId),dt=Y&&Y.targetMismatches.get(B.targetId)!=null,St=B.view.applyChanges(P,G.isPrimaryClient,lt,dt);return p0(G,B.targetId,St.Ma),St.snapshot}(r,S,A,O);const c=await s0(r.localStore,e,!0),f=new Fw(e,c.gs),m=f.ba(c.documents),g=qo.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",o),p=f.applyChanges(m,r.isPrimaryClient,g);p0(r,i,p.Ma);const b=new Qw(e,i,f);return r.ka.set(e,b),r.qa.has(i)?r.qa.get(i).push(e):r.qa.set(i,[e]),p.snapshot}async function Zw(r,e,i){const a=Gt(r),o=a.ka.get(e),c=a.qa.get(o.targetId);if(c.length>1)return a.qa.set(o.targetId,c.filter(f=>!Wc(f,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Hd(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),i&&_m(a.remoteStore,o.targetId),Qd(a,o.targetId)}).catch(dl)):(Qd(a,o.targetId),await Hd(a.localStore,o.targetId,!0))}async function Jw(r,e){const i=Gt(r),a=i.ka.get(e),o=i.qa.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),_m(i.remoteStore,a.targetId))}async function t2(r,e,i){const a=l2(r);try{const o=await function(f,m){const g=Gt(f),p=en.now(),b=m.reduce((O,N)=>O.add(N.key),ee());let S,A;return g.persistence.runTransaction("Locally write mutations","readwrite",O=>{let N=Nr(),G=ee();return g.ds.getEntries(O,b).next(B=>{N=B,N.forEach((H,Y)=>{Y.isValidDocument()||(G=G.add(H))})}).next(()=>g.localDocuments.getOverlayedDocuments(O,N)).next(B=>{S=B;const H=[];for(const Y of m){const P=gA(Y,S.get(Y.key).overlayedDocument);P!=null&&H.push(new Es(Y.key,P,E_(P.value.mapValue),Mn.exists(!0)))}return g.mutationQueue.addMutationBatch(O,p,H,m)}).next(B=>{A=B;const H=B.applyToLocalDocumentSet(S,G);return g.documentOverlayCache.saveOverlays(O,B.batchId,H)})}).then(()=>({batchId:A.batchId,changes:N_(S)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let p=f.Wa[f.currentUser.toKey()];p||(p=new je(Xt)),p=p.insert(m,g),f.Wa[f.currentUser.toKey()]=p}(a,o.batchId,i),await Go(a,o.changes),await rh(a.remoteStore)}catch(o){const c=xm(o,"Failed to persist write");i.reject(c)}}async function h1(r,e){const i=Gt(r);try{const a=await dw(i.localStore,e);e.targetChanges.forEach((o,c)=>{const f=i.Ua.get(c);f&&(fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?fe(f.Ba):o.removedDocuments.size>0&&(fe(f.Ba),f.Ba=!1))}),await Go(i,a,e)}catch(a){await dl(a)}}function m0(r,e,i){const a=Gt(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.ka.forEach((c,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=Gt(f);g.onlineState=m;let p=!1;g.queries.forEach((b,S)=>{for(const A of S.ta)A.sa(m)&&(p=!0)}),p&&Rm(g)}(a.eventManager,e),o.length&&a.La.p_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function e2(r,e,i){const a=Gt(r);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Ua.get(e),c=o&&o.key;if(c){let f=new je(Vt.comparator);f=f.insert(c,An.newNoDocument(c,Ht.min()));const m=ee().add(c),g=new eh(Ht.min(),new Map,new je(Xt),f,m);await h1(a,g),a.$a=a.$a.remove(c),a.Ua.delete(e),Dm(a)}else await Hd(a.localStore,e,!1).then(()=>Qd(a,e,i)).catch(dl)}async function n2(r,e){const i=Gt(r),a=e.batch.batchId;try{const o=await fw(i.localStore,e);d1(i,a,null),f1(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Go(i,o)}catch(o){await dl(o)}}async function i2(r,e,i){const a=Gt(r);try{const o=await function(f,m){const g=Gt(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let b;return g.mutationQueue.lookupMutationBatch(p,m).next(S=>(fe(S!==null),b=S.keys(),g.mutationQueue.removeMutationBatch(p,S))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,b,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b)).next(()=>g.localDocuments.getDocuments(p,b))})}(a.localStore,e);d1(a,e,i),f1(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await Go(a,o)}catch(o){await dl(o)}}function f1(r,e){(r.Ga.get(e)||[]).forEach(i=>{i.resolve()}),r.Ga.delete(e)}function d1(r,e,i){const a=Gt(r);let o=a.Wa[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(i?c.reject(i):c.resolve(),o=o.remove(e)),a.Wa[a.currentUser.toKey()]=o}}function Qd(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.qa.get(e))r.ka.delete(a),i&&r.La.Ja(a,i);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(a=>{r.Ka.containsKey(a)||m1(r,a)})}function m1(r,e){r.Qa.delete(e.path.canonicalString());const i=r.$a.get(e);i!==null&&(_m(r.remoteStore,i),r.$a=r.$a.remove(e),r.Ua.delete(i),Dm(r))}function p0(r,e,i){for(const a of i)a instanceof o1?(r.Ka.addReference(a.key,e),r2(r,a)):a instanceof u1?(Tt(Im,"Document no longer in limbo: "+a.key),r.Ka.removeReference(a.key,e),r.Ka.containsKey(a.key)||m1(r,a.key)):Bt()}function r2(r,e){const i=e.key,a=i.path.canonicalString();r.$a.get(i)||r.Qa.has(a)||(Tt(Im,"New document in limbo: "+i),r.Qa.add(a),Dm(r))}function Dm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const i=new Vt(Re.fromString(e)),a=r.za.next();r.Ua.set(a,new $w(i)),r.$a=r.$a.insert(i,a),n1(r.remoteStore,new ls(Wi(Kc(i.path)),a,"TargetPurposeLimboResolution",Qc.ae))}}async function Go(r,e,i){const a=Gt(r),o=[],c=[],f=[];a.ka.isEmpty()||(a.ka.forEach((m,g)=>{f.push(a.Ha(g,e,i).then(p=>{var b;if((p||i)&&a.isPrimaryClient){const S=p?!p.fromCache:(b=i==null?void 0:i.targetChanges.get(g.targetId))===null||b===void 0?void 0:b.current;a.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(p){o.push(p);const S=ym.Yi(g.targetId,p);c.push(S)}}))}),await Promise.all(f),a.La.p_(o),await async function(g,p){const b=Gt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ct.forEach(p,A=>ct.forEach(A.Hi,O=>b.persistence.referenceDelegate.addReference(S,A.targetId,O)).next(()=>ct.forEach(A.Ji,O=>b.persistence.referenceDelegate.removeReference(S,A.targetId,O)))))}catch(S){if(!ml(S))throw S;Tt(vm,"Failed to update sequence numbers: "+S)}for(const S of p){const A=S.targetId;if(!S.fromCache){const O=b.Ts.get(A),N=O.snapshotVersion,G=O.withLastLimboFreeSnapshotVersion(N);b.Ts=b.Ts.insert(A,G)}}}(a.localStore,c))}async function s2(r,e){const i=Gt(r);if(!i.currentUser.isEqual(e)){Tt(Im,"User change. New user:",e.toKey());const a=await Z_(i.localStore,e);i.currentUser=e,function(c,f){c.Ga.forEach(m=>{m.forEach(g=>{g.reject(new xt(ut.CANCELLED,f))})}),c.Ga.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Go(i,a.Rs)}}function a2(r,e){const i=Gt(r),a=i.Ua.get(e);if(a&&a.Ba)return ee().add(a.key);{let o=ee();const c=i.qa.get(e);if(!c)return o;for(const f of c){const m=i.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function p1(r){const e=Gt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e2.bind(null,e),e.La.p_=Hw.bind(null,e.eventManager),e.La.Ja=Gw.bind(null,e.eventManager),e}function l2(r){const e=Gt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i2.bind(null,e),e}class Bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,i){return null}nu(e,i){return null}eu(e){return hw(this.persistence,new ow,e.initialUser,this.serializer)}Xa(e){return new X_(gm.ri,this.serializer)}Za(e){return new vw}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bc.provider={build:()=>new Bc};class o2 extends Bc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,i){fe(this.persistence.referenceDelegate instanceof zc);const a=this.persistence.referenceDelegate.garbageCollector;return new $A(a,e.asyncQueue,i)}Xa(e){const i=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new X_(a=>zc.ri(a,i),this.serializer)}}class $d{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>m0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=s2.bind(null,this.syncEngine),await Pw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qw}()}createDatastore(e){const i=nh(e.databaseInfo.databaseId),a=function(c){return new Tw(c)}(e.databaseInfo);return function(c,f,m,g){return new Rw(c,f,m,g)}(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return function(a,o,c,f,m){return new Iw(a,o,c,f,m)}(this.localStore,this.datastore,e.asyncQueue,i=>m0(this.syncEngine,i,0),function(){return o0.D()?new o0:new _w}())}createSyncEngine(e,i){return function(o,c,f,m,g,p,b){const S=new Yw(o,c,f,m,g,p);return b&&(S.ja=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(o){const c=Gt(o);Tt(ra,"RemoteStore shutting down."),c.W_.add(5),await Ho(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}$d.provider={build:()=>new $d};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class u2{constructor(e,i,a,o,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=xn.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async f=>{Tt(vs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(a,f=>(Tt(vs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=xm(i,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Sd(r,e){r.asyncQueue.verifyOperationInProgress(),Tt(vs,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener(async o=>{a.isEqual(o)||(await Z_(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function g0(r,e){r.asyncQueue.verifyOperationInProgress();const i=await c2(r);Tt(vs,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener(a=>c0(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,o)=>c0(e.remoteStore,o)),r._onlineComponents=e}async function c2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Tt(vs,"Using user provided OfflineComponentProvider");try{await Sd(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(o){return o.name==="FirebaseError"?o.code===ut.FAILED_PRECONDITION||o.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;nl("Error using user provided cache. Falling back to memory cache: "+i),await Sd(r,new Bc)}}else Tt(vs,"Using default OfflineComponentProvider"),await Sd(r,new o2(void 0));return r._offlineComponents}async function g1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Tt(vs,"Using user provided OnlineComponentProvider"),await g0(r,r._uninitializedComponentsProvider._online)):(Tt(vs,"Using default OnlineComponentProvider"),await g0(r,new $d))),r._onlineComponents}function h2(r){return g1(r).then(e=>e.syncEngine)}async function qc(r){const e=await g1(r),i=e.eventManager;return i.onListen=Kw.bind(null,e.syncEngine),i.onUnlisten=Zw.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Ww.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=Jw.bind(null,e.syncEngine),i}function f2(r,e,i={}){const a=new Rr;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,m,g,p){const b=new Nm({next:A=>{b.su(),f.enqueueAndForget(()=>wm(c,S));const O=A.docs.has(m);!O&&A.fromCache?p.reject(new xt(ut.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&g&&g.source==="server"?p.reject(new xt(ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),S=new Cm(Kc(m.path),b,{includeMetadataChanges:!0,Ta:!0});return Am(c,S)}(await qc(r),r.asyncQueue,e,i,a)),a.promise}function d2(r,e,i={}){const a=new Rr;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,m,g,p){const b=new Nm({next:A=>{b.su(),f.enqueueAndForget(()=>wm(c,S)),A.fromCache&&g.source==="server"?p.reject(new xt(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),S=new Cm(m,b,{includeMetadataChanges:!0,Ta:!0});return Am(c,S)}(await qc(r),r.asyncQueue,e,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r,e,i){if(!i)throw new xt(ut.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function m2(r,e,i,a){if(e===!0&&a===!0)throw new xt(ut.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function v0(r){if(!Vt.isDocumentKey(r))throw new xt(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _0(r){if(Vt.isDocumentKey(r))throw new xt(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function sh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Bt()}function Vn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new xt(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=sh(r);throw new xt(ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="firestore.googleapis.com",E0=!0;class b0{constructor(e){var i,a;if(e.host===void 0){if(e.ssl!==void 0)throw new xt(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_1,this.ssl=E0}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:E0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FA)throw new xt(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y1((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new xt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new xt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new xt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xt(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xt(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new bx;switch(a.type){case"firstParty":return new Ax(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new xt(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=y0.get(i);a&&(Tt("ComponentProvider","Removing Datastore"),y0.delete(i),a.terminate())}(this),Promise.resolve()}}function p2(r,e,i,a={}){var o;const c=(r=Vn(r,ah))._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${i}`;c.host!==_1&&c.host!==m&&nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:!1,emulatorOptions:a});if(!Ic(g,f)&&(r._setSettings(g),a.mockUserToken)){let p,b;if(typeof a.mockUserToken=="string")p=a.mockUserToken,b=xn.MOCK_USER;else{p=ZS(a.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new xt(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new xn(S)}r._authCredentials=new Sx(new o_(p,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class wn{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class hs extends oa{constructor(e,i,a){super(e,i,Kc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Vt(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Ie(r,e,...i){if(r=Ei(r),v1("collection","path",e),r instanceof ah){const a=Re.fromString(e,...i);return _0(a),new hs(r,null,a)}{if(!(r instanceof wn||r instanceof hs))throw new xt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Re.fromString(e,...i));return _0(a),new hs(r.firestore,null,a)}}function Qt(r,e,...i){if(r=Ei(r),arguments.length===1&&(e=c_.newId()),v1("doc","path",e),r instanceof ah){const a=Re.fromString(e,...i);return v0(a),new wn(r,null,new Vt(a))}{if(!(r instanceof wn||r instanceof hs))throw new xt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Re.fromString(e,...i));return v0(a),new wn(r.firestore,r instanceof hs?r.converter:null,new Vt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="AsyncQueue";class T0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new t1(this,"async_queue_retry"),this.Su=()=>{const a=bd();a&&Tt(S0,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=e;const i=bd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const i=bd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const i=new Rr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ml(e))throw e;Tt(S0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const i=this.bu.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(a);throw Dr("INTERNAL UNHANDLED ERROR: ",o),a}).then(a=>(this.pu=!1,a))));return this.bu=i,i}enqueueAfterDelay(e,i,a){this.Du(),this.wu.indexOf(e)>-1&&(i=0);const o=Tm.createAndSchedule(this,e,i,a,c=>this.Fu(c));return this.fu.push(o),o}Du(){this.gu&&Bt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const i of this.fu)if(i.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.fu)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const i=this.fu.indexOf(e);this.fu.splice(i,1)}}function x0(r){return function(i,a){if(typeof i!="object"||i===null)return!1;const o=i;for(const c of a)if(c in o&&typeof o[c]=="function")return!0;return!1}(r,["next","error","complete"])}class Ji extends ah{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new T0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T0(e),this._firestoreClient=void 0,await e}}}function g2(r,e){const i=typeof r=="object"?r:ox(),a=typeof r=="string"?r:Vc,o=ix(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=WS("firestore");c&&p2(o,...c)}return o}function Fo(r){if(r._terminated)throw new xt(ut.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||y2(r),r._firestoreClient}function y2(r){var e,i,a;const o=r._freezeSettings(),c=function(m,g,p,b){return new Px(m,g,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,y1(b.experimentalLongPollingOptions),b.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new u2(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(_n.fromBase64String(e))}catch(i){throw new xt(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new ol(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new xt(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new xt(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new xt(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^__.*__$/;class _2{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,i,this.fieldTransforms):new Bo(e,this.data,i,this.fieldTransforms)}}class E1{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new Es(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function b1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class Om{constructor(e,i,a,o,c,f){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Om(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:a,Qu:!1});return o.$u(e),o}Uu(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.ku({path:a,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(b1(this.Lu)&&v2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class E2{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||nh(e)}ju(e,i,a,o=!1){return new Om({Lu:e,methodName:i,zu:a,path:vn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $o(r){const e=r._freezeSettings(),i=nh(r._databaseId);return new E2(r._databaseId,!!e.ignoreUndefinedProperties,i)}function jm(r,e,i,a,o,c={}){const f=r.ju(c.merge||c.mergeFields?2:0,e,i,o);km("Data must be an object, but it was:",f,a);const m=x1(a,f);let g,p;if(c.merge)g=new Wn(f.fieldMask),p=f.fieldTransforms;else if(c.mergeFields){const b=[];for(const S of c.mergeFields){const A=Yd(e,S,i);if(!f.contains(A))throw new xt(ut.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);w1(b,A)||b.push(A)}g=new Wn(b),p=f.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,p=f.fieldTransforms;return new _2(new Bn(m),g,p)}class oh extends lh{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}class Lm extends lh{_toFieldTransform(e){return new fA(e.path,new Oo)}isEqual(e){return e instanceof Lm}}function S1(r,e,i,a){const o=r.ju(1,e,i);km("Data must be an object, but it was:",o,a);const c=[],f=Bn.empty();_s(a,(g,p)=>{const b=Um(e,g,i);p=Ei(p);const S=o.Uu(b);if(p instanceof oh)c.push(b);else{const A=Yo(p,S);A!=null&&(c.push(b),f.set(b,A))}});const m=new Wn(c);return new E1(f,m,o.fieldTransforms)}function T1(r,e,i,a,o,c){const f=r.ju(1,e,i),m=[Yd(e,a,i)],g=[o];if(c.length%2!=0)throw new xt(ut.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(Yd(e,c[A])),g.push(c[A+1]);const p=[],b=Bn.empty();for(let A=m.length-1;A>=0;--A)if(!w1(p,m[A])){const O=m[A];let N=g[A];N=Ei(N);const G=f.Uu(O);if(N instanceof oh)p.push(O);else{const B=Yo(N,G);B!=null&&(p.push(O),b.set(O,B))}}const S=new Wn(p);return new E1(b,S,f.fieldTransforms)}function b2(r,e,i,a=!1){return Yo(i,r.ju(a?4:3,e))}function Yo(r,e){if(A1(r=Ei(r)))return km("Unsupported field value:",e,r),x1(r,e);if(r instanceof lh)return function(a,o){if(!b1(o.Lu))throw o.Wu(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,o){const c=[];let f=0;for(const m of a){let g=Yo(m,o.Ku(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}}(r,e)}return function(a,o){if((a=Ei(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return uA(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=en.fromDate(a);return{timestampValue:Uc(o.serializer,c)}}if(a instanceof en){const c=new en(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Uc(o.serializer,c)}}if(a instanceof Mm)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ol)return{bytesValue:H_(o.serializer,a._byteString)};if(a instanceof wn){const c=o.databaseId,f=a.firestore._databaseId;if(!f.isEqual(c))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:mm(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Vm)return function(f,m){return{mapValue:{fields:{[v_]:{stringValue:__},[Oc]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw m.Wu("VectorValues must only contain numeric values.");return hm(m.serializer,p)})}}}}}}(a,o);throw o.Wu(`Unsupported field value: ${sh(a)}`)}(r,e)}function x1(r,e){const i={};return f_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(r,(a,o)=>{const c=Yo(o,e.qu(a));c!=null&&(i[a]=c)}),{mapValue:{fields:i}}}function A1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof en||r instanceof Mm||r instanceof ol||r instanceof wn||r instanceof lh||r instanceof Vm)}function km(r,e,i){if(!A1(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const a=sh(i);throw a==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+a)}}function Yd(r,e,i){if((e=Ei(e))instanceof Qo)return e._internalPath;if(typeof e=="string")return Um(r,e);throw Hc("Field path arguments must be of type string or ",r,!1,void 0,i)}const S2=new RegExp("[~\\*/\\[\\]]");function Um(r,e,i){if(e.search(S2)>=0)throw Hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Qo(...e.split("."))._internalPath}catch{throw Hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Hc(r,e,i,a,o){const c=a&&!a.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${a}`),f&&(g+=` in document ${o}`),g+=")"),new xt(ut.INVALID_ARGUMENT,m+r+g)}function w1(r,e){return r.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,i,a,o,c){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(zm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class T2 extends R1{data(){return super.data()}}function zm(r,e){return typeof e=="string"?Um(r,e):e instanceof Qo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new xt(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pm{}class x2 extends Pm{}function ea(r,e,...i){let a=[];e instanceof Pm&&a.push(e),a=a.concat(i),function(c){const f=c.filter(g=>g instanceof Bm).length,m=c.filter(g=>g instanceof uh).length;if(f>1||f>0&&m>0)throw new xt(ut.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)r=o._apply(r);return r}class uh extends x2{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new uh(e,i,a)}_apply(e){const i=this._parse(e);return I1(e._query,i),new oa(e.firestore,e.converter,kd(e._query,i))}_parse(e){const i=$o(e.firestore);return function(c,f,m,g,p,b,S){let A;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new xt(ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){w0(S,b);const N=[];for(const G of S)N.push(A0(g,c,G));A={arrayValue:{values:N}}}else A=A0(g,c,S)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||w0(S,b),A=b2(m,f,S,b==="in"||b==="not-in");return $e.create(p,b,A)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function na(r,e,i){const a=e,o=zm("where",r);return uh._create(o,a,i)}class Bm extends Pm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Bm(e,i)}_parse(e){const i=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return i.length===1?i[0]:Mi.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(o,c){let f=o;const m=c.getFlattenedFilters();for(const g of m)I1(f,g),f=kd(f,g)}(e._query,i),new oa(e.firestore,e.converter,kd(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function A0(r,e,i){if(typeof(i=Ei(i))=="string"){if(i==="")throw new xt(ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R_(e)&&i.indexOf("/")!==-1)throw new xt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(Re.fromString(i));if(!Vt.isDocumentKey(a))throw new xt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Pv(r,new Vt(a))}if(i instanceof wn)return Pv(r,i._key);throw new xt(ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sh(i)}.`)}function w0(r,e){if(!Array.isArray(r)||r.length===0)throw new xt(ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I1(r,e){const i=function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new xt(ut.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xt(ut.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class A2{convertValue(e,i="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Bt()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return _s(e,(o,c)=>{a[o]=this.convertValue(c,i)}),a}convertVectorValue(e){var i,a,o;const c=(o=(a=(i=e.fields)===null||i===void 0?void 0:i[Oc].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(f=>Be(f.doubleValue));return new Vm(c)}convertGeoPoint(e){return new Mm(Be(e.latitude),Be(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=Yc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(No(e));default:return null}}convertTimestamp(e){const i=ms(e);return new en(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=Re.fromString(e);fe(K_(a));const o=new Mo(a.get(1),a.get(3)),c=new Vt(a.popFirst(5));return o.isEqual(i)||Dr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(r,e,i){let a;return a=r?i&&(i.merge||i.mergeFields)?r.toFirestore(e,i):r.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D1 extends R1{constructor(e,i,a,o,c,f){super(e,i,a,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(zm("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class wc extends D1{data(e={}){return super.data(e)}}class N1{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new So(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new wc(this._firestore,this._userDataWriter,a.key,a,new So(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new xt(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new wc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new So(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new wc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new So(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return m.type!==0&&(p=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),b=f.indexOf(m.doc.key)),{type:w2(m.type),doc:g,oldIndex:p,newIndex:b}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function w2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(r){r=Vn(r,wn);const e=Vn(r.firestore,Ji);return f2(Fo(e),r._key).then(i=>V1(e,r,i))}class Hm extends A2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,i)}}function fs(r){r=Vn(r,oa);const e=Vn(r.firestore,Ji),i=Fo(e),a=new Hm(e);return C1(r._query),d2(i,r._query).then(o=>new N1(e,a,r,o))}function Gm(r,e,i){r=Vn(r,wn);const a=Vn(r.firestore,Ji),o=qm(r.converter,e,i);return Ko(a,[jm($o(a),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,Mn.none())])}function M1(r,e,i,...a){r=Vn(r,wn);const o=Vn(r.firestore,Ji),c=$o(o);let f;return f=typeof(e=Ei(e))=="string"||e instanceof Qo?T1(c,"updateDoc",r._key,e,i,a):S1(c,"updateDoc",r._key,e),Ko(o,[f.toMutation(r._key,Mn.exists(!0))])}function R2(r){return Ko(Vn(r.firestore,Ji),[new th(r._key,Mn.none())])}function C2(r,e){const i=Vn(r.firestore,Ji),a=Qt(r),o=qm(r.converter,e);return Ko(i,[jm($o(r.firestore),"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,Mn.exists(!1))]).then(()=>a)}function Oe(r,...e){var i,a,o;r=Ei(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||x0(e[f])||(c=e[f],f++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(x0(e[f])){const S=e[f];e[f]=(i=S.next)===null||i===void 0?void 0:i.bind(S),e[f+1]=(a=S.error)===null||a===void 0?void 0:a.bind(S),e[f+2]=(o=S.complete)===null||o===void 0?void 0:o.bind(S)}let g,p,b;if(r instanceof wn)p=Vn(r.firestore,Ji),b=Kc(r._key.path),g={next:S=>{e[f]&&e[f](V1(p,r,S))},error:e[f+1],complete:e[f+2]};else{const S=Vn(r,oa);p=Vn(S.firestore,Ji),b=S._query;const A=new Hm(p);g={next:O=>{e[f]&&e[f](new N1(p,A,S,O))},error:e[f+1],complete:e[f+2]},C1(r._query)}return function(A,O,N,G){const B=new Nm(G),H=new Cm(O,B,N);return A.asyncQueue.enqueueAndForget(async()=>Am(await qc(A),H)),()=>{B.su(),A.asyncQueue.enqueueAndForget(async()=>wm(await qc(A),H))}}(Fo(p),b,m,g)}function Ko(r,e){return function(a,o){const c=new Rr;return a.asyncQueue.enqueueAndForget(async()=>t2(await h2(a),o,c)),c.promise}(Fo(r),e)}function V1(r,e,i){const a=i.docs.get(e._key),o=new Hm(r);return new D1(r,o,e._key,a,new So(i.hasPendingWrites,i.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=$o(e)}set(e,i,a){this._verifyNotCommitted();const o=Td(e,this._firestore),c=qm(o.converter,i,a),f=jm(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,a);return this._mutations.push(f.toMutation(o._key,Mn.none())),this}update(e,i,a,...o){this._verifyNotCommitted();const c=Td(e,this._firestore);let f;return f=typeof(i=Ei(i))=="string"||i instanceof Qo?T1(this._dataReader,"WriteBatch.update",c._key,i,a,o):S1(this._dataReader,"WriteBatch.update",c._key,i),this._mutations.push(f.toMutation(c._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=Td(e,this._firestore);return this._mutations=this._mutations.concat(new th(i._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xt(ut.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Td(r,e){if((r=Ei(r)).firestore!==e)throw new xt(ut.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function vi(){return new Lm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(r){return Fo(r=Vn(r,Ji)),new I2(r,e=>Ko(r,e))}(function(e,i=!0){(function(o){fl=o})(lx),Nc(new Co("firestore",(a,{instanceIdentifier:o,options:c})=>{const f=a.getProvider("app").getImmediate(),m=new Ji(new Tx(a.getProvider("auth-internal")),new wx(f,a.getProvider("app-check-internal")),function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xt(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(p.options.projectId,b)}(f,o),f);return c=Object.assign({useFetchStreams:i},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Ja(Cv,Iv,e),Ja(Cv,Iv,"esm2017")})();const D2={apiKey:"AIzaSyA",authDomain:"myattendanceproject-45c1b.firebaseapp.com",projectId:"myattendanceproject-45c1b",storageBucket:"myattendanceproject-45c1b.appspot.com",messagingSenderId:"347137303283",appId:"1:347137303283:web:9369753f976dffcf65cd86"},N2=J0(D2),bt=g2(N2),M2=r=>(r||"").toString().replace(/[^0-9]/g,""),V2=r=>r.slice(-8);function O2(){const[r,e]=C.useState(""),[i,a]=C.useState(""),[o,c]=C.useState(""),f=Uo(),m=async()=>{c("");const g=M2(r),p=(i||"").trim();if(g.length!==11||!g.startsWith("010")){c("   11(010...)  .");return}if(p.length<6){c("  . (    8)");return}try{const b=Qt(bt,"parents",g),S=await tn(b);let A=null;if(S.exists())A=S.data();else{const N=ea(Ie(bt,"students"),na("parentPhone","==",g)),G=await fs(N),B=[];if(G.forEach(Y=>B.push(Y.id)),B.length===0){c("  . (/    .)");return}const H=V2(g);await Gm(b,{phone:g,password:H,mustChangePassword:!0,children:B,createdAt:vi(),updatedAt:vi()}),A={phone:g,password:H,mustChangePassword:!0,children:B}}if(!(A!=null&&A.password)||A.password!==p){c("  .");return}if(localStorage.setItem("parentPhone",g),localStorage.setItem("mustChangePassword",A.mustChangePassword?"1":"0"),A.mustChangePassword){f("/change-password");return}const O=A.children||[];O.length<=1?(O[0]&&localStorage.setItem("studentId",O[0]),f("/attendance")):f("/select-child")}catch(b){console.error(b),c("   .")}};return v.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:800,marginBottom:12},children:" "}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:8},children:"( )"}),v.jsx("input",{value:r,onChange:g=>e(g.target.value),placeholder:": 01012345678",inputMode:"numeric",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:12},children:""}),v.jsx("input",{value:i,onChange:g=>a(g.target.value),placeholder:" :   8",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("button",{onClick:m,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #0d6efd",background:"#0d6efd",color:"#fff",cursor:"pointer"},children:""}),o&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:600},children:o}),v.jsxs("div",{style:{marginTop:12,fontSize:12,color:"#6b7280",lineHeight:1.6},children:["   ",v.jsx("b",{children:"  8"}),".",v.jsx("br",{}),"       ."]})]})}function j2(){const r=localStorage.getItem("parentPhone")||"",[e,i]=C.useState(localStorage.getItem("studentId")||""),[a,o]=C.useState((localStorage.getItem("studentName")||"").trim()),[c,f]=C.useState([]),[m,g]=C.useState(null),[p,b]=C.useState({}),[S,A]=C.useState({}),[O,N]=C.useState(()=>new Date().getFullYear()),[G,B]=C.useState(()=>new Date().getMonth()),[H,Y]=C.useState(!1),[P,lt]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const X=window.matchMedia("(max-width: 640px)"),vt=Et=>lt(Et.matches);return X.addEventListener?X.addEventListener("change",vt):X.addListener(vt),lt(X.matches),()=>{X.removeEventListener?X.removeEventListener("change",vt):X.removeListener(vt)}},[]),C.useEffect(()=>{const X=()=>{i(localStorage.getItem("studentId")||""),o((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",X),window.addEventListener("hashchange",X);const vt=setInterval(X,800);return()=>{window.removeEventListener("storage",X),window.removeEventListener("hashchange",X),clearInterval(vt)}},[]),C.useEffect(()=>{(async()=>{var X;if(!a&&e)try{const vt=await tn(Qt(bt,"students",e));if(vt.exists()){const Et=(((X=vt.data())==null?void 0:X.name)||"").toString().trim();Et&&(o(Et),localStorage.setItem("studentName",Et))}}catch(vt){console.error("selected studentName  :",vt)}})()},[e,a]),C.useEffect(()=>{(async()=>{if(r)try{const X=await tn(Qt(bt,"parents",r));if(!X.exists()){f([]);return}const Et=(X.data()||{}).children||[],Lt=[];for(const Kt of Et)try{const qt=await tn(Qt(bt,"students",Kt)),st=qt.exists()?qt.data():{};Lt.push({id:Kt,name:(st.name||"").toString().trim()||""})}catch{Lt.push({id:Kt,name:""})}Lt.sort((Kt,qt)=>(Kt.name||"").localeCompare(qt.name||"")),f(Lt)}catch(X){console.error("children  :",X),f([])}})()},[r]),C.useEffect(()=>{const X=Oe(Ie(bt,"attendance"),vt=>{const Et={};vt.forEach(Lt=>{Et[Lt.id]=Lt.data()||{}}),b(Et)});return()=>X()},[]),C.useEffect(()=>{const X=Oe(Ie(bt,"holidays"),vt=>{const Et={};vt.forEach(Lt=>{const Kt=Lt.data()||{},qt=(Kt.date||"").toString(),st=(Kt.name||"").toString();qt&&(Et[qt]=st||"")}),A(Et)});return()=>X()},[]),C.useEffect(()=>{if(!c.length)return;const vt=(()=>{const Lt=new Date;return new Date(Lt.getTime()+9*60*60*1e3).toISOString().slice(0,10)})(),Et=(p==null?void 0:p[vt])||{};for(const Lt of c){const Kt=(Lt.name||"").trim();if(!Kt)continue;const qt=Et==null?void 0:Et[Kt],st=((qt==null?void 0:qt.time)||"").toString().trim(),Mt=((qt==null?void 0:qt.departureTime)||"").toString().trim(),jt=((qt==null?void 0:qt.status)||"").toString().trim(),Dt=`lastSeen_${Kt}`;let kt={};try{kt=JSON.parse(localStorage.getItem(Dt)||"{}")}catch{kt={}}const $t=(kt.time||"").toString().trim(),_e=(kt.departureTime||"").toString().trim();st&&st!==$t&&g({title:`${Kt} `,message:`${st}   ${jt?`(${jt})`:""}`}),Mt&&Mt!==_e&&g({title:`${Kt} `,message:`${Mt}  `}),localStorage.setItem(Dt,JSON.stringify({time:st,departureTime:Mt}))}},[p,c]);const dt=async X=>{var Lt;if(!X)return;const vt=c.find(Kt=>Kt.id===X);let Et=((vt==null?void 0:vt.name)||"").trim();if(!Et)try{const Kt=await tn(Qt(bt,"students",X));Kt.exists()&&(Et=(((Lt=Kt.data())==null?void 0:Lt.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",X),Et&&localStorage.setItem("studentName",Et),i(X),o(Et)},St=C.useMemo(()=>a?Object.entries(p).map(([X,vt])=>{const Et=vt==null?void 0:vt[a];return Et?{date:X,time:Et.time||"",departureTime:Et.departureTime||"",status:Et.status||""}:null}).filter(Boolean).sort((X,vt)=>vt.date.localeCompare(X.date)):[],[p,a]),j=C.useMemo(()=>{const X=`${O}-${String(G+1).padStart(2,"0")}`;return St.filter(vt=>vt.date.startsWith(X)).filter(vt=>{const Lt=new Date(vt.date+"T00:00:00").getDay();return Lt===0?!1:Lt===6?H:!0})},[St,O,G,H]),R=H?["","","","","",""]:["","","","",""],w=H?6:5,M=C.useMemo(()=>{const X=new Date(O,G,1),vt=[],Et=X.getDay(),Lt=new Date(X),Kt=(Et+6)%7;Lt.setDate(X.getDate()-Kt);const qt=H?6:5;for(let st=0;st<6;st++){const Mt=[],jt=new Date(Lt);jt.setDate(Lt.getDate()+st*7);for(let Dt=0;Dt<7;Dt++){const kt=new Date(jt);kt.setDate(jt.getDate()+Dt);const $t=kt.getDay();$t>=1&&$t<=qt&&Mt.push(new Date(kt))}Mt.some(Dt=>Dt.getMonth()===G||Dt.getMonth()!==G&&Dt.getDate()<=7)&&vt.push(Mt)}for(;vt.length&&vt[vt.length-1].every(st=>st.getMonth()!==G);)vt.pop();return vt},[O,G,H]),L=X=>{const vt=X.getFullYear(),Et=String(X.getMonth()+1).padStart(2,"0"),Lt=String(X.getDate()).padStart(2,"0");return`${vt}-${Et}-${Lt}`},U=`${O} ${String(G+1).padStart(2,"0")}`,I=()=>{const X=new Date(O,G-1,1);N(X.getFullYear()),B(X.getMonth())},It=()=>{const X=new Date(O,G+1,1);N(X.getFullYear()),B(X.getMonth())},Ot={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},J={padding:P?10:16,maxWidth:980,margin:"0 auto"},mt={display:"flex",gap:10,alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:12,flexDirection:P?"column":"row"},At={display:"flex",gap:8,alignItems:"center",justifyContent:P?"stretch":"flex-end",flexDirection:P?"column":"row"},Ft={display:"flex",gap:8,alignItems:"center",justifyContent:P?"space-between":"flex-end",flexWrap:"wrap"},k={padding:"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:800,cursor:"pointer",width:P?"100%":"auto"},at=(X="white")=>({padding:P?"10px 12px":"8px 12px",border:"1px solid #d1d5db",borderRadius:12,background:X,cursor:"pointer",fontWeight:900,width:P?"100%":"auto"}),gt={padding:"7px 10px",border:"1px solid #d1d5db",borderRadius:999,background:"white",cursor:"pointer",fontWeight:900,fontSize:12,whiteSpace:"nowrap"},ft=P?6:10,Rt=P?64:86,Ct=P?8:10;return v.jsxs("div",{style:J,children:[m&&v.jsx("div",{style:{position:"fixed",left:0,right:0,top:12,display:"flex",justifyContent:"center",zIndex:999999,pointerEvents:"none"},children:v.jsxs("div",{style:{pointerEvents:"auto",minWidth:260,maxWidth:460,background:"#111827",color:"white",padding:"12px 14px",borderRadius:14,boxShadow:"0 10px 25px rgba(0,0,0,0.25)"},onClick:()=>g(null),children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:m.title}),v.jsx("div",{style:{marginTop:6,fontSize:13,opacity:.92},children:m.message}),v.jsx("div",{style:{marginTop:10,textAlign:"right"},children:v.jsx("button",{onClick:()=>g(null),style:{border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"white",borderRadius:10,padding:"6px 10px",cursor:"pointer",fontWeight:900},children:""})})]})}),v.jsxs("div",{style:mt,children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:P?20:22,fontWeight:900},children:"  "}),v.jsxs("div",{style:{color:"#6b7280",fontSize:13,marginTop:4,lineHeight:1.4},children:[a?` : ${a}`:"  .",c.length>1&&v.jsx("span",{style:{marginLeft:8,color:"#10b981",fontWeight:800},children:"(  )"})]})]}),c.length>0&&v.jsxs("div",{style:At,children:[v.jsxs("div",{style:Ft,children:[v.jsx("span",{style:{fontSize:12,color:"#6b7280",minWidth:44},children:" "}),v.jsx("select",{value:e,onChange:X=>dt(X.target.value),style:k,children:c.map(X=>v.jsx("option",{value:X.id,children:X.name},X.id))})]}),v.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:at("#f9fafb"),children:" "})]})]}),v.jsxs("div",{style:{...Ot,padding:P?12:14,marginBottom:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:10,gap:8,flexDirection:P?"column":"row"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[v.jsx("button",{onClick:I,style:at("white"),children:""}),v.jsx("div",{style:{fontWeight:900,fontSize:16,textAlign:"center",flex:1},children:U}),v.jsx("button",{onClick:It,style:at("white"),children:""})]}),v.jsx("div",{style:{display:"flex",gap:8,justifyContent:P?"stretch":"flex-end",flexWrap:"wrap"},children:v.jsx("button",{onClick:()=>Y(X=>!X),style:{...gt,background:H?"#111827":"white",color:H?"white":"#111827",borderColor:H?"#111827":"#d1d5db",width:P?"100%":"auto"},title:"    ",children:H?"  ON":"  OFF"})})]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${w}, 1fr)`,gap:ft,paddingBottom:10,borderBottom:"1px solid #f1f5f9",fontWeight:900,color:"#6b7280",fontSize:13},children:R.map(X=>v.jsx("div",{style:{textAlign:"center"},children:X},X))}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:ft,marginTop:10},children:M.map((X,vt)=>v.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${w}, 1fr)`,gap:ft},children:X.map(Et=>{var kt;const Lt=L(Et),Kt=Et.getMonth()===G,qt=a?(kt=p==null?void 0:p[Lt])==null?void 0:kt[a]:null,st=!!S[Lt],Mt=!!(qt!=null&&qt.time||qt!=null&&qt.departureTime),jt=$t=>{const _e=($t||"").toString().trim();return _e?_e.length>=5?_e.slice(0,5):_e:""},Dt=($t,_e)=>v.jsx("span",{style:{display:"inline-block",fontSize:P?11:12,fontWeight:900,color:_e,background:`${_e}14`,padding:"2px 8px",borderRadius:999,lineHeight:1.2,whiteSpace:"nowrap"},children:$t});return v.jsxs("div",{title:st?`${Lt}  ${S[Lt]}`:Lt,style:{minHeight:Rt,border:`1px solid ${st?"#fecaca":"#e5e7eb"}`,borderRadius:14,padding:Ct,background:Kt?st?"#fff1f2":Mt?"#ecfeff":"white":"#fafafa",opacity:Kt?1:.55,overflow:"hidden"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginBottom:6,gap:6},children:[v.jsx("div",{style:{fontWeight:900,fontSize:P?13:14,color:st?"#ef4444":"#111827"},children:Et.getDate()}),st&&v.jsx("span",{style:{fontSize:11,color:"#ef4444",fontWeight:900,background:"rgba(239,68,68,0.10)",padding:"2px 8px",borderRadius:999,maxWidth:"75%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S[Lt]})]}),qt?(()=>{const $t=jt(qt.time),_e=jt(qt.departureTime);return!$t&&!_e?v.jsx("div",{style:{fontSize:P?11:12,color:"#9ca3af"},children:" "}):v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,alignItems:"flex-start",marginTop:2},children:[$t?Dt($t,"#0284c7"):null,_e?Dt(_e,"#16a34a"):null]})})():v.jsx("div",{style:{fontSize:P?11:12,color:"#9ca3af"},children:" "})]},Lt)})},vt))})]}),v.jsxs("div",{style:{...Ot,padding:P?12:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:P?"stretch":"center",justifyContent:"space-between",marginBottom:10,gap:10,flexDirection:P?"column":"row"},children:[v.jsx("div",{style:{fontSize:P?16:18,fontWeight:900},children:"    (/)"}),v.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:I,style:gt,children:""}),v.jsx("span",{style:{fontWeight:900},children:U}),v.jsx("button",{onClick:It,style:gt,children:""})]})]}),j.length===0?v.jsx("div",{style:{color:"#6b7280"},children:"    ."}):P?v.jsx("div",{style:{display:"grid",gap:10},children:j.slice().sort((X,vt)=>vt.date.localeCompare(X.date)).map(X=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:12,background:"white"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[v.jsxs("div",{style:{fontWeight:900},children:[X.date,S[X.date]&&v.jsx("span",{style:{marginLeft:8,fontSize:12,color:"#ef4444",fontWeight:900},children:S[X.date]})]}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:X.status||"-"})]}),v.jsxs("div",{style:{marginTop:8,display:"grid",gap:6},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[v.jsx("span",{style:{color:"#0284c7",fontWeight:900},children:""}),v.jsx("span",{style:{fontWeight:900},children:X.time||"-"})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[v.jsx("span",{style:{color:"#16a34a",fontWeight:900},children:""}),v.jsx("span",{style:{fontWeight:900},children:X.departureTime||"-"})]})]})]},X.date))}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""}),v.jsx("th",{style:yc,children:""})]})}),v.jsx("tbody",{children:j.slice().sort((X,vt)=>vt.date.localeCompare(X.date)).map(X=>v.jsxs("tr",{children:[v.jsxs("td",{style:vc,children:[v.jsx("span",{style:{fontWeight:900},children:X.date}),S[X.date]&&v.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#ef4444",fontWeight:900},children:["(",S[X.date],")"]})]}),v.jsx("td",{style:vc,children:X.time||"-"}),v.jsx("td",{style:vc,children:X.departureTime||"-"}),v.jsx("td",{style:vc,children:X.status||"-"})]},X.date))})]})})]})]})}const yc={textAlign:"left",padding:"10px 10px",borderBottom:"1px solid #e5e7eb",color:"#374151",fontSize:13,fontWeight:900},vc={padding:"10px 10px",borderBottom:"1px solid #f1f5f9"};function L2(){var Y;const r=localStorage.getItem("studentId"),e=C.useRef(!1),[i,a]=C.useState(null),[o,c]=C.useState([]),[f,m]=C.useState(0),[g,p]=C.useState({}),[b,S]=C.useState(!1),A=["","",""];C.useEffect(()=>{if(!r)return;const P=Oe(Qt(bt,"students",r),lt=>{lt.exists()&&a({id:lt.id,...lt.data()})});return()=>P()},[r]),C.useEffect(()=>{if(!r)return;const P=Oe(Ie(bt,"payments"),lt=>{const dt={};lt.docs.forEach(St=>{const j=St.data();j.studentId===r&&(dt[j.routineNumber]=j.paymentMethod)}),p(dt)});return()=>P()},[r]),C.useEffect(()=>{if(!r)return;const P=Oe(Ie(bt,"routines"),async lt=>{const dt=lt.docs.filter(U=>{const I=U.data();return I.students&&I.students[r]});if(dt.length===0){c([]);return}let St=[];dt.forEach(U=>{const I=U.data(),It=I.students[r],Ot=It.routineNumber||I.routineNumber||1,J=It.sessions||{};Object.values(J).sort((At,Ft)=>(At.session||0)-(Ft.session||0)).forEach(At=>{St.push({date:At.date,session:At.session,routineNumber:Ot})})});const j=Array.from(new Set(St.map(U=>U.date))),R=i&&i.name||null,w=await Promise.all(j.map(async U=>{const I=await tn(Qt(bt,"attendance",U));if(!I.exists())return[U,{}];const It=I.data(),Ot=It[r]||R&&It[R]||{};return[U,Ot]})),M=Object.fromEntries(w),L=St.map(U=>{var I,It;return{...U,status:((I=M[U.date])==null?void 0:I.status)||"",time:((It=M[U.date])==null?void 0:It.time)||""}});if(c(L),!e.current){e.current=!0;const U=new Date().toISOString().slice(0,10),I={};L.forEach(Ot=>{const J=Ot.routineNumber||1;I[J]||(I[J]=[]),I[J].push(Ot)}),Object.values(I).sort((Ot,J)=>Ot[0].routineNumber-J[0].routineNumber).findIndex(Ot=>Ot.some(J=>J.date===U)),m(0)}});return()=>P()},[r,i]);const O=async(P,lt)=>{p(dt=>({...dt,[lt]:P})),await Gm(Qt(bt,"payments",`${r}_routine_${lt}`),{studentId:r,routineNumber:lt,paymentMethod:P,paymentComplete:!1,updatedAt:new Date().toISOString()},{merge:!0})},N={};o.forEach(P=>{const lt=P.routineNumber||1;N[lt]||(N[lt]=[]),N[lt].push(P)});const G=Object.values(N).sort((P,lt)=>lt[0].routineNumber-P[0].routineNumber),B=G[f]||[],H=((Y=B[0])==null?void 0:Y.routineNumber)??f+1;return C.useEffect(()=>{if(!i||!H){S(!1);return}const P=`${i.name}_${H}`;(async()=>{try{const dt=await tn(Qt(bt,"payment_completed",P));if(!dt.exists()){S(!1);return}const St=dt.data();S(!!St.paymentComplete)}catch(dt){console.error("payment_completed  :",dt),S(!1)}})()},[i,H]),i?v.jsxs("div",{className:"container-wide",style:{textAlign:"center"},children:[v.jsxs("h1",{style:{fontSize:20,marginBottom:16},children:[" ",i.name,"   ",H,""]}),v.jsx("p",{style:{fontSize:18,marginBottom:16},children:b?"  .":"  .    ."}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:24},children:[v.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:"bold"},children:""}),A.map(P=>v.jsx("button",{onClick:()=>O(P,H),style:{padding:"4px 8px",background:P===""?"#4caf50":P===""?"#2196f3":"#f44336",color:"white",borderRadius:4,minWidth:80},children:P},P))]}),v.jsxs("p",{style:{fontSize:16,marginBottom:16},children:["   : ",g[H]||"",g[H]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"      "}),g[H]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:"  5  ."}),g[H]===""&&v.jsx("span",{style:{display:"block",marginTop:8,fontSize:14,color:"#555"},children:" 3333-31-6107963  * "})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24},children:[v.jsx("button",{onClick:()=>m(P=>Math.max(P-1,0)),disabled:f===0,style:{padding:"8px 16px",background:f===0?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f===0?"default":"pointer"},children:""}),v.jsx("button",{onClick:()=>m(P=>Math.min(P+1,G.length-1)),disabled:f>=G.length-1,style:{padding:"8px 16px",background:f>=G.length-1?"#ccc":"#1565c0",color:"white",border:"none",borderRadius:4,cursor:f>=G.length-1?"default":"pointer"},children:""})]}),v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:""})]})}),v.jsxs("tbody",{children:[B.map((P,lt)=>{const dt=B.slice(0,lt).reduce((R,w)=>R+(w.status==="carryover"?1:0),0),St=P.status==="carryover",j=St?"X":(P.session||lt+1)-dt;return v.jsxs("tr",{children:[v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:j}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:v.jsx("span",{style:St?{textDecoration:"line-through",color:"#999"}:{},children:P.date})}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:P.status}),v.jsx("td",{style:{border:"1px solid #ccc",padding:8,textAlign:"center"},children:P.time||"-"})]},lt)}),B.length===0&&v.jsx("tr",{children:v.jsx("td",{colSpan:4,style:{padding:16,textAlign:"center",color:"#888"},children:"  ."})})]})]})]}):v.jsx("p",{children:" "})}const k2=6,U2=10,z2=6,P2=10;function B2(r=""){return r?r.split(`
`).map(e=>e||"&nbsp;").join("<br />"):""}function q2(){const r=new Date,e=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0");return`${e}-${i}`}function H2(){const r=localStorage.getItem("parentPhone")||"",[e,i]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches),[a,o]=C.useState([]),[c,f]=C.useState(null),[m,g]=C.useState({}),[p,b]=C.useState(!0),[S,A]=C.useState([]),[O,N]=C.useState(!1),[G,B]=C.useState(!0),[H,Y]=C.useState(!1),[P,lt]=C.useState(!0),[dt,St]=C.useState(!1);C.useEffect(()=>{const st=window.matchMedia("(max-width: 640px)"),Mt=jt=>i(jt.matches);return st.addEventListener?st.addEventListener("change",Mt):st.addListener(Mt),i(st.matches),()=>{st.removeEventListener?st.removeEventListener("change",Mt):st.removeListener(Mt)}},[]),C.useEffect(()=>{(async()=>{if(r)try{const st=await tn(Qt(bt,"parents",r));if(st.exists()){const Mt=st.data()||{},jt=Mt.noticeAlertEnabled===void 0?!0:!!Mt.noticeAlertEnabled;lt(jt)}else lt(!0)}catch{lt(!0)}})()},[r]),C.useEffect(()=>{(async()=>{b(!0);try{const jt=(await fs(Ie(bt,"notices"))).docs.map(Dt=>{const kt=Dt.data()||{},$t=kt.showInParentMain===void 0?!0:!!kt.showInParentMain;return{id:Dt.id,title:(kt.title||"").toString(),date:(kt.date||"").toString(),showInParentMain:$t,mainOrder:typeof kt.mainOrder=="number"?kt.mainOrder:typeof kt.priority=="number"?kt.priority:void 0,isPinned:kt.isPinned===!0}}).filter(Dt=>Dt.showInParentMain===!0);jt.sort((Dt,kt)=>(kt.date||"").localeCompare(Dt.date||"")),o(jt)}catch(st){console.error("notices  :",st),o([])}finally{b(!1)}})(),(async()=>{B(!0);try{const Mt=(await fs(Ie(bt,"holidays"))).docs.map(jt=>({id:jt.id,...jt.data()||{}})).filter(jt=>!!jt.date);Mt.sort((jt,Dt)=>(jt.date||"").toString().localeCompare((Dt.date||"").toString())),A(Mt)}catch(st){console.error("holidays  :",st),A([])}finally{B(!1)}})()},[]);const j=C.useMemo(()=>q2(),[]),R=C.useMemo(()=>new Date().toISOString().slice(0,10),[]),{upcomingThisMonth:w,pastHolidays:M}=C.useMemo(()=>{const st=[],Mt=[];for(const Dt of S){const kt=(Dt.date||"").toString();kt&&(kt.startsWith(j)&&st.push(Dt),kt<R&&Mt.push(Dt))}return st.sort((Dt,kt)=>(Dt.date||"").toString().localeCompare((kt.date||"").toString())),Mt.sort((Dt,kt)=>(kt.date||"").toString().localeCompare((Dt.date||"").toString())),{upcomingThisMonth:e?st.slice(0,6):st.slice(0,12),pastHolidays:Mt}},[S,j,R,e]),{topNotices:L,currentNotices:U,pastNotices:I,topIdSet:It}=C.useMemo(()=>{const st=[],Mt=[],jt=[];for(const Ee of a){const Ye=typeof Ee.mainOrder=="number",Rn=(Ee.date||"").startsWith(j);Ye?st.push(Ee):Rn?Mt.push(Ee):jt.push(Ee)}st.sort((Ee,Ye)=>{const Rn=Ee.mainOrder??9999,bi=Ye.mainOrder??9999;return Rn!==bi?Rn-bi:(Ye.date||"").localeCompare(Ee.date||"")}),Mt.sort((Ee,Ye)=>(Ye.date||"").localeCompare(Ee.date||"")),jt.sort((Ee,Ye)=>(Ye.date||"").localeCompare(Ee.date||""));const Dt=e?z2:P2,kt=e?k2:U2,$t=st.slice(0,Dt),_e=new Set($t.map(Ee=>Ee.id));return{topNotices:$t,currentNotices:Mt.slice(0,kt),pastNotices:jt,topIdSet:_e}},[a,j,e]),Ot=async st=>{if(!m[st])try{const Mt=await tn(Qt(bt,"notices",st));if(Mt.exists()){const jt=Mt.data()||{},Dt=(jt.contentHtml||"").toString(),kt=(jt.contentPlain||"").toString(),$t=(jt.content||"").toString(),_e=kt||$t;let Ee=Dt;Ee||(Ee=B2(_e)),g(Ye=>({...Ye,[st]:{html:Ee,plain:_e}}))}else g(jt=>({...jt,[st]:{html:" .",plain:" ."}}))}catch(Mt){console.error("notice detail  :",Mt),g(jt=>({...jt,[st]:{html:"  .",plain:""}}))}},J=async st=>{if(c===st){f(null);return}await Ot(st),f(st)},mt=async()=>{if(!r){alert("  .  .");return}const st=!P;St(!0);try{await Gm(Qt(bt,"parents",r),{noticeAlertEnabled:st},{merge:!0}),lt(st)}catch(Mt){console.error("    :",Mt),alert(" .    .")}finally{St(!1)}},At={maxWidth:820,margin:"0 auto",padding:e?10:16},Ft={display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexDirection:e?"column":"row"},k=st=>({border:"1px solid "+(st?"#111827":"#d1d5db"),background:st?"#111827":"white",color:st?"white":"#111827",borderRadius:999,padding:"8px 12px",fontWeight:900,fontSize:12,cursor:"pointer",width:e?"100%":"auto",opacity:dt?.7:1}),at={border:"1px solid #e5e7eb",borderRadius:14,background:"#fff"},gt=st=>({padding:e?"12px 12px":"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:st?"#f8fafc":"#fff",cursor:"pointer"}),ft={padding:"6px 10px",borderRadius:999,background:"#fff",border:"1px solid #e5e7eb",fontSize:12,display:"flex",gap:6,alignItems:"center"},Rt={border:"none",background:"none",color:"#2563eb",fontSize:13,fontWeight:800,cursor:"pointer",padding:0},Ct={...at,border:"1px solid #e5e7eb",background:"linear-gradient(135deg, #fff7ed, #eff6ff)",padding:e?"10px 10px":"12px 12px",marginTop:10,marginBottom:10},X={display:"flex",alignItems:"center",gap:8,fontWeight:900,fontSize:14,marginBottom:8},vt=st=>({display:"inline-flex",alignItems:"center",gap:6,padding:"6px 10px",borderRadius:999,border:"1px solid "+(st==="must"?"#fecaca":"#bfdbfe"),background:st==="must"?"#fee2e2":"#eff6ff",color:st==="must"?"#b91c1c":"#2563eb",fontSize:12,fontWeight:900,cursor:"pointer",maxWidth:"100%"}),Et={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:e?240:520},Lt=`${j.slice(0,4)} ${j.slice(5,7)}`,Kt=st=>{const Mt=c===st.id,jt=m[st.id],Dt=typeof st.mainOrder=="number",kt=Dt&&st.mainOrder<10,$t=Dt&&st.mainOrder>=10;return v.jsxs("div",{style:gt(Mt),onClick:()=>J(st.id),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[kt&&v.jsx("span",{style:{fontSize:11,background:"#fee2e2",color:"#b91c1c",borderRadius:999,padding:"2px 8px",border:"1px solid #fecaca",fontWeight:900},children:" "}),$t&&v.jsx("span",{style:{fontSize:11,background:"#eff6ff",color:"#2563eb",borderRadius:999,padding:"2px 8px",border:"1px solid #bfdbfe",fontWeight:900},children:""})]}),v.jsx("div",{style:{marginTop:6,fontSize:15,fontWeight:900,lineHeight:1.35,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:st.title})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:6},children:[v.jsx("span",{style:{fontSize:12,color:"#9ca3af",fontWeight:800,whiteSpace:"nowrap"},children:st.date}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:Mt?"":""})]})]}),Mt&&v.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px dashed #e5e7eb",fontSize:14,lineHeight:1.65,color:"#111827",wordBreak:"break-word"},children:jt?v.jsx("div",{dangerouslySetInnerHTML:{__html:jt.html}}):v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:" ..."})})]},st.id)},qt=C.useMemo(()=>!c||!It||!It.has(c)?null:L.find(st=>st.id===c)||null,[c,It,L]);return v.jsxs("div",{style:At,children:[v.jsxs("div",{style:{...at,background:"linear-gradient(135deg, #f0f9ff, #e0f2fe)",border:"1px solid #bae6fd",padding:e?"12px 12px":"14px 16px",marginBottom:14},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[v.jsx("span",{style:{fontSize:18},children:""}),v.jsx("div",{style:{fontWeight:900,fontSize:15},children:" "}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:Lt})]}),M.length>0&&v.jsx("button",{onClick:()=>N(st=>!st),style:Rt,children:O?"   ":"   "})]}),v.jsxs("div",{style:{marginTop:10},children:[G?v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"  ..."}):w.length>0?v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:w.map(st=>v.jsxs("div",{style:ft,children:[v.jsx("span",{style:{fontWeight:900},children:(st.name||"").toString()}),v.jsx("span",{style:{color:"#dc2626",fontSize:12,fontWeight:800},children:(st.date||"").toString()})]},st.id))}):v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"   ."}),O&&M.length>0&&v.jsx("div",{style:{marginTop:10,display:"flex",flexWrap:"wrap",gap:6},children:M.slice(0,e?12:30).map(st=>v.jsxs("div",{style:{fontSize:12,padding:"5px 10px",borderRadius:999,background:"#f8fafc",border:"1px solid #e5e7eb",color:"#6b7280",fontWeight:700},children:[(st.name||"").toString(),"  ",(st.date||"").toString()]},st.id))})]})]}),v.jsxs("div",{style:Ft,children:[v.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[v.jsx("h1",{style:{fontSize:e?18:20,fontWeight:900,margin:0},children:" "}),v.jsxs("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:[Lt,"  "]})]}),v.jsx("button",{onClick:mt,disabled:dt,style:k(P),title:"  (/  ) ON/OFF",children:dt?" ...":P?"  ON":"  OFF"})]}),!p&&L.length>0&&v.jsxs("div",{style:Ct,children:[v.jsxs("div",{style:X,children:[v.jsx("span",{style:{fontSize:16},children:""}),v.jsx("span",{children:" "}),v.jsx("span",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:"( )"})]}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:L.map(st=>{const Mt=typeof st.mainOrder=="number"&&st.mainOrder<10,jt=Mt?"must":"imp";return v.jsxs("button",{style:vt(jt),onClick:async Dt=>{Dt.preventDefault(),Dt.stopPropagation(),await Ot(st.id),f(kt=>kt===st.id?null:st.id)},title:st.title,children:[v.jsx("span",{children:Mt?"":""}),v.jsx("span",{style:Et,children:st.title})]},st.id)})}),qt&&v.jsx("div",{style:{marginTop:10},children:Kt(qt)})]}),v.jsx("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:10},children:p?v.jsx("div",{style:{fontSize:13,color:"#6b7280"},children:"  ..."}):U.length===0?v.jsx("div",{style:{fontSize:13,color:"#9ca3af"},children:"   ."}):U.map(Kt)}),!p&&I.length>0&&v.jsxs("div",{style:{marginTop:14},children:[v.jsx("button",{onClick:()=>Y(st=>!st),style:Rt,children:H?"   ":`    (${I.length})`}),H&&v.jsxs("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:8},children:[I.slice(0,e?15:30).map(Kt),v.jsxs("div",{style:{fontSize:12,color:"#9ca3af",marginTop:2},children:["    ",e?"15":"30"," ."]})]})]})]})}function G2(){console.log("  !");const[r,e]=C.useState([]),[i,a]=C.useState(""),o=localStorage.getItem("studentId");C.useEffect(()=>{const m=Ie(bt,"books");return Oe(m,g=>{const b=g.docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.studentId===o);e(b)})},[o]);const c=C.useMemo(()=>i?[...r].sort((g,p)=>i==="grade"?g.grade-p.grade:i==="title"?g.title.localeCompare(p.title):i==="completedDate"?g.completedDate.localeCompare(p.completedDate):0):r,[r,i]),f=()=>{const m=["","",""," ",""],g=c.map((O,N)=>[N+1,O.name,O.grade,O.title,O.completedDate]);let p=m.join(",")+`
`;g.forEach(O=>{p+=O.join(",")+`
`});const b=new Blob([p],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(b),A=document.createElement("a");A.href=S,A.download=`_${new Date().toISOString().slice(0,10)}.csv`,A.click(),URL.revokeObjectURL(S)};return v.jsxs("div",{className:"container",children:[v.jsxs("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:["   ( : ",r.length,")"]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[v.jsx("button",{onClick:f,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:()=>a("grade"),style:{padding:"8px 12px",marginLeft:"4px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:()=>a("title"),style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:()=>a("completedDate"),style:{padding:"8px 12px",backgroundColor:"#ffc107",color:"#000",border:"none",borderRadius:"4px",cursor:"pointer"},children:" "})]}),v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:" "}),v.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:""})]})}),v.jsx("tbody",{children:c.length>0?c.map((m,g)=>v.jsxs("tr",{children:[v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:g+1}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.name}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.grade}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.title}),v.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m.completedDate})]},m.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:"5",style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"  ."})})})]})]})}function F2(){const[r,e]=C.useState([]),[i,a]=C.useState([]),[o,c]=C.useState({}),[f,m]=C.useState(null),[g,p]=C.useState(""),b=localStorage.getItem("studentId");C.useEffect(()=>{if(!b)return;const N=Ie(bt,"comments");return Oe(N,G=>{const H=G.docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>Y.studentId===b);e(H.sort((Y,P)=>(P.createdAt||"").localeCompare(Y.createdAt||"")))})},[b]),C.useEffect(()=>{if(!b)return;const N=Ie(bt,"answer");return Oe(N,G=>{const H=G.docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>Y.studentId===b);a(H.sort((Y,P)=>(P.createdAt||"").localeCompare(Y.createdAt||"")))})},[b]);const S=async N=>{var Y;const G=(Y=o[N])==null?void 0:Y.trim();if(!G)return alert(" !");if(!b)return alert("  .    .");const B=await tn(Qt(bt,"students",b)),H=B.exists()?B.data().name:"";await C2(Ie(bt,"answer"),{studentId:b,studentName:H,comment:G,date:new Date().toISOString().slice(0,10),createdAt:new Date().toISOString(),parentId:N}),c(P=>({...P,[N]:""})),alert(" !")},A=async N=>{window.confirm("   ?")&&await R2(Qt(bt,"answer",N))},O=async N=>{if(!g.trim())return alert("  !");await M1(Qt(bt,"answer",N),{comment:g}),m(null),p("")};return v.jsxs("div",{className:"container",style:{textAlign:"center",marginTop:"40px"},children:[v.jsx("h2",{style:{fontSize:"20px",marginBottom:"16px"},children:"  "}),v.jsx("h3",{style:{fontSize:"15px",marginBottom:"16px"},children:"**    ! **"}),v.jsxs("ul",{style:{listStyle:"none",padding:0,textAlign:"left"},children:[r.filter(N=>{var G;return!((G=N.comment)!=null&&G.startsWith(":"))}).map(N=>{var B;const G=i.filter(H=>H.parentId===N.id);return v.jsxs("li",{style:{marginBottom:16,borderBottom:"1px solid #eee",paddingBottom:8},children:[v.jsxs("div",{children:[N.comment," ",v.jsxs("span",{style:{color:"#888",fontSize:"12px"},children:["(",N.date,")"]})]}),v.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:[": ",(B=N.createdAt)==null?void 0:B.slice(0,19).replace("T"," ")]}),G.map(H=>v.jsx("div",{style:{marginTop:4,marginLeft:10,background:"#f8f8f8",padding:"4px 8px",borderRadius:4},children:f===H.id?v.jsxs(v.Fragment,{children:[v.jsx("input",{value:g,onChange:Y=>p(Y.target.value),style:{width:"60%",padding:4}}),v.jsx("button",{onClick:()=>O(H.id),style:{marginLeft:8},children:""}),v.jsx("button",{onClick:()=>m(null),style:{marginLeft:4},children:""})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{fontSize:"13px",color:"#333"},children:[" ",H.comment]}),v.jsxs("div",{style:{marginTop:4},children:[v.jsx("button",{onClick:()=>{m(H.id),p(H.comment||"")},style:{marginRight:6},children:""}),v.jsx("button",{onClick:()=>A(H.id),children:""})]})]})},H.id)),v.jsxs("div",{style:{marginTop:8},children:[v.jsx("input",{placeholder:" ",value:o[N.id]||"",onChange:H=>c(Y=>({...Y,[N.id]:H.target.value})),style:{width:"70%",padding:4}}),v.jsx("button",{onClick:()=>S(N.id),style:{marginLeft:8,padding:"4px 12px"},children:""})]})]},N.id)}),r.filter(N=>{var G;return!((G=N.comment)!=null&&G.startsWith(":"))}).length===0&&v.jsx("li",{style:{color:"#888"},children:"  ."})]})]})}function Q2(){const[r,e]=C.useState("comments"),i=localStorage.getItem("parentPhone")||"",[a,o]=C.useState(localStorage.getItem("studentId")||""),[c,f]=C.useState((localStorage.getItem("studentName")||"").trim()),[m,g]=C.useState([]),[p,b]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const Y=window.matchMedia("(max-width: 640px)"),P=lt=>b(lt.matches);return Y.addEventListener?Y.addEventListener("change",P):Y.addListener(P),b(Y.matches),()=>{Y.removeEventListener?Y.removeEventListener("change",P):Y.removeListener(P)}},[]),C.useEffect(()=>{const Y=()=>{o(localStorage.getItem("studentId")||""),f((localStorage.getItem("studentName")||"").trim())};window.addEventListener("storage",Y),window.addEventListener("hashchange",Y);const P=setInterval(Y,800);return()=>{window.removeEventListener("storage",Y),window.removeEventListener("hashchange",Y),clearInterval(P)}},[]),C.useEffect(()=>{(async()=>{var Y,P;if(i)try{const lt=await tn(Qt(bt,"parents",i));if(!lt.exists()){g([]);return}const dt=((Y=lt.data())==null?void 0:Y.children)||[],St=[];for(const j of dt)try{const R=await tn(Qt(bt,"students",j)),w=R.exists()?(((P=R.data())==null?void 0:P.name)||"").toString().trim():"";St.push({id:j,name:w||""})}catch{St.push({id:j,name:""})}St.sort((j,R)=>(j.name||"").localeCompare(R.name||"")),g(St)}catch(lt){console.error("children  :",lt),g([])}})()},[i]);const S=async Y=>{var dt;if(!Y)return;const P=m.find(St=>St.id===Y);let lt=((P==null?void 0:P.name)||"").trim();if(!lt)try{const St=await tn(Qt(bt,"students",Y));St.exists()&&(lt=(((dt=St.data())==null?void 0:dt.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",Y),lt&&localStorage.setItem("studentName",lt),o(Y),f(lt)},A=C.useMemo(()=>({maxWidth:980,margin:"0 auto",padding:p?10:16}),[p]),O={border:"1px solid #e5e7eb",borderRadius:14,background:"white",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},N=Y=>({padding:p?"10px 12px":"10px 14px",borderRadius:12,border:"1px solid "+(Y?"#2563eb":"#e5e7eb"),background:Y?"#2563eb":"#f9fafb",color:Y?"white":"#111827",cursor:"pointer",fontWeight:900,fontSize:14,width:p?"calc(50% - 4px)":"auto"}),G={fontSize:12,color:"#6b7280",fontWeight:800,whiteSpace:"nowrap"},B={padding:p?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",width:p?"100%":220,minWidth:p?"auto":180},H={padding:p?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer",fontWeight:900,width:p?"100%":"auto"};return v.jsxs("div",{style:A,children:[v.jsxs("div",{style:{...O,padding:p?12:14,marginBottom:12},children:[v.jsxs("div",{style:{display:"flex",gap:10,alignItems:p?"stretch":"center",justifyContent:"space-between",flexWrap:"wrap",flexDirection:p?"column":"row"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:p?18:22,fontWeight:900},children:"    "}),v.jsx("div",{style:{fontSize:13,color:"#6b7280",marginTop:4},children:c?` : ${c}`:"  ."})]}),m.length>0&&v.jsxs("div",{style:{display:"flex",gap:8,alignItems:p?"stretch":"center",flexDirection:p?"column":"row",width:p?"100%":"auto"},children:[v.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:v.jsx("span",{style:G,children:" "})}),v.jsx("select",{value:a,onChange:Y=>S(Y.target.value),style:B,children:m.map(Y=>v.jsx("option",{value:Y.id,children:Y.name},Y.id))}),v.jsx("button",{onClick:()=>window.location.hash="#/select-child",style:H,children:" "})]})]}),v.jsxs("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap",width:"100%"},children:[v.jsx("button",{onClick:()=>e("comments"),style:N(r==="comments"),children:" "}),v.jsx("button",{onClick:()=>e("books"),style:N(r==="books"),children:" "})]})]}),v.jsxs("div",{style:{...O,padding:p?12:14},children:[r==="comments"&&v.jsx(F2,{},`comments_${a}`),r==="books"&&v.jsx(G2,{},`books_${a}`)]})]})}function $2(){const[r,e]=C.useState("intensive"),[i,a]=C.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 640px)").matches);C.useEffect(()=>{const D=window.matchMedia("(max-width: 640px)"),Z=et=>a(et.matches);return D.addEventListener?D.addEventListener("change",Z):D.addListener(Z),a(D.matches),()=>{D.removeEventListener?D.removeEventListener("change",Z):D.removeListener(Z)}},[]);const o=localStorage.getItem("parentPhone")||"",[c,f]=C.useState([]),[m,g]=C.useState(localStorage.getItem("studentId")||""),[p,b]=C.useState((localStorage.getItem("studentName")||"").trim()),[S,A]=C.useState([]),[O,N]=C.useState({}),[G,B]=C.useState({}),[H,Y]=C.useState([]),[P,lt]=C.useState(null),[dt,St]=C.useState({isOpen:!0,reserveOnly:!1}),j=["","","","",""],R=[{id:"A",label:"A (5 ~ 7)",timeRange:"5 ~ 7"},{id:"B",label:"B (7 ~ 9)",timeRange:"7 ~ 9"}],w=5,[M,L]=C.useState(null),[U,I]=C.useState({}),[It,Ot]=C.useState(null),[J,mt]=C.useState(""),[At,Ft]=C.useState(null),[k,at]=C.useState({}),gt=["","",""],ft=["3","4","5"],Rt=8,[Ct,X]=C.useState([]),[vt,Et]=C.useState([]),[Lt,Kt]=C.useState({}),[qt,st]=C.useState(null),Mt=["","","",""],jt=6,[Dt,kt]=C.useState([]),[$t,_e]=C.useState([]),[Ee,Ye]=C.useState({}),[Rn,bi]=C.useState(null),[er,Xn]=C.useState(!1),[nr,be]=C.useState(!1),[ce,Cn]=C.useState(0),[cn,ir]=C.useState(null),gl=C.useMemo(()=>({elementary:{:["230"],:["3","4"],:["2","3","4"],:["3","4"],:["3","4"]},middle:{:["330","5","630"],:["5","630"],:["5","630"],:["5","630"],:["5","630"]}}),[]),rr={intensive:"(261)",elementary:"(263)",middle:"(263)",high:"(263)",advanced:"(263)"},Zn=r==="elementary"||r==="middle"?gl[r]:null,In=(D,Z)=>`${D}|${Z}`,Ke=(D,Z,et)=>D.some(rt=>rt.day===Z&&rt.time===et),sr=(D,Z)=>`${D}|${Z}`,Jn=D=>{if(!D)return"";const Z=String(D).match(/^(\d+)30$/);if(Z)return`${Z[1]}:30`;const et=String(D).match(/^(\d+)30$/);return et?`${et[1]}:30`:String(D)},Vr=D=>D>=6?{text:"",tone:"danger"}:D>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},Or=D=>D>=8?{text:"",tone:"danger"}:D>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},bs=D=>D>=6?{text:"",tone:"danger"}:D>=4?{text:"",tone:"warn"}:{text:"",tone:"ok"},ti=D=>D==="danger"?"#ef4444":D==="warn"?"#f59e0b":"#22c55e",hn=({text:D,tone:Z})=>v.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,fontWeight:900,color:"#111827",whiteSpace:"nowrap"},children:[v.jsx("span",{style:{width:8,height:8,borderRadius:999,background:ti(Z),display:"inline-block"}}),D]}),jr=({tone:D})=>v.jsx("span",{style:{width:8,height:8,borderRadius:999,background:ti(D),display:"inline-block",flex:"0 0 auto"}}),ei={padding:i?10:16,maxWidth:980,margin:"0 auto"},Si={border:"1px solid #e5e7eb",borderRadius:14,background:"#fff",boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},On=(D,Z=!1)=>({padding:i?"10px 8px":"11px 12px",borderRadius:i?12:14,border:`1px solid ${D?"#2563eb":"#e5e7eb"}`,background:D?"#eef5ff":"#fff",fontWeight:900,cursor:Z?"not-allowed":"pointer",opacity:Z?.55:1,textAlign:"left",width:"100%",transition:"transform 0.06s ease"}),Lr={padding:i?"12px 12px":"10px 12px",borderRadius:12,border:"1px solid #d1d5db",background:"white",fontWeight:900,cursor:"pointer",width:i?"100%":"auto",minWidth:i?"auto":180},Oi={display:"flex",gap:8,marginBottom:12,overflowX:i?"auto":"visible",WebkitOverflowScrolling:"touch",paddingBottom:i?4:0},ua=D=>({padding:i?"9px 12px":"10px 14px",borderRadius:12,border:`1px solid ${D?"#2563eb":"#e5e7eb"}`,background:D?"#2563eb":"#fff",color:D?"#fff":"#111827",fontWeight:900,cursor:"pointer",whiteSpace:"nowrap",flex:"0 0 auto"});C.useEffect(()=>{(async()=>{var D,Z;if(o)try{const et=await tn(Qt(bt,"parents",o));if(!et.exists()){f([]);return}const rt=((D=et.data())==null?void 0:D.children)||[],ht=[];for(const pt of rt)try{const _t=await tn(Qt(bt,"students",pt)),ne=_t.exists()?(((Z=_t.data())==null?void 0:Z.name)||"").toString().trim():"";ht.push({id:pt,name:ne||""})}catch{ht.push({id:pt,name:""})}if(ht.sort((pt,_t)=>(pt.name||"").localeCompare(_t.name||"")),f(ht),!m&&ht.length){const pt=ht[0];localStorage.setItem("studentId",pt.id),localStorage.setItem("studentName",pt.name),g(pt.id),b(pt.name)}}catch(et){console.error("childList  :",et),f([])}})()},[o]);const xe=async D=>{var rt;if(!D)return;const Z=c.find(ht=>ht.id===D);let et=((Z==null?void 0:Z.name)||"").trim();if(!et)try{const ht=await tn(Qt(bt,"students",D));ht.exists()&&(et=(((rt=ht.data())==null?void 0:rt.name)||"").toString().trim())}catch{}localStorage.setItem("studentId",D),et&&localStorage.setItem("studentName",et),g(D),b(et),A([]),Y([]),lt(null),L(null),Ot(null),mt(""),Ft(null),X([]),Et([]),st(null),kt([]),_e([]),bi(null),Xn(!1),be(!1),ir(null)};C.useEffect(()=>{const D=Qt(bt,"settings","enrollments"),Z=Oe(D,et=>{if(!et.exists())return;const rt=et.data()||{};St({isOpen:rt.isOpen!==void 0&&rt.isOpen!==null?!!rt.isOpen:!0,reserveOnly:rt.reserveOnly!==void 0&&rt.reserveOnly!==null?!!rt.reserveOnly:!1})},et=>console.error("   :",et));return()=>Z()},[]),C.useEffect(()=>{if(r!=="elementary"&&r!=="middle"){N({}),B({});return}const D=ea(Ie(bt,"enrollments"),na("group","==",r)),Z=Oe(D,et=>{const rt={},ht={};et.forEach(pt=>{const _t=pt.data(),ne=`${_t.day}|${_t.time}`;if(_t.status==="reserve")ht[ne]=(ht[ne]||0)+1;else{if(_t.status==="waitlist")return;rt[ne]=(rt[ne]||0)+1}}),N(rt),B(ht)});return()=>Z()},[r]),C.useEffect(()=>{if(!p.trim()){Y([]),A([]),lt(null);return}const D=Qt(bt,"enrollments_by_student",p.trim()),Z=Oe(D,et=>{var rt,ht;if(et.exists()){const pt=et.data(),_t=Array.isArray(pt.applied)?pt.applied:[];Y(_t),lt(((ht=(rt=pt.updatedAt)==null?void 0:rt.toDate)==null?void 0:ht.call(rt))||null),A(_t.map(({day:ne,time:Se,status:we})=>({day:ne,time:Se,status:we})))}else Y([]),A([]),lt(null)});return()=>Z()},[p]),C.useEffect(()=>{if(!m){Ot(null),L(null);return}const D=Qt(bt,"middle_clinic_days",m),Z=Oe(D,et=>{if(!et.exists()){Ot(null),L(null);return}const rt=et.data()||{};Ot(rt),L(rt.regular||null)});return()=>Z()},[m]),C.useEffect(()=>{const D=Ie(bt,"middle_clinic_days"),Z=Oe(D,et=>{const rt={};et.forEach(ht=>{const pt=ht.data()||{};if(pt.regular&&pt.regular.day&&pt.regular.blockId){const _t=sr(pt.regular.day,pt.regular.blockId);rt[_t]=(rt[_t]||0)+1}}),I(rt)});return()=>Z()},[]);const Le=(D,Z,et=!1)=>{const rt=sr(D,Z);let ht=U[rt]||0;return et&&(It!=null&&It.regular)&&It.regular.day===D&&It.regular.blockId===Z&&(ht-=1),ht>=w};C.useEffect(()=>{if(!m){Ft(null),mt("");return}const D=Qt(bt,"operation_by_student",m),Z=Oe(D,et=>{if(et.exists()){const rt=et.data()||{};Ft(rt),mt(rt.time||"")}else Ft(null),mt("")});return()=>Z()},[m]),C.useEffect(()=>{const D=Ie(bt,"operation_enrollments"),Z=Oe(D,et=>{const rt={};et.forEach(ht=>{const _t=(ht.data()||{}).time;_t&&(rt[_t]=(rt[_t]||0)+1)}),at(rt)});return()=>Z()},[]),C.useEffect(()=>{if(!m){Et([]),X([]),st(null);return}const D=Qt(bt,"intensive_by_student",m),Z=Oe(D,et=>{var pt,_t;if(!et.exists()){Et([]),X([]),st(null);return}const rt=et.data()||{},ht=Array.isArray(rt.applied)?rt.applied:[];Et(ht),X(ht),st(((_t=(pt=rt.updatedAt)==null?void 0:pt.toDate)==null?void 0:_t.call(pt))||null)});return()=>Z()},[m]),C.useEffect(()=>{const D=Ie(bt,"intensive_enrollments"),Z=Oe(D,et=>{const rt={};et.forEach(ht=>{const pt=ht.data()||{};if(!pt.day||!pt.time)return;const _t=In(pt.day,pt.time);rt[_t]=(rt[_t]||0)+1}),Kt(rt)});return()=>Z()},[]);const Ne=(D,Z)=>{if(Ke(Ct,D,Z)){X(Ct.filter(ht=>!(ht.day===D&&ht.time===Z)));return}const rt=Ct.findIndex(ht=>ht.day===D);if(rt!==-1){const ht=[...Ct];ht[rt]={day:D,time:Z},X(ht);return}if(Ct.length>=3){alert("  3   .");return}X([...Ct,{day:D,time:Z}])},jn=async()=>{if(!m||!p.trim()){alert("   .     .");return}if(Ct.length<1||Ct.length>3){alert(" 1 ~ 3  .");return}for(const{day:ht,time:pt}of Ct){const _t=In(ht,pt),ne=Lt[_t]||0;if((vt.some(En=>En.day===ht&&En.time===pt)?ne-1:ne)>=Rt){alert(`${ht} ${pt}  .`);return}}const D=Ya(bt),Z=Qt(bt,"intensive_by_student",m);D.set(Z,{studentId:m,studentName:p.trim(),applied:Ct.map(ht=>({day:ht.day,time:ht.time})),updatedAt:vi()},{merge:!0});const et=ea(Ie(bt,"intensive_enrollments"),na("studentId","==",m));(await fs(et)).forEach(ht=>D.delete(ht.ref)),Ct.forEach(({day:ht,time:pt})=>{const _t=`${m}|${ht}|${pt}`,ne=Qt(bt,"intensive_enrollments",_t);D.set(ne,{studentId:m,studentName:p.trim(),day:ht,time:pt,createdAt:vi()})}),await D.commit(),alert("  .")};C.useEffect(()=>{if(!m){_e([]),kt([]),bi(null);return}const D=Qt(bt,"high_by_student",m),Z=Oe(D,et=>{var pt,_t;if(!et.exists()){_e([]),kt([]),bi(null);return}const rt=et.data()||{},ht=Array.isArray(rt.days)?rt.days:[];_e(ht),kt(ht),bi(((_t=(pt=rt.updatedAt)==null?void 0:pt.toDate)==null?void 0:_t.call(pt))||null)});return()=>Z()},[m]),C.useEffect(()=>{const D=Ie(bt,"high_enrollments"),Z=Oe(D,et=>{const rt={};et.forEach(ht=>{const _t=(ht.data()||{}).day;_t&&(rt[_t]=(rt[_t]||0)+1)}),Ye(rt)});return()=>Z()},[]);const Ss=D=>{if(Dt.includes(D)){kt(Dt.filter(Z=>Z!==D));return}if(Dt.length>=4){alert("  4    .");return}kt([...Dt,D])},yl=async()=>{if(!m||!p.trim()){alert("   .     .");return}for(const ht of Dt){const pt=Ee[ht]||0;if(($t.includes(ht)?pt-1:pt)>=jt){alert(`${ht} .`);return}}const D=Ya(bt),Z=Qt(bt,"high_by_student",m);D.set(Z,{studentId:m,studentName:p.trim(),days:Dt,updatedAt:vi()},{merge:!0});const et=ea(Ie(bt,"high_enrollments"),na("studentId","==",m));(await fs(et)).forEach(ht=>D.delete(ht.ref)),Dt.forEach(ht=>{const pt=`${m}|${ht}`,_t=Qt(bt,"high_enrollments",pt);D.set(_t,{studentId:m,studentName:p.trim(),day:ht,createdAt:vi()})}),await D.commit(),alert("  .")};C.useEffect(()=>{if(!m){be(!1),Xn(!1),ir(null);return}const D=Qt(bt,"advanced_by_student",m),Z=Oe(D,et=>{var pt,_t;if(!et.exists()){be(!1),Xn(!1),ir(null);return}const rt=et.data()||{},ht=!!rt.applied;be(ht),Xn(ht),ir(((_t=(pt=rt.updatedAt)==null?void 0:pt.toDate)==null?void 0:_t.call(pt))||null)});return()=>Z()},[m]),C.useEffect(()=>{const D=Ie(bt,"advanced_enrollments"),Z=Oe(D,et=>{Cn(et.size||0)});return()=>Z()},[]);const Ti=async D=>{if(!m||!p.trim()){alert("   .     .");return}const Z=Ya(bt),et=Qt(bt,"advanced_by_student",m);Z.set(et,{studentId:m,studentName:p.trim(),applied:!!D,updatedAt:vi()},{merge:!0});const rt=`${m}`,ht=Qt(bt,"advanced_enrollments",rt);D?Z.set(ht,{studentId:m,studentName:p.trim(),createdAt:vi()}):Z.delete(ht),await Z.commit(),alert(D?"  .":"  .")},Ts=(D,Z)=>{if(Ke(S,D,Z)){A(S.filter(rt=>!(rt.day===D&&rt.time===Z)));return}const et=S.findIndex(rt=>rt.day===D);if(et!==-1){const rt=[...S];rt[et]={day:D,time:Z},A(rt);return}if(S.length>=2){alert("    2   .");return}A([...S,{day:D,time:Z}])},ji=(D,Z)=>{if(Ke(S,D,Z)){A(S.filter(rt=>!(rt.day===D&&rt.time===Z)));return}const et=S.findIndex(rt=>rt.day===D);if(et!==-1){const rt=[...S];rt[et]={day:D,time:Z},A(rt);return}if(S.length>=2){alert("    2   .");return}A([...S,{day:D,time:Z}])},Li=(D,Z)=>A(S.filter(et=>!(et.day===D&&et.time===Z))),xi=D=>{L(Z=>({day:D,blockId:(Z==null?void 0:Z.blockId)||"A"}))},ni=D=>{if(!(M!=null&&M.day)){alert("   .");return}L(Z=>({...Z||{day:j[0]},blockId:D}))},ii=async()=>{if(!m||!p.trim()){alert("   .     .");return}if(!M||!M.day||!M.blockId){alert("  (A/B)  .");return}const{day:D,blockId:Z}=M;if(Le(D,Z,!0)){alert(" /   .");return}const et=Ya(bt),rt=Qt(bt,"middle_clinic_days",m);et.set(rt,{studentId:m,studentName:p.trim(),regular:{day:D,blockId:Z},extra:null,updatedAt:vi()},{merge:!0}),await et.commit(),alert("  .")},fn=async()=>{if(!m||!confirm("  ?"))return;const D=Ya(bt);D.delete(Qt(bt,"middle_clinic_days",m)),await D.commit(),alert(" .")},Me=async()=>{if(r!=="elementary"&&r!=="middle")return;if(!dt.isOpen){alert("  .");return}if(!p.trim()){alert("   .     .");return}if(S.length===0){alert("  .");return}if(S.length>2){alert("   2   .");return}let D=[...S],Z=!1,et="";const rt=[];if(S.forEach(({day:Se,time:we})=>{const En=In(Se,we),Ai=O[En]||0,qe=G[En]||0;let si;if(dt.reserveOnly){if(qe>=10){Z=!0,et+=`${Se} ${we}     .
`;return}si="reserve"}else if(Ai<6)si="applied";else if(qe<10)si="reserve";else{Z=!0,et+=`${Se} ${we}      .
`;return}rt.push({day:Se,time:we,status:si})}),Z){alert(et||"    .   .");return}D=rt;const ht=Ya(bt),pt=Qt(bt,"enrollments_by_student",p.trim());ht.set(pt,{studentName:p.trim(),applied:D.map(({day:Se,time:we,status:En})=>({day:Se,time:we,group:r,status:En==="reserve"?"reserve":"applied",label:En==="reserve"?"()":""})),waitlist:[],updatedAt:vi()});const _t=ea(Ie(bt,"enrollments"),na("studentName","==",p.trim()));(await fs(_t)).forEach(Se=>ht.delete(Se.ref)),D.forEach(({day:Se,time:we,status:En})=>{const Ai=En==="reserve"?"reserve":"applied",qe=`${p.trim()}|${r}|${Se}|${we}|${Ai}`,si=Qt(bt,"enrollments",qe);ht.set(si,{studentName:p.trim(),group:r,day:Se,time:we,status:Ai,createdAt:vi()})}),await ht.commit(),A(D),alert(".")},xs=(()=>{var rt,ht;const D=[];if(vt!=null&&vt.length){const pt=vt.map(_t=>`${_t.day} ${_t.time}`).join(", ");D.push(` : ${pt} ()`)}const Z=H.filter(pt=>pt.group==="elementary"),et=H.filter(pt=>pt.group==="middle");if(Z.length){const pt=Z.map(_t=>`${_t.day} ${_t.time}${_t.status==="reserve"?" ()":" ()"}`).join(", ");D.push(` : ${pt}`)}if(et.length){const pt=et.map(_t=>`${_t.day} ${_t.time}${_t.status==="reserve"?" ()":" ()"}`).join(", ");D.push(` : ${pt}`)}if((rt=It==null?void 0:It.regular)!=null&&rt.day&&((ht=It==null?void 0:It.regular)!=null&&ht.blockId)){const pt=It.regular.blockId==="A"?"A(5~7)":"B(7~9)";D.push(` : ${It.regular.day} ${pt} ()`)}return $t!=null&&$t.length&&D.push(` : ${$t.join(", ")} ()`),nr&&D.push(" :  "),D.length||D.push("    ."),D})(),kr=["intensive","elementary","middle","high","advanced"],Ln=({day:D,children:Z})=>v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:10,background:"#fff"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:8,fontSize:13},children:D}),Z]}),ri=({children:D})=>v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:D}),As=dt.isOpen?dt.reserveOnly?{text:" (/)",tone:"warn"}:{text:"(/)",tone:"ok"}:{text:" (/)",tone:"danger"},ws=({timeText:D,tone:Z})=>v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15,lineHeight:1,whiteSpace:"nowrap",letterSpacing:-.2},children:D}),v.jsx(jr,{tone:Z})]});return v.jsxs("div",{style:ei,children:[v.jsxs("div",{style:{...Si,padding:i?12:14,marginBottom:12},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:i?"stretch":"center",gap:10,flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsx("div",{style:{fontSize:i?18:20,fontWeight:900},children:""}),v.jsx("div",{style:{marginTop:6,fontSize:13,color:"#374151",lineHeight:1.65},children:xs.map((D,Z)=>v.jsx("div",{style:{whiteSpace:"pre-wrap"},children:D},Z))})]}),c.length>0&&v.jsxs("div",{style:{width:i?"100%":"auto"},children:[v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900,marginBottom:6},children:" "}),v.jsx("select",{value:m,onChange:D=>xe(D.target.value),style:Lr,children:c.map(D=>v.jsx("option",{value:D.id,children:D.name},D.id))})]})]}),v.jsxs("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",alignItems:"center",gap:10,flexWrap:"wrap"},children:[v.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap",fontSize:12},children:[v.jsx(hn,{text:"",tone:"ok"}),v.jsx(hn,{text:"",tone:"warn"}),v.jsx(hn,{text:"",tone:"danger"})]}),v.jsx("div",{style:{border:"1px solid #e5e7eb",background:"#fff",borderRadius:999,padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.04)"},children:v.jsx(hn,{text:As.text,tone:As.tone})})]})]}),v.jsx("div",{style:Oi,children:kr.map(D=>{const Z=r===D;return v.jsx("button",{onClick:()=>e(D),style:ua(Z),children:rr[D]},D)})}),r==="intensive"?v.jsxs("div",{style:{...Si,padding:i?12:14},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(261)"}),v.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[" 9  ",v.jsx("b",{children:"1 ~ 3"}),"  /    "]})]}),!i&&v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:qt?`: ${qt.toLocaleString()}`:""})]}),i?v.jsx("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:10},children:gt.map(D=>v.jsx(Ln,{day:`${D}`,children:v.jsx(ri,{children:ft.map(Z=>{const et=In(D,Z),rt=Lt[et]||0,ht=Or(rt),pt=Ke(Ct,D,Z),_t=rt>=Rt&&!vt.some(ne=>ne.day===D&&ne.time===Z);return v.jsx("button",{onClick:()=>{if(_t)return alert("  .");Ne(D,Z)},disabled:_t,style:On(pt,_t),children:v.jsx(ws,{timeText:Jn(Z),tone:ht.tone})},`${D}-${Z}`)})})},D))}):v.jsx("div",{style:{marginTop:14,overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),v.jsx("tbody",{children:gt.map(D=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:D}),v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:ft.map(Z=>{const et=In(D,Z),rt=Lt[et]||0,ht=Or(rt),pt=Ke(Ct,D,Z),_t=rt>=Rt&&!vt.some(ne=>ne.day===D&&ne.time===Z);return v.jsx("button",{onClick:()=>{if(_t)return alert("  .");Ne(D,Z)},disabled:_t,style:{...On(pt,_t),minWidth:190},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:16},children:Z}),v.jsx(hn,{text:ht.text,tone:ht.tone})]})},`${D}-${Z}`)})})})]},D))})]})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{fontWeight:900},children:[" :"," ",Ct.length?v.jsxs("span",{children:[Ct.map(D=>`${D.day} ${D.time}`).join(", ")," ",v.jsxs("span",{style:{color:"#6b7280",fontWeight:900},children:["(",Ct.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:jn,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),i&&qt&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[": ",qt.toLocaleString()]})]})]}):null,r==="high"?v.jsxs("div",{style:{...Si,padding:i?12:14},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:"///   ( 4)"}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:i?"repeat(2, 1fr)":"repeat(4, minmax(160px, 1fr))",gap:10},children:Mt.map(D=>{const Z=Ee[D]||0,et=bs(Z),rt=Z>=jt&&!$t.includes(D),ht=Dt.includes(D);return v.jsx("button",{onClick:()=>{if(rt)return alert(`${D} .`);Ss(D)},disabled:rt,style:On(ht,rt),children:i?v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsxs("div",{style:{fontWeight:900,fontSize:15,whiteSpace:"nowrap"},children:[D,""]}),v.jsx(jr,{tone:et.tone})]}):v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[v.jsxs("div",{style:{fontWeight:900,fontSize:18},children:[D,""]}),v.jsx(hn,{text:et.text,tone:et.tone})]})},D)})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{fontWeight:900},children:[":"," ",Dt.length?v.jsxs("span",{children:[Dt.join(", ")," ",v.jsxs("span",{style:{color:"#6b7280"},children:["(",Dt.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:yl,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),Rn&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:900},children:[": ",Rn.toLocaleString()]})]})]}):null,r==="advanced"?v.jsxs("div",{style:{...Si,padding:i?12:14},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900,marginBottom:6},children:"(263)"}),v.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:12},children:" /   ."}),v.jsxs("div",{style:{display:"flex",gap:10,alignItems:"stretch",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsx("button",{onClick:()=>{Xn(!0),Ti(!0)},style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:er?"#2563eb":"#fff",color:er?"#fff":"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""}),v.jsx("button",{onClick:()=>{Xn(!1),Ti(!1)},style:{padding:"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""}),v.jsx("span",{style:{fontSize:12,fontWeight:900,color:nr?"#166534":"#6b7280",background:nr?"#dcfce7":"#f3f4f6",border:"1px solid #e5e7eb",padding:"10px 12px",borderRadius:12,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:nr?" : ":" : "})]})]}):null,r==="elementary"||r==="middle"?v.jsxs("div",{style:{...Si,padding:i?12:14},children:[i?v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:Zn&&Object.entries(Zn).map(([D,Z])=>v.jsx(Ln,{day:`${D}`,children:v.jsx(ri,{children:Z.map(et=>{const rt=In(D,et),ht=O[rt]||0,pt=Vr(ht),_t=Ke(S,D,et),ne=ht>=6,Se=(G[rt]||0)>=10,we=dt.isOpen?(dt.reserveOnly||ne)&&Se:!0;return v.jsx("button",{onClick:()=>{if(!dt.isOpen)return alert("  .");r==="elementary"?Ts(D,et):ji(D,et)},disabled:we,style:On(_t,we),children:v.jsx(ws,{timeText:Jn(et),tone:pt.tone})},`${D}-${et}`)})})},D))}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:560,border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{background:"#f8fafc"},children:[v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900,width:90},children:""}),v.jsx("th",{style:{textAlign:"left",padding:"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:900},children:" ()"})]})}),v.jsx("tbody",{children:Zn&&Object.entries(Zn).map(([D,Z])=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9",fontWeight:900,whiteSpace:"nowrap"},children:D}),v.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #f1f5f9"},children:v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:Z.map(et=>{const rt=In(D,et),ht=O[rt]||0,pt=Vr(ht),_t=Ke(S,D,et),ne=ht>=6,Se=(G[rt]||0)>=10,we=dt.isOpen?(dt.reserveOnly||ne)&&Se:!0;return v.jsx("button",{onClick:()=>{if(!dt.isOpen)return alert("  .");r==="elementary"?Ts(D,et):ji(D,et)},disabled:we,style:{...On(_t,we),minWidth:180},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900},children:et}),v.jsx(hn,{text:pt.text,tone:pt.tone})]})},`${D}-${et}`)})})})]},D))})]})}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:i?"stretch":"center",flexWrap:"wrap",flexDirection:i?"column":"row"},children:[v.jsxs("div",{style:{color:"#374151",fontWeight:900},children:[":"," ",S.length?v.jsxs("span",{children:[S.map(D=>`${D.day} ${D.time}`).join(", ")," ",v.jsxs("span",{style:{color:"#6b7280"},children:["(",S.length,")"]})]}):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),v.jsx("button",{onClick:Me,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:""})]}),v.jsxs("div",{style:{marginTop:14},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:8},children:" ( 2)"}),S.length===0?v.jsx("div",{style:{color:"#6b7280"},children:""}):v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:S.map(({day:D,time:Z,status:et})=>v.jsxs("span",{style:{padding:"8px 12px",borderRadius:999,border:`1px solid ${et==="reserve"?"#9ca3af":"#2563eb"}`,background:et==="reserve"?"#f3f4f6":"#eef5ff",display:"inline-flex",alignItems:"center",gap:10,fontWeight:900,fontSize:13},children:[D," ",Jn(Z)," ",et==="reserve"?"()":"",v.jsx("button",{onClick:()=>Li(D,Z),title:"",style:{border:"none",background:"transparent",cursor:"pointer",fontWeight:900,color:et==="reserve"?"#6b7280":"#2563eb"},children:""})]},`ap-${D}-${Z}`))})]}),r==="middle"?v.jsx("div",{style:{marginTop:14},children:v.jsxs("div",{style:{padding:12,borderRadius:14,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:14,marginBottom:6},children:"(/)   "}),v.jsxs("div",{style:{fontSize:12,color:"#6b7280",lineHeight:1.6,marginBottom:12},children:[v.jsx("span",{style:{color:"#16a34a",fontWeight:600},children:"       "}),v.jsx("br",{}),v.jsx("span",{style:{color:"#e11d48",fontWeight:700},children:"   /      "}),v.jsx("br",{}),v.jsx("span",{style:{color:"#2563eb",fontWeight:600},children:" :"})," ",v.jsx("b",{style:{color:"#1f2937"},children:"   /    /   "})]}),v.jsxs("div",{style:{marginBottom:10},children:[v.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:900},children:" "}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8},children:j.map(D=>{const Z=(M==null?void 0:M.day)===D;return v.jsx("button",{onClick:()=>xi(D),style:{padding:"10px 8px",borderRadius:12,border:Z?"1px solid #2563eb":"1px solid #e5e7eb",background:Z?"#eef5ff":"#ffffff",cursor:"pointer",fontWeight:900,fontSize:13},children:D},D)})})]}),v.jsxs("div",{style:{marginBottom:10},children:[v.jsx("div",{style:{fontSize:12,color:"#4b5563",marginBottom:6,fontWeight:900},children:" "}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"1fr 1fr",gap:8},children:R.map(D=>{const Z=(M==null?void 0:M.blockId)===D.id,et=(M==null?void 0:M.day)&&Le(M.day,D.id,!0);return v.jsx("button",{onClick:()=>ni(D.id),disabled:et,style:{padding:"12px 12px",borderRadius:12,border:Z?"1px solid #2563eb":"1px solid #e5e7eb",background:Z?"#eef5ff":"#ffffff",cursor:et?"not-allowed":"pointer",opacity:et?.6:1,fontWeight:900,textAlign:"left"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"center"},children:[v.jsx("span",{children:D.label}),v.jsx("span",{style:{fontSize:12,fontWeight:900,color:et?"#ef4444":"#6b7280"},children:et?"":""})]})},D.id)})})]}),v.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[v.jsx("button",{onClick:ii,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #2563eb",background:"#2563eb",color:"white",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "}),v.jsx("button",{onClick:fn,style:{padding:"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827",fontWeight:900,cursor:"pointer",width:i?"100%":"auto"},children:" "})]}),v.jsxs("div",{style:{marginTop:12,padding:12,borderRadius:12,border:"1px solid #e5e7eb",background:"#fff"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:6},children:" "}),It!=null&&It.regular?v.jsxs("div",{style:{color:"#111827",fontWeight:900},children:[It.regular.day," ",It.regular.blockId==="A"?"A(5~7)":"B(7~9)"]}):v.jsx("div",{style:{color:"#6b7280"},children:"  ."})]})]})}):null,v.jsxs("div",{style:{marginTop:14,padding:12,border:"1px solid #e5e7eb",borderRadius:12,background:"#f9fafb"},children:[v.jsxs("div",{style:{fontWeight:900,marginBottom:8},children:["  ",p?`: ${p}`:""]}),p?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{marginBottom:4},children:[v.jsx("b",{children:":"})," ",H.length?H.map(D=>{const Z=D.group==="elementary"?"":"",et=D.status==="reserve"||(D==null?void 0:D.label)==="()"?" ()":"";return`${Z} ${D.day} ${Jn(D.time)}${et}`}).join(", "):v.jsx("span",{style:{color:"#6b7280"},children:""})]}),P&&v.jsxs("div",{style:{marginTop:6,fontSize:12,color:"#6b7280"},children:[": ",P.toLocaleString()]})]}):v.jsx("div",{style:{color:"#6b7280"},children:"   "})]})]}):null]})}function Y2(){const r=(localStorage.getItem("parentPhone")||"").trim(),[e,i]=C.useState(()=>(localStorage.getItem("studentId")||"").trim()),[a,o]=C.useState(()=>(localStorage.getItem("studentName")||"").trim()),[c,f]=C.useState([]),[m,g]=C.useState(()=>(localStorage.getItem("studentId")||"").trim()),[p,b]=C.useState(()=>new Date().getFullYear()),[S,A]=C.useState(()=>new Date().getMonth()+1),[O,N]=C.useState([]),[G,B]=C.useState(null),H=C.useMemo(()=>{const w=new Date;return`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`},[]),Y=C.useMemo(()=>`${p}-${String(S).padStart(2,"0")}`,[p,S]);C.useEffect(()=>{if(!r)return;const w=ea(Ie(bt,"students"),na("parentPhone","==",r)),M=Oe(w,L=>{var It;const U=L.docs.map(Ot=>{const J=Ot.data()||{},mt=String(J.name||J.studentName||J.student||"").trim();return{id:Ot.id,name:mt||"( )"}});U.sort((Ot,J)=>Ot.name.localeCompare(J.name,"ko")),f(U);const I=U.some(Ot=>Ot.id===m)?m:((It=U[0])==null?void 0:It.id)||"";g(I),!U.some(Ot=>Ot.id===e)&&U.length>0&&P(U[0].id,U[0].name)},L=>console.error("students snapshot error:",L));return()=>M()},[r]);const P=(w,M)=>{i(w),o(M),localStorage.setItem("studentId",w),localStorage.setItem("studentName",M),B(null)};C.useEffect(()=>{if(!e)return;const w=ea(Ie(bt,"monthly_payments"),na("studentId","==",e)),M=Oe(w,L=>{const U=L.docs.map(I=>({id:I.id,...I.data()}));U.sort((I,It)=>String(It.month||"").localeCompare(String(I.month||""))),N(U)},L=>console.error("monthly_payments snapshot error:",L));return()=>M()},[e]);const lt=C.useMemo(()=>O.find(w=>String(w.month||"")===H)||null,[O,H]),dt=C.useMemo(()=>O.filter(w=>String(w.month||"")===Y),[O,Y]),St=()=>{const w=new Date(p,S-2,1);b(w.getFullYear()),A(w.getMonth()+1)},j=()=>{const w=new Date(p,S,1);b(w.getFullYear()),A(w.getMonth()+1)},R=!!(e&&a);return v.jsxs("div",{style:{padding:16,maxWidth:820,margin:"0 auto"},children:[v.jsxs("h1",{style:{fontSize:22,fontWeight:900,marginBottom:6},children:["     ",R?` ${a}`:""]}),v.jsxs("div",{style:{fontSize:13,color:"#6b7280",lineHeight:1.6},children:["2026 3     ",v.jsx("br",{}),"      ."]}),v.jsx("div",{style:J2,children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:13,color:"#374151"},children:" "}),v.jsx("select",{value:m,onChange:w=>g(w.target.value),style:tR,children:c.length===0?v.jsx("option",{value:"",children:"(  )"}):c.map(w=>v.jsx("option",{value:w.id,children:w.name},w.id))}),v.jsx("button",{style:eR,onClick:()=>{const w=c.find(M=>M.id===m);w&&P(w.id,w.name)},disabled:!m,children:" "}),v.jsx("button",{style:nR,onClick:()=>window.location.hash="#/payment-history",children:" ()"}),R&&v.jsxs("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:[" : ",a]})]})}),R?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{marginTop:14,marginBottom:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[v.jsx("button",{onClick:St,style:R0,children:" "}),v.jsxs("div",{style:{fontWeight:900,fontSize:16},children:[p," ",S,"",v.jsxs("span",{style:{marginLeft:10,fontSize:12,color:"#6b7280",fontWeight:700},children:["(: ",el(H),")"]})]}),v.jsx("button",{onClick:j,style:R0,children:" "})]}),lt?v.jsx(K2,{data:lt}):v.jsx(W2,{nowKey:H}),v.jsx("div",{style:{height:12}}),v.jsx("div",{style:{borderTop:"1px solid #e5e7eb"}}),v.jsx("div",{style:{height:10}}),v.jsxs("div",{style:{fontWeight:900,fontSize:15,marginBottom:8},children:["    ( : ",el(Y),")"]}),dt.length===0?v.jsxs("div",{style:iR,children:[el(Y),"    ."]}):v.jsx("div",{style:{display:"grid",gap:10},children:dt.map(w=>v.jsx(X2,{row:w,open:G===w.id,onToggle:()=>B(G===w.id?null:w.id)},w.id))})]}):v.jsxs("div",{style:{marginTop:12,color:"#6b7280",fontSize:13},children:["   ",v.jsx("b",{children:" "}),"  ."]})]})}function K2({data:r}){const e=String(r.month||""),i=r.summary||{},a=i.baseTotal,o=i.discountTotal,c=i.finalTotal,f=String(i.status||"pending"),m=String(i.memo||""),g=j1(r.updatedAt),p=f==="paid"||f==="",b=f==="partial",S=p?"#ecfdf3":b?"#eef2ff":"#fffbeb",A=p?"#4ade80":b?"#a5b4fc":"#facc15",O=p?" ":b?" ":"   ";return v.jsxs("div",{style:{width:"100%",marginTop:12,padding:12,borderRadius:12,border:`1px solid ${A}`,background:S},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:"    "}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:8},children:[v.jsx(O1,{text:O,isPaid:p,isPartial:b}),e&&v.jsx("div",{style:{fontSize:12,color:"#6b7280",fontWeight:800},children:el(e)})]}),v.jsxs("div",{style:{marginTop:10,fontSize:13,lineHeight:1.55},children:[a!=null&&v.jsxs("div",{children:[" : ",Ni(a)]}),o!=null&&v.jsxs("div",{style:{color:"#ef4444"},children:[" : -",Ni(o)]}),c!=null&&v.jsxs("div",{style:{marginTop:4,fontWeight:900,fontSize:14},children:["    : ",Ni(c)]})]}),o!=null&&Number(o)>0&&v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:" /        2   ."}),m&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",m]}),g&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",g]}),v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:"          ."})]})}function W2({nowKey:r}){return v.jsxs("div",{style:{width:"100%",marginTop:12,padding:12,borderRadius:12,border:"1px solid #bfdbfe",background:"#eff6ff"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:15},children:"    "}),v.jsxs("div",{style:{marginTop:8,fontSize:13,lineHeight:1.55},children:[el(r),"      ."]}),v.jsx("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:"        ."})]})}function X2({row:r,open:e,onToggle:i}){const a=String(r.month||""),o=r.summary||{},c=o.baseTotal,f=o.discountTotal,m=o.finalTotal,g=String(o.status||"pending"),p=String(o.memo||""),b=j1(r.updatedAt),S=r.partials,A=Array.isArray(S)?S:[],O=g==="paid"||g==="",N=g==="partial";return v.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,background:"#fff"},children:[v.jsxs("button",{onClick:i,style:{width:"100%",textAlign:"left",border:"none",background:"transparent",padding:"12px 12px",cursor:"pointer"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[v.jsx("div",{style:{fontWeight:900,fontSize:13,flex:1},children:a?el(a):" "}),v.jsx(O1,{text:O?" ":N?" ":"",isPaid:O,isPartial:N,small:!0})]}),v.jsxs("div",{style:{marginTop:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("div",{children:f!=null&&Number(f)>0&&v.jsxs("span",{style:{fontSize:11,color:"#ef4444",fontWeight:800},children:[": -",Ni(f)]})}),v.jsx("div",{style:{fontSize:13,fontWeight:900},children:m!=null?Ni(m):"-"})]}),v.jsx("div",{style:{marginTop:8,fontSize:12,color:"#6b7280",fontWeight:800},children:e?" ":"  "})]}),e&&v.jsxs("div",{style:{padding:"0 12px 12px 12px"},children:[A.length>0&&v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:12,fontWeight:900,marginBottom:8},children:"   "}),v.jsx("div",{style:{display:"grid",gap:8},children:A.map((G,B)=>v.jsx(Z2,{data:G},B))})]}),p&&v.jsxs("div",{style:{marginTop:10,fontSize:12,color:"#6b7280"},children:[" : ",p]}),b&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[": ",b]}),c!=null&&v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#6b7280"},children:[" : ",Ni(c)]})]})]})}function Z2({data:r}){const e=String(r.classType||""),i=r.baseAmount,a=r.discountAmount,o=r.finalAmount,c=r.discountPerUse,f=r.maxDiscountCountPerMonth,m=String(r.status||"pending"),g=String(r.memo||""),p=r.discountLogs,b=Array.isArray(p)?p:[],S=r.discountCount??b.length,A=m==="paid"||m==="";return v.jsxs("div",{style:{background:"#f9fafb",borderRadius:10,padding:10},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[v.jsx("div",{style:{fontWeight:900,fontSize:12,flex:1},children:e||"  "}),A&&v.jsx("div",{style:{fontSize:11,color:"#166534",fontWeight:900},children:" "})]}),v.jsxs("div",{style:{marginTop:6,fontSize:11,color:"#111827",display:"flex",gap:10,flexWrap:"wrap"},children:[i!=null&&v.jsxs("span",{children:[": ",Ni(i)]}),a!=null&&Number(a)>0&&v.jsxs("span",{style:{color:"#ef4444"},children:[": -",Ni(a)]}),o!=null&&v.jsxs("span",{style:{fontWeight:900},children:[": ",Ni(o)]})]}),c!=null&&Number(c)>0&&v.jsxs("div",{style:{marginTop:6,fontSize:10,color:"#6b7280"},children:["1 : ",Ni(c)," /  ",S??0,"",f!=null?` (  ${f})`:""]}),b.length>0&&v.jsxs("div",{style:{marginTop:8},children:[v.jsx("div",{style:{fontSize:11,fontWeight:900,marginBottom:6},children:"  :"}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:b.map((O,N)=>{const G=String(O.date||""),B=String(O.reasonCategory||""),H=O.amount;return v.jsx("span",{style:{fontSize:10,color:"#6b7280",border:"1px solid #e5e7eb",background:"#fff",padding:"4px 8px",borderRadius:999},children:`${G||"-"}  ${B}  -${Ni(H)}`},N)})})]}),g&&v.jsxs("div",{style:{marginTop:6,fontSize:10,color:"#6b7280"},children:[": ",g]})]})}function O1({text:r,isPaid:e,isPartial:i,small:a=!1}){const o=e?"#dcfce7":i?"#e0e7ff":"#ffedd5",c=e?"#22c55e":i?"#6366f1":"#fb923c",f=e?"#166534":i?"#3730a3":"#9a3412";return v.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:a?"3px 7px":"4px 10px",borderRadius:999,border:`1px solid ${c}`,background:o,color:f,fontWeight:900,fontSize:a?10:11,whiteSpace:"nowrap"},children:r})}function Ni(r){if(r==null)return"-";let e=0;return typeof r=="number"?e=r:e=Number(String(r).replaceAll(",",""))||0,`${Math.trunc(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function j1(r){if(!r)return null;const e=typeof(r==null?void 0:r.toDate)=="function"?r.toDate():new Date(r);if(isNaN(e.getTime()))return null;const i=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),c=String(e.getHours()).padStart(2,"0"),f=String(e.getMinutes()).padStart(2,"0");return`${i}-${a}-${o} ${c}:${f}`}function el(r){try{const[e,i]=String(r).split("-"),a=Number(e),o=Number(i);if(a>0&&o>0)return`${a} ${o}`}catch{}return String(r)}const J2={marginTop:14,padding:12,borderRadius:16,border:"1px solid #e5e7eb",background:"#fff"},tR={minWidth:180,height:40,borderRadius:12,border:"1px solid #d1d5db",padding:"0 12px",fontWeight:900,outline:"none"},R0={padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:12,background:"#fff",cursor:"pointer",fontWeight:900},eR={height:40,padding:"0 14px",borderRadius:12,border:"none",background:"#111827",color:"#fff",cursor:"pointer",fontWeight:900,fontSize:13,whiteSpace:"nowrap"},nR={height:40,padding:"0 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:900,fontSize:13,whiteSpace:"nowrap"},iR={color:"#6b7280",fontSize:13,lineHeight:1.6,padding:12,border:"1px solid #e5e7eb",borderRadius:12};function rR(){const[r,e]=C.useState(""),[i,a]=C.useState(""),[o,c]=C.useState(""),[f,m]=C.useState(!0),g=Uo(),p=localStorage.getItem("parentPhone")||"";C.useEffect(()=>{(async()=>{if(!p){g("/login");return}m(!1)})()},[p,g]);const b=async()=>{if(c(""),!p){c(" .");return}if(r.length<8){c("  8   .");return}if(r!==i){c("   .");return}try{const S=Qt(bt,"parents",p),A=await tn(S);if(!A.exists()){c("  .   .");return}await M1(S,{password:r,mustChangePassword:!1,updatedAt:vi()}),localStorage.setItem("mustChangePassword","0");const N=(A.data()||{}).children||[];N.length<=1?(N[0]&&localStorage.setItem("studentId",N[0]),g("/attendance")):g("/select-child")}catch(S){console.error(S),c("    .")}};return f?null:v.jsxs("div",{style:{maxWidth:420,margin:"40px auto",padding:16},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:900,marginBottom:10},children:" "}),v.jsxs("div",{style:{fontSize:13,color:"#6b7280",lineHeight:1.6},children:["  ",v.jsx("b",{children:"     "}),".",v.jsx("br",{}),"( 8  )"]}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:14},children:" "}),v.jsx("input",{value:r,onChange:S=>e(S.target.value),placeholder:"8 ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("label",{style:{display:"block",fontWeight:700,marginTop:10},children:"  "}),v.jsx("input",{value:i,onChange:S=>a(S.target.value),placeholder:"   ",style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #d1d5db"}}),v.jsx("button",{onClick:b,style:{width:"100%",padding:12,borderRadius:12,marginTop:16,fontWeight:900,border:"1px solid #16a34a",background:"#16a34a",color:"#fff",cursor:"pointer"},children:" "}),o&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:700},children:o})]})}function sR(){const[r,e]=C.useState([]),[i,a]=C.useState(""),o=Uo(),c=localStorage.getItem("parentPhone")||"",f=localStorage.getItem("mustChangePassword")==="1";C.useEffect(()=>{(async()=>{if(!c){o("/login");return}if(f){o("/change-password");return}try{const p=Qt(bt,"parents",c),b=await tn(p);if(!b.exists()){a("  .   .");return}const A=(b.data()||{}).children||[],O=[];for(const N of A){const G=await tn(Qt(bt,"students",N)),B=G.exists()?G.data():{};O.push({id:N,name:B.name||""})}e(O)}catch(p){console.error(p),a("   .")}})()},[c,f,o]);const m=p=>{localStorage.setItem("studentId",p),o("/attendance")},g=()=>{localStorage.removeItem("parentPhone"),localStorage.removeItem("studentId"),localStorage.removeItem("mustChangePassword"),o("/login")};return v.jsxs("div",{style:{maxWidth:520,margin:"40px auto",padding:16},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("h1",{style:{fontSize:22,fontWeight:900},children:" "}),v.jsx("button",{onClick:g,style:{border:"1px solid #d1d5db",background:"#fff",borderRadius:10,padding:"8px 10px",cursor:"pointer"},children:""})]}),i&&v.jsx("div",{style:{color:"#dc3545",marginTop:10,fontWeight:700},children:i}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0,1fr))",gap:12,marginTop:14},children:r.map(p=>v.jsxs("button",{onClick:()=>m(p.id),style:{textAlign:"left",padding:14,borderRadius:14,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"},children:[v.jsx("div",{style:{fontSize:16,fontWeight:900},children:p.name}),v.jsx("div",{style:{marginTop:6,fontSize:12,color:"#6b7280"},children:"   "})]},p.id))})]})}class aR extends cb.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,i){console.error("ErrorBoundary caught:",e,i)}render(){return this.state.hasError?v.jsx("div",{style:{padding:16},children:" . (F5),       ."}):this.props.children}}const C0=r=>{if(!r)return null;if(typeof r.toDate=="function")return r.toDate();const e=new Date(r);return isNaN(e)?null:e};function lR(){return v.jsx(NS,{children:v.jsx(aR,{children:v.jsx(oR,{})})})}function oR(){const r=Mr(),[e,i]=C.useState(!!localStorage.getItem("parentPhone")),[a,o]=C.useState(localStorage.getItem("mustChangePassword")==="1"),[c,f]=C.useState(!!localStorage.getItem("studentId")),[m,g]=C.useState(!1);C.useEffect(()=>{const S=()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1"),f(!!localStorage.getItem("studentId"))};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[]),C.useEffect(()=>{i(!!localStorage.getItem("parentPhone")),o(localStorage.getItem("mustChangePassword")==="1"),f(!!localStorage.getItem("studentId"))},[r]),C.useEffect(()=>{const S=localStorage.getItem("studentId");if(!S)return;(async()=>{const O=new Date,N=new Date;N.setDate(O.getDate()-3);const G=await fs(Ie(bt,"comments")),B=await fs(Ie(bt,"books")),H=G.docs.some(P=>{const lt=P.data();return lt.studentId===S&&(C0(lt.createdAt||lt.completedDate)??new Date(0))>=N}),Y=B.docs.some(P=>{const lt=P.data();return lt.studentId===S&&(C0(lt.createdAt||lt.completedDate)??new Date(0))>=N});g(H||Y)})()},[c]);const p=()=>{localStorage.clear(),i(!1),o(!1),f(!1),window.location.hash="#/login"},b=S=>e?a?v.jsx(Di,{to:"change-password",replace:!0}):c?S:v.jsx(Di,{to:"select-child",replace:!0}):v.jsx(Di,{to:"login",replace:!0});return v.jsxs("div",{className:"app-shell page",children:[e&&!a&&v.jsx("nav",{className:"nav",children:v.jsxs("div",{className:"nav-links",style:{justifyContent:"center"},children:[["/attendance","/payment","/notices","/myclass","/enroll"].map(S=>v.jsx(G0,{to:S,style:({isActive:A})=>({margin:"0 0",padding:"6px 12px",borderRadius:6,textDecoration:"none",fontWeight:A?"bold":"normal",color:A?"#fff":"#333",backgroundColor:A?"#007bff":"#f5f5f7",position:"relative",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap"}),children:(()=>{const A={"/attendance":"","/payment":"","/notices":"","/enroll":""};return S==="/myclass"?v.jsxs(v.Fragment,{children:["",m&&v.jsx("span",{className:"pulse wiggle",style:{position:"absolute",top:-8,right:-12,backgroundColor:"red",color:"white",borderRadius:"12px",padding:"2px 6px",fontSize:"10px",fontWeight:"bold",fontFamily:"'Segoe UI','Apple SD Gothic Neo',sans-serif"},children:" "})]}):A[S]})()},S)),v.jsx("button",{onClick:()=>{window.location.hash="#/change-password"},style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:" "}),v.jsx("button",{onClick:p,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#f0f0f0",cursor:"pointer"},children:""})]})}),v.jsxs(lS,{children:[v.jsx(yi,{index:!0,element:e?a?v.jsx(Di,{to:"change-password",replace:!0}):c?v.jsx(Di,{to:"notices",replace:!0}):v.jsx(Di,{to:"select-child",replace:!0}):v.jsx(Di,{to:"login",replace:!0})}),v.jsx(yi,{path:"login",element:v.jsx(O2,{})}),v.jsx(yi,{path:"change-password",element:e?v.jsx(rR,{}):v.jsx(Di,{to:"login",replace:!0})}),v.jsx(yi,{path:"select-child",element:e?a?v.jsx(Di,{to:"change-password",replace:!0}):v.jsx(sR,{}):v.jsx(Di,{to:"login",replace:!0})}),v.jsx(yi,{path:"attendance",element:b(v.jsx(j2,{}))}),v.jsx(yi,{path:"payment",element:b(v.jsx(Y2,{}))}),v.jsx(yi,{path:"payment-history",element:b(v.jsx(L2,{}))}),v.jsx(yi,{path:"notices",element:b(v.jsx(H2,{}))}),v.jsx(yi,{path:"myclass",element:b(v.jsx(Q2,{}))}),v.jsx(yi,{path:"enroll",element:b(v.jsx($2,{}))}),v.jsx(yi,{path:"*",element:v.jsx(Di,{to:"/",replace:!0})})]})]})}const uR="modulepreload",cR=function(r){return"/ysmath/"+r},I0={},hR=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let f=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=f(i.map(p=>{if(p=cR(p),p in I0)return;I0[p]=!0;const b=p.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const A=document.createElement("link");if(A.rel=b?"stylesheet":uR,b||(A.as="script"),A.crossOrigin="",A.href=p,g&&A.setAttribute("nonce",g),document.head.appendChild(A),b)return new Promise((O,N)=>{A.addEventListener("load",O),A.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};function fR(r={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:a,onRegistered:o,onRegisteredSW:c,onRegisterError:f}=r;let m,g;const p=async(S=!0)=>{await g};async function b(){if("serviceWorker"in navigator){if(m=await hR(async()=>{const{Workbox:S}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:S}},[]).then(({Workbox:S})=>new S("/ysmath/sw.js",{scope:"/ysmath/",type:"classic"})).catch(S=>{f==null||f(S)}),!m)return;m.addEventListener("activated",S=>{(S.isUpdate||S.isExternal)&&window.location.reload()}),m.addEventListener("installed",S=>{S.isUpdate||a==null||a()}),m.register({immediate:e}).then(S=>{c?c("/ysmath/sw.js",S):o==null||o(S)}).catch(S=>{f==null||f(S)})}}return g=b(),p}fR({immediate:!0});yb.createRoot(document.getElementById("root")).render(v.jsx(C.StrictMode,{children:v.jsx(lR,{})}));
